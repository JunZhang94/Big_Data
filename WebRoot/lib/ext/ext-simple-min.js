/*
 * 
 */
(function(){var G=Ext.util,F=Ext.each,A=true,C=false;G.Observable=function(){var K=this,J=K.events;if(K.listeners){K.on(K.listeners);delete K.listeners}K.events=J||{}};G.Observable.prototype={filterOptRe:/^(?:scope|delay|buffer|single)$/,fireEvent:function(){var P=Array.prototype.slice.call(arguments,0),L=P[0].toLowerCase(),M=this,Q=A,O=M.events[L],J,K,N;if(M.eventsSuspended===A){if(K=M.eventQueue){K.push(P)}}else{if(typeof O=="object"){if(O.bubble){if(O.fire.apply(O,P.slice(1))===C){return C}N=M.getBubbleTarget&&M.getBubbleTarget();if(N&&N.enableBubble){J=N.events[L];if(!J||typeof J!="object"||!J.bubble){N.enableBubble(L)}return N.fireEvent.apply(N,P)}}else{P.shift();Q=O.fire.apply(O,P)}}}return Q},addListener:function(L,M,K,O){var Q=this,J,N,P;if(typeof L=="object"){O=L;for(J in O){N=O[J];if(!Q.filterOptRe.test(J)){Q.addListener(J,N.fn||N,N.scope||O.scope,N.fn?N:O)}}}else{L=L.toLowerCase();P=Q.events[L]||A;if(typeof P=="boolean"){Q.events[L]=P=new G.Event(Q,L)}P.addListener(M,K,typeof O=="object"?O:{})}},removeListener:function(L,K,M){var J=this.events[L.toLowerCase()];if(typeof J=="object"){J.removeListener(K,M)}},purgeListeners:function(){var L=this.events,K,J;for(J in L){K=L[J];if(typeof K=="object"){K.clearListeners()}}},addEvents:function(K){var L=this;L.events=L.events||{};if(typeof K=="string"){var M=arguments,J=M.length;while(J--){L.events[M[J]]=L.events[M[J]]||A}}else{Ext.applyIf(L.events,K)}},hasListener:function(K){var J=this.events[K.toLowerCase()];return typeof J=="object"&&J.listeners.length>0},suspendEvents:function(J){this.eventsSuspended=A;if(J&&!this.eventQueue){this.eventQueue=[]}},resumeEvents:function(){var K=this,J=K.eventQueue||[];K.eventsSuspended=C;delete K.eventQueue;F(J,function(L){K.fireEvent.apply(K,L)})}};var I=G.Observable.prototype;I.on=I.addListener;I.un=I.removeListener;G.Observable.releaseCapture=function(J){J.fireEvent=I.fireEvent};function D(J,K,L){return function(){if(K.target==arguments[0]){J.apply(L,Array.prototype.slice.call(arguments,0))}}}function E(J,K,L,M){L.task=new G.DelayedTask();return function(){L.task.delay(K.buffer,J,M,Array.prototype.slice.call(arguments,0))}}function B(J,K,L,M){return function(){K.removeListener(L,M);return J.apply(M,arguments)}}function H(J,K,L,M){return function(){var N=new G.DelayedTask(),O=Array.prototype.slice.call(arguments,0);if(!L.tasks){L.tasks=[]}L.tasks.push(N);N.delay(K.delay||10,function(){L.tasks.remove(N);J.apply(M,O)},M)}}G.Event=function(J,K){this.name=K;this.obj=J;this.listeners=[]};G.Event.prototype={addListener:function(K,N,L){var J=this,M;N=N||J.obj;if(!J.isListening(K,N)){M=J.createListener(K,N,L);if(J.firing){J.listeners=J.listeners.slice(0)}J.listeners.push(M)}},createListener:function(L,N,K){K=K||{};N=N||this.obj;var M={fn:L,scope:N,options:K},J=L;if(K.target){J=D(J,K,N)}if(K.delay){J=H(J,K,M,N)}if(K.single){J=B(J,this,L,N)}if(K.buffer){J=E(J,K,M,N)}M.fireFn=J;return M},findListener:function(K,N){var M=this.listeners,J=M.length,L;N=N||this.obj;while(J--){L=M[J];if(L){if(L.fn==K&&L.scope==N){return J}}}return -1},isListening:function(J,K){return this.findListener(J,K)!=-1},removeListener:function(L,O){var K,M,P,J=this,N=C;if((K=J.findListener(L,O))!=-1){if(J.firing){J.listeners=J.listeners.slice(0)}M=J.listeners[K];if(M.task){M.task.cancel();delete M.task}P=M.tasks&&M.tasks.length;if(P){while(P--){M.tasks[P].cancel()}delete M.tasks}J.listeners.splice(K,1);N=A}return N},clearListeners:function(){var L=this,K=L.listeners,J=K.length;while(J--){L.removeListener(K[J].fn,K[J].scope)}},fire:function(){var L=this,N=L.listeners,M=N.length,J=0,K;if(M>0){L.firing=A;var O=Array.prototype.slice.call(arguments,0);for(;J<M;J++){K=N[J];if(K&&K.fireFn.apply(K.scope||L.obj||window,O)===C){return(L.firing=C)}}}L.firing=C;return A}}})();Ext.DomHelper=function(){var L=null,W=/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,T=/^table|tbody|tr|td$/i,C=/tag|children|cn|html$/i,J=/td|tr|tbody/i,Q=/([a-z0-9-]+)\s*:\s*([^;\s]+(?:\s*[^;\s]+)*);?/gi,G=/end/i,K,M="afterbegin",P="afterend",F="beforebegin",S="beforeend",E="<table>",D="</table>",O=E+"<tbody>",H="</tbody>"+D,I=O+"<tr>",V="</tr>"+H;function A(X,Z,a,d,b,c){var Y=K.insertHtml(d,Ext.getDom(X),R(Z));return a?Ext.get(Y,true):Y}function R(a){var c="",e,d,Y,X;if(typeof a=="string"){c=a}else{if(Ext.isArray(a)){for(var Z=0;Z<a.length;Z++){if(a[Z]){c+=R(a[Z])}}}else{c+="<"+(a.tag=a.tag||"div");for(e in a){d=a[e];if(!C.test(e)){if(typeof d=="object"){c+=" "+e+'="';for(Y in d){c+=Y+":"+d[Y]+";"}c+='"'}else{c+=" "+({cls:"class",htmlFor:"for"}[e]||e)+'="'+d+'"'}}}if(W.test(a.tag)){c+="/>"}else{c+=">";if((X=a.children||a.cn)){c+=R(X)}else{if(a.html){c+=a.html}}c+="</"+a.tag+">"}}}return c}function N(d,Y,c,X){L.innerHTML=[Y,c,X].join("");var b=-1,a=L,g;while(++b<d){a=a.firstChild}if(g=a.nextSibling){var Z=document.createDocumentFragment();while(a){g=a.nextSibling;Z.appendChild(a);a=g}a=Z}return a}function U(X,c,Z,Y){var a,b;L=L||document.createElement("div");if(X=="td"&&(c==M||c==S)||!J.test(X)&&(c==F||c==P)){return}b=c==F?Z:c==P?Z.nextSibling:c==M?Z.firstChild:null;if(c==F||c==P){Z=Z.parentNode}if(X=="td"||(X=="tr"&&(c==S||c==M))){a=N(4,I,Y,V)}else{if((X=="tbody"&&(c==S||c==M))||(X=="tr"&&(c==F||c==P))){a=N(3,O,Y,H)}else{a=N(2,E,Y,D)}}Z.insertBefore(a,b);return a}function B(X){var c=document.createElement("div"),b=document.createDocumentFragment(),Y=0,Z,a;c.innerHTML=X;a=c.childNodes;Z=a.length;for(;Y<Z;Y++){b.appendChild(a[Y].cloneNode(true))}return b}K={markup:function(X){return R(X)},applyStyles:function(X,Z){if(Z){var Y;X=Ext.fly(X);if(typeof Z=="function"){Z=Z.call()}if(typeof Z=="string"){Q.lastIndex=0;while((Y=Q.exec(Z))){X.setStyle(Y[1],Y[2])}}else{if(typeof Z=="object"){X.setStyle(Z)}}}},insertHtml:function(X,b,g){var c={},d,e,Z,Y,h,a;X=X.toLowerCase();c[F]=["BeforeBegin","previousSibling"];c[P]=["AfterEnd","nextSibling"];if(b.insertAdjacentHTML){if(T.test(b.tagName)&&(a=U(b.tagName.toLowerCase(),X,b,g))){return a}c[M]=["AfterBegin","firstChild"];c[S]=["BeforeEnd","lastChild"];if((d=c[X])){b.insertAdjacentHTML(d[0],g);return b[d[1]]}}else{e=b.ownerDocument.createRange();Y="setStart"+(G.test(X)?"After":"Before");if(c[X]){e[Y](b);if(!e.createContextualFragment){h=B(g)}else{h=e.createContextualFragment(g)}b.parentNode.insertBefore(h,X==F?b:b.nextSibling);return b[(X==F?"previous":"next")+"Sibling"]}else{Z=(X==M?"first":"last")+"Child";if(b.firstChild){e[Y](b[Z]);if(!e.createContextualFragment){h=B(g)}else{h=e.createContextualFragment(g)}if(X==M){b.insertBefore(h,b.firstChild)}else{b.appendChild(h)}}else{b.innerHTML=g}return b[Z]}}throw'Illegal insertion point -> "'+X+'"'},insertBefore:function(X,Y,Z){return A(X,Y,Z,F)},insertAfter:function(X,Y,Z){return A(X,Y,Z,P,"nextSibling")},insertFirst:function(X,Y,Z){return A(X,Y,Z,M,"firstChild")},append:function(X,Y,Z){return A(X,Y,Z,S,"",true)},overwrite:function(X,Y,Z){X=Ext.getDom(X);X.innerHTML=R(Y);return Z?Ext.get(X.firstChild):X.firstChild},createHtml:R};return K}();Ext.Template=function(A){var C=this,G=arguments,E=[],D;if(Ext.isArray(A)){A=A.join("")}else{if(G.length>1){for(var B=0,F=G.length;B<F;B++){D=G[B];if(typeof D=="object"){Ext.apply(C,D)}else{E.push(D)}}A=E.join("")}}C.html=A;if(C.compiled){C.compile()}};Ext.Template.prototype={re:/\{([\w\-]+)\}/g,applyTemplate:function(B){var A=this;return A.compiled?A.compiled(B):A.html.replace(A.re,function(C,D){return B[D]!==undefined?B[D]:""})},set:function(A,B){var C=this;C.html=A;C.compiled=null;return B?C.compile():C},compile:function(){var me=this,sep=Ext.isGecko?"+":",";function fn(m,name){name="values['"+name+"']";return"'"+sep+"("+name+" == undefined ? '' : "+name+")"+sep+"'"}eval("this.compiled = function(values){ return "+(Ext.isGecko?"'":"['")+me.html.replace(/\\/g,"\\\\").replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn)+(Ext.isGecko?"';};":"'].join('');};"));return me},insertFirst:function(A,C,B){return this.doInsert("afterBegin",A,C,B)},insertBefore:function(A,C,B){return this.doInsert("beforeBegin",A,C,B)},insertAfter:function(A,C,B){return this.doInsert("afterEnd",A,C,B)},append:function(A,C,B){return this.doInsert("beforeEnd",A,C,B)},doInsert:function(C,A,D,B){A=Ext.getDom(A);var E=Ext.DomHelper.insertHtml(C,A,this.applyTemplate(D));return B?Ext.get(E,true):E},overwrite:function(A,C,B){A=Ext.getDom(A);A.innerHTML=this.applyTemplate(C);return B?Ext.get(A.firstChild,true):A.firstChild}};Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.Template.from=function(A,B){A=Ext.getDom(A);return new Ext.Template(A.value||A.innerHTML,B||"")};Ext.DomQuery=function(){var cache={},simpleCache={},valueCache={},nonSpace=/\S/,trimRe=/^\s+|\s+$/g,tplRe=/\{(\d+)\}/g,modeRe=/^(\s?[\/>+~]\s?|\s|$)/,tagTokenRe=/^(#)?([\w\-\*]+)/,nthRe=/(\d*)n\+?(\d*)/,nthRe2=/\D/,isIE=window.ActiveXObject?true:false,key=30803;eval("var batch = 30803;");function child(parent,index){var i=0,n=parent.firstChild;while(n){if(n.nodeType==1){if(++i==index){return n}}n=n.nextSibling}return null}function next(n){while((n=n.nextSibling)&&n.nodeType!=1){}return n}function prev(n){while((n=n.previousSibling)&&n.nodeType!=1){}return n}function children(parent){var n=parent.firstChild,nodeIndex=-1,nextNode;while(n){nextNode=n.nextSibling;if(n.nodeType==3&&!nonSpace.test(n.nodeValue)){parent.removeChild(n)}else{n.nodeIndex=++nodeIndex}n=nextNode}return this}function byClassName(nodeSet,cls){if(!cls){return nodeSet}var result=[],ri=-1;for(var i=0,ci;ci=nodeSet[i];i++){if((" "+ci.className+" ").indexOf(cls)!=-1){result[++ri]=ci}}return result}function attrValue(n,attr){if(!n.tagName&&typeof n.length!="undefined"){n=n[0]}if(!n){return null}if(attr=="for"){return n.htmlFor}if(attr=="class"||attr=="className"){return n.className}return n.getAttribute(attr)||n[attr]}function getNodes(ns,mode,tagName){var result=[],ri=-1,cs;if(!ns){return result}tagName=tagName||"*";if(typeof ns.getElementsByTagName!="undefined"){ns=[ns]}if(!mode){for(var i=0,ni;ni=ns[i];i++){cs=ni.getElementsByTagName(tagName);for(var j=0,ci;ci=cs[j];j++){result[++ri]=ci}}}else{if(mode=="/"||mode==">"){var utag=tagName.toUpperCase();for(var i=0,ni,cn;ni=ns[i];i++){cn=ni.childNodes;for(var j=0,cj;cj=cn[j];j++){if(cj.nodeName==utag||cj.nodeName==tagName||tagName=="*"){result[++ri]=cj}}}}else{if(mode=="+"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(n&&(n.nodeName==utag||n.nodeName==tagName||tagName=="*")){result[++ri]=n}}}else{if(mode=="~"){var utag=tagName.toUpperCase();for(var i=0,n;n=ns[i];i++){while((n=n.nextSibling)){if(n.nodeName==utag||n.nodeName==tagName||tagName=="*"){result[++ri]=n}}}}}}}return result}function concat(a,b){if(b.slice){return a.concat(b)}for(var i=0,l=b.length;i<l;i++){a[a.length]=b[i]}return a}function byTag(cs,tagName){if(cs.tagName||cs==document){cs=[cs]}if(!tagName){return cs}var result=[],ri=-1;tagName=tagName.toLowerCase();for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType==1&&ci.tagName.toLowerCase()==tagName){result[++ri]=ci}}return result}function byId(cs,id){if(cs.tagName||cs==document){cs=[cs]}if(!id){return cs}var result=[],ri=-1;for(var i=0,ci;ci=cs[i];i++){if(ci&&ci.id==id){result[++ri]=ci;return result}}return result}function byAttribute(cs,attr,value,op,custom){var result=[],ri=-1,useGetStyle=custom=="{",fn=Ext.DomQuery.operators[op],a,xml,hasXml;for(var i=0,ci;ci=cs[i];i++){if(ci.nodeType!=1){continue}if(!hasXml){xml=Ext.DomQuery.isXml(ci);hasXml=true}if(!xml){if(useGetStyle){a=Ext.DomQuery.getStyle(ci,attr)}else{if(attr=="class"||attr=="className"){a=ci.className}else{if(attr=="for"){a=ci.htmlFor}else{if(attr=="href"){a=ci.getAttribute("href",2)}else{a=ci.getAttribute(attr)}}}}}else{a=ci.getAttribute(attr)}if((fn&&fn(a,value))||(!fn&&a)){result[++ri]=ci}}return result}function byPseudo(cs,name,value){return Ext.DomQuery.pseudos[name](cs,value)}function nodupIEXml(cs){var d=++key,r;cs[0].setAttribute("_nodup",d);r=[cs[0]];for(var i=1,len=cs.length;i<len;i++){var c=cs[i];if(!c.getAttribute("_nodup")!=d){c.setAttribute("_nodup",d);r[r.length]=c}}for(var i=0,len=cs.length;i<len;i++){cs[i].removeAttribute("_nodup")}return r}function nodup(cs){if(!cs){return[]}var len=cs.length,c,i,r=cs,cj,ri=-1;if(!len||typeof cs.nodeType!="undefined"||len==1){return cs}if(isIE&&typeof cs[0].selectSingleNode!="undefined"){return nodupIEXml(cs)}var d=++key;cs[0]._nodup=d;for(i=1;c=cs[i];i++){if(c._nodup!=d){c._nodup=d}else{r=[];for(var j=0;j<i;j++){r[++ri]=cs[j]}for(j=i+1;cj=cs[j];j++){if(cj._nodup!=d){cj._nodup=d;r[++ri]=cj}}return r}}return r}function quickDiffIEXml(c1,c2){var d=++key,r=[];for(var i=0,len=c1.length;i<len;i++){c1[i].setAttribute("_qdiff",d)}for(var i=0,len=c2.length;i<len;i++){if(c2[i].getAttribute("_qdiff")!=d){r[r.length]=c2[i]}}for(var i=0,len=c1.length;i<len;i++){c1[i].removeAttribute("_qdiff")}return r}function quickDiff(c1,c2){var len1=c1.length,d=++key,r=[];if(!len1){return c2}if(isIE&&typeof c1[0].selectSingleNode!="undefined"){return quickDiffIEXml(c1,c2)}for(var i=0;i<len1;i++){c1[i]._qdiff=d}for(var i=0,len=c2.length;i<len;i++){if(c2[i]._qdiff!=d){r[r.length]=c2[i]}}return r}function quickId(ns,mode,root,id){if(ns==root){var d=root.ownerDocument||root;return d.getElementById(id)}ns=getNodes(ns,mode,"*");return byId(ns,id)}return{getStyle:function(el,name){return Ext.fly(el).getStyle(name)},compile:function(path,type){type=type||"select";var fn=["var f = function(root){\n var mode; ++batch; var n = root || document;\n"],mode,lastPath,matchers=Ext.DomQuery.matchers,matchersLn=matchers.length,modeMatch,lmode=path.match(modeRe);if(lmode&&lmode[1]){fn[fn.length]='mode="'+lmode[1].replace(trimRe,"")+'";';path=path.replace(lmode[1],"")}while(path.substr(0,1)=="/"){path=path.substr(1)}while(path&&lastPath!=path){lastPath=path;var tokenMatch=path.match(tagTokenRe);if(type=="select"){if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = quickId(n, mode, root, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = getNodes(n, mode, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}else{if(path.substr(0,1)!="@"){fn[fn.length]='n = getNodes(n, mode, "*");'}}}else{if(tokenMatch){if(tokenMatch[1]=="#"){fn[fn.length]='n = byId(n, "'+tokenMatch[2]+'");'}else{fn[fn.length]='n = byTag(n, "'+tokenMatch[2]+'");'}path=path.replace(tokenMatch[0],"")}}while(!(modeMatch=path.match(modeRe))){var matched=false;for(var j=0;j<matchersLn;j++){var t=matchers[j];var m=path.match(t.re);if(m){fn[fn.length]=t.select.replace(tplRe,function(x,i){return m[i]});path=path.replace(m[0],"");matched=true;break}}if(!matched){throw'Error parsing selector, parsing failed at "'+path+'"'}}if(modeMatch[1]){fn[fn.length]='mode="'+modeMatch[1].replace(trimRe,"")+'";';path=path.replace(modeMatch[1],"")}}fn[fn.length]="return nodup(n);\n}";eval(fn.join(""));return f},jsSelect:function(path,root,type){root=root||document;if(typeof root=="string"){root=document.getElementById(root)}var paths=path.split(","),results=[];for(var i=0,len=paths.length;i<len;i++){var subPath=paths[i].replace(trimRe,"");if(!cache[subPath]){cache[subPath]=Ext.DomQuery.compile(subPath);if(!cache[subPath]){throw subPath+" is not a valid selector"}}var result=cache[subPath](root);if(result&&result!=document){results=results.concat(result)}}if(paths.length>1){return nodup(results)}return results},isXml:function(el){var docEl=(el?el.ownerDocument||el:0).documentElement;return docEl?docEl.nodeName!=="HTML":false},select:document.querySelectorAll?function(path,root,type){root=root||document;if(!Ext.DomQuery.isXml(root)){try{var cs=root.querySelectorAll(path);return Ext.toArray(cs)}catch(ex){}}return Ext.DomQuery.jsSelect.call(this,path,root,type)}:function(path,root,type){return Ext.DomQuery.jsSelect.call(this,path,root,type)},selectNode:function(path,root){return Ext.DomQuery.select(path,root)[0]},selectValue:function(path,root,defaultValue){path=path.replace(trimRe,"");if(!valueCache[path]){valueCache[path]=Ext.DomQuery.compile(path,"select")}var n=valueCache[path](root),v;n=n[0]?n[0]:n;if(typeof n.normalize=="function"){n.normalize()}v=(n&&n.firstChild?n.firstChild.nodeValue:null);return((v===null||v===undefined||v==="")?defaultValue:v)},selectNumber:function(path,root,defaultValue){var v=Ext.DomQuery.selectValue(path,root,defaultValue||0);return parseFloat(v)},is:function(el,ss){if(typeof el=="string"){el=document.getElementById(el)}var isArray=Ext.isArray(el),result=Ext.DomQuery.filter(isArray?el:[el],ss);return isArray?(result.length==el.length):(result.length>0)},filter:function(els,ss,nonMatches){ss=ss.replace(trimRe,"");if(!simpleCache[ss]){simpleCache[ss]=Ext.DomQuery.compile(ss,"simple")}var result=simpleCache[ss](els);return nonMatches?quickDiff(result,els):result},matchers:[{re:/^\.([\w\-]+)/,select:'n = byClassName(n, " {1} ");'},{re:/^\:([\w\-]+)(?:\(((?:[^\s>\/]*|.*?))\))?/,select:'n = byPseudo(n, "{1}", "{2}");'},{re:/^(?:([\[\{])(?:@)?([\w\-]+)\s?(?:(=|.=)\s?(["']?)(.*?)\4)?[\]\}])/,select:'n = byAttribute(n, "{2}", "{5}", "{3}", "{1}");'},{re:/^#([\w\-]+)/,select:'n = byId(n, "{1}");'},{re:/^@([\w\-]+)/,select:'return {firstChild:{nodeValue:attrValue(n, "{1}")}};'}],operators:{"=":function(a,v){return a==v},"!=":function(a,v){return a!=v},"^=":function(a,v){return a&&a.substr(0,v.length)==v},"$=":function(a,v){return a&&a.substr(a.length-v.length)==v},"*=":function(a,v){return a&&a.indexOf(v)!==-1},"%=":function(a,v){return(a%v)==0},"|=":function(a,v){return a&&(a==v||a.substr(0,v.length+1)==v+"-")},"~=":function(a,v){return a&&(" "+a+" ").indexOf(" "+v+" ")!=-1}},pseudos:{"first-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.previousSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"last-child":function(c){var r=[],ri=-1,n;for(var i=0,ci;ci=n=c[i];i++){while((n=n.nextSibling)&&n.nodeType!=1){}if(!n){r[++ri]=ci}}return r},"nth-child":function(c,a){var r=[],ri=-1,m=nthRe.exec(a=="even"&&"2n"||a=="odd"&&"2n+1"||!nthRe2.test(a)&&"n+"+a||a),f=(m[1]||1)-0,l=m[2]-0;for(var i=0,n;n=c[i];i++){var pn=n.parentNode;if(batch!=pn._batch){var j=0;for(var cn=pn.firstChild;cn;cn=cn.nextSibling){if(cn.nodeType==1){cn.nodeIndex=++j}}pn._batch=batch}if(f==1){if(l==0||n.nodeIndex==l){r[++ri]=n}}else{if((n.nodeIndex+l)%f==0){r[++ri]=n}}}return r},"only-child":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(!prev(ci)&&!next(ci)){r[++ri]=ci}}return r},"empty":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var cns=ci.childNodes,j=0,cn,empty=true;while(cn=cns[j]){++j;if(cn.nodeType==1||cn.nodeType==3){empty=false;break}}if(empty){r[++ri]=ci}}return r},"contains":function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if((ci.textContent||ci.innerText||"").indexOf(v)!=-1){r[++ri]=ci}}return r},"nodeValue":function(c,v){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.firstChild&&ci.firstChild.nodeValue==v){r[++ri]=ci}}return r},"checked":function(c){var r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(ci.checked==true){r[++ri]=ci}}return r},"not":function(c,ss){return Ext.DomQuery.filter(c,ss,true)},"any":function(c,selectors){var ss=selectors.split("|"),r=[],ri=-1,s;for(var i=0,ci;ci=c[i];i++){for(var j=0;s=ss[j];j++){if(Ext.DomQuery.is(ci,s)){r[++ri]=ci;break}}}return r},"odd":function(c){return this["nth-child"](c,"odd")},"even":function(c){return this["nth-child"](c,"even")},"nth":function(c,a){return c[a-1]||[]},"first":function(c){return c[0]||[]},"last":function(c){return c[c.length-1]||[]},"has":function(c,ss){var s=Ext.DomQuery.select,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){if(s(ss,ci).length>0){r[++ri]=ci}}return r},"next":function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=next(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r},"prev":function(c,ss){var is=Ext.DomQuery.is,r=[],ri=-1;for(var i=0,ci;ci=c[i];i++){var n=prev(ci);if(n&&is(n,ss)){r[++ri]=ci}}return r}}}}();Ext.query=Ext.DomQuery.select;Ext.util.DelayedTask=function(C,E,F){var D=this,A,B=function(){clearInterval(A);A=null;C.apply(E,F||[])};D.delay=function(J,H,G,I){D.cancel();C=H||C;E=G||E;F=I||F;A=setInterval(B,J)};D.cancel=function(){if(A){clearInterval(A);A=null}}};(function(){var J=document;Ext.Element=function(M,L){var K=typeof M=="string"?J.getElementById(M):M,N;if(!K){return null}N=K.id;if(!L&&N&&Ext.elCache[N]){return Ext.elCache[N].el}this.dom=K;this.id=N||Ext.id(K)};var F=Ext.DomHelper,B=Ext.Element,A=Ext.elCache;B.prototype={set:function(L,O){var K=this.dom,M,N,O=(O!==false)&&!!K.setAttribute;for(M in L){if(L.hasOwnProperty(M)){N=L[M];if(M=="style"){F.applyStyles(K,N)}else{if(M=="cls"){K.className=N}else{if(O){K.setAttribute(M,N)}else{K[M]=N}}}}}return this},defaultUnit:"px",is:function(K){return Ext.DomQuery.is(this.dom,K)},focus:function(N,K){var M=this,K=K||M.dom;try{if(Number(N)){M.focus.defer(N,null,[null,K])}else{K.focus()}}catch(L){}return M},blur:function(){try{this.dom.blur()}catch(K){}return this},getValue:function(K){var L=this.dom.value;return K?parseInt(L,10):L},addListener:function(M,L,N,K){Ext.EventManager.on(this.dom,M,L,N||this,K);return this},removeListener:function(L,K,M){Ext.EventManager.removeListener(this.dom,L,K,M||this);return this},removeAllListeners:function(){Ext.EventManager.removeAll(this.dom);return this},purgeAllListeners:function(){Ext.EventManager.purgeElement(this,true);return this},addUnits:function(K){if(K===""||K=="auto"||K===undefined){K=K||""}else{if(!isNaN(K)||!I.test(K)){K=K+(this.defaultUnit||"px")}}return K},load:function(L,M,K){Ext.Ajax.request(Ext.apply({params:M,url:L.url||L,callback:K,el:this.dom,indicatorText:L.indicatorText||""},Ext.isObject(L)?L:{}));return this},isBorderBox:function(){return Ext.isBorderBox||Ext.isForcedBorderBox||H[(this.dom.tagName||"").toLowerCase()]},remove:function(){var L=this,K=L.dom;if(K){delete L.dom;Ext.removeNode(K)}},hover:function(O,K,M,L){var N=this;N.on("mouseenter",O,M||N.dom,L);N.on("mouseleave",K,M||N.dom,L);return N},contains:function(K){return !K?false:Ext.lib.Dom.isAncestor(this.dom,K.dom?K.dom:K)},getAttributeNS:function(K,L){return this.getAttribute(L,K)},getAttribute:(function(){var L=document.createElement("table"),O=false,K="getAttribute" in L,N=/undefined|unknown/;if(K){try{L.getAttribute("ext:qtip")}catch(M){O=true}return function(S,Q){var P=this.dom,T;if(P.getAttributeNS){T=P.getAttributeNS(Q,S)||null}if(T==null){if(Q){if(O&&P.tagName.toUpperCase()=="TABLE"){try{T=P.getAttribute(Q+":"+S)}catch(R){T=""}}else{T=P.getAttribute(Q+":"+S)}}else{T=P.getAttribute(S)||P[S]}}return T||""}}else{return function(S,Q){var P=this.om,T,R;if(Q){R=P[Q+":"+S];T=N.test(typeof R)?undefined:R}else{T=P[S]}return T||""}}L=null})(),update:function(K){if(this.dom){this.dom.innerHTML=K}return this}};var D=B.prototype;B.addMethods=function(K){Ext.apply(D,K)};D.on=D.addListener;D.un=D.removeListener;D.autoBoxAdjust=true;var I=/\d+(px|em|%|en|ex|pt|in|cm|mm|pc)$/i,G;B.get=function(K){var N,M,O;if(!K){return null}if(typeof K=="string"){if(!(M=J.getElementById(K))){return null}if(A[K]&&A[K].el){N=A[K].el;N.dom=M}else{N=B.addToCache(new B(M))}return N}else{if(K.tagName){if(!(O=K.id)){O=Ext.id(K)}if(A[O]&&A[O].el){N=A[O].el;N.dom=K}else{N=B.addToCache(new B(K))}return N}else{if(K instanceof B){if(K!=G){if(Ext.isIE&&(K.id==undefined||K.id=="")){K.dom=K.dom}else{K.dom=J.getElementById(K.id)||K.dom}}return K}else{if(K.isComposite){return K}else{if(Ext.isArray(K)){return B.select(K)}else{if(K==J){if(!G){var L=function(){};L.prototype=B.prototype;G=new L();G.dom=J}return G}}}}}}return null};B.addToCache=function(K,L){L=L||K.id;A[L]={el:K,data:{},events:{}};return K};B.data=function(K,L,M){K=B.get(K);if(!K){return null}var N=A[K.id].data;if(arguments.length==2){return N[L]}else{return(N[L]=M)}};function E(){if(!Ext.enableGarbageCollector){clearInterval(B.collectorThreadId)}else{var N,K,L,M;for(N in A){M=A[N];if(M.skipGC){continue}K=M.el;L=K.dom;if(!L||!L.parentNode||(!L.offsetParent&&!J.getElementById(N))){if(Ext.enableListenerCollection){Ext.EventManager.removeAll(L)}delete A[N]}}if(Ext.isIE){var O={};for(N in A){O[N]=A[N]}A=Ext.elCache=O}}}B.collectorThreadId=setInterval(E,30000);var C=function(){};C.prototype=B.prototype;B.Flyweight=function(K){this.dom=K};B.Flyweight.prototype=new C();B.Flyweight.prototype.isFlyweight=true;B._flyweights={};B.fly=function(K,L){var M=null;L=L||"_global";if(K=Ext.getDom(K)){(B._flyweights[L]=B._flyweights[L]||new B.Flyweight()).dom=K;M=B._flyweights[L]}return M};Ext.get=B.get;Ext.fly=B.fly;var H=Ext.isStrict?{select:1}:{input:1,select:1,textarea:1};if(Ext.isIE||Ext.isGecko){H["button"]=1}})();Ext.Element.addMethods(function(){var D="parentNode",A="nextSibling",B="previousSibling",C=Ext.DomQuery,E=Ext.get;return{findParent:function(K,H,G){var F=this.dom,I=document.body,J=0,L;if(Ext.isGecko&&Object.prototype.toString.call(F)=="[object XULElement]"){return null}H=H||50;if(isNaN(H)){L=Ext.getDom(H);H=Number.MAX_VALUE}while(F&&F.nodeType==1&&J<H&&F!=I&&F!=L){if(C.is(F,K)){return G?E(F):F}J++;F=F.parentNode}return null},findParentNode:function(I,H,G){var F=Ext.fly(this.dom.parentNode,"_internal");return F?F.findParent(I,H,G):null},up:function(G,F){return this.findParentNode(G,F,true)},select:function(F){return Ext.Element.select(F,this.dom)},query:function(F){return C.select(F,this.dom)},child:function(H,G){var F=C.selectNode(H,this.dom);return G?F:E(F)},down:function(H,G){var F=C.selectNode(" > "+H,this.dom);return G?F:E(F)},parent:function(G,F){return this.matchNode(D,D,G,F)},next:function(G,F){return this.matchNode(A,A,G,F)},prev:function(G,F){return this.matchNode(B,B,G,F)},first:function(G,F){return this.matchNode(A,"firstChild",G,F)},last:function(G,F){return this.matchNode(B,"lastChild",G,F)},matchNode:function(F,J,I,H){var G=this.dom[J];while(G){if(G.nodeType==1&&(!I||C.is(G,I))){return !H?E(G):G}G=G[F]}return null}}}());Ext.Element.addMethods(function(){var A=Ext.getDom,B=Ext.get,C=Ext.DomHelper;return{appendChild:function(D){return B(D).appendTo(this)},appendTo:function(D){A(D).appendChild(this.dom);return this},insertBefore:function(D){(D=A(D)).parentNode.insertBefore(this.dom,D);return this},insertAfter:function(D){(D=A(D)).parentNode.insertBefore(this.dom,D.nextSibling);return this},insertFirst:function(D,E){D=D||{};if(D.nodeType||D.dom||typeof D=="string"){D=A(D);this.dom.insertBefore(D,this.dom.firstChild);return !E?B(D):D}else{return this.createChild(D,this.dom.firstChild,E)}},replace:function(D){D=B(D);this.insertBefore(D);D.remove();return this},replaceWith:function(D){var E=this;if(D.nodeType||D.dom||typeof D=="string"){D=A(D);E.dom.parentNode.insertBefore(D,E.dom)}else{D=C.insertBefore(E.dom,D)}delete Ext.elCache[E.id];Ext.removeNode(E.dom);E.id=Ext.id(E.dom=D);Ext.Element.addToCache(E.isFlyweight?new Ext.Element(E.dom):E);return E},createChild:function(D,F,E){D=D||{tag:"div"};return F?C.insertBefore(F,D,E!==true):C[!this.dom.firstChild?"overwrite":"append"](this.dom,D,E!==true)},wrap:function(D,E){var F=C.insertBefore(this.dom,D||{tag:"div"},!E);F.dom?F.dom.appendChild(this.dom):F.appendChild(this.dom);return F},insertHtml:function(G,D,F){var E=C.insertHtml(G,this.dom,D);return F?Ext.get(E):E}}}());Ext.Element.addMethods(function(){var J=Ext.supports,N={},V=/(-[a-z])/gi,W=document.defaultView,A=/alpha\(opacity=(.*)\)/i,C=/^\s+|\s+$/g,T=Ext.Element,L=/\s+/,O=/\w/g,Q="padding",F="margin",P="border",a="-left",S="-right",I="-top",D="-bottom",b="-width",B=Math,c="hidden",R="isClipped",Y="overflow",H="overflow-x",G="overflow-y",U="originalClip",Z={l:P+a+b,r:P+S+b,t:P+I+b,b:P+D+b},d={l:Q+a,r:Q+S,t:Q+I,b:Q+D},E={l:F+a,r:F+S,t:F+I,b:F+D},M=Ext.Element.data;function K(e,g){return g.charAt(1).toUpperCase()}function X(e){return N[e]||(N[e]=e=="float"?(J.cssFloat?"cssFloat":"styleFloat"):e.replace(V,K))}return{adjustWidth:function(h){var e=this;var g=(typeof h=="number");if(g&&e.autoBoxAdjust&&!e.isBorderBox()){h-=(e.getBorderWidth("lr")+e.getPadding("lr"))}return(g&&h<0)?0:h},adjustHeight:function(e){var g=this;var h=(typeof e=="number");if(h&&g.autoBoxAdjust&&!g.isBorderBox()){e-=(g.getBorderWidth("tb")+g.getPadding("tb"))}return(h&&e<0)?0:e},addClass:function(e){var j=this,g,k,l,h=[];if(!Ext.isArray(e)){if(typeof e=="string"&&!this.hasClass(e)){j.dom.className+=" "+e}}else{for(g=0,k=e.length;g<k;g++){l=e[g];if(typeof l=="string"&&(" "+j.dom.className+" ").indexOf(" "+l+" ")==-1){h.push(l)}}if(h.length){j.dom.className+=" "+h.join(" ")}}return j},removeClass:function(g){var k=this,h,m,l,j,e;if(!Ext.isArray(g)){g=[g]}if(k.dom&&k.dom.className){e=k.dom.className.replace(C,"").split(L);for(h=0,l=g.length;h<l;h++){j=g[h];if(typeof j=="string"){j=j.replace(C,"");m=e.indexOf(j);if(m!=-1){e.splice(m,1)}}}k.dom.className=e.join(" ")}return k},radioClass:function(e){var j=this.dom.parentNode.childNodes,h,g,k;e=Ext.isArray(e)?e:[e];for(g=0,k=j.length;g<k;g++){h=j[g];if(h&&h.nodeType==1){Ext.fly(h,"_internal").removeClass(e)}}return this.addClass(e)},toggleClass:function(e){return this.hasClass(e)?this.removeClass(e):this.addClass(e)},hasClass:function(e){return e&&(" "+this.dom.className+" ").indexOf(" "+e+" ")!=-1},replaceClass:function(g,e){return this.removeClass(g).addClass(e)},isStyle:function(e,g){return this.getStyle(e)==g},getStyle:function(){return W&&W.getComputedStyle?function(h){var e=this.dom,i,k,j,g;if(e==document){return null}h=X(h);j=(i=e.style[h])?i:(k=W.getComputedStyle(e,""))?k[h]:null;if(h=="marginRight"&&j!="0px"&&!J.correctRightMargin){g=e.style.display;e.style.display="inline-block";j=W.getComputedStyle(e,"").marginRight;e.style.display=g}if(h=="backgroundColor"&&j=="rgba(0, 0, 0, 0)"&&!J.correctTransparentColor){j="transparent"}return j}:function(g){var e=this.dom,h,i;if(e==document){return null}if(g=="opacity"){if(e.style.filter.match){if(h=e.style.filter.match(A)){var j=parseFloat(h[1]);if(!isNaN(j)){return j?j/100:0}}}return 1}g=X(g);return e.style[g]||((i=e.currentStyle)?i[g]:null)}}(),getColor:function(l,j,g){var i=this.getStyle(l),k=(typeof g!="undefined")?g:"#",e;if(!i||(/transparent|inherit/.test(i))){return j}if(/^r/.test(i)){Ext.each(i.slice(4,i.length-1).split(","),function(h){e=parseInt(h,10);k+=(e<16?"0":"")+e.toString(16)})}else{i=i.replace("#","");k+=i.length==3?i.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):i}return(k.length>5?k.toLowerCase():j)},setStyle:function(g,h){var e,i;if(typeof g!="object"){e={};e[g]=h;g=e}for(i in g){h=g[i];i=="opacity"?this.setOpacity(h):this.dom.style[X(i)]=h}return this},setOpacity:function(i,h){var e=this,g=e.dom.style;if(!h||!e.anim){if(Ext.isIE){var k=i<1?"alpha(opacity="+i*100+")":"",j=g.filter.replace(A,"").replace(C,"");g.zoom=1;g.filter=j+(j.length>0?" ":"")+k}else{g.opacity=i}}else{e.anim({opacity:{to:i}},e.preanim(arguments,1),null,0.35,"easeIn")}return e},clearOpacity:function(){var e=this.dom.style;if(Ext.isIE){if(!Ext.isEmpty(e.filter)){e.filter=e.filter.replace(A,"").replace(C,"")}}else{e.opacity=e["-moz-opacity"]=e["-khtml-opacity"]=""}return this},getHeight:function(j){var i=this,e=i.dom,k=Ext.isIE&&i.isStyle("display","none"),g=B.max(e.offsetHeight,k?0:e.clientHeight)||0;g=!j?g:g-i.getBorderWidth("tb")-i.getPadding("tb");return g<0?0:g},getWidth:function(i){var g=this,e=g.dom,j=Ext.isIE&&g.isStyle("display","none"),h=B.max(e.offsetWidth,j?0:e.clientWidth)||0;h=!i?h:h-g.getBorderWidth("lr")-g.getPadding("lr");return h<0?0:h},setWidth:function(h,e){var g=this;h=g.adjustWidth(h);!e||!g.anim?g.dom.style.width=g.addUnits(h):g.anim({width:{to:h}},g.preanim(arguments,1));return g},setHeight:function(e,g){var h=this;e=h.adjustHeight(e);!g||!h.anim?h.dom.style.height=h.addUnits(e):h.anim({height:{to:e}},h.preanim(arguments,1));return h},getBorderWidth:function(e){return this.addStyles(e,Z)},getPadding:function(e){return this.addStyles(e,d)},clip:function(){var g=this,e=g.dom;if(!M(e,R)){M(e,R,true);M(e,U,{o:g.getStyle(Y),x:g.getStyle(H),y:g.getStyle(G)});g.setStyle(Y,c);g.setStyle(H,c);g.setStyle(G,c)}return g},unclip:function(){var h=this,e=h.dom;if(M(e,R)){M(e,R,false);var g=M(e,U);if(g.o){h.setStyle(Y,g.o)}if(g.x){h.setStyle(H,g.x)}if(g.y){h.setStyle(G,g.y)}}return h},addStyles:function(n,g){var l=0,h=n.match(O),e,j,k,m=h.length;for(k=0;k<m;k++){e=h[k];j=e&&parseInt(this.getStyle(g[e]),10);if(j){l+=B.abs(j)}}return l},margins:E}}());(function(){var G=Ext.lib.Dom,K="left",H="right",A="top",E="bottom",J="position",C="static",B="relative",F="auto",I="z-index";Ext.Element.addMethods({getX:function(){return G.getX(this.dom)},getY:function(){return G.getY(this.dom)},getXY:function(){return G.getXY(this.dom)},getOffsetsTo:function(D){var M=this.getXY(),L=Ext.fly(D,"_internal").getXY();return[M[0]-L[0],M[1]-L[1]]},setX:function(L,D){return this.setXY([L,this.getY()],this.animTest(arguments,D,1))},setY:function(L,D){return this.setXY([this.getX(),L],this.animTest(arguments,D,1))},setLeft:function(D){this.setStyle(K,this.addUnits(D));return this},setTop:function(D){this.setStyle(A,this.addUnits(D));return this},setRight:function(D){this.setStyle(H,this.addUnits(D));return this},setBottom:function(D){this.setStyle(E,this.addUnits(D));return this},setXY:function(L,D){var M=this;if(!D||!M.anim){G.setXY(M.dom,L)}else{M.anim({points:{to:L}},M.preanim(arguments,1),"motion")}return M},setLocation:function(L,M,D){return this.setXY([L,M],this.animTest(arguments,D,2))},moveTo:function(L,M,D){return this.setXY([L,M],this.animTest(arguments,D,2))},getLeft:function(D){return !D?this.getX():parseInt(this.getStyle(K),10)||0},getRight:function(L){var D=this;return !L?D.getX()+D.getWidth():(D.getLeft(true)+D.getWidth())||0},getTop:function(D){return !D?this.getY():parseInt(this.getStyle(A),10)||0},getBottom:function(L){var D=this;return !L?D.getY()+D.getHeight():(D.getTop(true)+D.getHeight())||0},position:function(L,D,N,O){var M=this;if(!L&&M.isStyle(J,C)){M.setStyle(J,B)}else{if(L){M.setStyle(J,L)}}if(D){M.setStyle(I,D)}if(N||O){M.setXY([N||false,O||false])}},clearPositioning:function(D){D=D||"";this.setStyle({left:D,right:D,top:D,bottom:D,"z-index":"",position:C});return this},getPositioning:function(){var D=this.getStyle(K);var L=this.getStyle(A);return{"position":this.getStyle(J),"left":D,"right":D?"":this.getStyle(H),"top":L,"bottom":L?"":this.getStyle(E),"z-index":this.getStyle(I)}},setPositioning:function(M){var D=this,L=D.dom.style;D.setStyle(M);if(M.right==F){L.right=""}if(M.bottom==F){L.bottom=""}return D},translatePoints:function(N,O){O=isNaN(N[1])?O:N[1];N=isNaN(N[0])?N:N[0];var M=this,D=M.isStyle(J,B),L=M.getXY(),P=parseInt(M.getStyle(K),10),Q=parseInt(M.getStyle(A),10);P=!isNaN(P)?P:(D?0:M.dom.offsetLeft);Q=!isNaN(Q)?Q:(D?0:M.dom.offsetTop);return{left:(N-L[0]+P),top:(O-L[1]+Q)}},animTest:function(M,L,D){return !!L&&this.preanim?this.preanim(M,D):false}})})();Ext.Element.addMethods({isScrollable:function(){var A=this.dom;return A.scrollHeight>A.clientHeight||A.scrollWidth>A.clientWidth},scrollTo:function(A,B){this.dom["scroll"+(/top/i.test(A)?"Top":"Left")]=B;return this},getScroll:function(){var A=this.dom,G=document,B=G.body,C=G.documentElement,D,F,E;if(A==G||A==B){if(Ext.isIE&&Ext.isStrict){D=C.scrollLeft;F=C.scrollTop}else{D=window.pageXOffset;F=window.pageYOffset}E={left:D||(B?B.scrollLeft:0),top:F||(B?B.scrollTop:0)}}else{E={left:A.scrollLeft,top:A.scrollTop}}return E}});Ext.Element.VISIBILITY=1;Ext.Element.DISPLAY=2;Ext.Element.OFFSETS=3;Ext.Element.ASCLASS=4;Ext.Element.visibilityCls="x-hide-nosize";Ext.Element.addMethods(function(){var M=Ext.Element,I="opacity",D="visibility",O="display",J="hidden",B="offsets",E="asclass",H="none",C="nosize",N="originalDisplay",L="visibilityMode",G="isVisible",A=M.data,F=function(P){var Q=A(P,N);if(Q===undefined){A(P,N,Q="")}return Q},K=function(P){var Q=A(P,L);if(Q===undefined){A(P,L,Q=1)}return Q};return{originalDisplay:"",visibilityMode:1,setVisibilityMode:function(P){A(this.dom,L,P);return this},animate:function(T,R,P,Q,S){this.anim(T,{duration:R,callback:P,easing:Q},S);return this},anim:function(Q,R,V,S,W,T){V=V||"run";R=R||{};var U=this,P=Ext.lib.Anim[V](U.dom,Q,(R.duration||S)||0.35,(R.easing||W)||"easeOut",function(){if(T){T.call(U)}if(R.callback){R.callback.call(R.scope||U,U,R)}},U);R.anim=P;return P},preanim:function(Q,P){return !Q[P]?false:(typeof Q[P]=="object"?Q[P]:{duration:Q[P+1],callback:Q[P+2],easing:Q[P+3]})},isVisible:function(){var R=this,P=R.dom,Q=A(P,G);if(typeof Q=="boolean"){return Q}Q=!R.isStyle(D,J)&&!R.isStyle(O,H)&&!((K(P)==M.ASCLASS)&&R.hasClass(R.visibilityCls||M.visibilityCls));A(P,G,Q);return Q},setVisible:function(S,R){var P=this,V,W,X,U,Q=P.dom,T=K(Q);if(typeof R=="string"){switch(R){case O:T=M.DISPLAY;break;case D:T=M.VISIBILITY;break;case B:T=M.OFFSETS;break;case C:case E:T=M.ASCLASS;break}P.setVisibilityMode(T);R=false}if(!R||!P.anim){if(T==M.ASCLASS){P[S?"removeClass":"addClass"](P.visibilityCls||M.visibilityCls)}else{if(T==M.DISPLAY){return P.setDisplayed(S)}else{if(T==M.OFFSETS){if(!S){P.hideModeStyles={position:P.getStyle("position"),top:P.getStyle("top"),left:P.getStyle("left")};P.applyStyles({position:"absolute",top:"-10000px",left:"-10000px"})}else{P.applyStyles(P.hideModeStyles||{position:"",top:"",left:""});delete P.hideModeStyles}}else{P.fixDisplay();Q.style.visibility=S?"visible":J}}}}else{if(S){P.setOpacity(0.01);P.setVisible(true)}P.anim({opacity:{to:(S?1:0)}},P.preanim(arguments,1),null,0.35,"easeIn",function(){S||P.setVisible(false).setOpacity(1)})}A(Q,G,S);return P},hasMetrics:function(){var P=this.dom;return this.isVisible()||(K(P)==M.VISIBILITY)},toggle:function(P){var Q=this;Q.setVisible(!Q.isVisible(),Q.preanim(arguments,0));return Q},setDisplayed:function(P){if(typeof P=="boolean"){P=P?F(this.dom):H}this.setStyle(O,P);return this},fixDisplay:function(){var P=this;if(P.isStyle(O,H)){P.setStyle(D,J);P.setStyle(O,F(this.dom));if(P.isStyle(O,H)){P.setStyle(O,"block")}}},hide:function(P){if(typeof P=="string"){this.setVisible(false,P);return this}this.setVisible(false,this.preanim(arguments,0));return this},show:function(P){if(typeof P=="string"){this.setVisible(true,P);return this}this.setVisible(true,this.preanim(arguments,0));return this}}}());(function(){var Z=null,B=undefined,D=true,S=false,Y="setX",K="setY",W="setXY",T="left",C="bottom",I="top",N="right",E="height",V="width",G="points",A="hidden",H="absolute",R="visible",Q="motion",P="position",O="easeOut",F=new Ext.Element.Flyweight(),L={},J=function(a){return a||{}},U=function(a){F.dom=a;F.id=Ext.id(a);return F},M=function(a){if(!L[a]){L[a]=[]}return L[a]},X=function(b,a){L[b]=a};Ext.enableFx=D;Ext.Fx={switchStatements:function(a,b,c){return b.apply(this,c[a])},slideIn:function(a,l){l=J(l);var m=this,g=m.dom,h=g.style,i,e,p,k,q,h,d,c,n,j;a=a||"t";m.queueFx(l,function(){i=U(g).getXY();U(g).fixDisplay();e=U(g).getFxRestore();p={x:i[0],y:i[1],0:i[0],1:i[1],width:g.offsetWidth,height:g.offsetHeight};p.right=p.x+p.width;p.bottom=p.y+p.height;U(g).setWidth(p.width).setHeight(p.height);k=U(g).fxWrap(e.pos,l,A);h.visibility=R;h.position=H;function b(){U(g).fxUnwrap(k,e.pos,l);h.width=e.width;h.height=e.height;U(g).afterFx(l)}c={to:[p.x,p.y]};n={to:p.width};j={to:p.height};function o(z,Aa,u,Ad,Ac,x,r,Ab,t,y,s){var v={};U(z).setWidth(u).setHeight(Ad);if(U(z)[Ac]){U(z)[Ac](x)}Aa[r]=Aa[Ab]="0";if(t){v.width=t}if(y){v.height=y}if(s){v.points=s}return v}d=U(g).switchStatements(a.toLowerCase(),o,{t:[k,h,p.width,0,Z,Z,T,C,Z,j,Z],l:[k,h,0,p.height,Z,Z,N,I,n,Z,Z],r:[k,h,p.width,p.height,Y,p.right,T,I,Z,Z,c],b:[k,h,p.width,p.height,K,p.bottom,T,I,Z,j,c],tl:[k,h,0,0,Z,Z,N,C,n,j,c],bl:[k,h,0,0,K,p.y+p.height,N,I,n,j,c],br:[k,h,0,0,W,[p.right,p.bottom],T,I,n,j,c],tr:[k,h,0,0,Y,p.x+p.width,T,C,n,j,c]});h.visibility=R;U(k).show();arguments.callee.anim=U(k).fxanim(d,l,Q,0.5,O,b)});return m},slideOut:function(c,k){k=J(k);var l=this,e=l.dom,g=e.style,h=l.getXY(),i,d,m,j,n={to:0};c=c||"t";l.queueFx(k,function(){d=U(e).getFxRestore();m={x:h[0],y:h[1],0:h[0],1:h[1],width:e.offsetWidth,height:e.offsetHeight};m.right=m.x+m.width;m.bottom=m.y+m.height;U(e).setWidth(m.width).setHeight(m.height);i=U(e).fxWrap(d.pos,k,R);g.visibility=R;g.position=H;U(i).setWidth(m.width).setHeight(m.height);function a(){k.useDisplay?U(e).setDisplayed(S):U(e).hide();U(e).fxUnwrap(i,d.pos,k);g.width=d.width;g.height=d.height;U(e).afterFx(k)}function b(r,q,s,o,p,t,u,v,x){var w={};r[q]=r[s]="0";w[o]=p;if(t){w[t]=u}if(v){w[v]=x}return w}j=U(e).switchStatements(c.toLowerCase(),b,{t:[g,T,C,E,n],l:[g,N,I,V,n],r:[g,T,I,V,n,G,{to:[m.right,m.y]}],b:[g,T,I,E,n,G,{to:[m.x,m.bottom]}],tl:[g,N,C,V,n,E,n],bl:[g,N,I,V,n,E,n,G,{to:[m.x,m.bottom]}],br:[g,T,I,V,n,E,n,G,{to:[m.x+m.width,m.bottom]}],tr:[g,T,C,V,n,E,n,G,{to:[m.right,m.y]}]});arguments.callee.anim=U(i).fxanim(j,k,Q,0.5,O,a)});return l},puff:function(d){d=J(d);var g=this,a=g.dom,c=a.style,h,b,e;g.queueFx(d,function(){h=U(a).getWidth();b=U(a).getHeight();U(a).clearOpacity();U(a).show();e=U(a).getFxRestore();function i(){d.useDisplay?U(a).setDisplayed(S):U(a).hide();U(a).clearOpacity();U(a).setPositioning(e.pos);c.width=e.width;c.height=e.height;c.fontSize="";U(a).afterFx(d)}arguments.callee.anim=U(a).fxanim({width:{to:U(a).adjustWidth(h*2)},height:{to:U(a).adjustHeight(b*2)},points:{by:[-h*0.5,-b*0.5]},opacity:{to:0},fontSize:{to:200,unit:"%"}},d,Q,0.5,O,i)});return g},switchOff:function(d){d=J(d);var e=this,a=e.dom,c=a.style,b;e.queueFx(d,function(){U(a).clearOpacity();U(a).clip();b=U(a).getFxRestore();function g(){d.useDisplay?U(a).setDisplayed(S):U(a).hide();U(a).clearOpacity();U(a).setPositioning(b.pos);c.width=b.width;c.height=b.height;U(a).afterFx(d)}U(a).fxanim({opacity:{to:0.3}},Z,Z,0.1,Z,function(){U(a).clearOpacity();(function(){U(a).fxanim({height:{to:1},points:{by:[0,U(a).getHeight()*0.5]}},d,Q,0.3,"easeIn",g)}).defer(100)})});return e},highlight:function(h,d){d=J(d);var e=this,b=e.dom,i=d.attr||"backgroundColor",c={},g;e.queueFx(d,function(){U(b).clearOpacity();U(b).show();function a(){b.style[i]=g;U(b).afterFx(d)}g=b.style[i];c[i]={from:h||"ffff9c",to:d.endColor||U(b).getColor(i)||"ffffff"};arguments.callee.anim=U(b).fxanim(c,d,"color",1,"easeIn",a)});return e},frame:function(h,b,c){c=J(c);var e=this,a=e.dom,d,g;e.queueFx(c,function(){h=h||"#C3DAF9";if(h.length==6){h="#"+h}b=b||1;U(a).show();var i=U(a).getXY(),j={x:i[0],y:i[1],0:i[0],1:i[1],width:a.offsetWidth,height:a.offsetHeight},l=function(){d=U(document.body||document.documentElement).createChild({style:{position:H,"z-index":35000,border:"0px solid "+h}});return d.queueFx({},k)};arguments.callee.anim={isAnimated:true,stop:function(){b=0;d.stopFx()}};function k(){var m=Ext.isBorderBox?2:1;g=d.anim({top:{from:j.y,to:j.y-20},left:{from:j.x,to:j.x-20},borderWidth:{from:0,to:10},opacity:{from:1,to:0},height:{from:j.height,to:j.height+20*m},width:{from:j.width,to:j.width+20*m}},{duration:c.duration||1,callback:function(){d.remove();--b>0?l():U(a).afterFx(c)}});arguments.callee.anim={isAnimated:true,stop:function(){g.stop()}}}l()});return e},pause:function(b){var a=this.dom,c;this.queueFx({},function(){c=setTimeout(function(){U(a).afterFx({})},b*1000);arguments.callee.anim={isAnimated:true,stop:function(){clearTimeout(c);U(a).afterFx({})}}});return this},fadeIn:function(b){b=J(b);var c=this,a=c.dom,d=b.endOpacity||1;c.queueFx(b,function(){U(a).setOpacity(0);U(a).fixDisplay();a.style.visibility=R;arguments.callee.anim=U(a).fxanim({opacity:{to:d}},b,Z,0.5,O,function(){if(d==1){U(a).clearOpacity()}U(a).afterFx(b)})});return c},fadeOut:function(b){b=J(b);var c=this,a=c.dom,e=a.style,d=b.endOpacity||0;c.queueFx(b,function(){arguments.callee.anim=U(a).fxanim({opacity:{to:d}},b,Z,0.5,O,function(){if(d==0){Ext.Element.data(a,"visibilityMode")==Ext.Element.DISPLAY||b.useDisplay?e.display="none":e.visibility=A;U(a).clearOpacity()}U(a).afterFx(b)})});return c},scale:function(c,a,b){this.shift(Ext.apply({},b,{width:c,height:a}));return this},shift:function(c){c=J(c);var b=this.dom,d={};this.queueFx(c,function(){for(var a in c){if(c[a]!=B){d[a]={to:c[a]}}}d.width?d.width.to=U(b).adjustWidth(c.width):d;d.height?d.height.to=U(b).adjustWidth(c.height):d;if(d.x||d.y||d.xy){d.points=d.xy||{to:[d.x?d.x.to:U(b).getX(),d.y?d.y.to:U(b).getY()]}}arguments.callee.anim=U(b).fxanim(d,c,Q,0.35,O,function(){U(b).afterFx(c)})});return this},ghost:function(b,k){k=J(k);var l=this,e=l.dom,i=e.style,m={opacity:{to:0},points:{}},c=m.points,d,g,j;b=b||"b";l.queueFx(k,function(){d=U(e).getFxRestore();g=U(e).getWidth();j=U(e).getHeight();function a(){k.useDisplay?U(e).setDisplayed(S):U(e).hide();U(e).clearOpacity();U(e).setPositioning(d.pos);i.width=d.width;i.height=d.height;U(e).afterFx(k)}c.by=U(e).switchStatements(b.toLowerCase(),function(h,n){return[h,n]},{t:[0,-j],l:[-g,0],r:[g,0],b:[0,j],tl:[-g,-j],bl:[-g,j],br:[g,j],tr:[g,-j]});arguments.callee.anim=U(e).fxanim(m,k,Q,0.5,O,a)});return l},syncFx:function(){var a=this;a.fxDefaults=Ext.apply(a.fxDefaults||{},{block:S,concurrent:D,stopFx:S});return a},sequenceFx:function(){var a=this;a.fxDefaults=Ext.apply(a.fxDefaults||{},{block:S,concurrent:S,stopFx:S});return a},nextFx:function(){var a=M(this.dom.id)[0];if(a){a.call(this)}},hasActiveFx:function(){return M(this.dom.id)[0]},stopFx:function(c){var b=this,d=b.dom.id;if(b.hasActiveFx()){var a=M(d)[0];if(a&&a.anim){if(a.anim.isAnimated){X(d,[a]);a.anim.stop(c!==undefined?c:D)}else{X(d,[])}}}return b},beforeFx:function(a){if(this.hasActiveFx()&&!a.concurrent){if(a.stopFx){this.stopFx();return D}return S}return D},hasFxBlock:function(){var a=M(this.dom.id);return a&&a[0]&&a[0].block},queueFx:function(a,b){var c=U(this.dom);if(!c.hasFxBlock()){Ext.applyIf(a,c.fxDefaults);if(!a.concurrent){var d=c.beforeFx(a);b.block=a.block;M(c.dom.id).push(b);if(d){c.nextFx()}}else{b.call(c)}}return c},fxWrap:function(d,c,h){var a=this.dom,b,e;if(!c.wrap||!(b=Ext.getDom(c.wrap))){if(c.fixPosition){e=U(a).getXY()}var g=document.createElement("div");g.style.visibility=h;b=a.parentNode.insertBefore(g,a);U(b).setPositioning(d);if(U(b).isStyle(P,"static")){U(b).position("relative")}U(a).clearPositioning("auto");U(b).clip();b.appendChild(a);if(e){U(b).setXY(e)}}return b},fxUnwrap:function(c,e,b){var a=this.dom;U(a).clearPositioning();U(a).setPositioning(e);if(!b.wrap){var d=U(c).dom.parentNode;d.insertBefore(a,c);U(c).remove()}},getFxRestore:function(){var a=this.dom.style;return{pos:this.getPositioning(),width:a.width,height:a.height}},afterFx:function(b){var a=this.dom,c=a.id;if(b.afterStyle){U(a).setStyle(b.afterStyle)}if(b.afterCls){U(a).addClass(b.afterCls)}if(b.remove==D){U(a).remove()}if(b.callback){b.callback.call(b.scope,U(a))}if(!b.concurrent){M(c).shift();U(a).nextFx()}},fxanim:function(h,b,e,d,c,a){e=e||"run";b=b||{};var g=Ext.lib.Anim[e](this.dom,h,(b.duration||d)||0.35,(b.easing||c)||O,a,this);b.anim=g;return g}};Ext.Fx.resize=Ext.Fx.scale;Ext.Element.addMethods(Ext.Fx)})();Ext.CompositeElementLite=function(B,A){this.elements=[];this.add(B,A);this.el=new Ext.Element.Flyweight()};Ext.CompositeElementLite.prototype={isComposite:true,getElement:function(A){var B=this.el;B.dom=A;B.id=A.id;return B},transformElement:function(A){return Ext.getDom(A)},getCount:function(){return this.elements.length},add:function(F,B){var D=this,C=D.elements;if(!F){return this}if(typeof F=="string"){F=Ext.Element.selectorFunction(F,B)}else{if(F.isComposite){F=F.elements}else{if(!Ext.isIterable(F)){F=[F]}}}for(var A=0,E=F.length;A<E;++A){C.push(D.transformElement(F[A]))}return D},invoke:function(C,G){var D=this,F=D.elements,E=F.length,B,A;for(A=0;A<E;A++){B=F[A];if(B){Ext.Element.prototype[C].apply(D.getElement(B),G)}}return D},item:function(D){var B=this,A=B.elements[D],C=null;if(A){C=B.getElement(A)}return C},addListener:function(D,G,C,B){var E=this.elements,H=E.length,F,A;for(F=0;F<H;F++){A=E[F];if(A){Ext.EventManager.on(A,D,G,C||A,B)}}return this},each:function(C,F){var D=this,G=D.elements,E=G.length,A,B;for(A=0;A<E;A++){B=G[A];if(B){B=this.getElement(B);if(C.call(F||B,B,D,A)===false){break}}}return D},fill:function(B){var A=this;A.elements=[];A.add(B);return A},filter:function(C){var D=[],B=this,A=Ext.isFunction(C)?C:function(E){return E.is(C)};B.each(function(E,G,F){if(A(E,F)!==false){D[D.length]=B.transformElement(E)}});B.elements=D;return B},indexOf:function(A){return this.elements.indexOf(this.transformElement(A))},replaceElement:function(A,E,D){var C=!isNaN(A)?A:this.indexOf(A),B;if(C>-1){E=Ext.getDom(E);if(D){B=this.elements[C];B.parentNode.insertBefore(E,B);Ext.removeNode(B)}this.elements.splice(C,1,E)}return this},clear:function(){this.elements=[]}};Ext.CompositeElementLite.prototype.on=Ext.CompositeElementLite.prototype.addListener;Ext.CompositeElementLite.importElementMethods=function(){var C,A=Ext.Element.prototype,B=Ext.CompositeElementLite.prototype;for(C in A){if(typeof A[C]=="function"){(function(D){B[D]=B[D]||function(){return this.invoke(D,arguments)}}).call(B,C)}}};Ext.CompositeElementLite.importElementMethods();if(Ext.DomQuery){Ext.Element.selectorFunction=Ext.DomQuery.select}Ext.Element.select=function(B,A){var C;if(typeof B=="string"){C=Ext.Element.selectorFunction(B,A)}else{if(B.length!==undefined){C=B}else{throw"Invalid selector"}}return new Ext.CompositeElementLite(C)};Ext.select=Ext.Element.select;(function(){var G="beforerequest",B="requestcomplete",A="requestexception",F=undefined,C="load",H="POST",E="GET",D=window;Ext.data.Connection=function(I){Ext.apply(this,I);this.addEvents(G,B,A);Ext.data.Connection.superclass.constructor.call(this)};Ext.extend(Ext.data.Connection,Ext.util.Observable,{timeout:30000,autoAbort:false,disableCaching:true,disableCachingParam:"_dc",request:function(L){var N=this;if(N.fireEvent(G,N,L)){if(L.el){if(!Ext.isEmpty(L.indicatorText)){N.indicatorText='<div class="loading-indicator">'+L.indicatorText+"</div>"}if(N.indicatorText){Ext.getDom(L.el).innerHTML=N.indicatorText}L.success=(Ext.isFunction(L.success)?L.success:function(){}).createInterceptor(function(R){Ext.getDom(L.el).innerHTML=R.responseText})}var K=L.params,Q=L.url||N.url,O,J={success:N.handleResponse,failure:N.handleFailure,scope:N,argument:{options:L},timeout:Ext.num(L.timeout,N.timeout)},I,P;if(Ext.isFunction(K)){K=K.call(L.scope||D,L)}K=Ext.urlEncode(N.extraParams,Ext.isObject(K)?Ext.urlEncode(K):K);if(Ext.isFunction(Q)){Q=Q.call(L.scope||D,L)}if((I=Ext.getDom(L.form))){Q=Q||I.action;if(L.isUpload||(/multipart\/form-data/i.test(I.getAttribute("enctype")))){return N.doFormUpload.call(N,L,K,Q)}P=Ext.lib.Ajax.serializeForm(I);K=K?(K+"&"+P):P}O=L.method||N.method||((K||L.xmlData||L.jsonData)?H:E);if(O===E&&(N.disableCaching&&L.disableCaching!==false)||L.disableCaching===true){var M=L.disableCachingParam||N.disableCachingParam;Q=Ext.urlAppend(Q,M+"="+(new Date().getTime()))}L.headers=Ext.applyIf(L.headers||{},N.defaultHeaders||{});if(L.autoAbort===true||N.autoAbort){N.abort()}if((O==E||L.xmlData||L.jsonData)&&K){Q=Ext.urlAppend(Q,K);K=""}return(N.transId=Ext.lib.Ajax.request(O,Q,J,K,L))}else{return L.callback?L.callback.apply(L.scope,[L,F,F]):null}},isLoading:function(I){return I?Ext.lib.Ajax.isCallInProgress(I):!!this.transId},abort:function(I){if(I||this.isLoading()){Ext.lib.Ajax.abort(I||this.transId)}},handleResponse:function(J){this.transId=false;var I=J.argument.options;J.argument=I?I.argument:null;this.fireEvent(B,this,J,I);if(I.success){I.success.call(I.scope,J,I)}if(I.callback){I.callback.call(I.scope,I,true,J)}},handleFailure:function(K,I){this.transId=false;var J=K.argument.options;K.argument=J?J.argument:null;this.fireEvent(A,this,K,J,I);if(J.failure){J.failure.call(J.scope,K,J)}if(J.callback){J.callback.call(J.scope,J,false,K)}},doFormUpload:function(O,N,R){var Q=Ext.id(),P=document,L=P.createElement("iframe"),I=Ext.getDom(O.form),M=[],S,K="multipart/form-data",T={target:I.target,method:I.method,encoding:I.encoding,enctype:I.enctype,action:I.action};Ext.fly(L).set({id:Q,name:Q,cls:"x-hidden",src:Ext.SSL_SECURE_URL});P.body.appendChild(L);if(Ext.isIE){document.frames[Q].name=Q}Ext.fly(I).set({target:Q,method:H,enctype:K,encoding:K,action:R||T.action});Ext.iterate(Ext.urlDecode(N,false),function(V,U){S=P.createElement("input");Ext.fly(S).set({type:"hidden",value:U,name:V});I.appendChild(S);M.push(S)});function J(){var W=this,U={responseText:"",responseXML:null,argument:O.argument},Z,Y;try{Z=L.contentWindow.document||L.contentDocument||D.frames[Q].document;if(Z){if(Z.body){if(/textarea/i.test((Y=Z.body.firstChild||{}).tagName)){U.responseText=Y.value}else{U.responseText=Z.body.innerHTML}}U.responseXML=Z.XMLDocument||Z}}catch(V){}Ext.EventManager.removeListener(L,C,J,W);W.fireEvent(B,W,U,O);function X(a,b,c){if(Ext.isFunction(a)){a.apply(b,c)}}X(O.success,O.scope,[U,O]);X(O.callback,O.scope,[O,true,U]);if(!W.debugUploads){setTimeout(function(){Ext.removeNode(L)},100)}}Ext.EventManager.on(L,C,J,this);I.submit();Ext.fly(I).set(T);Ext.each(M,function(U){Ext.removeNode(U)})}})})();Ext.Ajax=new Ext.data.Connection({autoAbort:false,serializeForm:function(A){return Ext.lib.Ajax.serializeForm(A)}});Ext.util.JSON=new (function(){var useHasOwn=!!{}.hasOwnProperty,isNative=function(){var useNative=null;return function(){if(useNative===null){useNative=Ext.USE_NATIVE_JSON&&window.JSON&&JSON.toString()=="[object JSON]"}return useNative}}(),pad=function(n){return n<10?"0"+n:n},doDecode=function(json){return json?eval("("+json+")"):""},doEncode=function(o){if(!Ext.isDefined(o)||o===null){return"null"}else{if(Ext.isArray(o)){return encodeArray(o)}else{if(Ext.isDate(o)){return Ext.util.JSON.encodeDate(o)}else{if(Ext.isString(o)){return encodeString(o)}else{if(typeof o=="number"){return isFinite(o)?String(o):"null"}else{if(Ext.isBoolean(o)){return String(o)}else{var a=["{"],b,i,v;for(i in o){if(!o.getElementsByTagName){if(!useHasOwn||o.hasOwnProperty(i)){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(doEncode(i),":",v===null?"null":doEncode(v));b=true}}}}a.push("}");return a.join("")}}}}}}},m={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},encodeString=function(s){if(/["\\\x00-\x1f]/.test(s)){return'"'+s.replace(/([\x00-\x1f\\"])/g,function(a,b){var c=m[b];if(c){return c}c=b.charCodeAt();return"\\u00"+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+s+'"'},encodeArray=function(o){var a=["["],b,i,l=o.length,v;for(i=0;i<l;i+=1){v=o[i];switch(typeof v){case"undefined":case"function":case"unknown":break;default:if(b){a.push(",")}a.push(v===null?"null":Ext.util.JSON.encode(v));b=true}}a.push("]");return a.join("")};this.encodeDate=function(o){return'"'+o.getFullYear()+"-"+pad(o.getMonth()+1)+"-"+pad(o.getDate())+"T"+pad(o.getHours())+":"+pad(o.getMinutes())+":"+pad(o.getSeconds())+'"'};this.encode=function(){var ec;return function(o){if(!ec){ec=isNative()?JSON.stringify:doEncode}return ec(o)}}();this.decode=function(){var dc;return function(json){if(!dc){dc=isNative()?JSON.parse:doDecode}return dc(json)}}()})();Ext.encode=Ext.util.JSON.encode;Ext.decode=Ext.util.JSON.decode;Ext.EventManager=function(){var O,R,G=false,V=Ext.isGecko||Ext.isWebKit||Ext.isSafari,X=Ext.lib.Event,M=Ext.lib.Dom,F=document,a=window,A="DOMContentLoaded",W="complete",T=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,K=[];function L(D){var h=false,E=0,e=K.length,g=false,d;if(D){if(D.getElementById||D.navigator){for(;E<e;++E){d=K[E];if(d.el===D){h=d.id;break}}if(!h){h=Ext.id(D);K.push({id:h,el:D});g=true}}else{h=Ext.id(D)}if(!Ext.elCache[h]){Ext.Element.addToCache(new Ext.Element(D),h);if(g){Ext.elCache[h].skipGC=true}}}return h}function P(g,i,j,d,h,E){g=Ext.getDom(g);var k=L(g),e=Ext.elCache[k].events,D;D=X.on(g,i,h);e[i]=e[i]||[];e[i].push([j,h,E,D,d]);if(g.addEventListener&&i=="mousewheel"){var l=["DOMMouseScroll",h,false];g.addEventListener.apply(g,l);Ext.EventManager.addListener(a,"unload",function(){g.removeEventListener.apply(g,l)})}if(g==F&&i=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.addListener(h)}}function C(){if(window!=top){return false}try{F.documentElement.doScroll("left")}catch(D){return false}H();return true}function Y(D){if(Ext.isIE&&C()){return true}if(F.readyState==W){H();return true}G||(R=setTimeout(arguments.callee,2));return false}var U;function Q(D){U||(U=Ext.query("style, link[rel=stylesheet]"));if(U.length==F.styleSheets.length){H();return true}G||(R=setTimeout(arguments.callee,2));return false}function B(D){F.removeEventListener(A,arguments.callee,false);Q()}function H(D){if(!G){G=true;if(R){clearTimeout(R)}if(V){F.removeEventListener(A,H,false)}if(Ext.isIE&&Y.bindIE){F.detachEvent("onreadystatechange",Y)}X.un(a,"load",arguments.callee)}if(O&&!Ext.isReady){Ext.isReady=true;O.fire();O.listeners=[]}}function I(){O||(O=new Ext.util.Event());if(V){F.addEventListener(A,H,false)}if(Ext.isIE){if(!Y()){Y.bindIE=true;F.attachEvent("onreadystatechange",Y)}}else{if(Ext.isOpera){(F.readyState==W&&Q())||F.addEventListener(A,B,false)}else{if(Ext.isWebKit){Y()}}}X.on(a,"load",H)}function b(D,E){return function(){var d=Ext.toArray(arguments);if(E.target==Ext.EventObject.setEvent(d[0]).target){D.apply(this,d)}}}function Z(D,E,d){return function(g){d.delay(E.buffer,D,null,[new Ext.EventObjectImpl(g)])}}function S(D,E,g,d,e){return function(h){Ext.EventManager.removeListener(E,g,d,e);D(h)}}function N(D,E,d){return function(g){var h=new Ext.util.DelayedTask(D);if(!d.tasks){d.tasks=[]}d.tasks.push(h);h.delay(E.delay||10,D,null,[new Ext.EventObjectImpl(g)])}}function c(D,j,E,i,d){var k=(!E||typeof E=="boolean")?{}:E,g=Ext.getDom(D),e;i=i||k.fn;d=d||k.scope;if(!g){throw'Error listening for "'+j+'". Element "'+D+"\" doesn't exist."}function l(h){if(!Ext){return}h=Ext.EventObject.setEvent(h);var m;if(k.delegate){if(!(m=h.getTarget(k.delegate,g))){return}}else{m=h.target}if(k.stopEvent){h.stopEvent()}if(k.preventDefault){h.preventDefault()}if(k.stopPropagation){h.stopPropagation()}if(k.normalized===false){h=h.browserEvent}i.call(d||g,h,m,k)}if(k.target){l=b(l,k)}if(k.delay){l=N(l,k,i)}if(k.single){l=S(l,g,j,i,d)}if(k.buffer){e=new Ext.util.DelayedTask(l);l=Z(l,k,e)}P(g,j,i,e,l,d);return l}var J={addListener:function(E,g,k,d,h){if(typeof g=="object"){var j=g,D,i;for(D in j){i=j[D];if(!T.test(D)){if(Ext.isFunction(i)){c(E,D,j,i,j.scope)}else{c(E,D,i)}}}}else{c(E,g,h,k,d)}},removeListener:function(h,e,m,d){h=Ext.getDom(h);var o=L(h),q=h&&(Ext.elCache[o].events)[e]||[],j,n,p,g,E,D;for(n=0,E=q.length;n<E;n++){if(Ext.isArray(D=q[n])&&D[0]==m&&(!d||D[2]==d)){if(D[4]){D[4].cancel()}g=m.tasks&&m.tasks.length;if(g){while(g--){m.tasks[g].cancel()}delete m.tasks}j=D[1];X.un(h,e,X.extAdapter?D[3]:j);if(j&&h.addEventListener&&e=="mousewheel"){h.removeEventListener("DOMMouseScroll",j,false)}if(j&&h==F&&e=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.removeListener(j)}q.splice(n,1);if(q.length===0){delete Ext.elCache[o].events[e]}for(g in Ext.elCache[o].events){return false}Ext.elCache[o].events={};return false}}},removeAll:function(g){g=Ext.getDom(g);var m=L(g),E=Ext.elCache[m]||{},d=E.events||{},o,h,n,j,l,e,D;for(j in d){if(d.hasOwnProperty(j)){o=d[j];for(h=0,n=o.length;h<n;h++){l=o[h];if(l[4]){l[4].cancel()}if(l[0].tasks&&(e=l[0].tasks.length)){while(e--){l[0].tasks[e].cancel()}delete l.tasks}D=l[1];X.un(g,j,X.extAdapter?l[3]:D);if(g.addEventListener&&D&&j=="mousewheel"){g.removeEventListener("DOMMouseScroll",D,false)}if(D&&g==F&&j=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.removeListener(D)}}}}if(Ext.elCache[m]){Ext.elCache[m].events={}}},getListeners:function(D,d){D=Ext.getDom(D);var h=L(D),g=Ext.elCache[h]||{},E=g.events||{},e=[];if(E&&E[d]){return E[d]}else{return null}},purgeElement:function(d,h,l){d=Ext.getDom(d);var g=L(d),D=Ext.elCache[g]||{},E=D.events||{},e,k,j;if(l){if(E&&E.hasOwnProperty(l)){k=E[l];for(e=0,j=k.length;e<j;e++){Ext.EventManager.removeListener(d,l,k[e][0])}}}else{Ext.EventManager.removeAll(d)}if(h&&d&&d.childNodes){for(e=0,j=d.childNodes.length;e<j;e++){Ext.EventManager.purgeElement(d.childNodes[e],h,l)}}},_unload:function(){var D;for(D in Ext.elCache){Ext.EventManager.removeAll(D)}delete Ext.elCache;delete Ext.Element._flyweights;var g,E,d,e=Ext.lib.Ajax;(typeof e.conn=="object")?E=e.conn:E={};for(d in E){g=E[d];if(g){e.abort({conn:g,tId:d})}}},onDocumentReady:function(D,d,E){if(Ext.isReady){O||(O=new Ext.util.Event());O.addListener(D,d,E);O.fire();O.listeners=[]}else{if(!O){I()}E=E||{};E.delay=E.delay||1;O.addListener(D,d,E)}},fireDocReady:H};J.on=J.addListener;J.un=J.removeListener;J.stoppedMouseDownEvent=new Ext.util.Event();return J}();Ext.onReady=Ext.EventManager.onDocumentReady;(function(){var A=function(){var C=document.body||document.getElementsByTagName("body")[0];if(!C){return false}var D=[" ",Ext.isIE?"ext-ie "+(Ext.isIE6?"ext-ie6":(Ext.isIE7?"ext-ie7":(Ext.isIE8?"ext-ie8":"ext-ie9"))):Ext.isGecko?"ext-gecko "+(Ext.isGecko2?"ext-gecko2":"ext-gecko3"):Ext.isOpera?"ext-opera":Ext.isWebKit?"ext-webkit":""];if(Ext.isSafari){D.push("ext-safari "+(Ext.isSafari2?"ext-safari2":(Ext.isSafari3?"ext-safari3":"ext-safari4")))}else{if(Ext.isChrome){D.push("ext-chrome")}}if(Ext.isMac){D.push("ext-mac")}if(Ext.isLinux){D.push("ext-linux")}if(Ext.isStrict||Ext.isBorderBox){var B=C.parentNode;if(B){if(!Ext.isStrict){Ext.fly(B,"_internal").addClass("x-quirks");if(Ext.isIE&&!Ext.isStrict){Ext.isIEQuirks=true}}Ext.fly(B,"_internal").addClass(((Ext.isStrict&&Ext.isIE)||(!Ext.enableForcedBoxModel&&!Ext.isIE))?" ext-strict":" ext-border-box")}}if(Ext.enableForcedBoxModel&&!Ext.isIE){Ext.isForcedBorderBox=true;D.push("ext-forced-border-box")}Ext.fly(C,"_internal").addClass(D);return true};if(!A()){Ext.onReady(A)}})();(function(){var A=Ext.apply(Ext.supports,{correctRightMargin:true,correctTransparentColor:true,cssFloat:true});var B=function(){var E=document.createElement("div"),F=document,D,C;E.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="float:left;background-color:transparent;">';F.body.appendChild(E);C=E.lastChild;if((D=F.defaultView)){if(D.getComputedStyle(E.firstChild.firstChild,null).marginRight!="0px"){A.correctRightMargin=false}if(D.getComputedStyle(C,null).backgroundColor!="transparent"){A.correctTransparentColor=false}}A.cssFloat=!!C.style.cssFloat;F.body.removeChild(E)};if(Ext.isReady){B()}else{Ext.onReady(B)}})();Ext.EventObject=function(){var A=Ext.lib.Event,C=/(dbl)?click/,B={3:13,63234:37,63235:39,63232:38,63233:40,63276:33,63277:34,63272:46,63273:36,63275:35},D=Ext.isIE?{1:0,4:1,2:2}:{0:0,1:1,2:2};Ext.EventObjectImpl=function(E){if(E){this.setEvent(E.browserEvent||E)}};Ext.EventObjectImpl.prototype={setEvent:function(E){var F=this;if(E==F||(E&&E.browserEvent)){return E}F.browserEvent=E;if(E){F.button=E.button?D[E.button]:(E.which?E.which-1:-1);if(C.test(E.type)&&F.button==-1){F.button=0}F.type=E.type;F.shiftKey=E.shiftKey;F.ctrlKey=E.ctrlKey||E.metaKey||false;F.altKey=E.altKey;F.keyCode=E.keyCode;F.charCode=E.charCode;F.target=A.getTarget(E);F.xy=A.getXY(E)}else{F.button=-1;F.shiftKey=false;F.ctrlKey=false;F.altKey=false;F.keyCode=0;F.charCode=0;F.target=null;F.xy=[0,0]}return F},stopEvent:function(){var E=this;if(E.browserEvent){if(E.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(E)}A.stopEvent(E.browserEvent)}},preventDefault:function(){if(this.browserEvent){A.preventDefault(this.browserEvent)}},stopPropagation:function(){var E=this;if(E.browserEvent){if(E.browserEvent.type=="mousedown"){Ext.EventManager.stoppedMouseDownEvent.fire(E)}A.stopPropagation(E.browserEvent)}},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.normalizeKey(this.keyCode||this.charCode)},normalizeKey:function(E){return Ext.isSafari?(B[E]||E):E},getPageX:function(){return this.xy[0]},getPageY:function(){return this.xy[1]},getXY:function(){return this.xy},getTarget:function(G,F,E){return G?Ext.fly(this.target).findParent(G,F,E):(E?Ext.get(this.target):this.target)},getRelatedTarget:function(){return this.browserEvent?A.getRelatedTarget(this.browserEvent):null},getWheelDelta:function(){var F=this.browserEvent;var E=0;if(F.wheelDelta){E=F.wheelDelta/120}else{if(F.detail){E=-F.detail/3}}return E},within:function(E,H,F){if(E){var G=this[H?"getRelatedTarget":"getTarget"]();return G&&((F?(G==Ext.getDom(E)):false)||Ext.fly(E).contains(G))}return false}};return new Ext.EventObjectImpl()}();Ext.Loader=Ext.apply({},{load:function(B,G,F,E){var F=F||this,K=document.getElementsByTagName("head")[0],J=document.createDocumentFragment(),D=B.length,I=0,H=this;var C=function(L){K.appendChild(H.buildScriptTag(B[L],A))};var A=function(){I++;if(D==I&&typeof G=="function"){G.call(F)}else{if(E===true){C(I)}}};if(E===true){C.call(this,0)}else{Ext.each(B,function(M,L){J.appendChild(this.buildScriptTag(M,A))},this);K.appendChild(J)}},buildScriptTag:function(B,A){var C=document.createElement("script");C.type="text/javascript";C.src=B;if(C.readyState){C.onreadystatechange=function(){if(C.readyState=="loaded"||C.readyState=="complete"){C.onreadystatechange=null;A()}}}else{C.onload=A}return C}});Ext.ns("Ext.grid","Ext.list","Ext.dd","Ext.tree","Ext.form","Ext.menu","Ext.state","Ext.layout.boxOverflow","Ext.app","Ext.ux","Ext.chart","Ext.direct","Ext.slider");Ext.apply(Ext,function(){var A=Ext,B=0,C=null;return{emptyFn:function(){},BLANK_IMAGE_URL:Ext.isIE6||Ext.isIE7||Ext.isAir?"http://www.extjs.com/s.gif":"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",extendX:function(E,D){return Ext.extend(E,D(E.prototype))},getDoc:function(){return Ext.get(document)},num:function(D,E){D=Number(Ext.isEmpty(D)||Ext.isArray(D)||typeof D=="boolean"||(typeof D=="string"&&D.trim().length==0)?NaN:D);return isNaN(D)?E:D},value:function(D,E,F){return Ext.isEmpty(D,F)?E:D},escapeRe:function(D){return D.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},sequence:function(D,F,E,G){D[F]=D[F].createSequence(E,G)},addBehaviors:function(G){if(!Ext.isReady){Ext.onReady(function(){Ext.addBehaviors(G)})}else{var E={},D,H,F;for(H in G){if((D=H.split("@"))[1]){F=D[0];if(!E[F]){E[F]=Ext.select(F)}E[F].on(D[1],G[H])}}E=null}},getScrollBarWidth:function(F){if(!Ext.isReady){return 0}if(F===true||C===null){var G=Ext.getBody().createChild('<div class="x-hide-offsets" style="width:100px;height:50px;overflow:hidden;"><div style="height:200px;"></div></div>'),E=G.child("div",true);var H=E.offsetWidth;G.setStyle("overflow",(Ext.isWebKit||Ext.isGecko)?"auto":"scroll");var D=E.offsetWidth;G.remove();C=H-D+2}return C},combine:function(){var G=arguments,F=G.length,D=[];for(var E=0;E<F;E++){var H=G[E];if(Ext.isArray(H)){D=D.concat(H)}else{if(H.length!==undefined&&!H.substr){D=D.concat(Array.prototype.slice.call(H,0))}else{D.push(H)}}}return D},copyTo:function(D,E,F){if(typeof F=="string"){F=F.split(/[,;\s]/)}Ext.each(F,function(G){if(E.hasOwnProperty(G)){D[G]=E[G]}},this);return D},destroy:function(){Ext.each(arguments,function(D){if(D){if(Ext.isArray(D)){this.destroy.apply(this,D)}else{if(typeof D.destroy=="function"){D.destroy()}else{if(D.dom){D.remove()}}}}},this)},destroyMembers:function(F,H,G,J){for(var E=1,D=arguments,I=D.length;E<I;E++){Ext.destroy(F[D[E]]);delete F[D[E]]}},clean:function(E){var D=[];Ext.each(E,function(F){if(!!F){D.push(F)}});return D},unique:function(E){var D=[],F={};Ext.each(E,function(G){if(!F[G]){D.push(G)}F[G]=true});return D},flatten:function(E){var D=[];function F(G){Ext.each(G,function(H){if(Ext.isArray(H)){F(H)}else{D.push(H)}});return D}return F(E)},min:function(E,F){var D=E[0];F=F||function(H,G){return H<G?-1:1};Ext.each(E,function(G){D=F(D,G)==-1?D:G});return D},max:function(E,F){var D=E[0];F=F||function(H,G){return H>G?1:-1};Ext.each(E,function(G){D=F(D,G)==1?D:G});return D},mean:function(D){return D.length>0?Ext.sum(D)/D.length:undefined},sum:function(E){var D=0;Ext.each(E,function(F){D+=F});return D},partition:function(E,F){var D=[[],[]];Ext.each(E,function(H,G,I){D[(F&&F(H,G,I))||(!F&&H)?0:1].push(H)});return D},invoke:function(F,D){var E=[],G=Array.prototype.slice.call(arguments,2);Ext.each(F,function(I,H){if(I&&typeof I[D]=="function"){E.push(I[D].apply(I,G))}else{E.push(undefined)}});return E},pluck:function(F,D){var E=[];Ext.each(F,function(G){E.push(G[D])});return E},zip:function(){var I=Ext.partition(arguments,function(L){return typeof L!="function"}),E=I[0],H=I[1][0],J=Ext.max(Ext.pluck(E,"length")),K=[];for(var G=0;G<J;G++){K[G]=[];if(H){K[G]=H.apply(H,Ext.pluck(E,G))}else{for(var F=0,D=E.length;F<D;F++){K[G].push(E[F][G])}}}return K},getCmp:function(D){return Ext.ComponentMgr.get(D)},useShims:A.isIE6||(A.isMac&&A.isGecko2),type:function(D){if(D===undefined||D===null){return false}if(D.htmlElement){return"element"}var E=typeof D;if(E=="object"&&D.nodeName){switch(D.nodeType){case 1:return"element";case 3:return(/\S/).test(D.nodeValue)?"textnode":"whitespace"}}if(E=="object"||E=="function"){switch(D.constructor){case Array:return"array";case RegExp:return"regexp";case Date:return"date"}if(typeof D.length=="number"&&typeof D.item=="function"){return"nodelist"}}return E},intercept:function(D,F,E,G){D[F]=D[F].createInterceptor(E,G)},callback:function(D,E,G,F){if(typeof D=="function"){if(F){D.defer(F,E,G||[])}else{D.apply(E,G||[])}}}}}());Ext.apply(Function.prototype,{createSequence:function(A,C){var B=this;return(typeof A!="function")?this:function(){var D=B.apply(this||window,arguments);A.apply(C||this||window,arguments);return D}}});Ext.applyIf(String,{escape:function(A){return A.replace(/('|\\)/g,"\\$1")},leftPad:function(D,A,C){var B=String(D);if(!C){C=" "}while(B.length<A){B=C+B}return B}});String.prototype.toggle=function(A,B){return this==A?B:A};String.prototype.trim=function(){var A=/^\s+|\s+$/g;return function(){return this.replace(A,"")}}();Date.prototype.getElapsed=function(A){return Math.abs((A||new Date()).getTime()-this.getTime())};Ext.applyIf(Number.prototype,{constrain:function(A,B){return Math.min(Math.max(this,A),B)}});Ext.lib.Dom.getRegion=function(A){return Ext.lib.Region.getRegion(A)};Ext.lib.Region=function(E,A,D,B){var C=this;C.top=E;C[1]=E;C.right=A;C.bottom=D;C.left=B;C[0]=B};Ext.lib.Region.prototype={contains:function(B){var A=this;return(B.left>=A.left&&B.right<=A.right&&B.top>=A.top&&B.bottom<=A.bottom)},getArea:function(){var A=this;return((A.bottom-A.top)*(A.right-A.left))},intersect:function(F){var C=this,E=Math.max(C.top,F.top),A=Math.min(C.right,F.right),D=Math.min(C.bottom,F.bottom),B=Math.max(C.left,F.left);if(D>=E&&A>=B){return new Ext.lib.Region(E,A,D,B)}},union:function(F){var C=this,E=Math.min(C.top,F.top),A=Math.max(C.right,F.right),D=Math.max(C.bottom,F.bottom),B=Math.min(C.left,F.left);return new Ext.lib.Region(E,A,D,B)},constrainTo:function(A){var B=this;B.top=B.top.constrain(A.top,A.bottom);B.bottom=B.bottom.constrain(A.top,A.bottom);B.left=B.left.constrain(A.left,A.right);B.right=B.right.constrain(A.left,A.right);return B},adjust:function(E,B,D,A){var C=this;C.top+=E;C.left+=B;C.right+=A;C.bottom+=D;return C}};Ext.lib.Region.getRegion=function(A){var C=Ext.lib.Dom.getXY(A),F=C[1],B=C[0]+A.offsetWidth,E=C[1]+A.offsetHeight,D=C[0];return new Ext.lib.Region(F,B,E,D)};Ext.lib.Point=function(B,C){if(Ext.isArray(B)){C=B[1];B=B[0]}var A=this;A.x=A.right=A.left=A[0]=B;A.y=A.top=A.bottom=A[1]=C};Ext.lib.Point.prototype=new Ext.lib.Region();Ext.apply(Ext.DomHelper,function(){var D,B="afterbegin",A="afterend",E="beforebegin",H="beforeend",G=/tag|children|cn|html$/i;function C(I,K,L,O,M,N){I=Ext.getDom(I);var J;if(D.useDom){J=F(K,null);if(N){I.appendChild(J)}else{(M=="firstChild"?I:I.parentNode).insertBefore(J,I[M]||I)}}else{J=Ext.DomHelper.insertHtml(O,I,Ext.DomHelper.createHtml(K))}return L?Ext.get(J,true):J}function F(N,J){var K,O=document,P,I,L,M;if(Ext.isArray(N)){K=O.createDocumentFragment();for(var Q=0,R=N.length;Q<R;Q++){F(N[Q],K)}}else{if(typeof N=="string"){K=O.createTextNode(N)}else{K=O.createElement(N.tag||"div");P=!!K.setAttribute;for(var I in N){if(!G.test(I)){L=N[I];if(I=="cls"){K.className=L}else{if(P){K.setAttribute(I,L)}else{K[I]=L}}}}Ext.DomHelper.applyStyles(K,N.style);if((M=N.children||N.cn)){F(M,K)}else{if(N.html){K.innerHTML=N.html}}}}if(J){J.appendChild(K)}return K}D={createTemplate:function(J){var I=Ext.DomHelper.createHtml(J);return new Ext.Template(I)},useDom:false,insertBefore:function(I,J,K){return C(I,J,K,E)},insertAfter:function(I,J,K){return C(I,J,K,A,"nextSibling")},insertFirst:function(I,J,K){return C(I,J,K,B,"firstChild")},append:function(I,J,K){return C(I,J,K,H,"",true)},createDom:F};return D}());Ext.apply(Ext.Template.prototype,{disableFormats:false,re:/\{([\w\-]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?\}/g,argsRe:/^\s*['"](.*)["']\s*$/,compileARe:/\\/g,compileBRe:/(\r\n|\n)/g,compileCRe:/'/g,applyTemplate:function(E){var C=this,D=C.disableFormats!==true,A=Ext.util.Format,B=C;if(C.compiled){return C.compiled(E)}function F(J,K,H,M){if(H&&D){if(H.substr(0,5)=="this."){return B.call(H.substr(5),E[K],E)}else{if(M){var G=C.argsRe;M=M.split(",");for(var I=0,L=M.length;I<L;I++){M[I]=M[I].replace(G,"$1")}M=[E[K]].concat(M)}else{M=[E[K]]}return A[H].apply(A,M)}}else{return E[K]!==undefined?E[K]:""}}return C.html.replace(C.re,F)},compile:function(){var me=this,fm=Ext.util.Format,useF=me.disableFormats!==true,sep=Ext.isGecko?"+":",",body;function fn(m,name,format,args){if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="(values['"+name+"'] == undefined ? '' : "}return"'"+sep+format+"values['"+name+"']"+args+")"+sep+"'"}if(Ext.isGecko){body="this.compiled = function(values){ return '"+me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn)+"';};"}else{body=["this.compiled = function(values){ return ['"];body.push(me.html.replace(me.compileARe,"\\\\").replace(me.compileBRe,"\\n").replace(me.compileCRe,"\\'").replace(me.re,fn));body.push("'].join('');};");body=body.join("")}eval(body);return me},call:function(C,A,B){return this[C](A,B)}});Ext.Template.prototype.apply=Ext.Template.prototype.applyTemplate;Ext.util.Functions={createInterceptor:function(A,B,C){var D=A;if(!Ext.isFunction(B)){return A}else{return function(){var E=this,F=arguments;B.target=E;B.method=A;return(B.apply(C||E||window,F)!==false)?A.apply(E||window,F):null}}},createDelegate:function(C,A,D,B){if(!Ext.isFunction(C)){return C}return function(){var F=D||arguments;if(B===true){F=Array.prototype.slice.call(arguments,0);F=F.concat(D)}else{if(Ext.isNumber(B)){F=Array.prototype.slice.call(arguments,0);var E=[B,0].concat(D);Array.prototype.splice.apply(F,E)}}return C.apply(A||window,F)}},defer:function(C,D,A,E,B){C=Ext.util.Functions.createDelegate(C,A,E,B);if(D>0){return setTimeout(C,D)}C();return 0},createSequence:function(A,B,C){if(!Ext.isFunction(B)){return A}else{return function(){var D=A.apply(this||window,arguments);B.apply(C||this||window,arguments);return D}}}};Ext.defer=Ext.util.Functions.defer;Ext.createInterceptor=Ext.util.Functions.createInterceptor;Ext.createSequence=Ext.util.Functions.createSequence;Ext.createDelegate=Ext.util.Functions.createDelegate;Ext.apply(Ext.util.Observable.prototype,function(){function A(F){var C=(this.methodEvents=this.methodEvents||{})[F],B,E,H,D=this;if(!C){this.methodEvents[F]=C={};C.originalFn=this[F];C.methodName=F;C.before=[];C.after=[];var G=function(I,J,K){if((E=I.apply(J||D,K))!==undefined){if(typeof E=="object"){if(E.returnValue!==undefined){B=E.returnValue}else{B=E}H=!!E.cancel}else{if(E===false){H=true}else{B=E}}}};this[F]=function(){var L=Array.prototype.slice.call(arguments,0),J;B=E=undefined;H=false;for(var I=0,K=C.before.length;I<K;I++){J=C.before[I];G(J.fn,J.scope,L);if(H){return B}}if((E=C.originalFn.apply(D,L))!==undefined){B=E}for(var I=0,K=C.after.length;I<K;I++){J=C.after[I];G(J.fn,J.scope,L);if(H){return B}}return B}}return C}return{beforeMethod:function(C,B,D){A.call(this,C).before.push({fn:B,scope:D})},afterMethod:function(C,B,D){A.call(this,C).after.push({fn:B,scope:D})},removeMethodListener:function(E,D,F){var C=this.getMethodEvent(E);for(var B=0,G=C.before.length;B<G;B++){if(C.before[B].fn==D&&C.before[B].scope==F){C.before.splice(B,1);return}}for(var B=0,G=C.after.length;B<G;B++){if(C.after[B].fn==D&&C.after[B].scope==F){C.after.splice(B,1);return}}},relayEvents:function(D,G){var E=this;function C(I){return function(){return E.fireEvent.apply(E,[I].concat(Array.prototype.slice.call(arguments,0)))}}for(var B=0,F=G.length;B<F;B++){var H=G[B];E.events[H]=E.events[H]||true;D.on(H,C(H),E)}},enableBubble:function(F){var D=this;if(!Ext.isEmpty(F)){F=Ext.isArray(F)?F:Array.prototype.slice.call(arguments,0);for(var B=0,E=F.length;B<E;B++){var G=F[B];G=G.toLowerCase();var C=D.events[G]||true;if(typeof C=="boolean"){C=new Ext.util.Event(D,G);D.events[G]=C}C.bubble=true}}}}}());Ext.util.Observable.capture=function(A,B,C){A.fireEvent=A.fireEvent.createInterceptor(B,C)};Ext.util.Observable.observeClass=function(B,A){if(B){if(!B.fireEvent){Ext.apply(B,new Ext.util.Observable());Ext.util.Observable.capture(B.prototype,B.fireEvent,B)}if(typeof A=="object"){B.on(A)}return B}};Ext.apply(Ext.EventManager,function(){var C,E,A,G,J=Ext.lib.Dom,H=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/,I=Ext.EventManager._unload,F=0,B=0,K=Ext.isWebKit?Ext.num(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1])>=525:!((Ext.isGecko&&!Ext.isWindows)||Ext.isOpera);return{_unload:function(){Ext.EventManager.un(window,"resize",this.fireWindowResize,this);I.call(Ext.EventManager)},doResizeEvent:function(){var D=J.getViewHeight(),L=J.getViewWidth();if(B!=D||F!=L){C.fire(F=L,B=D)}},onWindowResize:function(D,M,L){if(!C){C=new Ext.util.Event();E=new Ext.util.DelayedTask(this.doResizeEvent);Ext.EventManager.on(window,"resize",this.fireWindowResize,this)}C.addListener(D,M,L)},fireWindowResize:function(){if(C){E.delay(100)}},onTextResize:function(D,M,L){if(!A){A=new Ext.util.Event();var N=new Ext.Element(document.createElement("div"));N.dom.className="x-text-resize";N.dom.innerHTML="X";N.appendTo(document.body);G=N.dom.offsetHeight;setInterval(function(){if(N.dom.offsetHeight!=G){A.fire(G,G=N.dom.offsetHeight)}},this.textResizeInterval)}A.addListener(D,M,L)},removeResizeListener:function(D,L){if(C){C.removeListener(D,L)}},fireResize:function(){if(C){C.fire(J.getViewWidth(),J.getViewHeight())}},textResizeInterval:50,ieDeferSrc:false,getKeyEvent:function(){return K?"keydown":"keypress"},useKeydown:K}}());Ext.EventManager.on=Ext.EventManager.addListener;Ext.apply(Ext.EventObjectImpl.prototype,{BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,CONTROL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGEUP:33,PAGE_DOWN:34,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,isNavKeyPress:function(){var A=this,B=this.normalizeKey(A.keyCode);return(B>=33&&B<=40)||B==A.RETURN||B==A.TAB||B==A.ESC},isSpecialKey:function(){var A=this.normalizeKey(this.keyCode);return(this.type=="keypress"&&this.ctrlKey)||this.isNavKeyPress()||(A==this.BACKSPACE)||(A>=16&&A<=20)||(A>=44&&A<=46)},getPoint:function(){return new Ext.lib.Point(this.xy[0],this.xy[1])},hasModifier:function(){return((this.ctrlKey||this.altKey)||this.shiftKey)}});Ext.Element.addMethods({swallowEvent:function(C,D){var A=this;function B(E){E.stopPropagation();if(D){E.preventDefault()}}if(Ext.isArray(C)){Ext.each(C,function(E){A.on(E,B)});return A}A.on(C,B);return A},relayEvent:function(B,A){this.on(B,function(C){A.fireEvent(B,C)})},clean:function(B){var E=this,A=E.dom,C=A.firstChild,F=-1;if(Ext.Element.data(A,"isCleaned")&&B!==true){return E}while(C){var D=C.nextSibling;if(C.nodeType==3&&!(/\S/.test(C.nodeValue))){A.removeChild(C)}else{C.nodeIndex=++F}C=D}Ext.Element.data(A,"isCleaned",true);return E},load:function(){var A=this.getUpdater();A.update.apply(A,arguments);return this},getUpdater:function(){return this.updateManager||(this.updateManager=new Ext.Updater(this))},update:function(html,loadScripts,callback){if(!this.dom){return this}html=html||"";if(loadScripts!==true){this.dom.innerHTML=html;if(typeof callback=="function"){callback()}return this}var id=Ext.id(),dom=this.dom;html+='<span id="'+id+'"></span>';Ext.lib.Event.onAvailable(id,function(){var DOC=document,hd=DOC.getElementsByTagName("head")[0],re=/(?:<script([^>]*)?>)((\n|\r|.)*?)(?:<\/script>)/ig,srcRe=/\ssrc=([\'\"])(.*?)\1/i,typeRe=/\stype=([\'\"])(.*?)\1/i,match,attrs,srcMatch,typeMatch,el,s;while((match=re.exec(html))){attrs=match[1];srcMatch=attrs?attrs.match(srcRe):false;if(srcMatch&&srcMatch[2]){s=DOC.createElement("script");s.src=srcMatch[2];typeMatch=attrs.match(typeRe);if(typeMatch&&typeMatch[2]){s.type=typeMatch[2]}hd.appendChild(s)}else{if(match[2]&&match[2].length>0){if(window.execScript){window.execScript(match[2])}else{window.eval(match[2])}}}}el=DOC.getElementById(id);if(el){Ext.removeNode(el)}if(typeof callback=="function"){callback()}});dom.innerHTML=html.replace(/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,"");return this},removeAllListeners:function(){this.removeAnchor();Ext.EventManager.removeAll(this.dom);return this},createProxy:function(D,A,B){D=(typeof D=="object")?D:{tag:"div",cls:D};var E=this,C=A?Ext.DomHelper.append(A,D,true):Ext.DomHelper.insertBefore(E.dom,D,true);if(B&&E.setBox&&E.getBox){C.setBox(E.getBox())}return C}});Ext.Element.prototype.getUpdateManager=Ext.Element.prototype.getUpdater;Ext.Element.addMethods({getAnchorXY:function(A,N,B){A=(A||"tl").toLowerCase();B=B||{};var M=this,F=M.dom==document.body||M.dom==document,D=B.width||F?Ext.lib.Dom.getViewWidth():M.getWidth(),G=B.height||F?Ext.lib.Dom.getViewHeight():M.getHeight(),E,C=Math.round,J=M.getXY(),L=M.getScroll(),K=F?L.left:!N?J[0]:0,H=F?L.top:!N?J[1]:0,I={c:[C(D*0.5),C(G*0.5)],t:[C(D*0.5),0],l:[0,C(G*0.5)],r:[D,C(G*0.5)],b:[C(D*0.5),G],tl:[0,0],bl:[0,G],br:[D,G],tr:[D,0]};E=I[A];return[E[0]+K,E[1]+H]},anchorTo:function(F,I,G,E,B,H){var J=this,C=J.dom,D=!Ext.isEmpty(B),K=function(){Ext.fly(C).alignTo(F,I,G,E);Ext.callback(H,Ext.fly(C))},A=this.getAnchor();this.removeAnchor();Ext.apply(A,{fn:K,scroll:D});Ext.EventManager.onWindowResize(K,null);if(D){Ext.EventManager.on(window,"scroll",K,null,{buffer:!isNaN(B)?B:50})}K.call(J);return J},removeAnchor:function(){var A=this,B=this.getAnchor();if(B&&B.fn){Ext.EventManager.removeResizeListener(B.fn);if(B.scroll){Ext.EventManager.un(window,"scroll",B.fn)}delete B.fn}return A},getAnchor:function(){var C=Ext.Element.data,A=this.dom;if(!A){return}var B=C(A,"_anchor");if(!B){B=C(A,"_anchor",{})}return B},getAlignToXY:function(H,B,P){H=Ext.get(H);if(!H||!H.dom){throw"Element.alignToXY with an element that doesn't exist"}P=P||[0,0];B=(!B||B=="?"?"tl-bl?":(!(/-/).test(B)&&B!==""?"tl-"+B:B||"tl-bl")).toLowerCase();var I=this,N=I.dom,K,L,X,Y,D,G,A,V=Ext.lib.Dom.getViewWidth()-10,Q=Ext.lib.Dom.getViewHeight()-10,U,T,E,C,e,b,R=document,O=R.documentElement,S=R.body,Z=(O.scrollLeft||S.scrollLeft||0)+5,a=(O.scrollTop||S.scrollTop||0)+5,M=false,J="",W="",F=B.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!F){throw"Element.alignTo with an invalid alignment "+B}J=F[1];W=F[2];M=!!F[3];K=I.getAnchorXY(J,true);L=H.getAnchorXY(W,false);X=L[0]-K[0]+P[0];Y=L[1]-K[1]+P[1];if(M){D=I.getWidth();G=I.getHeight();A=H.getRegion();U=J.charAt(0);T=J.charAt(J.length-1);E=W.charAt(0);C=W.charAt(W.length-1);e=((U=="t"&&E=="b")||(U=="b"&&E=="t"));b=((T=="r"&&C=="l")||(T=="l"&&C=="r"));if(X+D>V+Z){X=b?A.left-D:V+Z-D}if(X<Z){X=b?A.right:Z}if(Y+G>Q+a){Y=e?A.top-G:Q+a-G}if(Y<a){Y=e?A.bottom:a}}return[X,Y]},alignTo:function(E,D,B,C){var A=this;return A.setXY(A.getAlignToXY(E,D,B),A.preanim&&!!C?A.preanim(arguments,3):false)},adjustForConstraints:function(A,C,B){return this.getConstrainToXY(C||document,false,B,A)||A},getConstrainToXY:function(A,E,C,B){var D={top:0,left:0,bottom:0,right:0};return function(L,R,T,X){L=Ext.get(L);T=T?Ext.applyIf(T,D):D;var O,J,W=0,N=0;if(L.dom==document.body||L.dom==document){O=Ext.lib.Dom.getViewWidth();J=Ext.lib.Dom.getViewHeight()}else{O=L.dom.clientWidth;J=L.dom.clientHeight;if(!R){var M=L.getXY();W=M[0];N=M[1]}}var F=L.getScroll();W+=T.left+F.left;N+=T.top+F.top;O-=T.right;J-=T.bottom;var S=W+O,U=N+J,I=X||(!R?this.getXY():[this.getLeft(true),this.getTop(true)]),V=I[0],Q=I[1],P=this.getConstrainOffset(),H=this.dom.offsetWidth+P,K=this.dom.offsetHeight+P;var G=false;if((V+H)>S){V=S-H;G=true}if((Q+K)>U){Q=U-K;G=true}if(V<W){V=W;G=true}if(Q<N){Q=N;G=true}return G?[V,Q]:false}}(),getConstrainOffset:function(){return 0},getCenterXY:function(){return this.getAlignToXY(document,"c-c")},center:function(A){return this.alignTo(A||document,"c-c")}});Ext.Element.addMethods({select:function(A,B){return Ext.Element.select(A,B,this.dom)}});Ext.apply(Ext.Element.prototype,function(){var A=Ext.getDom,B=Ext.get,C=Ext.DomHelper;return{insertSibling:function(D,I,H){var E=this,F,J=(I||"before").toLowerCase()=="after",G;if(Ext.isArray(D)){G=E;Ext.each(D,function(K){F=Ext.fly(G,"_internal").insertSibling(K,I,H);if(J){G=F}});return F}D=D||{};if(D.nodeType||D.dom){F=E.dom.parentNode.insertBefore(A(D),J?E.dom.nextSibling:E.dom);if(!H){F=B(F)}}else{if(J&&!E.dom.nextSibling){F=C.append(E.dom.parentNode,D,!H)}else{F=C[J?"insertAfter":"insertBefore"](E.dom,D,!H)}}return F}}}());Ext.Element.boxMarkup='<div class="{0}-tl"><div class="{0}-tr"><div class="{0}-tc"></div></div></div><div class="{0}-ml"><div class="{0}-mr"><div class="{0}-mc"></div></div></div><div class="{0}-bl"><div class="{0}-br"><div class="{0}-bc"></div></div></div>';Ext.Element.addMethods(function(){var A="_internal",B=/(\d+\.?\d+)px/;return{applyStyles:function(C){Ext.DomHelper.applyStyles(this.dom,C);return this},getStyles:function(){var C={};Ext.each(arguments,function(D){C[D]=this.getStyle(D)},this);return C},setOverflow:function(D){var C=this.dom;if(D=="auto"&&Ext.isMac&&Ext.isGecko2){C.style.overflow="hidden";(function(){C.style.overflow="auto"}).defer(1)}else{C.style.overflow=D}},boxWrap:function(D){D=D||"x-box";var C=Ext.get(this.insertHtml("beforeBegin","<div class='"+D+"'>"+String.format(Ext.Element.boxMarkup,D)+"</div>"));Ext.DomQuery.selectNode("."+D+"-mc",C.dom).appendChild(this.dom);return C},setSize:function(F,C,D){var E=this;if(typeof F=="object"){C=F.height;F=F.width}F=E.adjustWidth(F);C=E.adjustHeight(C);if(!D||!E.anim){E.dom.style.width=E.addUnits(F);E.dom.style.height=E.addUnits(C)}else{E.anim({width:{to:F},height:{to:C}},E.preanim(arguments,2))}return E},getComputedHeight:function(){var D=this,C=Math.max(D.dom.offsetHeight,D.dom.clientHeight);if(!C){C=parseFloat(D.getStyle("height"))||0;if(!D.isBorderBox()){C+=D.getFrameWidth("tb")}}return C},getComputedWidth:function(){var C=Math.max(this.dom.offsetWidth,this.dom.clientWidth);if(!C){C=parseFloat(this.getStyle("width"))||0;if(!this.isBorderBox()){C+=this.getFrameWidth("lr")}}return C},getFrameWidth:function(D,C){return C&&this.isBorderBox()?0:(this.getPadding(D)+this.getBorderWidth(D))},addClassOnOver:function(C){this.hover(function(){Ext.fly(this,A).addClass(C)},function(){Ext.fly(this,A).removeClass(C)});return this},addClassOnFocus:function(C){this.on("focus",function(){Ext.fly(this,A).addClass(C)},this.dom);this.on("blur",function(){Ext.fly(this,A).removeClass(C)},this.dom);return this},addClassOnClick:function(D){var C=this.dom;this.on("mousedown",function(){Ext.fly(C,A).addClass(D);var E=Ext.getDoc(),F=function(){Ext.fly(C,A).removeClass(D);E.removeListener("mouseup",F)};E.on("mouseup",F)});return this},getViewSize:function(){var F=document,D=this.dom,E=(D==F||D==F.body);if(E){var C=Ext.lib.Dom;return{width:C.getViewWidth(),height:C.getViewHeight()}}else{return{width:D.clientWidth,height:D.clientHeight}}},getStyleSize:function(){var I=this,F,G,H=document,J=this.dom,E=(J==H||J==H.body),D=J.style;if(E){var C=Ext.lib.Dom;return{width:C.getViewWidth(),height:C.getViewHeight()}}if(D.width&&D.width!="auto"){F=parseFloat(D.width);if(I.isBorderBox()){F-=I.getFrameWidth("lr")}}if(D.height&&D.height!="auto"){G=parseFloat(D.height);if(I.isBorderBox()){G-=I.getFrameWidth("tb")}}return{width:F||I.getWidth(true),height:G||I.getHeight(true)}},getSize:function(C){return{width:this.getWidth(C),height:this.getHeight(C)}},repaint:function(){var C=this.dom;this.addClass("x-repaint");setTimeout(function(){Ext.fly(C).removeClass("x-repaint")},1);return this},unselectable:function(){this.dom.unselectable="on";return this.swallowEvent("selectstart",true).applyStyles("-moz-user-select:none;-khtml-user-select:none;").addClass("x-unselectable")},getMargins:function(F){var D=this,C,G={t:"top",l:"left",r:"right",b:"bottom"},E={};if(!F){for(C in D.margins){E[G[C]]=parseFloat(D.getStyle(D.margins[C]))||0}return E}else{return D.addStyles.call(D,F,D.margins)}}}}());Ext.Element.addMethods({setBox:function(C,B,D){var E=this,F=C.width,A=C.height;if((B&&!E.autoBoxAdjust)&&!E.isBorderBox()){F-=(E.getBorderWidth("lr")+E.getPadding("lr"));A-=(E.getBorderWidth("tb")+E.getPadding("tb"))}E.setBounds(C.x,C.y,F,A,E.animTest.call(E,arguments,D,2));return E},getBox:function(B,P){var M=this,G,I,H,A=M.getBorderWidth,L=M.getPadding,K,C,E,O;if(!P){G=M.getXY()}else{I=parseInt(M.getStyle("left"),10)||0;H=parseInt(M.getStyle("top"),10)||0;G=[I,H]}var N=M.dom,D=N.offsetWidth,J=N.offsetHeight,F;if(!B){F={x:G[0],y:G[1],0:G[0],1:G[1],width:D,height:J}}else{K=A.call(M,"l")+L.call(M,"l");C=A.call(M,"r")+L.call(M,"r");E=A.call(M,"t")+L.call(M,"t");O=A.call(M,"b")+L.call(M,"b");F={x:G[0]+K,y:G[1]+E,0:G[0]+K,1:G[1]+E,width:D-(K+C),height:J-(E+O)}}F.right=F.x+F.width;F.bottom=F.y+F.height;return F},move:function(A,G,C){var H=this,D=H.getXY(),I=D[0],J=D[1],F=[I-G,J],B=[I+G,J],E=[I,J-G],K=[I,J+G],L={l:F,left:F,r:B,right:B,t:E,top:E,up:E,b:K,bottom:K,down:K};A=A.toLowerCase();H.moveTo(L[A][0],L[A][1],H.animTest.call(H,arguments,C,2))},setLeftTop:function(B,C){var A=this,D=A.dom.style;D.left=A.addUnits(B);D.top=A.addUnits(C);return A},getRegion:function(){return Ext.lib.Dom.getRegion(this.dom)},setBounds:function(D,E,F,A,B){var C=this;if(!B||!C.anim){C.setSize(F,A);C.setLocation(D,E)}else{C.anim({points:{to:[D,E]},width:{to:C.adjustWidth(F)},height:{to:C.adjustHeight(A)}},C.preanim(arguments,4),"motion")}return C},setRegion:function(B,A){return this.setBounds(B.left,B.top,B.right-B.left,B.bottom-B.top,this.animTest.call(this,arguments,A,1))}});Ext.Element.addMethods({scrollTo:function(E,G,C){var D=/top/i.test(E),B=this,A=B.dom,F;if(!C||!B.anim){F="scroll"+(D?"Top":"Left");A[F]=G}else{F="scroll"+(D?"Left":"Top");B.anim({scroll:{to:D?[A[F],G]:[G,A[F]]}},B.preanim(arguments,2),"scroll")}return B},scrollIntoView:function(I,J){var L=Ext.getDom(I)||Ext.getBody().dom,G=this.dom,H=this.getOffsetsTo(L),N=H[0]+L.scrollLeft,F=H[1]+L.scrollTop,K=F+G.offsetHeight,A=N+G.offsetWidth,E=L.clientHeight,B=parseInt(L.scrollTop,10),D=parseInt(L.scrollLeft,10),C=B+E,M=D+L.clientWidth;if(G.offsetHeight>E||F<B){L.scrollTop=F}else{if(K>C){L.scrollTop=K-E}}L.scrollTop=L.scrollTop;if(J!==false){if(G.offsetWidth>L.clientWidth||N<D){L.scrollLeft=N}else{if(A>M){L.scrollLeft=A-L.clientWidth}}L.scrollLeft=L.scrollLeft}return this},scrollChildIntoView:function(A,B){Ext.fly(A,"_scrollChildIntoView").scrollIntoView(this,B)},scroll:function(B,I,G){if(!this.isScrollable()){return false}var H=this.dom,K=H.scrollLeft,E=H.scrollTop,D=H.scrollWidth,J=H.scrollHeight,L=H.clientWidth,A=H.clientHeight,F=false,C,M={l:Math.min(K+I,D-L),r:C=Math.max(K-I,0),t:Math.max(E-I,0),b:Math.min(E+I,J-A)};M.d=M.b;M.u=M.t;B=B.substr(0,1);if((C=M[B])>-1){F=true;this.scrollTo(B=="l"||B=="r"?"left":"top",C,this.preanim(arguments,2))}return F}});Ext.Element.addMethods(function(){var F="visibility",G="display",E="hidden",D="none",C="x-masked",A="x-masked-relative",B=Ext.Element.data;return{isVisible:function(I){var J=!this.isStyle(F,E)&&!this.isStyle(G,D),H=this.dom.parentNode;if(I!==true||!J){return J}while(H&&!(/^body/i.test(H.tagName))){if(!Ext.fly(H,"_isVisible").isVisible()){return false}H=H.parentNode}return true},isDisplayed:function(){return !this.isStyle(G,D)},enableDisplayMode:function(H){this.setVisibilityMode(Ext.Element.DISPLAY);if(!Ext.isEmpty(H)){B(this.dom,"originalDisplay",H)}return this},mask:function(J,L){var O=this,I=O.dom,N=Ext.DomHelper,H="ext-el-mask-msg",K,P;if(!/^body/i.test(I.tagName)&&O.getStyle("position")=="static"){O.addClass(A)}if(K=B(I,"maskMsg")){K.remove()}if(K=B(I,"mask")){K.remove()}P=N.append(I,{cls:"ext-el-mask"},true);B(I,"mask",P);O.addClass(C);P.setDisplayed(true);if(typeof J=="string"){var M=N.append(I,{cls:H,cn:{tag:"div"}},true);B(I,"maskMsg",M);M.dom.className=L?H+" "+L:H;M.dom.firstChild.innerHTML=J;M.setDisplayed(true);M.center(O)}if(Ext.isIE&&!(Ext.isIE7&&Ext.isStrict)&&O.getStyle("height")=="auto"){P.setSize(undefined,O.getHeight())}return P},unmask:function(){var I=this,H=I.dom,K=B(H,"mask"),J=B(H,"maskMsg");if(K){if(J){J.remove();B(H,"maskMsg",undefined)}K.remove();B(H,"mask",undefined);I.removeClass([C,A])}},isMasked:function(){var H=B(this.dom,"mask");return H&&H.isVisible()},createShim:function(){var H=document.createElement("iframe"),I;H.frameBorder="0";H.className="ext-shim";H.src=Ext.SSL_SECURE_URL;I=Ext.get(this.dom.parentNode.insertBefore(H,this.dom));I.autoBoxAdjust=false;return I}}}());Ext.Element.addMethods({addKeyListener:function(A,B,C){var D;if(typeof A!="object"||Ext.isArray(A)){D={key:A,fn:B,scope:C}}else{D={key:A.key,shift:A.shift,ctrl:A.ctrl,alt:A.alt,fn:B,scope:C}}return new Ext.KeyMap(this,D)},addKeyMap:function(A){return new Ext.KeyMap(this,A)}});Ext.CompositeElementLite.importElementMethods();Ext.apply(Ext.CompositeElementLite.prototype,{addElements:function(C,B){if(!C){return this}if(typeof C=="string"){C=Ext.Element.selectorFunction(C,B)}var A=this.elements;Ext.each(C,function(D){A.push(Ext.get(D))});return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(A){return this.indexOf(A)!=-1},removeElement:function(D,B){var C=this,E=this.elements,A;Ext.each(D,function(F){if((A=(E[F]||E[F=C.indexOf(F)]))){if(B){if(A.dom){A.remove()}else{Ext.removeNode(A)}}E.splice(F,1)}});return this}});Ext.CompositeElement=Ext.extend(Ext.CompositeElementLite,{constructor:function(B,A){this.elements=[];this.add(B,A)},getElement:function(A){return A},transformElement:function(A){return Ext.get(A)}});Ext.Element.select=function(B,C,A){var D;if(typeof B=="string"){D=Ext.Element.selectorFunction(B,A)}else{if(B.length!==undefined){D=B}else{throw"Invalid selector"}}return(C===true)?new Ext.CompositeElement(D):new Ext.CompositeElementLite(D)};Ext.select=Ext.Element.select;Ext.UpdateManager=Ext.Updater=Ext.extend(Ext.util.Observable,function(){var B="beforeupdate",F="update",C="failure";function A(I){var H=this;H.transaction=null;if(I.argument.form&&I.argument.reset){try{I.argument.form.reset()}catch(G){}}if(H.loadScripts){H.renderer.render(H.el,I,H,E.createDelegate(H,[I]))}else{H.renderer.render(H.el,I,H);E.call(H,I)}}function E(I,G,H){this.fireEvent(G||F,this.el,I);if(Ext.isFunction(I.argument.callback)){I.argument.callback.call(I.argument.scope,this.el,Ext.isEmpty(H)?true:false,I,I.argument.options)}}function D(G){E.call(this,G,C,!!(this.transaction=null))}return{constructor:function(G,H){var I=this;G=Ext.get(G);if(!H&&G.updateManager){return G.updateManager}I.el=G;I.defaultUrl=null;I.addEvents(B,F,C);Ext.apply(I,Ext.Updater.defaults);I.transaction=null;I.refreshDelegate=I.refresh.createDelegate(I);I.updateDelegate=I.update.createDelegate(I);I.formUpdateDelegate=(I.formUpdate||function(){}).createDelegate(I);I.renderer=I.renderer||I.getDefaultRenderer();Ext.Updater.superclass.constructor.call(I)},setRenderer:function(G){this.renderer=G},getRenderer:function(){return this.renderer},getDefaultRenderer:function(){return new Ext.Updater.BasicRenderer()},setDefaultUrl:function(G){this.defaultUrl=G},getEl:function(){return this.el},update:function(M,J,H,G){var L=this,N,I;if(L.fireEvent(B,L.el,M,J)!==false){if(Ext.isObject(M)){N=M;M=N.url;J=J||N.params;H=H||N.callback;G=G||N.discardUrl;I=N.scope;if(!Ext.isEmpty(N.nocache)){L.disableCaching=N.nocache}if(!Ext.isEmpty(N.text)){L.indicatorText='<div class="loading-indicator">'+N.text+"</div>"}if(!Ext.isEmpty(N.scripts)){L.loadScripts=N.scripts}if(!Ext.isEmpty(N.timeout)){L.timeout=N.timeout}}L.showLoading();if(!G){L.defaultUrl=M}if(Ext.isFunction(M)){M=M.call(L)}var K=Ext.apply({},{url:M,params:(Ext.isFunction(J)&&I)?J.createDelegate(I):J,success:A,failure:D,scope:L,callback:undefined,timeout:(L.timeout*1000),disableCaching:L.disableCaching,argument:{"options":N,"url":M,"form":null,"callback":H,"scope":I||window,"params":J}},N);L.transaction=Ext.Ajax.request(K)}},formUpdate:function(I,H,K,G){var J=this;if(J.fireEvent(B,J.el,I,H)!==false){if(Ext.isFunction(H)){H=H.call(J)}I=Ext.getDom(I);J.transaction=Ext.Ajax.request({form:I,url:H,success:A,failure:D,scope:J,timeout:(J.timeout*1000),argument:{"url":H,"form":I,"callback":G,"reset":K}});J.showLoading.defer(1,J)}},startAutoRefresh:function(I,H,L,G,K){var J=this;if(K){J.update(H||J.defaultUrl,L,G,true)}if(J.autoRefreshProcId){clearInterval(J.autoRefreshProcId)}J.autoRefreshProcId=setInterval(J.update.createDelegate(J,[H||J.defaultUrl,L,G,true]),I*1000)},stopAutoRefresh:function(){if(this.autoRefreshProcId){clearInterval(this.autoRefreshProcId);delete this.autoRefreshProcId}},isAutoRefreshing:function(){return !!this.autoRefreshProcId},showLoading:function(){if(this.showLoadIndicator){this.el.dom.innerHTML=this.indicatorText}},abort:function(){if(this.transaction){Ext.Ajax.abort(this.transaction)}},isUpdating:function(){return this.transaction?Ext.Ajax.isLoading(this.transaction):false},refresh:function(G){if(this.defaultUrl){this.update(this.defaultUrl,null,G,true)}}}}());Ext.Updater.defaults={timeout:30,disableCaching:false,showLoadIndicator:true,indicatorText:'<div class="loading-indicator">Loading...</div>',loadScripts:false,sslBlankUrl:Ext.SSL_SECURE_URL};Ext.Updater.updateElement=function(A,B,D,C){var E=Ext.get(A).getUpdater();Ext.apply(E,C);E.update(B,D,C?C.callback:null)};Ext.Updater.BasicRenderer=function(){};Ext.Updater.BasicRenderer.prototype={render:function(A,C,D,B){A.update(C.responseText,D.loadScripts,B)}};(function(){Date.useStrict=false;function B(C){var D=Array.prototype.slice.call(arguments,1);return C.replace(/\{(\d+)\}/g,function(F,E){return D[E]})}Date.formatCodeToRegex=function(E,D){var C=Date.parseCodes[E];if(C){C=typeof C=="function"?C():C;Date.parseCodes[E]=C}return C?Ext.applyIf({c:C.c?B(C.c,D||"{0}"):C.c},C):{g:0,c:null,s:Ext.escapeRe(E)}};var A=Date.formatCodeToRegex;Ext.apply(Date,{parseFunctions:{"M$":function(F,D){var C=new RegExp("\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\/");var E=(F||"").match(C);return E?new Date(((E[1]||"")+E[2])*1):null}},parseRegexes:[],formatFunctions:{"M$":function(){return"\\/Date("+this.getTime()+")\\/"}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{Jan:0,Feb:1,Mar:2,Apr:3,May:4,Jun:5,Jul:6,Aug:7,Sep:8,Oct:9,Nov:10,Dec:11},getShortMonthName:function(C){return Date.monthNames[C].substring(0,3)},getShortDayName:function(C){return Date.dayNames[C].substring(0,3)},getMonthNumber:function(C){return Date.monthNumbers[C.substring(0,1).toUpperCase()+C.substring(1,3).toLowerCase()]},formatContainsHourInfo:(function(){var C=/(\\.)/g,D=/([gGhHisucUOPZ]|M\$)/;return function(E){return D.test(E.replace(C,""))}})(),formatCodes:{d:"String.leftPad(this.getDate(), 2, '0')",D:"Date.getShortDayName(this.getDay())",j:"this.getDate()",l:"Date.dayNames[this.getDay()]",N:"(this.getDay() ? this.getDay() : 7)",S:"this.getSuffix()",w:"this.getDay()",z:"this.getDayOfYear()",W:"String.leftPad(this.getWeekOfYear(), 2, '0')",F:"Date.monthNames[this.getMonth()]",m:"String.leftPad(this.getMonth() + 1, 2, '0')",M:"Date.getShortMonthName(this.getMonth())",n:"(this.getMonth() + 1)",t:"this.getDaysInMonth()",L:"(this.isLeapYear() ? 1 : 0)",o:"(this.getFullYear() + (this.getWeekOfYear() == 1 && this.getMonth() > 0 ? +1 : (this.getWeekOfYear() >= 52 && this.getMonth() < 11 ? -1 : 0)))",Y:"String.leftPad(this.getFullYear(), 4, '0')",y:"('' + this.getFullYear()).substring(2, 4)",a:"(this.getHours() < 12 ? 'am' : 'pm')",A:"(this.getHours() < 12 ? 'AM' : 'PM')",g:"((this.getHours() % 12) ? this.getHours() % 12 : 12)",G:"this.getHours()",h:"String.leftPad((this.getHours() % 12) ? this.getHours() % 12 : 12, 2, '0')",H:"String.leftPad(this.getHours(), 2, '0')",i:"String.leftPad(this.getMinutes(), 2, '0')",s:"String.leftPad(this.getSeconds(), 2, '0')",u:"String.leftPad(this.getMilliseconds(), 3, '0')",O:"this.getGMTOffset()",P:"this.getGMTOffset(true)",T:"this.getTimezone()",Z:"(this.getTimezoneOffset() * -60)",c:function(){for(var G="Y-m-dTH:i:sP",E=[],C=0,F=G.length;C<F;++C){var D=G.charAt(C);E.push(D=="T"?"'T'":Date.getFormatCode(D))}return E.join(" + ")},U:"Math.round(this.getTime() / 1000)"},isValid:function(H,G,J,E,F,D,C){E=E||0;F=F||0;D=D||0;C=C||0;var I=new Date(H<100?100:H,G-1,J,E,F,D,C).add(Date.YEAR,H<100?H-100:0);return H==I.getFullYear()&&G==I.getMonth()+1&&J==I.getDate()&&E==I.getHours()&&F==I.getMinutes()&&D==I.getSeconds()&&C==I.getMilliseconds()},parseDate:function(E,C,F){var D=Date.parseFunctions;if(D[C]==null){Date.createParser(C)}return D[C](E,Ext.isDefined(F)?F:Date.useStrict)},getFormatCode:function(D){var C=Date.formatCodes[D];if(C){C=typeof C=="function"?C():C;Date.formatCodes[D]=C}return C||("'"+String.escape(D)+"'")},createFormat:function(D){var E=[],G=false,F="";for(var C=0;C<D.length;++C){F=D.charAt(C);if(!G&&F=="\\"){G=true}else{if(G){G=false;E.push("'"+String.escape(F)+"'")}else{E.push(Date.getFormatCode(F))}}}Date.formatFunctions[D]=new Function("return "+E.join("+"))},createParser:function(){var C=["var dt, y, m, d, h, i, s, ms, o, z, zz, u, v,","def = Date.defaults,","results = String(input).match(Date.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = (new Date()).clearTime();","y = Ext.num(y, Ext.num(def.y, dt.getFullYear()));","m = Ext.num(m, Ext.num(def.m - 1, dt.getMonth()));","d = Ext.num(d, Ext.num(def.d, dt.getDate()));","h  = Ext.num(h, Ext.num(def.h, dt.getHours()));","i  = Ext.num(i, Ext.num(def.i, dt.getMinutes()));","s  = Ext.num(s, Ext.num(def.s, dt.getSeconds()));","ms = Ext.num(ms, Ext.num(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (v.isLeapYear() && z <= 365))? v.add(Date.DAY, z) : null);","}else if(strict === true && !Date.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","v = new Date(y < 100 ? 100 : y, m, d, h, i, s, ms).add(Date.YEAR, y < 100 ? y - 100 : 0);","}","}","}","if(v){","if(zz != null){","v = v.add(Date.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = v.add(Date.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return v;"].join("\n");return function(E){var H=Date.parseRegexes.length,D=1,F=[],M=[],J=false,G="",K=0,L,I;for(;K<E.length;++K){G=E.charAt(K);if(!J&&G=="\\"){J=true}else{if(J){J=false;M.push(String.escape(G))}else{L=A(G,D);D+=L.g;M.push(L.s);if(L.g&&L.c){if(L.calcLast){I=L.c}else{F.push(L.c)}}}}}if(I){F.push(I)}Date.parseRegexes[H]=new RegExp("^"+M.join("")+"$","i");Date.parseFunctions[E]=new Function("input","strict",B(C,H,F.join("")))}}(),parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},j:{g:1,c:"d = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},D:function(){for(var D=[],C=0;C<7;D.push(Date.getShortDayName(C)),++C){}return{g:0,c:null,s:"(?:"+D.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+Date.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\n",s:"(\\d{1,3})"},W:{g:0,c:null,s:"(?:\\d{2})"},F:function(){return{g:1,c:"m = parseInt(Date.getMonthNumber(results[{0}]), 10);\n",s:"("+Date.monthNames.join("|")+")"}},M:function(){for(var D=[],C=0;C<12;D.push(Date.getShortMonthName(C)),++C){}return Ext.applyIf({s:"("+D.join("|")+")"},A("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{2})"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\n",s:"(\\d{1,2})"},t:{g:0,c:null,s:"(?:\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:function(){return A("Y")},Y:{g:1,c:"y = parseInt(results[{0}], 10);\n",s:"(\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\ny = ty > Date.y2kYear ? 1900 + ty : 2000 + ty;\n",s:"(\\d{1,2})"},a:function(){return A("A")},A:{calcLast:true,g:1,c:"if (/(am)/i.test(results[{0}])) {\nif (!h || h == 12) { h = 0; }\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)"},g:function(){return A("G")},G:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{1,2})"},h:function(){return A("H")},H:{g:1,c:"h = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},i:{g:1,c:"i = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},s:{g:1,c:"s = parseInt(results[{0}], 10);\n",s:"(\\d{2})"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n",s:"(\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + String.leftPad(hr, 2, '0') + String.leftPad(mn, 2, '0')) : null;\n"].join("\n"),s:"([+-]\\d{2}:\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,4}"},Z:{g:1,c:"zz = results[{0}] * 1;\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\n",s:"([+-]?\\d{1,5})"},c:function(){var D=[],F=[A("Y",1),A("m",2),A("d",3),A("h",4),A("i",5),A("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\n"},{c:["if(results[8]) {","if(results[8] == 'Z'){","zz = 0;","}else if (results[8].indexOf(':') > -1){",A("P",8).c,"}else{",A("O",8).c,"}","}"].join("\n")}];for(var C=0,E=F.length;C<E;++C){D.push(F[C].c)}return{g:1,c:D.join(""),s:[F[0].s,"(?:","-",F[1].s,"(?:","-",F[2].s,"(?:","(?:T| )?",F[3].s,":",F[4].s,"(?::",F[5].s,")?","(?:(?:\\.|,)(\\d+))?","(Z|(?:[-+]\\d{2}(?::)?\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\n",s:"(-?\\d+)"}}})}());Ext.apply(Date.prototype,{dateFormat:function(A){if(Date.formatFunctions[A]==null){Date.createFormat(A)}return Date.formatFunctions[A].call(this)},getTimezone:function(){return this.toString().replace(/^.* (?:\((.*)\)|([A-Z]{1,4})(?:[\-+][0-9]{4})?(?: -?\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(A){return(this.getTimezoneOffset()>0?"-":"+")+String.leftPad(Math.floor(Math.abs(this.getTimezoneOffset())/60),2,"0")+(A?":":"")+String.leftPad(Math.abs(this.getTimezoneOffset()%60),2,"0")},getDayOfYear:function(){var D=0,A=this.clone(),C=this.getMonth(),B;for(B=0,A.setDate(1),A.setMonth(0);B<C;A.setMonth(++B)){D+=A.getDaysInMonth()}return D+this.getDate()-1},getWeekOfYear:function(){var B=86400000,A=7*B;return function(){var D=Date.UTC(this.getFullYear(),this.getMonth(),this.getDate()+3)/B,C=Math.floor(D/7),E=new Date(C*A).getUTCFullYear();return C-Math.floor(Date.UTC(E,0,7)/A)+1}}(),isLeapYear:function(){var A=this.getFullYear();return !!((A&3)==0&&(A%100||(A%400==0&&A)))},getFirstDayOfMonth:function(){var A=(this.getDay()-(this.getDate()-1))%7;return(A<0)?(A+7):A},getLastDayOfMonth:function(){return this.getLastDateOfMonth().getDay()},getFirstDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),1)},getLastDateOfMonth:function(){return new Date(this.getFullYear(),this.getMonth(),this.getDaysInMonth())},getDaysInMonth:function(){var A=[31,28,31,30,31,30,31,31,30,31,30,31];return function(){var B=this.getMonth();return B==1&&this.isLeapYear()?29:A[B]}}(),getSuffix:function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(){return new Date(this.getTime())},isDST:function(){return new Date(this.getFullYear(),0,1).getTimezoneOffset()!=this.getTimezoneOffset()},clearTime:function(B){if(B){return this.clone().clearTime()}var A=this.getDate();this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);if(this.getDate()!=A){for(var D=1,C=this.add(Date.HOUR,D);C.getDate()!=A;D++,C=this.add(Date.HOUR,D)){}this.setDate(A);this.setHours(C.getHours())}return this},add:function(B,D){var A=this.clone();if(!B||D===0){return A}switch(B.toLowerCase()){case Date.MILLI:A.setMilliseconds(this.getMilliseconds()+D);break;case Date.SECOND:A.setSeconds(this.getSeconds()+D);break;case Date.MINUTE:A.setMinutes(this.getMinutes()+D);break;case Date.HOUR:A.setHours(this.getHours()+D);break;case Date.DAY:A.setDate(this.getDate()+D);break;case Date.MONTH:var C=this.getDate();if(C>28){C=Math.min(C,this.getFirstDateOfMonth().add("mo",D).getLastDateOfMonth().getDate())}A.setDate(C);A.setMonth(this.getMonth()+D);break;case Date.YEAR:A.setFullYear(this.getFullYear()+D);break}return A},between:function(C,A){var B=this.getTime();return C.getTime()<=B&&B<=A.getTime()}});Date.prototype.format=Date.prototype.dateFormat;if(Ext.isSafari&&(navigator.userAgent.match(/WebKit\/(\d+)/)[1]||NaN)<420){Ext.apply(Date.prototype,{_xMonth:Date.prototype.setMonth,_xDate:Date.prototype.setDate,setMonth:function(C){if(C<=-1){var A=Math.ceil(-C),D=Math.ceil(A/12),B=(A%12)?12-A%12:0;this.setFullYear(this.getFullYear()-D);return this._xMonth(B)}else{return this._xMonth(C)}},setDate:function(A){return this.setTime(this.getTime()-(this.getDate()-A)*86400000)}})}Ext.util.MixedCollection=function(B,A){this.items=[];this.map={};this.keys=[];this.length=0;this.addEvents("clear","add","replace","remove","sort");this.allowFunctions=B===true;if(A){this.getKey=A}Ext.util.MixedCollection.superclass.constructor.call(this)};Ext.extend(Ext.util.MixedCollection,Ext.util.Observable,{allowFunctions:false,add:function(A,B){if(arguments.length==1){B=arguments[0];A=this.getKey(B)}if(typeof A!="undefined"&&A!==null){var C=this.map[A];if(typeof C!="undefined"){return this.replace(A,B)}this.map[A]=B}this.length++;this.items.push(B);this.keys.push(A);this.fireEvent("add",this.length-1,B,A);return B},getKey:function(A){return A.id},replace:function(A,B){if(arguments.length==1){B=arguments[0];A=this.getKey(B)}var C=this.map[A];if(typeof A=="undefined"||A===null||typeof C=="undefined"){return this.add(A,B)}var D=this.indexOfKey(A);this.items[D]=B;this.map[A]=B;this.fireEvent("replace",A,C,B);return B},addAll:function(D){if(arguments.length>1||Ext.isArray(D)){var E=arguments.length>1?arguments:D;for(var B=0,C=E.length;B<C;B++){this.add(E[B])}}else{for(var A in D){if(this.allowFunctions||typeof D[A]!="function"){this.add(A,D[A])}}}},each:function(B,E){var C=[].concat(this.items);for(var A=0,D=C.length;A<D;A++){if(B.call(E||C[A],C[A],A,D)===false){break}}},eachKey:function(B,D){for(var A=0,C=this.keys.length;A<C;A++){B.call(D||window,this.keys[A],this.items[A],A,C)}},find:function(B,D){for(var A=0,C=this.items.length;A<C;A++){if(B.call(D||window,this.items[A],this.keys[A])){return this.items[A]}}return null},insert:function(C,A,B){if(arguments.length==2){B=arguments[1];A=this.getKey(B)}if(this.containsKey(A)){this.suspendEvents();this.removeKey(A);this.resumeEvents()}if(C>=this.length){return this.add(A,B)}this.length++;this.items.splice(C,0,B);if(typeof A!="undefined"&&A!==null){this.map[A]=B}this.keys.splice(C,0,A);this.fireEvent("add",C,B,A);return B},remove:function(A){return this.removeAt(this.indexOf(A))},removeAt:function(C){if(C<this.length&&C>=0){this.length--;var B=this.items[C];this.items.splice(C,1);var A=this.keys[C];if(typeof A!="undefined"){delete this.map[A]}this.keys.splice(C,1);this.fireEvent("remove",B,A);return B}return false},removeKey:function(A){return this.removeAt(this.indexOfKey(A))},getCount:function(){return this.length},indexOf:function(A){return this.items.indexOf(A)},indexOfKey:function(A){return this.keys.indexOf(A)},item:function(A){var B=this.map[A],C=B!==undefined?B:(typeof A=="number")?this.items[A]:undefined;return typeof C!="function"||this.allowFunctions?C:null},itemAt:function(A){return this.items[A]},key:function(A){return this.map[A]},contains:function(A){return this.indexOf(A)!=-1},containsKey:function(A){return typeof this.map[A]!="undefined"},clear:function(){this.length=0;this.items=[];this.keys=[];this.map={};this.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},_sort:function(B,C,F){var E,A,D=String(C).toUpperCase()=="DESC"?-1:1,H=[],G=this.keys,I=this.items;F=F||function(K,J){return K-J};for(E=0,A=I.length;E<A;E++){H[H.length]={key:G[E],value:I[E],index:E}}H.sort(function(L,K){var J=F(L[B],K[B])*D;if(J===0){J=(L.index<K.index?-1:1)}return J});for(E=0,A=H.length;E<A;E++){I[E]=H[E].value;G[E]=H[E].key}this.fireEvent("sort",this)},sort:function(A,B){this._sort("value",A,B)},reorder:function(E){this.suspendEvents();var F=this.items,C=0,B=F.length,G=[],A=[],D;for(D in E){G[E[D]]=F[D]}for(C=0;C<B;C++){if(E[C]==undefined){A.push(F[C])}}for(C=0;C<B;C++){if(G[C]==undefined){G[C]=A.shift()}}this.clear();this.addAll(G);this.resumeEvents();this.fireEvent("sort",this)},keySort:function(A,B){this._sort("key",A,B||function(E,C){var D=String(E).toUpperCase(),F=String(C).toUpperCase();return D>F?1:(D<F?-1:0)})},getRange:function(E,D){var C=this.items;if(C.length<1){return[]}E=E||0;D=Math.min(typeof D=="undefined"?this.length-1:D,this.length-1);var A,B=[];if(E<=D){for(A=E;A<=D;A++){B[B.length]=C[A]}}else{for(A=E;A>=D;A--){B[B.length]=C[A]}}return B},filter:function(B,C,A,D){if(Ext.isEmpty(C,false)){return this.clone()}C=this.createValueMatcher(C,A,D);return this.filterBy(function(E){return E&&C.test(E[B])})},filterBy:function(D,F){var A=new Ext.util.MixedCollection();A.getKey=this.getKey;var G=this.keys,B=this.items;for(var C=0,E=B.length;C<E;C++){if(D.call(F||this,B[C],G[C])){A.add(G[C],B[C])}}return A},findIndex:function(B,C,E,A,D){if(Ext.isEmpty(C,false)){return -1}C=this.createValueMatcher(C,A,D);return this.findIndexBy(function(F){return F&&C.test(F[B])},null,E)},findIndexBy:function(C,E,F){var G=this.keys,A=this.items;for(var B=(F||0),D=A.length;B<D;B++){if(C.call(E||this,A[B],G[B])){return B}}return -1},createValueMatcher:function(C,A,D,B){if(!C.exec){var E=Ext.escapeRe;C=String(C);if(A===true){C=E(C)}else{C="^"+E(C);if(B===true){C+="$"}}C=new RegExp(C,D?"":"i")}return C},clone:function(){var A=new Ext.util.MixedCollection();var E=this.keys,B=this.items;for(var C=0,D=B.length;C<D;C++){A.add(E[C],B[C])}A.getKey=this.getKey;return A}});Ext.util.MixedCollection.prototype.get=Ext.util.MixedCollection.prototype.item;Ext.AbstractManager=Ext.extend(Object,{typeName:"type",constructor:function(A){Ext.apply(this,A||{});this.all=new Ext.util.MixedCollection();this.types={}},get:function(A){return this.all.get(A)},register:function(A){this.all.add(A)},unregister:function(A){this.all.remove(A)},registerType:function(A,B){this.types[A]=B;B[this.typeName]=A},isRegistered:function(A){return this.types[A]!==undefined},create:function(C,D){var A=C[this.typeName]||C.type||D,B=this.types[A];if(B==undefined){throw new Error(String.format("The '{0}' type has not been registered with this manager",A))}return new B(C)},onAvailable:function(D,B,C){var A=this.all;A.on("add",function(F,E){if(E.id==D){B.call(C||E,E);A.un("add",B,C)}})}});Ext.util.Format=function(){var trimRe=/^\s+|\s+$/g,stripTagsRE=/<\/?[^>]+>/gi,stripScriptsRe=/(?:<script.*?>)((\n|\r|.)*?)(?:<\/script>)/ig,nl2brRe=/\r?\n/g;return{ellipsis:function(value,len,word){if(value&&value.length>len){if(word){var vs=value.substr(0,len-2),index=Math.max(vs.lastIndexOf(" "),vs.lastIndexOf("."),vs.lastIndexOf("!"),vs.lastIndexOf("?"));if(index==-1||index<(len-15)){return value.substr(0,len-3)+"..."}else{return vs.substr(0,index)+"..."}}else{return value.substr(0,len-3)+"..."}}return value},undef:function(value){return value!==undefined?value:""},defaultValue:function(value,defaultValue){return value!==undefined&&value!==""?value:defaultValue},htmlEncode:function(value){return !value?value:String(value).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;")},htmlDecode:function(value){return !value?value:String(value).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&")},trim:function(value){return String(value).replace(trimRe,"")},substr:function(value,start,length){return String(value).substr(start,length)},lowercase:function(value){return String(value).toLowerCase()},uppercase:function(value){return String(value).toUpperCase()},capitalize:function(value){return !value?value:value.charAt(0).toUpperCase()+value.substr(1).toLowerCase()},call:function(value,fn){if(arguments.length>2){var args=Array.prototype.slice.call(arguments,2);args.unshift(value);return eval(fn).apply(window,args)}else{return eval(fn).call(window,value)}},usMoney:function(v){v=(Math.round((v-0)*100))/100;v=(v==Math.floor(v))?v+".00":((v*10==Math.floor(v*10))?v+"0":v);v=String(v);var ps=v.split("."),whole=ps[0],sub=ps[1]?"."+ps[1]:".00",r=/(\d+)(\d{3})/;while(r.test(whole)){whole=whole.replace(r,"$1,$2")}v=whole+sub;if(v.charAt(0)=="-"){return"-$"+v.substr(1)}return"$"+v},date:function(v,format){if(!v){return""}if(!Ext.isDate(v)){v=new Date(Date.parse(v))}return v.dateFormat(format||"m/d/Y")},dateRenderer:function(format){return function(v){return Ext.util.Format.date(v,format)}},stripTags:function(v){return !v?v:String(v).replace(stripTagsRE,"")},stripScripts:function(v){return !v?v:String(v).replace(stripScriptsRe,"")},fileSize:function(size){if(size<1024){return size+" bytes"}else{if(size<1048576){return(Math.round(((size*10)/1024))/10)+" KB"}else{return(Math.round(((size*10)/1048576))/10)+" MB"}}},math:function(){var fns={};return function(v,a){if(!fns[a]){fns[a]=new Function("v","return v "+a+";")}return fns[a](v)}}(),round:function(value,precision){var result=Number(value);if(typeof precision=="number"){precision=Math.pow(10,precision);result=Math.round(value*precision)/precision}return result},number:function(v,format){if(!format){return v}v=Ext.num(v,NaN);if(isNaN(v)){return""}var comma=",",dec=".",i18n=false,neg=v<0;v=Math.abs(v);if(format.substr(format.length-2)=="/i"){format=format.substr(0,format.length-2);i18n=true;comma=".";dec=","}var hasComma=format.indexOf(comma)!=-1,psplit=(i18n?format.replace(/[^\d\,]/g,""):format.replace(/[^\d\.]/g,"")).split(dec);if(1<psplit.length){v=v.toFixed(psplit[1].length)}else{if(2<psplit.length){throw ("NumberFormatException: invalid format, formats should have no more than 1 period: "+format)}else{v=v.toFixed(0)}}var fnum=v.toString();psplit=fnum.split(".");if(hasComma){var cnum=psplit[0],parr=[],j=cnum.length,m=Math.floor(j/3),n=cnum.length%3||3,i;for(i=0;i<j;i+=n){if(i!=0){n=3}parr[parr.length]=cnum.substr(i,n);m-=1}fnum=parr.join(comma);if(psplit[1]){fnum+=dec+psplit[1]}}else{if(psplit[1]){fnum=psplit[0]+dec+psplit[1]}}return(neg?"-":"")+format.replace(/[\d,?\.?]+/,fnum)},numberRenderer:function(format){return function(v){return Ext.util.Format.number(v,format)}},plural:function(v,s,p){return v+" "+(v==1?s:(p?p:s+"s"))},nl2br:function(v){return Ext.isEmpty(v)?"":v.replace(nl2brRe,"<br/>")}}}();Ext.XTemplate=function(){Ext.XTemplate.superclass.constructor.apply(this,arguments);var F=this,A=F.html,V=/<tpl\b[^>]*>((?:(?=([^<]+))\2|<(?!tpl\b[^>]*>))*?)<\/tpl>/,E=/^<tpl\b[^>]*?for="(.*?)"/,W=/^<tpl\b[^>]*?if="(.*?)"/,N=/^<tpl\b[^>]*?exec="(.*?)"/,G,P=0,B=[],O="values",C="parent",R="xindex",L="xcount",M="return ",D="with(values){ ";A=["<tpl>",A,"</tpl>"].join("");while((G=A.match(V))){var H=G[0].match(E),S=G[0].match(W),T=G[0].match(N),J=null,K=null,Q=null,U=H&&H[1]?H[1]:"";if(S){J=S&&S[1]?S[1]:null;if(J){K=new Function(O,C,R,L,D+M+(Ext.util.Format.htmlDecode(J))+"; }")}}if(T){J=T&&T[1]?T[1]:null;if(J){Q=new Function(O,C,R,L,D+(Ext.util.Format.htmlDecode(J))+"; }")}}if(U){switch(U){case".":U=new Function(O,C,D+M+O+"; }");break;case"..":U=new Function(O,C,D+M+C+"; }");break;default:U=new Function(O,C,D+M+U+"; }")}}B.push({id:P,target:U,exec:Q,test:K,body:G[1]||""});A=A.replace(G[0],"{xtpl"+P+"}");++P}for(var I=B.length-1;I>=0;--I){F.compileTpl(B[I])}F.master=B[B.length-1];F.tpls=B};Ext.extend(Ext.XTemplate,Ext.Template,{re:/\{([\w\-\.\#]+)(?:\:([\w\.]*)(?:\((.*?)?\))?)?(\s?[\+\-\*\\]\s?[\d\.\+\-\*\\\(\)]+)?\}/g,codeRe:/\{\[((?:\\\]|.|\n)*?)\]\}/g,applySubTemplate:function(H,I,K,D,B){var A=this,J,C=A.tpls[H],F,G=[];if((C.test&&!C.test.call(A,I,K,D,B))||(C.exec&&C.exec.call(A,I,K,D,B))){return""}F=C.target?C.target.call(A,I,K):I;J=F.length;K=C.target?I:K;if(C.target&&Ext.isArray(F)){for(var E=0,J=F.length;E<J;E++){G[G.length]=C.compiled.call(A,F[E],K,E+1,J)}return G.join("")}return C.compiled.call(A,F,K,D,B)},compileTpl:function(tpl){var fm=Ext.util.Format,useF=this.disableFormats!==true,sep=Ext.isGecko?"+":",",body;function fn(m,name,format,args,math){if(name.substr(0,4)=="xtpl"){return"'"+sep+"this.applySubTemplate("+name.substr(4)+", values, parent, xindex, xcount)"+sep+"'"}var v;if(name==="."){v="values"}else{if(name==="#"){v="xindex"}else{if(name.indexOf(".")!=-1){v=name}else{v="values['"+name+"']"}}}if(math){v="("+v+math+")"}if(format&&useF){args=args?","+args:"";if(format.substr(0,5)!="this."){format="fm."+format+"("}else{format='this.call("'+format.substr(5)+'", ';args=", values"}}else{args="";format="("+v+" === undefined ? '' : "}return"'"+sep+format+v+args+")"+sep+"'"}function codeFn(m,code){return"'"+sep+"("+code.replace(/\\'/g,"'")+")"+sep+"'"}if(Ext.isGecko){body="tpl.compiled = function(values, parent, xindex, xcount){ return '"+tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn)+"';};"}else{body=["tpl.compiled = function(values, parent, xindex, xcount){ return ['"];body.push(tpl.body.replace(/(\r\n|\n)/g,"\\n").replace(/'/g,"\\'").replace(this.re,fn).replace(this.codeRe,codeFn));body.push("'].join('');};");body=body.join("")}eval(body);return this},applyTemplate:function(A){return this.master.compiled.call(this,A,{},1,1)},compile:function(){return this}});Ext.XTemplate.prototype.apply=Ext.XTemplate.prototype.applyTemplate;Ext.XTemplate.from=function(A){A=Ext.getDom(A);return new Ext.XTemplate(A.value||A.innerHTML)};Ext.util.CSS=function(){var B=null;var D=document;var A=/(-[a-z])/gi;var C=function(E,F){return F.charAt(1).toUpperCase()};return{createStyleSheet:function(I,J){var E;var H=D.getElementsByTagName("head")[0];var G=D.createElement("style");G.setAttribute("type","text/css");if(J){G.setAttribute("id",J)}if(Ext.isIE){H.appendChild(G);E=G.styleSheet;E.cssText=I}else{try{G.appendChild(D.createTextNode(I))}catch(F){G.cssText=I}H.appendChild(G);E=G.styleSheet?G.styleSheet:(G.sheet||D.styleSheets[D.styleSheets.length-1])}this.cacheStyleSheet(E);return E},removeStyleSheet:function(F){var E=D.getElementById(F);if(E){E.parentNode.removeChild(E)}},swapStyleSheet:function(G,F){this.removeStyleSheet(G);var E=D.createElement("link");E.setAttribute("rel","stylesheet");E.setAttribute("type","text/css");E.setAttribute("id",G);E.setAttribute("href",F);D.getElementsByTagName("head")[0].appendChild(E)},refreshCache:function(){return this.getRules(true)},cacheStyleSheet:function(F){if(!B){B={}}try{var E=F.cssRules||F.rules;for(var H=E.length-1;H>=0;--H){B[E[H].selectorText.toLowerCase()]=E[H]}}catch(G){}},getRules:function(I){if(B===null||I){B={};var E=D.styleSheets;for(var F=0,H=E.length;F<H;F++){try{this.cacheStyleSheet(E[F])}catch(G){}}}return B},getRule:function(G,H){var E=this.getRules(H);if(!Ext.isArray(G)){return E[G.toLowerCase()]}for(var F=0;F<G.length;F++){if(E[G[F]]){return E[G[F].toLowerCase()]}}return null},updateRule:function(I,H,E){if(!Ext.isArray(I)){var G=this.getRule(I);if(G){G.style[H.replace(A,C)]=E;return true}}else{for(var F=0;F<I.length;F++){if(this.updateRule(I[F],H,E)){return true}}}return false}}}();Ext.util.ClickRepeater=Ext.extend(Ext.util.Observable,{constructor:function(A,B){this.el=Ext.get(A);this.el.unselectable();Ext.apply(this,B);this.addEvents("mousedown","click","mouseup");if(!this.disabled){this.disabled=true;this.enable()}if(this.handler){this.on("click",this.handler,this.scope||this)}Ext.util.ClickRepeater.superclass.constructor.call(this)},interval:20,delay:250,preventDefault:true,stopDefault:false,timer:0,enable:function(){if(this.disabled){this.el.on("mousedown",this.handleMouseDown,this);if(Ext.isIE){this.el.on("dblclick",this.handleDblClick,this)}if(this.preventDefault||this.stopDefault){this.el.on("click",this.eventOptions,this)}}this.disabled=false},disable:function(A){if(A||!this.disabled){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeAllListeners()}this.disabled=true},setDisabled:function(A){this[A?"disable":"enable"]()},eventOptions:function(A){if(this.preventDefault){A.preventDefault()}if(this.stopDefault){A.stopEvent()}},destroy:function(){this.disable(true);Ext.destroy(this.el);this.purgeListeners()},handleDblClick:function(A){clearTimeout(this.timer);this.el.blur();this.fireEvent("mousedown",this,A);this.fireEvent("click",this,A)},handleMouseDown:function(A){clearTimeout(this.timer);this.el.blur();if(this.pressClass){this.el.addClass(this.pressClass)}this.mousedownTime=new Date();Ext.getDoc().on("mouseup",this.handleMouseUp,this);this.el.on("mouseout",this.handleMouseOut,this);this.fireEvent("mousedown",this,A);this.fireEvent("click",this,A);if(this.accelerate){this.delay=400}this.timer=this.click.defer(this.delay||this.interval,this,[A])},click:function(A){this.fireEvent("click",this,A);this.timer=this.click.defer(this.accelerate?this.easeOutExpo(this.mousedownTime.getElapsed(),400,-390,12000):this.interval,this,[A])},easeOutExpo:function(C,B,D,A){return(C==A)?B+D:D*(-Math.pow(2,-10*C/A)+1)+B},handleMouseOut:function(){clearTimeout(this.timer);if(this.pressClass){this.el.removeClass(this.pressClass)}this.el.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(){this.el.un("mouseover",this.handleMouseReturn,this);if(this.pressClass){this.el.addClass(this.pressClass)}this.click()},handleMouseUp:function(A){clearTimeout(this.timer);this.el.un("mouseover",this.handleMouseReturn,this);this.el.un("mouseout",this.handleMouseOut,this);Ext.getDoc().un("mouseup",this.handleMouseUp,this);this.el.removeClass(this.pressClass);this.fireEvent("mouseup",this,A)}});Ext.KeyNav=function(A,B){this.el=Ext.get(A);Ext.apply(this,B);if(!this.disabled){this.disabled=true;this.enable()}};Ext.KeyNav.prototype={disabled:false,defaultEventAction:"stopEvent",forceKeyDown:false,relay:function(B){var C=B.getKey(),A=this.keyToHandler[C];if(A&&this[A]){if(this.doRelay(B,this[A],A)!==true){B[this.defaultEventAction]()}}},doRelay:function(B,A,C){return A.call(this.scope||this,B,C)},enter:false,left:false,right:false,up:false,down:false,tab:false,esc:false,pageUp:false,pageDown:false,del:false,home:false,end:false,space:false,keyToHandler:{37:"left",39:"right",38:"up",40:"down",33:"pageUp",34:"pageDown",46:"del",36:"home",35:"end",13:"enter",27:"esc",9:"tab",32:"space"},stopKeyUp:function(A){var B=A.getKey();if(B>=37&&B<=40){A.stopEvent()}},destroy:function(){this.disable()},enable:function(){if(this.disabled){if(Ext.isSafari2){this.el.on("keyup",this.stopKeyUp,this)}this.el.on(this.isKeydown()?"keydown":"keypress",this.relay,this);this.disabled=false}},disable:function(){if(!this.disabled){if(Ext.isSafari2){this.el.un("keyup",this.stopKeyUp,this)}this.el.un(this.isKeydown()?"keydown":"keypress",this.relay,this);this.disabled=true}},setDisabled:function(A){this[A?"disable":"enable"]()},isKeydown:function(){return this.forceKeyDown||Ext.EventManager.useKeydown}};Ext.KeyMap=function(A,B,C){this.el=Ext.get(A);this.eventName=C||"keydown";this.bindings=[];if(B){this.addBinding(B)}this.enable()};Ext.KeyMap.prototype={stopEvent:false,addBinding:function(B){if(Ext.isArray(B)){Ext.each(B,function(K){this.addBinding(K)},this);return}var J=B.key,G=B.fn||B.handler,D=B.scope;if(B.stopEvent){this.stopEvent=B.stopEvent}if(typeof J=="string"){var I=[];var C=J.toUpperCase();for(var F=0,H=C.length;F<H;F++){I.push(C.charCodeAt(F))}J=I}var E=Ext.isArray(J);var A=function(L){if(this.checkModifiers(B,L)){var N=L.getKey();if(E){for(var K=0,M=J.length;K<M;K++){if(J[K]==N){if(this.stopEvent){L.stopEvent()}G.call(D||window,N,L);return}}}else{if(N==J){if(this.stopEvent){L.stopEvent()}G.call(D||window,N,L)}}}};this.bindings.push(A)},checkModifiers:function(D,B){var G,A,F=["shift","ctrl","alt"];for(var C=0,E=F.length;C<E;++C){A=F[C];G=D[A];if(!(G===undefined||(G===B[A+"Key"]))){return false}}return true},on:function(A,D,F){var E,C,G,B;if(typeof A=="object"&&!Ext.isArray(A)){E=A.key;C=A.shift;G=A.ctrl;B=A.alt}else{E=A}this.addBinding({key:E,shift:C,ctrl:G,alt:B,fn:D,scope:F})},handleKeyDown:function(B){if(this.enabled){var C=this.bindings;for(var A=0,D=C.length;A<D;A++){C[A].call(this,B)}}},isEnabled:function(){return this.enabled},enable:function(){if(!this.enabled){this.el.on(this.eventName,this.handleKeyDown,this);this.enabled=true}},disable:function(){if(this.enabled){this.el.removeListener(this.eventName,this.handleKeyDown,this);this.enabled=false}},setDisabled:function(A){this[A?"disable":"enable"]()}};Ext.util.TextMetrics=function(){var A;return{measure:function(B,C,D){if(!A){A=Ext.util.TextMetrics.Instance(B,D)}A.bind(B);A.setFixedWidth(D||"auto");return A.getSize(C)},createInstance:function(B,C){return Ext.util.TextMetrics.Instance(B,C)}}}();Ext.util.TextMetrics.Instance=function(D,B){var A=new Ext.Element(document.createElement("div"));document.body.appendChild(A.dom);A.position("absolute");A.setLeftTop(-1000,-1000);A.hide();if(B){A.setWidth(B)}var C={getSize:function(F){A.update(F);var E=A.getSize();A.update("");return E},bind:function(E){A.setStyle(Ext.fly(E).getStyles("font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"))},setFixedWidth:function(E){A.setWidth(E)},getWidth:function(E){A.dom.style.width="auto";return this.getSize(E).width},getHeight:function(E){return this.getSize(E).height}};C.bind(D);return C};Ext.Element.addMethods({getTextWidth:function(B,A,C){return(Ext.util.TextMetrics.measure(this.dom,Ext.value(B,this.dom.innerHTML,true)).width).constrain(A||0,C||1000000)}});Ext.util.Cookies={set:function(F,C){var H=arguments;var B=arguments.length;var A=(B>2)?H[2]:null;var E=(B>3)?H[3]:"/";var D=(B>4)?H[4]:null;var G=(B>5)?H[5]:false;document.cookie=F+"="+escape(C)+((A===null)?"":("; expires="+A.toGMTString()))+((E===null)?"":("; path="+E))+((D===null)?"":("; domain="+D))+((G===true)?"; secure":"")},get:function(C){var B=C+"=";var E=B.length;var D=document.cookie.length;var A=0;var F=0;while(A<D){F=A+E;if(document.cookie.substring(A,F)==B){return Ext.util.Cookies.getCookieVal(F)}A=document.cookie.indexOf(" ",A)+1;if(A===0){break}}return null},clear:function(A){if(Ext.util.Cookies.get(A)){document.cookie=A+"=; expires=Thu, 01-Jan-70 00:00:01 GMT"}},getCookieVal:function(A){var B=document.cookie.indexOf(";",A);if(B==-1){B=document.cookie.length}return unescape(document.cookie.substring(A,B))}};Ext.handleError=function(A){throw A};Ext.Error=function(A){this.message=(this.lang[A])?this.lang[A]:A};Ext.Error.prototype=new Error();Ext.apply(Ext.Error.prototype,{lang:{},name:"Ext.Error",getName:function(){return this.name},getMessage:function(){return this.message},toJson:function(){return Ext.encode(this)}});Ext.ComponentMgr=function(){var A=new Ext.util.MixedCollection();var B={};var C={};return{register:function(D){A.add(D)},unregister:function(D){A.remove(D)},get:function(D){return A.get(D)},onAvailable:function(F,D,E){A.on("add",function(H,G){if(G.id==F){D.call(E||G,G);A.un("add",D,E)}})},all:A,types:B,ptypes:C,isRegistered:function(D){return B[D]!==undefined},isPluginRegistered:function(D){return C[D]!==undefined},registerType:function(D,E){B[D]=E;E.xtype=D},create:function(D,E){return D.render?D:new B[D.xtype||E](D)},registerPlugin:function(D,E){C[D]=E;E.ptype=D},createPlugin:function(E,F){var D=C[E.ptype||F];if(D.init){return D}else{return new D(E)}}}}();Ext.reg=Ext.ComponentMgr.registerType;Ext.preg=Ext.ComponentMgr.registerPlugin;Ext.create=Ext.ComponentMgr.create;Ext.Component=function(B){B=B||{};if(B.initialConfig){if(B.isAction){this.baseAction=B}B=B.initialConfig}else{if(B.tagName||B.dom||Ext.isString(B)){B={applyTo:B,id:B.id||B}}}this.initialConfig=B;Ext.apply(this,B);this.addEvents("added","disable","enable","beforeshow","show","beforehide","hide","removed","beforerender","render","afterrender","beforedestroy","destroy","beforestaterestore","staterestore","beforestatesave","statesave");this.getId();Ext.ComponentMgr.register(this);Ext.Component.superclass.constructor.call(this);if(this.baseAction){this.baseAction.addComponent(this)}this.initComponent();if(this.plugins){if(Ext.isArray(this.plugins)){for(var A=0,C=this.plugins.length;A<C;A++){this.plugins[A]=this.initPlugin(this.plugins[A])}}else{this.plugins=this.initPlugin(this.plugins)}}if(this.stateful!==false){this.initState()}if(this.applyTo){this.applyToMarkup(this.applyTo);delete this.applyTo}else{if(this.renderTo){this.render(this.renderTo);delete this.renderTo}}};Ext.Component.AUTO_ID=1000;Ext.extend(Ext.Component,Ext.util.Observable,{disabled:false,hidden:false,autoEl:"div",disabledClass:"x-item-disabled",allowDomMove:true,autoShow:false,hideMode:"display",hideParent:false,rendered:false,tplWriteMode:"overwrite",bubbleEvents:[],ctype:"Ext.Component",actionMode:"el",getActionEl:function(){return this[this.actionMode]},initPlugin:function(A){if(A.ptype&&!Ext.isFunction(A.init)){A=Ext.ComponentMgr.createPlugin(A)}else{if(Ext.isString(A)){A=Ext.ComponentMgr.createPlugin({ptype:A})}}A.init(this);return A},initComponent:function(){if(this.listeners){this.on(this.listeners);delete this.listeners}this.enableBubble(this.bubbleEvents)},render:function(C,A){if(!this.rendered&&this.fireEvent("beforerender",this)!==false){if(!C&&this.el){this.el=Ext.get(this.el);C=this.el.dom.parentNode;this.allowDomMove=false}this.container=Ext.get(C);if(this.ctCls){this.container.addClass(this.ctCls)}this.rendered=true;if(A!==undefined){if(Ext.isNumber(A)){A=this.container.dom.childNodes[A]}else{A=Ext.getDom(A)}}this.onRender(this.container,A||null);if(this.autoShow){this.el.removeClass(["x-hidden","x-hide-"+this.hideMode])}if(this.cls){this.el.addClass(this.cls);delete this.cls}if(this.style){this.el.applyStyles(this.style);delete this.style}if(this.overCls){this.el.addClassOnOver(this.overCls)}this.fireEvent("render",this);var B=this.getContentTarget();if(this.html){B.update(Ext.DomHelper.markup(this.html));delete this.html}if(this.contentEl){var D=Ext.getDom(this.contentEl);Ext.fly(D).removeClass(["x-hidden","x-hide-display"]);B.appendChild(D)}if(this.tpl){if(!this.tpl.compile){this.tpl=new Ext.XTemplate(this.tpl)}if(this.data){this.tpl[this.tplWriteMode](B,this.data);delete this.data}}this.afterRender(this.container);if(this.hidden){this.doHide()}if(this.disabled){this.disable(true)}if(this.stateful!==false){this.initStateEvents()}this.fireEvent("afterrender",this)}return this},update:function(A,E,D){var B=this.getContentTarget();if(this.tpl&&typeof A!=="string"){this.tpl[this.tplWriteMode](B,A||{})}else{var C=Ext.isObject(A)?Ext.DomHelper.markup(A):A;B.update(C,E,D)}},onAdded:function(B,A){this.ownerCt=B;this.initRef();this.fireEvent("added",this,B,A)},onRemoved:function(){this.removeRef();this.fireEvent("removed",this,this.ownerCt);delete this.ownerCt},initRef:function(){if(this.ref&&!this.refOwner){var A=this.ref.split("/"),C=A.length,B=0,D=this;while(D&&B<C){D=D.ownerCt;++B}if(D){D[this.refName=A[--B]]=this;this.refOwner=D}}},removeRef:function(){if(this.refOwner&&this.refName){delete this.refOwner[this.refName];delete this.refOwner}},initState:function(){if(Ext.state.Manager){var B=this.getStateId();if(B){var A=Ext.state.Manager.get(B);if(A){if(this.fireEvent("beforestaterestore",this,A)!==false){this.applyState(Ext.apply({},A));this.fireEvent("staterestore",this,A)}}}}},getStateId:function(){return this.stateId||((/^(ext-comp-|ext-gen)/).test(String(this.id))?null:this.id)},initStateEvents:function(){if(this.stateEvents){for(var A=0,B;B=this.stateEvents[A];A++){this.on(B,this.saveState,this,{delay:100})}}},applyState:function(A){if(A){Ext.apply(this,A)}},getState:function(){return null},saveState:function(){if(Ext.state.Manager&&this.stateful!==false){var B=this.getStateId();if(B){var A=this.getState();if(this.fireEvent("beforestatesave",this,A)!==false){Ext.state.Manager.set(B,A);this.fireEvent("statesave",this,A)}}}},applyToMarkup:function(A){this.allowDomMove=false;this.el=Ext.get(A);this.render(this.el.dom.parentNode)},addClass:function(A){if(this.el){this.el.addClass(A)}else{this.cls=this.cls?this.cls+" "+A:A}return this},removeClass:function(A){if(this.el){this.el.removeClass(A)}else{if(this.cls){this.cls=this.cls.split(" ").remove(A).join(" ")}}return this},onRender:function(C,B){if(!this.el&&this.autoEl){if(Ext.isString(this.autoEl)){this.el=document.createElement(this.autoEl)}else{var A=document.createElement("div");Ext.DomHelper.overwrite(A,this.autoEl);this.el=A.firstChild}if(!this.el.id){this.el.id=this.getId()}}if(this.el){this.el=Ext.get(this.el);if(this.allowDomMove!==false){C.dom.insertBefore(this.el.dom,B);if(A){Ext.removeNode(A);A=null}}}},getAutoCreate:function(){var A=Ext.isObject(this.autoCreate)?this.autoCreate:Ext.apply({},this.defaultAutoCreate);if(this.id&&!A.id){A.id=this.id}return A},afterRender:Ext.emptyFn,destroy:function(){if(!this.isDestroyed){if(this.fireEvent("beforedestroy",this)!==false){this.destroying=true;this.beforeDestroy();if(this.ownerCt&&this.ownerCt.remove){this.ownerCt.remove(this,false)}if(this.rendered){this.el.remove();if(this.actionMode=="container"||this.removeMode=="container"){this.container.remove()}}if(this.focusTask&&this.focusTask.cancel){this.focusTask.cancel()}this.onDestroy();Ext.ComponentMgr.unregister(this);this.fireEvent("destroy",this);this.purgeListeners();this.destroying=false;this.isDestroyed=true}}},deleteMembers:function(){var C=arguments;for(var A=0,B=C.length;A<B;++A){delete this[C[A]]}},beforeDestroy:Ext.emptyFn,onDestroy:Ext.emptyFn,getEl:function(){return this.el},getContentTarget:function(){return this.el},getId:function(){return this.id||(this.id="ext-comp-"+(++Ext.Component.AUTO_ID))},getItemId:function(){return this.itemId||this.getId()},focus:function(A,B){if(B){this.focusTask=new Ext.util.DelayedTask(this.focus,this,[A,false]);this.focusTask.delay(Ext.isNumber(B)?B:10);return this}if(this.rendered&&!this.isDestroyed){this.el.focus();if(A===true){this.el.dom.select()}}return this},blur:function(){if(this.rendered){this.el.blur()}return this},disable:function(A){if(this.rendered){this.onDisable()}this.disabled=true;if(A!==true){this.fireEvent("disable",this)}return this},onDisable:function(){this.getActionEl().addClass(this.disabledClass);this.el.dom.disabled=true},enable:function(){if(this.rendered){this.onEnable()}this.disabled=false;this.fireEvent("enable",this);return this},onEnable:function(){this.getActionEl().removeClass(this.disabledClass);this.el.dom.disabled=false},setDisabled:function(A){return this[A?"disable":"enable"]()},show:function(){if(this.fireEvent("beforeshow",this)!==false){this.hidden=false;if(this.autoRender){this.render(Ext.isBoolean(this.autoRender)?Ext.getBody():this.autoRender)}if(this.rendered){this.onShow()}this.fireEvent("show",this)}return this},onShow:function(){this.getVisibilityEl().removeClass("x-hide-"+this.hideMode)},hide:function(){if(this.fireEvent("beforehide",this)!==false){this.doHide();this.fireEvent("hide",this)}return this},doHide:function(){this.hidden=true;if(this.rendered){this.onHide()}},onHide:function(){this.getVisibilityEl().addClass("x-hide-"+this.hideMode)},getVisibilityEl:function(){return this.hideParent?this.container:this.getActionEl()},setVisible:function(A){return this[A?"show":"hide"]()},isVisible:function(){return this.rendered&&this.getVisibilityEl().isVisible()},cloneConfig:function(B){B=B||{};var C=B.id||Ext.id();var A=Ext.applyIf(B,this.initialConfig);A.id=C;return new this.constructor(A)},getXType:function(){return this.constructor.xtype},isXType:function(A,B){if(Ext.isFunction(A)){A=A.xtype}else{if(Ext.isObject(A)){A=A.constructor.xtype}}return !B?("/"+this.getXTypes()+"/").indexOf("/"+A+"/")!=-1:this.constructor.xtype==A},getXTypes:function(){var A=this.constructor;if(!A.xtypes){var B=[],C=this;while(C&&C.constructor.xtype){B.unshift(C.constructor.xtype);C=C.constructor.superclass}A.xtypeChain=B;A.xtypes=B.join("/")}return A.xtypes},findParentBy:function(B){for(var A=this.ownerCt;(A!=null)&&!B(A,this);A=A.ownerCt){}return A||null},findParentByType:function(A,B){return this.findParentBy(function(C){return C.isXType(A,B)})},bubble:function(B,C,D){var A=this;while(A){if(B.apply(C||A,D||[A])===false){break}A=A.ownerCt}return this},getPositionEl:function(){return this.positionEl||this.el},purgeListeners:function(){Ext.Component.superclass.purgeListeners.call(this);if(this.mons){this.on("beforedestroy",this.clearMons,this,{single:true})}},clearMons:function(){Ext.each(this.mons,function(A){A.item.un(A.ename,A.fn,A.scope)},this);this.mons=[]},createMons:function(){if(!this.mons){this.mons=[];this.on("beforedestroy",this.clearMons,this,{single:true})}},mon:function(H,G,F,C,B){this.createMons();if(Ext.isObject(G)){var D=/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate)$/;var E=G;for(var A in E){if(D.test(A)){continue}if(Ext.isFunction(E[A])){this.mons.push({item:H,ename:A,fn:E[A],scope:E.scope});H.on(A,E[A],E.scope,E)}else{this.mons.push({item:H,ename:A,fn:E[A],scope:E.scope});H.on(A,E[A])}}return}this.mons.push({item:H,ename:G,fn:F,scope:C});H.on(G,F,C,B)},mun:function(H,E,D,A){var C,G;this.createMons();for(var B=0,F=this.mons.length;B<F;++B){G=this.mons[B];if(H===G.item&&E==G.ename&&D===G.fn&&A===G.scope){this.mons.splice(B,1);H.un(E,D,A);C=true;break}}return C},nextSibling:function(){if(this.ownerCt){var A=this.ownerCt.items.indexOf(this);if(A!=-1&&A+1<this.ownerCt.items.getCount()){return this.ownerCt.items.itemAt(A+1)}}return null},previousSibling:function(){if(this.ownerCt){var A=this.ownerCt.items.indexOf(this);if(A>0){return this.ownerCt.items.itemAt(A-1)}}return null},getBubbleTarget:function(){return this.ownerCt}});Ext.reg("component",Ext.Component);Ext.Action=Ext.extend(Object,{constructor:function(A){this.initialConfig=A;this.itemId=A.itemId=(A.itemId||A.id||Ext.id());this.items=[]},isAction:true,setText:function(A){this.initialConfig.text=A;this.callEach("setText",[A])},getText:function(){return this.initialConfig.text},setIconClass:function(A){this.initialConfig.iconCls=A;this.callEach("setIconClass",[A])},getIconClass:function(){return this.initialConfig.iconCls},setDisabled:function(A){this.initialConfig.disabled=A;this.callEach("setDisabled",[A])},enable:function(){this.setDisabled(false)},disable:function(){this.setDisabled(true)},isDisabled:function(){return this.initialConfig.disabled},setHidden:function(A){this.initialConfig.hidden=A;this.callEach("setVisible",[!A])},show:function(){this.setHidden(false)},hide:function(){this.setHidden(true)},isHidden:function(){return this.initialConfig.hidden},setHandler:function(A,B){this.initialConfig.handler=A;this.initialConfig.scope=B;this.callEach("setHandler",[A,B])},each:function(A,B){Ext.each(this.items,A,B)},callEach:function(E,C){var B=this.items;for(var A=0,D=B.length;A<D;A++){B[A][E].apply(B[A],C)}},addComponent:function(A){this.items.push(A);A.on("destroy",this.removeComponent,this)},removeComponent:function(A){this.items.remove(A)},execute:function(){this.initialConfig.handler.apply(this.initialConfig.scope||window,arguments)}});(function(){Ext.Layer=function(E,F){E=E||{};var C=Ext.DomHelper,G=E.parentEl,H=G?Ext.getDom(G):document.body;if(F){this.dom=Ext.getDom(F)}if(!this.dom){var D=E.dh||{tag:"div",cls:"x-layer"};this.dom=C.append(H,D)}if(E.cls){this.addClass(E.cls)}this.constrain=E.constrain!==false;this.setVisibilityMode(Ext.Element.VISIBILITY);if(E.id){this.id=this.dom.id=E.id}else{this.id=Ext.id(this.dom)}this.zindex=E.zindex||this.getZIndex();this.position("absolute",this.zindex);if(E.shadow){this.shadowOffset=E.shadowOffset||4;this.shadow=new Ext.Shadow({offset:this.shadowOffset,mode:E.shadow})}else{this.shadowOffset=0}this.useShim=E.shim!==false&&Ext.useShims;this.useDisplay=E.useDisplay;this.hide()};var A=Ext.Element.prototype;var B=[];Ext.extend(Ext.Layer,Ext.Element,{getZIndex:function(){return this.zindex||parseInt((this.getShim()||this).getStyle("z-index"),10)||11000},getShim:function(){if(!this.useShim){return null}if(this.shim){return this.shim}var D=B.shift();if(!D){D=this.createShim();D.enableDisplayMode("block");D.dom.style.display="none";D.dom.style.visibility="visible"}var C=this.dom.parentNode;if(D.dom.parentNode!=C){C.insertBefore(D.dom,this.dom)}D.setStyle("z-index",this.getZIndex()-2);this.shim=D;return D},hideShim:function(){if(this.shim){this.shim.setDisplayed(false);B.push(this.shim);delete this.shim}},disableShadow:function(){if(this.shadow){this.shadowDisabled=true;this.shadow.hide();this.lastShadowOffset=this.shadowOffset;this.shadowOffset=0}},enableShadow:function(C){if(this.shadow){this.shadowDisabled=false;if(Ext.isDefined(this.lastShadowOffset)){this.shadowOffset=this.lastShadowOffset;delete this.lastShadowOffset}if(C){this.sync(true)}}},sync:function(G){var H=this.shadow;if(!this.updating&&this.isVisible()&&(H||this.useShim)){var D=this.getShim(),E=this.getWidth(),I=this.getHeight(),K=this.getLeft(true),F=this.getTop(true);if(H&&!this.shadowDisabled){if(G&&!H.isVisible()){H.show(this)}else{H.realign(K,F,E,I)}if(D){if(G){D.show()}var L=H.el.getXY(),C=D.dom.style,J=H.el.getSize();C.left=(L[0])+"px";C.top=(L[1])+"px";C.width=(J.width)+"px";C.height=(J.height)+"px"}}else{if(D){if(G){D.show()}D.setSize(E,I);D.setLeftTop(K,F)}}}},destroy:function(){this.hideShim();if(this.shadow){this.shadow.hide()}this.removeAllListeners();Ext.removeNode(this.dom);delete this.dom},remove:function(){this.destroy()},beginUpdate:function(){this.updating=true},endUpdate:function(){this.updating=false;this.sync(true)},hideUnders:function(C){if(this.shadow){this.shadow.hide()}this.hideShim()},constrainXY:function(){if(this.constrain){var E=Ext.lib.Dom.getViewWidth(),M=Ext.lib.Dom.getViewHeight();var C=Ext.getDoc().getScroll();var G=this.getXY();var K=G[0],L=G[1];var J=this.shadowOffset;var D=this.dom.offsetWidth+J,H=this.dom.offsetHeight+J;var F=false;if((K+D)>E+C.left){K=E-D-J;F=true}if((L+H)>M+C.top){L=M-H-J;F=true}if(K<C.left){K=C.left;F=true}if(L<C.top){L=C.top;F=true}if(F){if(this.avoidY){var I=this.avoidY;if(L<=I&&(L+H)>=I){L=I-H-5}}G=[K,L];this.storeXY(G);A.setXY.call(this,G);this.sync()}}return this},getConstrainOffset:function(){return this.shadowOffset},isVisible:function(){return this.visible},showAction:function(){this.visible=true;if(this.useDisplay===true){this.setDisplayed("")}else{if(this.lastXY){A.setXY.call(this,this.lastXY)}else{if(this.lastLT){A.setLeftTop.call(this,this.lastLT[0],this.lastLT[1])}}}},hideAction:function(){this.visible=false;if(this.useDisplay===true){this.setDisplayed(false)}else{this.setLeftTop(-10000,-10000)}},setVisible:function(F,H,D,G,E){if(F){this.showAction()}if(H&&F){var C=function(){this.sync(true);if(G){G()}}.createDelegate(this);A.setVisible.call(this,true,true,D,C,E)}else{if(!F){this.hideUnders(true)}var C=G;if(H){C=function(){this.hideAction();if(G){G()}}.createDelegate(this)}A.setVisible.call(this,F,H,D,C,E);if(F){this.sync(true)}else{if(!H){this.hideAction()}}}return this},storeXY:function(C){delete this.lastLT;this.lastXY=C},storeLeftTop:function(C,D){delete this.lastXY;this.lastLT=[C,D]},beforeFx:function(){this.beforeAction();return Ext.Layer.superclass.beforeFx.apply(this,arguments)},afterFx:function(){Ext.Layer.superclass.afterFx.apply(this,arguments);this.sync(this.isVisible())},beforeAction:function(){if(!this.updating&&this.shadow){this.shadow.hide()}},setLeft:function(C){this.storeLeftTop(C,this.getTop(true));A.setLeft.apply(this,arguments);this.sync();return this},setTop:function(C){this.storeLeftTop(this.getLeft(true),C);A.setTop.apply(this,arguments);this.sync();return this},setLeftTop:function(C,D){this.storeLeftTop(C,D);A.setLeftTop.apply(this,arguments);this.sync();return this},setXY:function(C,H,D,G,E){this.fixDisplay();this.beforeAction();this.storeXY(C);var F=this.createCB(G);A.setXY.call(this,C,H,D,F,E);if(!H){F()}return this},createCB:function(D){var C=this;return function(){C.constrainXY();C.sync(true);if(D){D()}}},setX:function(E,G,C,F,D){this.setXY([E,this.getY()],G,C,F,D);return this},setY:function(F,G,D,C,E){this.setXY([this.getX(),F],G,D,C,E);return this},setSize:function(G,C,I,D,H,E){this.beforeAction();var F=this.createCB(H);A.setSize.call(this,G,C,I,D,F,E);if(!I){F()}return this},setWidth:function(F,H,D,G,E){this.beforeAction();var C=this.createCB(G);A.setWidth.call(this,F,H,D,C,E);if(!H){C()}return this},setHeight:function(C,H,D,G,E){this.beforeAction();var F=this.createCB(G);A.setHeight.call(this,C,H,D,F,E);if(!H){F()}return this},setBounds:function(G,H,E,F,I,K,J,C){this.beforeAction();var D=this.createCB(J);if(!I){this.storeXY([G,H]);A.setXY.call(this,[G,H]);A.setSize.call(this,E,F,I,K,D,C);D()}else{A.setBounds.call(this,G,H,E,F,I,K,D,C)}return this},setZIndex:function(C){this.zindex=C;this.setStyle("z-index",C+2);if(this.shadow){this.shadow.setZIndex(C+1)}if(this.shim){this.shim.setStyle("z-index",C)}return this}})})();Ext.Shadow=function(C){Ext.apply(this,C);if(typeof this.mode!="string"){this.mode=this.defaultMode}var B=this.offset,D={h:0},A=Math.floor(this.offset/2);switch(this.mode.toLowerCase()){case"drop":D.w=0;D.l=D.t=B;D.t-=1;if(Ext.isIE){D.l-=this.offset+A;D.t-=this.offset+A;D.w-=A;D.h-=A;D.t+=1}break;case"sides":D.w=(B*2);D.l=-B;D.t=B-1;if(Ext.isIE){D.l-=(this.offset-A);D.t-=this.offset+A;D.l+=1;D.w-=(this.offset-A)*2;D.w-=A+1;D.h-=1}break;case"frame":D.w=D.h=(B*2);D.l=D.t=-B;D.t+=1;D.h-=2;if(Ext.isIE){D.l-=(this.offset-A);D.t-=(this.offset-A);D.l+=1;D.w-=(this.offset+A+1);D.h-=(this.offset+A);D.h+=1}break}this.adjusts=D};Ext.Shadow.prototype={offset:4,defaultMode:"drop",show:function(A){A=Ext.get(A);if(!this.el){this.el=Ext.Shadow.Pool.pull();if(this.el.dom.nextSibling!=A.dom){this.el.insertBefore(A)}}this.el.setStyle("z-index",this.zIndex||parseInt(A.getStyle("z-index"),10)-1);if(Ext.isIE){this.el.dom.style.filter="progid:DXImageTransform.Microsoft.alpha(opacity=50) progid:DXImageTransform.Microsoft.Blur(pixelradius="+(this.offset)+")"}this.realign(A.getLeft(true),A.getTop(true),A.getWidth(),A.getHeight());this.el.dom.style.display="block"},isVisible:function(){return this.el?true:false},realign:function(I,D,C,F){if(!this.el){return}var L=this.adjusts,N=this.el.dom,A=N.style,H=0,B=(C+L.w),J=(F+L.h),K=B+"px",M=J+"px",G,E;A.left=(I+L.l)+"px";A.top=(D+L.t)+"px";if(A.width!=K||A.height!=M){A.width=K;A.height=M;if(!Ext.isIE){G=N.childNodes;E=Math.max(0,(B-12))+"px";G[0].childNodes[1].style.width=E;G[1].childNodes[1].style.width=E;G[2].childNodes[1].style.width=E;G[1].style.height=Math.max(0,(J-12))+"px"}}},hide:function(){if(this.el){this.el.dom.style.display="none";Ext.Shadow.Pool.push(this.el);delete this.el}},setZIndex:function(A){this.zIndex=A;if(this.el){this.el.setStyle("z-index",A)}}};Ext.Shadow.Pool=function(){var A=[],B=Ext.isIE?'<div class="x-ie-shadow"></div>':'<div class="x-shadow"><div class="xst"><div class="xstl"></div><div class="xstc"></div><div class="xstr"></div></div><div class="xsc"><div class="xsml"></div><div class="xsmc"></div><div class="xsmr"></div></div><div class="xsb"><div class="xsbl"></div><div class="xsbc"></div><div class="xsbr"></div></div></div>';return{pull:function(){var C=A.shift();if(!C){C=Ext.get(Ext.DomHelper.insertHtml("beforeBegin",document.body.firstChild,B));C.autoBoxAdjust=false}return C},push:function(C){A.push(C)}}}();Ext.BoxComponent=Ext.extend(Ext.Component,{initComponent:function(){Ext.BoxComponent.superclass.initComponent.call(this);this.addEvents("resize","move")},boxReady:false,deferHeight:false,setSize:function(D,A){if(typeof D=="object"){A=D.height;D=D.width}if(Ext.isDefined(D)&&Ext.isDefined(this.boxMinWidth)&&(D<this.boxMinWidth)){D=this.boxMinWidth}if(Ext.isDefined(A)&&Ext.isDefined(this.boxMinHeight)&&(A<this.boxMinHeight)){A=this.boxMinHeight}if(Ext.isDefined(D)&&Ext.isDefined(this.boxMaxWidth)&&(D>this.boxMaxWidth)){D=this.boxMaxWidth}if(Ext.isDefined(A)&&Ext.isDefined(this.boxMaxHeight)&&(A>this.boxMaxHeight)){A=this.boxMaxHeight}if(!this.boxReady){this.width=D;this.height=A;return this}if(this.cacheSizes!==false&&this.lastSize&&this.lastSize.width==D&&this.lastSize.height==A){return this}this.lastSize={width:D,height:A};var C=this.adjustSize(D,A),E=C.width,F=C.height,B;if(E!==undefined||F!==undefined){B=this.getResizeEl();if(!this.deferHeight&&E!==undefined&&F!==undefined){B.setSize(E,F)}else{if(!this.deferHeight&&F!==undefined){B.setHeight(F)}else{if(E!==undefined){B.setWidth(E)}}}this.onResize(E,F,D,A);this.fireEvent("resize",this,E,F,D,A)}return this},setWidth:function(A){return this.setSize(A)},setHeight:function(A){return this.setSize(undefined,A)},getSize:function(){return this.getResizeEl().getSize()},getWidth:function(){return this.getResizeEl().getWidth()},getHeight:function(){return this.getResizeEl().getHeight()},getOuterSize:function(){var A=this.getResizeEl();return{width:A.getWidth()+A.getMargins("lr"),height:A.getHeight()+A.getMargins("tb")}},getPosition:function(B){var A=this.getPositionEl();if(B===true){return[A.getLeft(true),A.getTop(true)]}return this.xy||A.getXY()},getBox:function(C){var B=this.getPosition(C);var A=this.getSize();A.x=B[0];A.y=B[1];return A},updateBox:function(A){this.setSize(A.width,A.height);this.setPagePosition(A.x,A.y);return this},getResizeEl:function(){return this.resizeEl||this.el},setAutoScroll:function(A){if(this.rendered){this.getContentTarget().setOverflow(A?"auto":"")}this.autoScroll=A;return this},setPosition:function(E,F){if(E&&typeof E[1]=="number"){F=E[1];E=E[0]}this.x=E;this.y=F;if(!this.boxReady){return this}var D=this.adjustPosition(E,F);var B=D.x,C=D.y;var A=this.getPositionEl();if(B!==undefined||C!==undefined){if(B!==undefined&&C!==undefined){A.setLeftTop(B,C)}else{if(B!==undefined){A.setLeft(B)}else{if(C!==undefined){A.setTop(C)}}}this.onPosition(B,C);this.fireEvent("move",this,B,C)}return this},setPagePosition:function(B,C){if(B&&typeof B[1]=="number"){C=B[1];B=B[0]}this.pageX=B;this.pageY=C;if(!this.boxReady){return}if(B===undefined||C===undefined){return}var A=this.getPositionEl().translatePoints(B,C);this.setPosition(A.left,A.top);return this},afterRender:function(){Ext.BoxComponent.superclass.afterRender.call(this);if(this.resizeEl){this.resizeEl=Ext.get(this.resizeEl)}if(this.positionEl){this.positionEl=Ext.get(this.positionEl)}this.boxReady=true;Ext.isDefined(this.autoScroll)&&this.setAutoScroll(this.autoScroll);this.setSize(this.width,this.height);if(this.x||this.y){this.setPosition(this.x,this.y)}else{if(this.pageX||this.pageY){this.setPagePosition(this.pageX,this.pageY)}}},syncSize:function(){delete this.lastSize;this.setSize(this.autoWidth?undefined:this.getResizeEl().getWidth(),this.autoHeight?undefined:this.getResizeEl().getHeight());return this},onResize:function(D,C,A,B){},onPosition:function(A,B){},adjustSize:function(B,A){if(this.autoWidth){B="auto"}if(this.autoHeight){A="auto"}return{width:B,height:A}},adjustPosition:function(A,B){return{x:A,y:B}}});Ext.reg("box",Ext.BoxComponent);Ext.Spacer=Ext.extend(Ext.BoxComponent,{autoEl:"div"});Ext.reg("spacer",Ext.Spacer);Ext.SplitBar=function(A,C,B,E,D){this.el=Ext.get(A,true);this.el.dom.unselectable="on";this.resizingEl=Ext.get(C,true);this.orientation=B||Ext.SplitBar.HORIZONTAL;this.minSize=0;this.maxSize=2000;this.animate=false;this.useShim=false;this.shim=null;if(!D){this.proxy=Ext.SplitBar.createProxy(this.orientation)}else{this.proxy=Ext.get(D).dom}this.dd=new Ext.dd.DDProxy(this.el.dom.id,"XSplitBars",{dragElId:this.proxy.id});this.dd.b4StartDrag=this.onStartProxyDrag.createDelegate(this);this.dd.endDrag=this.onEndProxyDrag.createDelegate(this);this.dragSpecs={};this.adapter=new Ext.SplitBar.BasicLayoutAdapter();this.adapter.init(this);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.placement=E||(this.el.getX()>this.resizingEl.getX()?Ext.SplitBar.LEFT:Ext.SplitBar.RIGHT);this.el.addClass("x-splitbar-h")}else{this.placement=E||(this.el.getY()>this.resizingEl.getY()?Ext.SplitBar.TOP:Ext.SplitBar.BOTTOM);this.el.addClass("x-splitbar-v")}this.addEvents("resize","moved","beforeresize","beforeapply");Ext.SplitBar.superclass.constructor.call(this)};Ext.extend(Ext.SplitBar,Ext.util.Observable,{onStartProxyDrag:function(C,D){this.fireEvent("beforeresize",this);this.overlay=Ext.DomHelper.append(document.body,{cls:"x-drag-overlay",html:"&#160;"},true);this.overlay.unselectable();this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();Ext.get(this.proxy).setDisplayed("block");var A=this.adapter.getElementSize(this);this.activeMinSize=this.getMinimumSize();this.activeMaxSize=this.getMaximumSize();var E=A-this.activeMinSize;var B=Math.max(this.activeMaxSize-A,0);if(this.orientation==Ext.SplitBar.HORIZONTAL){this.dd.resetConstraints();this.dd.setXConstraint(this.placement==Ext.SplitBar.LEFT?E:B,this.placement==Ext.SplitBar.LEFT?B:E,this.tickSize);this.dd.setYConstraint(0,0)}else{this.dd.resetConstraints();this.dd.setXConstraint(0,0);this.dd.setYConstraint(this.placement==Ext.SplitBar.TOP?E:B,this.placement==Ext.SplitBar.TOP?B:E,this.tickSize)}this.dragSpecs.startSize=A;this.dragSpecs.startPoint=[C,D];Ext.dd.DDProxy.prototype.b4StartDrag.call(this.dd,C,D)},onEndProxyDrag:function(B){Ext.get(this.proxy).setDisplayed(false);var A=Ext.lib.Event.getXY(B);if(this.overlay){Ext.destroy(this.overlay);delete this.overlay}var C;if(this.orientation==Ext.SplitBar.HORIZONTAL){C=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.LEFT?A[0]-this.dragSpecs.startPoint[0]:this.dragSpecs.startPoint[0]-A[0])}else{C=this.dragSpecs.startSize+(this.placement==Ext.SplitBar.TOP?A[1]-this.dragSpecs.startPoint[1]:this.dragSpecs.startPoint[1]-A[1])}C=Math.min(Math.max(C,this.activeMinSize),this.activeMaxSize);if(C!=this.dragSpecs.startSize){if(this.fireEvent("beforeapply",this,C)!==false){this.adapter.setElementSize(this,C);this.fireEvent("moved",this,C);this.fireEvent("resize",this,C)}}},getAdapter:function(){return this.adapter},setAdapter:function(A){this.adapter=A;this.adapter.init(this)},getMinimumSize:function(){return this.minSize},setMinimumSize:function(A){this.minSize=A},getMaximumSize:function(){return this.maxSize},setMaximumSize:function(A){this.maxSize=A},setCurrentSize:function(A){var B=this.animate;this.animate=false;this.adapter.setElementSize(this,A);this.animate=B},destroy:function(A){Ext.destroy(this.shim,Ext.get(this.proxy));this.dd.unreg();if(A){this.el.remove()}this.purgeListeners()}});Ext.SplitBar.createProxy=function(A){var B=new Ext.Element(document.createElement("div"));document.body.appendChild(B.dom);B.unselectable();var C="x-splitbar-proxy";B.addClass(C+" "+(A==Ext.SplitBar.HORIZONTAL?C+"-h":C+"-v"));return B.dom};Ext.SplitBar.BasicLayoutAdapter=function(){};Ext.SplitBar.BasicLayoutAdapter.prototype={init:function(A){},getElementSize:function(A){if(A.orientation==Ext.SplitBar.HORIZONTAL){return A.resizingEl.getWidth()}else{return A.resizingEl.getHeight()}},setElementSize:function(B,C,A){if(B.orientation==Ext.SplitBar.HORIZONTAL){if(!B.animate){B.resizingEl.setWidth(C);if(A){A(B,C)}}else{B.resizingEl.setWidth(C,true,0.1,A,"easeOut")}}else{if(!B.animate){B.resizingEl.setHeight(C);if(A){A(B,C)}}else{B.resizingEl.setHeight(C,true,0.1,A,"easeOut")}}}};Ext.SplitBar.AbsoluteLayoutAdapter=function(A){this.basic=new Ext.SplitBar.BasicLayoutAdapter();this.container=Ext.get(A)};Ext.SplitBar.AbsoluteLayoutAdapter.prototype={init:function(A){this.basic.init(A)},getElementSize:function(A){return this.basic.getElementSize(A)},setElementSize:function(B,C,A){this.basic.setElementSize(B,C,this.moveSplitter.createDelegate(this,[B]))},moveSplitter:function(A){var B=Ext.SplitBar;switch(A.placement){case B.LEFT:A.el.setX(A.resizingEl.getRight());break;case B.RIGHT:A.el.setStyle("right",(this.container.getWidth()-A.resizingEl.getLeft())+"px");break;case B.TOP:A.el.setY(A.resizingEl.getBottom());break;case B.BOTTOM:A.el.setY(A.resizingEl.getTop()-A.el.getHeight());break}}};Ext.SplitBar.VERTICAL=1;Ext.SplitBar.HORIZONTAL=2;Ext.SplitBar.LEFT=1;Ext.SplitBar.RIGHT=2;Ext.SplitBar.TOP=3;Ext.SplitBar.BOTTOM=4;Ext.Container=Ext.extend(Ext.BoxComponent,{bufferResize:50,autoDestroy:true,forceLayout:false,defaultType:"panel",resizeEvent:"resize",bubbleEvents:["add","remove"],initComponent:function(){Ext.Container.superclass.initComponent.call(this);this.addEvents("afterlayout","beforeadd","beforeremove","add","remove");var A=this.items;if(A){delete this.items;this.add(A)}},initItems:function(){if(!this.items){this.items=new Ext.util.MixedCollection(false,this.getComponentId);this.getLayout()}},setLayout:function(A){if(this.layout&&this.layout!=A){this.layout.setContainer(null)}this.layout=A;this.initItems();A.setContainer(this)},afterRender:function(){Ext.Container.superclass.afterRender.call(this);if(!this.layout){this.layout="auto"}if(Ext.isObject(this.layout)&&!this.layout.layout){this.layoutConfig=this.layout;this.layout=this.layoutConfig.type}if(Ext.isString(this.layout)){this.layout=new Ext.Container.LAYOUTS[this.layout.toLowerCase()](this.layoutConfig)}this.setLayout(this.layout);if(this.activeItem!==undefined&&this.layout.setActiveItem){var A=this.activeItem;delete this.activeItem;this.layout.setActiveItem(A)}if(!this.ownerCt){this.doLayout(false,true)}if(this.monitorResize===true){Ext.EventManager.onWindowResize(this.doLayout,this,[false])}},getLayoutTarget:function(){return this.el},getComponentId:function(A){return A.getItemId()},add:function(E){this.initItems();var C=arguments.length>1;if(C||Ext.isArray(E)){var A=[];Ext.each(C?arguments:E,function(F){A.push(this.add(F))},this);return A}var D=this.lookupComponent(this.applyDefaults(E));var B=this.items.length;if(this.fireEvent("beforeadd",this,D,B)!==false&&this.onBeforeAdd(D)!==false){this.items.add(D);D.onAdded(this,B);this.onAdd(D);this.fireEvent("add",this,D,B)}return D},onAdd:function(A){},onAdded:function(B,A){this.ownerCt=B;this.initRef();this.cascade(function(C){C.initRef()});this.fireEvent("added",this,B,A)},insert:function(E,G){var D=arguments,A=D.length,C=[],B,F;this.initItems();if(A>2){for(B=A-1;B>=1;--B){C.push(this.insert(E,D[B]))}return C}F=this.lookupComponent(this.applyDefaults(G));E=Math.min(E,this.items.length);if(this.fireEvent("beforeadd",this,F,E)!==false&&this.onBeforeAdd(F)!==false){if(F.ownerCt==this){this.items.remove(F)}this.items.insert(E,F);F.onAdded(this,E);this.onAdd(F);this.fireEvent("add",this,F,E)}return F},applyDefaults:function(B){var A=this.defaults;if(A){if(Ext.isFunction(A)){A=A.call(this,B)}if(Ext.isString(B)){B=Ext.ComponentMgr.get(B);Ext.apply(B,A)}else{if(!B.events){Ext.applyIf(B.isAction?B.initialConfig:B,A)}else{Ext.apply(B,A)}}}return B},onBeforeAdd:function(A){if(A.ownerCt){A.ownerCt.remove(A,false)}if(this.hideBorders===true){A.border=(A.border===true)}},remove:function(C,A){this.initItems();var B=this.getComponent(C);if(B&&this.fireEvent("beforeremove",this,B)!==false){this.doRemove(B,A);this.fireEvent("remove",this,B)}return B},onRemove:function(A){},doRemove:function(C,D){var A=this.layout,B=A&&this.rendered;if(B){A.onRemove(C)}this.items.remove(C);C.onRemoved();this.onRemove(C);if(D===true||(D!==false&&this.autoDestroy)){C.destroy()}if(B){A.afterRemove(C)}},removeAll:function(F){this.initItems();var B,E=[],D=[];this.items.each(function(G){E.push(G)});for(var A=0,C=E.length;A<C;++A){B=E[A];this.remove(B,F);if(B.ownerCt!==this){D.push(B)}}return D},getComponent:function(A){if(Ext.isObject(A)){A=A.getItemId()}return this.items.get(A)},lookupComponent:function(A){if(Ext.isString(A)){return Ext.ComponentMgr.get(A)}else{if(!A.events){return this.createComponent(A)}}return A},createComponent:function(A,B){if(A.render){return A}var C=Ext.create(Ext.apply({ownerCt:this},A),B||this.defaultType);delete C.initialConfig.ownerCt;delete C.ownerCt;return C},canLayout:function(){var A=this.getVisibilityEl();return A&&A.dom&&!A.isStyle("display","none")},doLayout:function(F,C){var A=this.rendered,D=C||this.forceLayout;if(this.collapsed||!this.canLayout()){this.deferLayout=this.deferLayout||!F;if(!D){return}F=F&&!this.deferLayout}else{delete this.deferLayout}if(A&&this.layout){this.layout.layout()}if(F!==true&&this.items){var B=this.items.items;for(var E=0,G=B.length;E<G;E++){var H=B[E];if(H.doLayout){H.doLayout(false,D)}}}if(A){this.onLayout(F,D)}this.hasLayout=true;delete this.forceLayout},onLayout:Ext.emptyFn,shouldBufferLayout:function(){var A=this.hasLayout;if(this.ownerCt){return A?!this.hasLayoutPending():false}return A},hasLayoutPending:function(){var A=false;this.ownerCt.bubble(function(B){if(B.layoutPending){A=true;return false}});return A},onShow:function(){Ext.Container.superclass.onShow.call(this);if(Ext.isDefined(this.deferLayout)){delete this.deferLayout;this.doLayout(true)}},getLayout:function(){if(!this.layout){var A=new Ext.layout.AutoLayout(this.layoutConfig);this.setLayout(A)}return this.layout},beforeDestroy:function(){var A;if(this.items){while(A=this.items.first()){this.doRemove(A,true)}}if(this.monitorResize){Ext.EventManager.removeResizeListener(this.doLayout,this)}Ext.destroy(this.layout);Ext.Container.superclass.beforeDestroy.call(this)},cascade:function(B,D,F){if(B.apply(D||this,F||[this])!==false){if(this.items){var C=this.items.items;for(var A=0,E=C.length;A<E;A++){if(C[A].cascade){C[A].cascade(B,D,F)}else{B.apply(D||C[A],F||[C[A]])}}}}return this},findById:function(C){var A=null,B=this;this.cascade(function(D){if(B!=D&&D.id===C){A=D;return false}});return A},findByType:function(A,B){return this.findBy(function(C){return C.isXType(A,B)})},find:function(A,B){return this.findBy(function(C){return C[A]===B})},findBy:function(A,C){var B=[],D=this;this.cascade(function(E){if(D!=E&&A.call(C||E,E,D)===true){B.push(E)}});return B},get:function(A){return this.getComponent(A)}});Ext.Container.LAYOUTS={};Ext.reg("container",Ext.Container);Ext.layout.ContainerLayout=Ext.extend(Object,{monitorResize:false,activeItem:null,constructor:function(A){this.id=Ext.id(null,"ext-layout-");Ext.apply(this,A)},type:"container",IEMeasureHack:function(E,B){var G=E.dom.childNodes,C=G.length,F,I=[],A,D,H;for(D=0;D<C;D++){F=G[D];A=Ext.get(F);if(A){I[D]=A.getStyle("display");A.setStyle({display:"none"})}}H=E?E.getViewSize(B):{};for(D=0;D<C;D++){F=G[D];A=Ext.get(F);if(A){A.setStyle({display:I[D]})}}return H},getLayoutTargetSize:Ext.EmptyFn,layout:function(){var A=this.container,B=A.getLayoutTarget();if(!(this.hasLayout||Ext.isEmpty(this.targetCls))){B.addClass(this.targetCls)}this.onLayout(A,B);A.fireEvent("afterlayout",A,this)},onLayout:function(A,B){this.renderAll(A,B)},isValidParent:function(A,B){return B&&A.getPositionEl().dom.parentNode==(B.dom||B)},renderAll:function(D,E){var B=D.items.items,A,F,C=B.length;for(A=0;A<C;A++){F=B[A];if(F&&(!F.rendered||!this.isValidParent(F,E))){this.renderItem(F,A,E)}}},renderItem:function(B,A,C){if(B){if(!B.rendered){B.render(C,A);this.configureItem(B)}else{if(!this.isValidParent(B,C)){if(Ext.isNumber(A)){A=C.dom.childNodes[A]}C.dom.insertBefore(B.getPositionEl().dom,A||null);B.container=C;this.configureItem(B)}}}},getRenderedItems:function(E){var F=E.getLayoutTarget(),A=E.items.items,D=A.length,B,G,C=[];for(B=0;B<D;B++){if((G=A[B]).rendered&&this.isValidParent(G,F)&&G.shouldLayout!==false){C.push(G)}}return C},configureItem:function(A){if(this.extraCls){var B=A.getPositionEl?A.getPositionEl():A;B.addClass(this.extraCls)}if(A.doLayout&&this.forceLayout){A.doLayout()}if(this.renderHidden&&A!=this.activeItem){A.hide()}},onRemove:function(A){if(this.activeItem==A){delete this.activeItem}if(A.rendered&&this.extraCls){var B=A.getPositionEl?A.getPositionEl():A;B.removeClass(this.extraCls)}},afterRemove:function(A){if(A.removeRestore){A.removeMode="container";delete A.removeRestore}},onResize:function(){var B=this.container,A;if(B.collapsed){return}if(A=B.bufferResize&&B.shouldBufferLayout()){if(!this.resizeTask){this.resizeTask=new Ext.util.DelayedTask(this.runLayout,this);this.resizeBuffer=Ext.isNumber(A)?A:50}B.layoutPending=true;this.resizeTask.delay(this.resizeBuffer)}else{this.runLayout()}},runLayout:function(){var A=this.container;this.layout();A.onLayout();delete A.layoutPending},setContainer:function(B){if(this.monitorResize&&B!=this.container){var A=this.container;if(A){A.un(A.resizeEvent,this.onResize,this)}if(B){B.on(B.resizeEvent,this.onResize,this)}}this.container=B},parseMargins:function(B){if(Ext.isNumber(B)){B=B.toString()}var A=B.split(" "),C=A.length;if(C==1){A[1]=A[2]=A[3]=A[0]}else{if(C==2){A[2]=A[0];A[3]=A[1]}else{if(C==3){A[3]=A[1]}}}return{top:parseInt(A[0],10)||0,right:parseInt(A[1],10)||0,bottom:parseInt(A[2],10)||0,left:parseInt(A[3],10)||0}},fieldTpl:(function(){var A=new Ext.Template('<div class="x-form-item {itemCls}" tabIndex="-1">','<label for="{id}" style="{labelStyle}" class="x-form-item-label">{label}{labelSeparator}</label>','<div class="x-form-element" id="x-form-el-{id}" style="{elementStyle}">','</div><div class="{clearCls}"></div>',"</div>");A.disableFormats=true;return A.compile()})(),destroy:function(){if(this.resizeTask&&this.resizeTask.cancel){this.resizeTask.cancel()}if(this.container){this.container.un(this.container.resizeEvent,this.onResize,this)}if(!Ext.isEmpty(this.targetCls)){var A=this.container.getLayoutTarget();if(A){A.removeClass(this.targetCls)}}}});Ext.layout.AutoLayout=Ext.extend(Ext.layout.ContainerLayout,{type:"auto",monitorResize:true,onLayout:function(D,E){Ext.layout.AutoLayout.superclass.onLayout.call(this,D,E);var C=this.getRenderedItems(D),F=C.length,B,A;for(B=0;B<F;B++){A=C[B];if(A.doLayout){A.doLayout(true)}}}});Ext.Container.LAYOUTS["auto"]=Ext.layout.AutoLayout;Ext.layout.FitLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"fit",getLayoutTargetSize:function(){var A=this.container.getLayoutTarget();if(!A){return{}}return A.getStyleSize()},onLayout:function(A,B){Ext.layout.FitLayout.superclass.onLayout.call(this,A,B);if(!A.collapsed){this.setItemSize(this.activeItem||A.items.itemAt(0),this.getLayoutTargetSize())}},setItemSize:function(B,A){if(B&&A.height>0){B.setSize(A)}}});Ext.Container.LAYOUTS["fit"]=Ext.layout.FitLayout;Ext.layout.CardLayout=Ext.extend(Ext.layout.FitLayout,{deferredRender:false,layoutOnCardChange:false,renderHidden:true,type:"card",setActiveItem:function(B){var A=this.activeItem,C=this.container;B=C.getComponent(B);if(B&&A!=B){if(A){A.hide();if(A.hidden!==true){return false}A.fireEvent("deactivate",A)}var D=B.doLayout&&(this.layoutOnCardChange||!B.rendered);this.activeItem=B;delete B.deferLayout;B.show();this.layout();if(D){B.doLayout()}B.fireEvent("activate",B)}},renderAll:function(A,B){if(this.deferredRender){this.renderItem(this.activeItem,undefined,B)}else{Ext.layout.CardLayout.superclass.renderAll.call(this,A,B)}}});Ext.Container.LAYOUTS["card"]=Ext.layout.CardLayout;Ext.layout.AnchorLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"anchor",defaultAnchor:"100%",parseAnchorRE:/^(r|right|b|bottom)$/i,getLayoutTargetSize:function(){var B=this.container.getLayoutTarget(),A={};if(B){A=B.getViewSize();if(Ext.isIE&&Ext.isStrict&&A.width==0){A=B.getStyleSize()}A.width-=B.getPadding("lr");A.height-=B.getPadding("tb")}return A},onLayout:function(R,Q){Ext.layout.AnchorLayout.superclass.onLayout.call(this,R,Q);var G=this.getLayoutTargetSize(),S=G.width,E=G.height,K=Q.getStyle("overflow"),O=this.getRenderedItems(R),A=O.length,L=[],F,T,B,D,N,I,J,C,P=0,H,M;if(S<20&&E<20){return}if(R.anchorSize){if(typeof R.anchorSize=="number"){T=R.anchorSize}else{T=R.anchorSize.width;B=R.anchorSize.height}}else{T=R.initialConfig.width;B=R.initialConfig.height}for(H=0;H<A;H++){D=O[H];M=D.getPositionEl();if(!D.anchor&&D.items&&!Ext.isNumber(D.width)&&!(Ext.isIE6&&Ext.isStrict)){D.anchor=this.defaultAnchor}if(D.anchor){N=D.anchorSpec;if(!N){C=D.anchor.split(" ");D.anchorSpec=N={right:this.parseAnchor(C[0],D.initialConfig.width,T),bottom:this.parseAnchor(C[1],D.initialConfig.height,B)}}I=N.right?this.adjustWidthAnchor(N.right(S)-M.getMargins("lr"),D):undefined;J=N.bottom?this.adjustHeightAnchor(N.bottom(E)-M.getMargins("tb"),D):undefined;if(I||J){L.push({component:D,width:I||undefined,height:J||undefined})}}}for(H=0,A=L.length;H<A;H++){F=L[H];F.component.setSize(F.width,F.height)}if(K&&K!="hidden"&&!this.adjustmentPass){var U=this.getLayoutTargetSize();if(U.width!=G.width||U.height!=G.height){this.adjustmentPass=true;this.onLayout(R,Q)}}delete this.adjustmentPass},parseAnchor:function(E,F,D){if(E&&E!="none"){var C;if(this.parseAnchorRE.test(E)){var A=D-F;return function(G){if(G!==C){C=G;return G-A}}}else{if(E.indexOf("%")!=-1){var B=parseFloat(E.replace("%",""))*0.01;return function(G){if(G!==C){C=G;return Math.floor(G*B)}}}else{E=parseInt(E,10);if(!isNaN(E)){return function(G){if(G!==C){C=G;return G+E}}}}}}return false},adjustWidthAnchor:function(A,B){return A},adjustHeightAnchor:function(A,B){return A}});Ext.Container.LAYOUTS["anchor"]=Ext.layout.AnchorLayout;Ext.layout.ColumnLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"column",extraCls:"x-column",scrollOffset:0,targetCls:"x-column-layout-ct",isValidParent:function(A,B){return this.innerCt&&A.getPositionEl().dom.parentNode==this.innerCt.dom},getLayoutTargetSize:function(){var B=this.container.getLayoutTarget(),A;if(B){A=B.getViewSize();if(Ext.isIE&&Ext.isStrict&&A.width==0){A=B.getStyleSize()}A.width-=B.getPadding("lr");A.height-=B.getPadding("tb")}return A},renderAll:function(A,B){if(!this.innerCt){this.innerCt=B.createChild({cls:"x-column-inner"});this.innerCt.createChild({cls:"x-clear"})}Ext.layout.ColumnLayout.superclass.renderAll.call(this,A,this.innerCt)},onLayout:function(A,K){var B=A.items.items,L=B.length,M,G,J,I=[];this.renderAll(A,K);var F=this.getLayoutTargetSize();if(F.width<1&&F.height<1){return}var D=F.width-this.scrollOffset,H=F.height,C=D;this.innerCt.setWidth(D);for(G=0;G<L;G++){M=B[G];J=M.getPositionEl().getMargins("lr");I[G]=J;if(!M.columnWidth){C-=(M.getWidth()+J)}}C=C<0?0:C;for(G=0;G<L;G++){M=B[G];J=I[G];if(M.columnWidth){M.setSize(Math.floor(M.columnWidth*C)-J)}}if(Ext.isIE){if(G=K.getStyle("overflow")&&G!="hidden"&&!this.adjustmentPass){var E=this.getLayoutTargetSize();if(E.width!=F.width){this.adjustmentPass=true;this.onLayout(A,K)}}}delete this.adjustmentPass}});Ext.Container.LAYOUTS["column"]=Ext.layout.ColumnLayout;Ext.layout.BorderLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,rendered:false,type:"border",targetCls:"x-border-layout-ct",getLayoutTargetSize:function(){var A=this.container.getLayoutTarget();return A?A.getViewSize():{}},onLayout:function(G,T){var F,J,O,W,S=G.items.items,D=S.length;if(!this.rendered){F=[];for(J=0;J<D;J++){O=S[J];W=O.region;if(O.collapsed){F.push(O)}O.collapsed=false;if(!O.rendered){O.render(T,J);O.getPositionEl().addClass("x-border-panel")}this[W]=W!="center"&&O.split?new Ext.layout.BorderLayout.SplitRegion(this,O.initialConfig,W):new Ext.layout.BorderLayout.Region(this,O.initialConfig,W);this[W].render(T,O)}this.rendered=true}var H=this.getLayoutTargetSize();if(H.width<20||H.height<20){if(F){this.restoreCollapsed=F}return}else{if(this.restoreCollapsed){F=this.restoreCollapsed;delete this.restoreCollapsed}}var N=H.width,I=H.height,U=N,L=I,Y=0,X=0,K=this.north,B=this.south,V=this.west,P=this.east,O=this.center,R,M,A,E;if(!O&&Ext.layout.BorderLayout.WARN!==false){throw"No center region defined in BorderLayout "+G.id}if(K&&K.isVisible()){R=K.getSize();M=K.getMargins();R.width=N-(M.left+M.right);R.x=M.left;R.y=M.top;Y=R.height+R.y+M.bottom;L-=Y;K.applyLayout(R)}if(B&&B.isVisible()){R=B.getSize();M=B.getMargins();R.width=N-(M.left+M.right);R.x=M.left;E=(R.height+M.top+M.bottom);R.y=I-E+M.top;L-=E;B.applyLayout(R)}if(V&&V.isVisible()){R=V.getSize();M=V.getMargins();R.height=L-(M.top+M.bottom);R.x=M.left;R.y=Y+M.top;A=(R.width+M.left+M.right);X+=A;U-=A;V.applyLayout(R)}if(P&&P.isVisible()){R=P.getSize();M=P.getMargins();R.height=L-(M.top+M.bottom);A=(R.width+M.left+M.right);R.x=N-A+M.left;R.y=Y+M.top;U-=A;P.applyLayout(R)}if(O){M=O.getMargins();var Q={x:X+M.left,y:Y+M.top,width:U-(M.left+M.right),height:L-(M.top+M.bottom)};O.applyLayout(Q)}if(F){for(J=0,D=F.length;J<D;J++){F[J].collapse(false)}}if(Ext.isIE&&Ext.isStrict){T.repaint()}if(J=T.getStyle("overflow")&&J!="hidden"&&!this.adjustmentPass){var C=this.getLayoutTargetSize();if(C.width!=H.width||C.height!=H.height){this.adjustmentPass=true;this.onLayout(G,T)}}delete this.adjustmentPass},destroy:function(){var A=["north","south","east","west"],B,C;for(B=0;B<A.length;B++){C=this[A[B]];if(C){if(C.destroy){C.destroy()}else{if(C.split){C.split.destroy(true)}}}}Ext.layout.BorderLayout.superclass.destroy.call(this)}});Ext.layout.BorderLayout.Region=function(B,A,C){Ext.apply(this,A);this.layout=B;this.position=C;this.state={};if(typeof this.margins=="string"){this.margins=this.layout.parseMargins(this.margins)}this.margins=Ext.applyIf(this.margins||{},this.defaultMargins);if(this.collapsible){if(typeof this.cmargins=="string"){this.cmargins=this.layout.parseMargins(this.cmargins)}if(this.collapseMode=="mini"&&!this.cmargins){this.cmargins={left:0,top:0,right:0,bottom:0}}else{this.cmargins=Ext.applyIf(this.cmargins||{},C=="north"||C=="south"?this.defaultNSCMargins:this.defaultEWCMargins)}}};Ext.layout.BorderLayout.Region.prototype={collapsible:false,split:false,floatable:true,minWidth:50,minHeight:50,defaultMargins:{left:0,top:0,right:0,bottom:0},defaultNSCMargins:{left:5,top:5,right:5,bottom:5},defaultEWCMargins:{left:5,top:0,right:5,bottom:0},floatingZIndex:100,isCollapsed:false,render:function(C,B){this.panel=B;B.el.enableDisplayMode();this.targetEl=C;this.el=B.el;var D=B.getState,A=this.position;B.getState=function(){return Ext.apply(D.call(B)||{},this.state)}.createDelegate(this);if(A!="center"){B.allowQueuedExpand=false;B.on({beforecollapse:this.beforeCollapse,collapse:this.onCollapse,beforeexpand:this.beforeExpand,expand:this.onExpand,hide:this.onHide,show:this.onShow,scope:this});if(this.collapsible||this.floatable){B.collapseEl="el";B.slideAnchor=this.getSlideAnchor()}if(B.tools&&B.tools.toggle){B.tools.toggle.addClass("x-tool-collapse-"+A);B.tools.toggle.addClassOnOver("x-tool-collapse-"+A+"-over")}}},getCollapsedEl:function(){if(!this.collapsedEl){if(!this.toolTemplate){var A=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');A.disableFormats=true;A.compile();Ext.layout.BorderLayout.Region.prototype.toolTemplate=A}this.collapsedEl=this.targetEl.createChild({cls:"x-layout-collapsed x-layout-collapsed-"+this.position,id:this.panel.id+"-xcollapsed"});this.collapsedEl.enableDisplayMode("block");if(this.collapseMode=="mini"){this.collapsedEl.addClass("x-layout-cmini-"+this.position);this.miniCollapsedEl=this.collapsedEl.createChild({cls:"x-layout-mini x-layout-mini-"+this.position,html:"&#160;"});this.miniCollapsedEl.addClassOnOver("x-layout-mini-over");this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this.onExpandClick,this,{stopEvent:true})}else{if(this.collapsible!==false&&!this.hideCollapseTool){var B=this.expandToolEl=this.toolTemplate.append(this.collapsedEl.dom,{id:"expand-"+this.position},true);B.addClassOnOver("x-tool-expand-"+this.position+"-over");B.on("click",this.onExpandClick,this,{stopEvent:true})}if(this.floatable!==false||this.titleCollapse){this.collapsedEl.addClassOnOver("x-layout-collapsed-over");this.collapsedEl.on("click",this[this.floatable?"collapseClick":"onExpandClick"],this)}}}return this.collapsedEl},onExpandClick:function(A){if(this.isSlid){this.panel.expand(false)}else{this.panel.expand()}},onCollapseClick:function(A){this.panel.collapse()},beforeCollapse:function(B,C){this.lastAnim=C;if(this.splitEl){this.splitEl.hide()}this.getCollapsedEl().show();var A=this.panel.getEl();this.originalZIndex=A.getStyle("z-index");A.setStyle("z-index",100);this.isCollapsed=true;this.layout.layout()},onCollapse:function(A){this.panel.el.setStyle("z-index",1);if(this.lastAnim===false||this.panel.animCollapse===false){this.getCollapsedEl().dom.style.visibility="visible"}else{this.getCollapsedEl().slideIn(this.panel.slideAnchor,{duration:0.2})}this.state.collapsed=true;this.panel.saveState()},beforeExpand:function(A){if(this.isSlid){this.afterSlideIn()}var B=this.getCollapsedEl();this.el.show();if(this.position=="east"||this.position=="west"){this.panel.setSize(undefined,B.getHeight())}else{this.panel.setSize(B.getWidth(),undefined)}B.hide();B.dom.style.visibility="hidden";this.panel.el.setStyle("z-index",this.floatingZIndex)},onExpand:function(){this.isCollapsed=false;if(this.splitEl){this.splitEl.show()}this.layout.layout();this.panel.el.setStyle("z-index",this.originalZIndex);this.state.collapsed=false;this.panel.saveState()},collapseClick:function(A){if(this.isSlid){A.stopPropagation();this.slideIn()}else{A.stopPropagation();this.slideOut()}},onHide:function(){if(this.isCollapsed){this.getCollapsedEl().hide()}else{if(this.splitEl){this.splitEl.hide()}}},onShow:function(){if(this.isCollapsed){this.getCollapsedEl().show()}else{if(this.splitEl){this.splitEl.show()}}},isVisible:function(){return !this.panel.hidden},getMargins:function(){return this.isCollapsed&&this.cmargins?this.cmargins:this.margins},getSize:function(){return this.isCollapsed?this.getCollapsedEl().getSize():this.panel.getSize()},setPanel:function(A){this.panel=A},getMinWidth:function(){return this.minWidth},getMinHeight:function(){return this.minHeight},applyLayoutCollapsed:function(A){var B=this.getCollapsedEl();B.setLeftTop(A.x,A.y);B.setSize(A.width,A.height)},applyLayout:function(A){if(this.isCollapsed){this.applyLayoutCollapsed(A)}else{this.panel.setPosition(A.x,A.y);this.panel.setSize(A.width,A.height)}},beforeSlide:function(){this.panel.beforeEffect()},afterSlide:function(){this.panel.afterEffect()},initAutoHide:function(){if(this.autoHide!==false){if(!this.autoHideHd){this.autoHideSlideTask=new Ext.util.DelayedTask(this.slideIn,this);this.autoHideHd={"mouseout":function(A){if(!A.within(this.el,true)){this.autoHideSlideTask.delay(500)}},"mouseover":function(A){this.autoHideSlideTask.cancel()},scope:this}}this.el.on(this.autoHideHd);this.collapsedEl.on(this.autoHideHd)}},clearAutoHide:function(){if(this.autoHide!==false){this.el.un("mouseout",this.autoHideHd.mouseout);this.el.un("mouseover",this.autoHideHd.mouseover);this.collapsedEl.un("mouseout",this.autoHideHd.mouseout);this.collapsedEl.un("mouseover",this.autoHideHd.mouseover)}},clearMonitor:function(){Ext.getDoc().un("click",this.slideInIf,this)},slideOut:function(){if(this.isSlid||this.el.hasActiveFx()){return}this.isSlid=true;var B=this.panel.tools,A,C;if(B&&B.toggle){B.toggle.hide()}this.el.show();C=this.panel.collapsed;this.panel.collapsed=false;if(this.position=="east"||this.position=="west"){A=this.panel.deferHeight;this.panel.deferHeight=false;this.panel.setSize(undefined,this.collapsedEl.getHeight());this.panel.deferHeight=A}else{this.panel.setSize(this.collapsedEl.getWidth(),undefined)}this.panel.collapsed=C;this.restoreLT=[this.el.dom.style.left,this.el.dom.style.top];this.el.alignTo(this.collapsedEl,this.getCollapseAnchor());this.el.setStyle("z-index",this.floatingZIndex+2);this.panel.el.replaceClass("x-panel-collapsed","x-panel-floating");if(this.animFloat!==false){this.beforeSlide();this.el.slideIn(this.getSlideAnchor(),{callback:function(){this.afterSlide();this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)},scope:this,block:true})}else{this.initAutoHide();Ext.getDoc().on("click",this.slideInIf,this)}},afterSlideIn:function(){this.clearAutoHide();this.isSlid=false;this.clearMonitor();this.el.setStyle("z-index","");this.panel.el.replaceClass("x-panel-floating","x-panel-collapsed");this.el.dom.style.left=this.restoreLT[0];this.el.dom.style.top=this.restoreLT[1];var A=this.panel.tools;if(A&&A.toggle){A.toggle.show()}},slideIn:function(A){if(!this.isSlid||this.el.hasActiveFx()){Ext.callback(A);return}this.isSlid=false;if(this.animFloat!==false){this.beforeSlide();this.el.slideOut(this.getSlideAnchor(),{callback:function(){this.el.hide();this.afterSlide();this.afterSlideIn();Ext.callback(A)},scope:this,block:true})}else{this.el.hide();this.afterSlideIn()}},slideInIf:function(A){if(!A.within(this.el)){this.slideIn()}},anchors:{"west":"left","east":"right","north":"top","south":"bottom"},sanchors:{"west":"l","east":"r","north":"t","south":"b"},canchors:{"west":"tl-tr","east":"tr-tl","north":"tl-bl","south":"bl-tl"},getAnchor:function(){return this.anchors[this.position]},getCollapseAnchor:function(){return this.canchors[this.position]},getSlideAnchor:function(){return this.sanchors[this.position]},getAlignAdj:function(){var A=this.cmargins;switch(this.position){case"west":return[0,0];break;case"east":return[0,0];break;case"north":return[0,0];break;case"south":return[0,0];break}},getExpandAdj:function(){var A=this.collapsedEl,B=this.cmargins;switch(this.position){case"west":return[-(B.right+A.getWidth()+B.left),0];break;case"east":return[B.right+A.getWidth()+B.left,0];break;case"north":return[0,-(B.top+B.bottom+A.getHeight())];break;case"south":return[0,B.top+B.bottom+A.getHeight()];break}},destroy:function(){if(this.autoHideSlideTask&&this.autoHideSlideTask.cancel){this.autoHideSlideTask.cancel()}Ext.destroyMembers(this,"miniCollapsedEl","collapsedEl","expandToolEl")}};Ext.layout.BorderLayout.SplitRegion=function(B,A,C){Ext.layout.BorderLayout.SplitRegion.superclass.constructor.call(this,B,A,C);this.applyLayout=this.applyFns[C]};Ext.extend(Ext.layout.BorderLayout.SplitRegion,Ext.layout.BorderLayout.Region,{splitTip:"Drag to resize.",collapsibleSplitTip:"Drag to resize. Double click to hide.",useSplitTips:false,splitSettings:{north:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.TOP,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},south:{orientation:Ext.SplitBar.VERTICAL,placement:Ext.SplitBar.BOTTOM,maxFn:"getVMaxSize",minProp:"minHeight",maxProp:"maxHeight"},east:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.RIGHT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"},west:{orientation:Ext.SplitBar.HORIZONTAL,placement:Ext.SplitBar.LEFT,maxFn:"getHMaxSize",minProp:"minWidth",maxProp:"maxWidth"}},applyFns:{west:function(B){if(this.isCollapsed){return this.applyLayoutCollapsed(B)}var A=this.splitEl.dom,C=A.style;this.panel.setPosition(B.x,B.y);var D=A.offsetWidth;C.left=(B.x+B.width-D)+"px";C.top=(B.y)+"px";C.height=Math.max(0,B.height)+"px";this.panel.setSize(B.width-D,B.height)},east:function(B){if(this.isCollapsed){return this.applyLayoutCollapsed(B)}var A=this.splitEl.dom,C=A.style;var D=A.offsetWidth;this.panel.setPosition(B.x+D,B.y);C.left=(B.x)+"px";C.top=(B.y)+"px";C.height=Math.max(0,B.height)+"px";this.panel.setSize(B.width-D,B.height)},north:function(C){if(this.isCollapsed){return this.applyLayoutCollapsed(C)}var A=this.splitEl.dom,D=A.style;var B=A.offsetHeight;this.panel.setPosition(C.x,C.y);D.left=(C.x)+"px";D.top=(C.y+C.height-B)+"px";D.width=Math.max(0,C.width)+"px";this.panel.setSize(C.width,C.height-B)},south:function(C){if(this.isCollapsed){return this.applyLayoutCollapsed(C)}var A=this.splitEl.dom,D=A.style;var B=A.offsetHeight;this.panel.setPosition(C.x,C.y+B);D.left=(C.x)+"px";D.top=(C.y)+"px";D.width=Math.max(0,C.width)+"px";this.panel.setSize(C.width,C.height-B)}},render:function(D,B){Ext.layout.BorderLayout.SplitRegion.superclass.render.call(this,D,B);var A=this.position;this.splitEl=D.createChild({cls:"x-layout-split x-layout-split-"+A,html:"&#160;",id:this.panel.id+"-xsplit"});if(this.collapseMode=="mini"){this.miniSplitEl=this.splitEl.createChild({cls:"x-layout-mini x-layout-mini-"+A,html:"&#160;"});this.miniSplitEl.addClassOnOver("x-layout-mini-over");this.miniSplitEl.on("click",this.onCollapseClick,this,{stopEvent:true})}var C=this.splitSettings[A];this.split=new Ext.SplitBar(this.splitEl.dom,B.el,C.orientation);this.split.tickSize=this.tickSize;this.split.placement=C.placement;this.split.getMaximumSize=this[C.maxFn].createDelegate(this);this.split.minSize=this.minSize||this[C.minProp];this.split.on("beforeapply",this.onSplitMove,this);this.split.useShim=this.useShim===true;this.maxSize=this.maxSize||this[C.maxProp];if(B.hidden){this.splitEl.hide()}if(this.useSplitTips){this.splitEl.dom.title=this.collapsible?this.collapsibleSplitTip:this.splitTip}if(this.collapsible){this.splitEl.on("dblclick",this.onCollapseClick,this)}},getSize:function(){if(this.isCollapsed){return this.collapsedEl.getSize()}var A=this.panel.getSize();if(this.position=="north"||this.position=="south"){A.height+=this.splitEl.dom.offsetHeight}else{A.width+=this.splitEl.dom.offsetWidth}return A},getHMaxSize:function(){var A=this.maxSize||10000;var B=this.layout.center;return Math.min(A,(this.el.getWidth()+B.el.getWidth())-B.getMinWidth())},getVMaxSize:function(){var A=this.maxSize||10000;var B=this.layout.center;return Math.min(A,(this.el.getHeight()+B.el.getHeight())-B.getMinHeight())},onSplitMove:function(C,B){var A=this.panel.getSize();this.lastSplitSize=B;if(this.position=="north"||this.position=="south"){this.panel.setSize(A.width,B);this.state.height=B}else{this.panel.setSize(B,A.height);this.state.width=B}this.layout.layout();this.panel.saveState();return false},getSplitBar:function(){return this.split},destroy:function(){Ext.destroy(this.miniSplitEl,this.split,this.splitEl);Ext.layout.BorderLayout.SplitRegion.superclass.destroy.call(this)}});Ext.Container.LAYOUTS["border"]=Ext.layout.BorderLayout;Ext.layout.FormLayout=Ext.extend(Ext.layout.AnchorLayout,{labelSeparator:":",trackLabels:true,type:"form",onRemove:function(B){Ext.layout.FormLayout.superclass.onRemove.call(this,B);if(this.trackLabels){B.un("show",this.onFieldShow,this);B.un("hide",this.onFieldHide,this)}var A=B.getPositionEl(),C=B.getItemCt&&B.getItemCt();if(B.rendered&&C){if(A&&A.dom){A.insertAfter(C)}Ext.destroy(C);Ext.destroyMembers(B,"label","itemCt");if(B.customItemCt){Ext.destroyMembers(B,"getItemCt","customItemCt")}}},setContainer:function(A){Ext.layout.FormLayout.superclass.setContainer.call(this,A);if(A.labelAlign){A.addClass("x-form-label-"+A.labelAlign)}if(A.hideLabels){Ext.apply(this,{labelStyle:"display:none",elementStyle:"padding-left:0;",labelAdjust:0})}else{this.labelSeparator=Ext.isDefined(A.labelSeparator)?A.labelSeparator:this.labelSeparator;A.labelWidth=A.labelWidth||100;if(Ext.isNumber(A.labelWidth)){var B=Ext.isNumber(A.labelPad)?A.labelPad:5;Ext.apply(this,{labelAdjust:A.labelWidth+B,labelStyle:"width:"+A.labelWidth+"px;",elementStyle:"padding-left:"+(A.labelWidth+B)+"px"})}if(A.labelAlign=="top"){Ext.apply(this,{labelStyle:"width:auto;",labelAdjust:0,elementStyle:"padding-left:0;"})}}},isHide:function(A){return A.hideLabel||this.container.hideLabels},onFieldShow:function(A){A.getItemCt().removeClass("x-hide-"+A.hideMode);if(A.isComposite){A.doLayout()}},onFieldHide:function(A){A.getItemCt().addClass("x-hide-"+A.hideMode)},getLabelStyle:function(B){var C="",E=[this.labelStyle,B];for(var A=0,D=E.length;A<D;++A){if(E[A]){C+=E[A];if(C.substr(-1,1)!=";"){C+=";"}}}return C},renderItem:function(B,A,C){if(B&&(B.isFormField||B.fieldLabel)&&B.inputType!="hidden"){var D=this.getTemplateArgs(B);if(Ext.isNumber(A)){A=C.dom.childNodes[A]||null}if(A){B.itemCt=this.fieldTpl.insertBefore(A,D,true)}else{B.itemCt=this.fieldTpl.append(C,D,true)}if(!B.getItemCt){Ext.apply(B,{getItemCt:function(){return B.itemCt},customItemCt:true})}B.label=B.getItemCt().child("label.x-form-item-label");if(!B.rendered){B.render("x-form-el-"+B.id)}else{if(!this.isValidParent(B,C)){Ext.fly("x-form-el-"+B.id).appendChild(B.getPositionEl())}}if(this.trackLabels){if(B.hidden){this.onFieldHide(B)}B.on({scope:this,show:this.onFieldShow,hide:this.onFieldHide})}this.configureItem(B)}else{Ext.layout.FormLayout.superclass.renderItem.apply(this,arguments)}},getTemplateArgs:function(B){var C=!B.fieldLabel||B.hideLabel,A=(B.itemCls||this.container.itemCls||"")+(B.hideLabel?" x-hide-label":"");if(Ext.isIE9&&Ext.isIEQuirks&&B instanceof Ext.form.TextField){A+=" x-input-wrapper"}return{id:B.id,label:B.fieldLabel,itemCls:A,clearCls:B.clearCls||"x-form-clear-left",labelStyle:this.getLabelStyle(B.labelStyle),elementStyle:this.elementStyle||"",labelSeparator:C?"":(Ext.isDefined(B.labelSeparator)?B.labelSeparator:this.labelSeparator)}},adjustWidthAnchor:function(B,C){if(C.label&&!this.isHide(C)&&(this.container.labelAlign!="top")){var A=Ext.isIE6||(Ext.isIE&&!Ext.isStrict);return B-this.labelAdjust+(A?-3:0)}return B},adjustHeightAnchor:function(A,B){if(B.label&&!this.isHide(B)&&(this.container.labelAlign=="top")){return A-B.label.getHeight()}return A},isValidParent:function(A,B){return B&&this.container.getEl().contains(A.getPositionEl())}});Ext.Container.LAYOUTS["form"]=Ext.layout.FormLayout;Ext.layout.AccordionLayout=Ext.extend(Ext.layout.FitLayout,{fill:true,autoWidth:true,titleCollapse:true,hideCollapseTool:false,collapseFirst:false,animate:false,sequence:false,activeOnTop:false,type:"accordion",renderItem:function(A){if(this.animate===false){A.animCollapse=false}A.collapsible=true;if(this.autoWidth){A.autoWidth=true}if(this.titleCollapse){A.titleCollapse=true}if(this.hideCollapseTool){A.hideCollapseTool=true}if(this.collapseFirst!==undefined){A.collapseFirst=this.collapseFirst}if(!this.activeItem&&!A.collapsed){this.setActiveItem(A,true)}else{if(this.activeItem&&this.activeItem!=A){A.collapsed=true}}Ext.layout.AccordionLayout.superclass.renderItem.apply(this,arguments);A.header.addClass("x-accordion-hd");A.on("beforeexpand",this.beforeExpand,this)},onRemove:function(A){Ext.layout.AccordionLayout.superclass.onRemove.call(this,A);if(A.rendered){A.header.removeClass("x-accordion-hd")}A.un("beforeexpand",this.beforeExpand,this)},beforeExpand:function(C,B){var A=this.activeItem;if(A){if(this.sequence){delete this.activeItem;if(!A.collapsed){A.collapse({callback:function(){C.expand(B||true)},scope:this});return false}}else{A.collapse(this.animate)}}this.setActive(C);if(this.activeOnTop){C.el.dom.parentNode.insertBefore(C.el.dom,C.el.dom.parentNode.firstChild)}this.layout()},setItemSize:function(D,A){if(this.fill&&D){var G=0,B,F=this.getRenderedItems(this.container),E=F.length,C;for(B=0;B<E;B++){if((C=F[B])!=D&&!C.hidden){G+=C.header.getHeight()}}A.height-=G;D.setSize(A)}},setActiveItem:function(A){this.setActive(A,true)},setActive:function(B,C){var A=this.activeItem;B=this.container.getComponent(B);if(A!=B){if(B.rendered&&B.collapsed&&C){B.expand()}else{if(A){A.fireEvent("deactivate",A)}this.activeItem=B;B.fireEvent("activate",B)}}}});Ext.Container.LAYOUTS.accordion=Ext.layout.AccordionLayout;Ext.layout.Accordion=Ext.layout.AccordionLayout;Ext.layout.TableLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:false,type:"table",targetCls:"x-table-layout-ct",tableAttrs:null,setContainer:function(A){Ext.layout.TableLayout.superclass.setContainer.call(this,A);this.currentRow=0;this.currentColumn=0;this.cells=[]},onLayout:function(D,E){var C=D.items.items,F=C.length,A,B;if(!this.table){E.addClass("x-table-layout-ct");this.table=E.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,true)}this.renderAll(D,E)},getRow:function(B){var A=this.table.tBodies[0].childNodes[B];if(!A){A=document.createElement("tr");this.table.tBodies[0].appendChild(A)}return A},getNextCell:function(G){var H=this.getNextNonSpan(this.currentColumn,this.currentRow);var A=this.currentColumn=H[0],C=this.currentRow=H[1];for(var B=C;B<C+(G.rowspan||1);B++){if(!this.cells[B]){this.cells[B]=[]}for(var F=A;F<A+(G.colspan||1);F++){this.cells[B][F]=true}}var E=document.createElement("td");if(G.cellId){E.id=G.cellId}var D="x-table-layout-cell";if(G.cellCls){D+=" "+G.cellCls}E.className=D;if(G.colspan){E.colSpan=G.colspan}if(G.rowspan){E.rowSpan=G.rowspan}this.getRow(C).appendChild(E);return E},getNextNonSpan:function(C,B){var A=this.columns;while((A&&C>=A)||(this.cells[B]&&this.cells[B][C])){if(A&&C>=A){B++;C=0}else{C++}}return[C,B]},renderItem:function(B,A,C){if(!this.table){this.table=C.createChild(Ext.apply({tag:"table",cls:"x-table-layout",cellspacing:0,cn:{tag:"tbody"}},this.tableAttrs),null,true)}if(B&&!B.rendered){B.render(this.getNextCell(B));this.configureItem(B)}else{if(B&&!this.isValidParent(B,C)){var D=this.getNextCell(B);D.insertBefore(B.getPositionEl().dom,null);B.container=Ext.get(D);this.configureItem(B)}}},isValidParent:function(A,B){return A.getPositionEl().up("table",5).dom.parentNode===(B.dom||B)},destroy:function(){delete this.table;Ext.layout.TableLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS["table"]=Ext.layout.TableLayout;Ext.layout.AbsoluteLayout=Ext.extend(Ext.layout.AnchorLayout,{extraCls:"x-abs-layout-item",type:"absolute",onLayout:function(A,B){B.position();this.paddingLeft=B.getPadding("l");this.paddingTop=B.getPadding("t");Ext.layout.AbsoluteLayout.superclass.onLayout.call(this,A,B)},adjustWidthAnchor:function(A,B){return A?A-B.getPosition(true)[0]+this.paddingLeft:A},adjustHeightAnchor:function(A,B){return A?A-B.getPosition(true)[1]+this.paddingTop:A}});Ext.Container.LAYOUTS["absolute"]=Ext.layout.AbsoluteLayout;Ext.layout.BoxLayout=Ext.extend(Ext.layout.ContainerLayout,{defaultMargins:{left:0,top:0,right:0,bottom:0},padding:"0",pack:"start",monitorResize:true,type:"box",scrollOffset:0,extraCls:"x-box-item",targetCls:"x-box-layout-ct",innerCls:"x-box-inner",constructor:function(B){Ext.layout.BoxLayout.superclass.constructor.call(this,B);if(Ext.isString(this.defaultMargins)){this.defaultMargins=this.parseMargins(this.defaultMargins)}var C=this.overflowHandler;if(typeof C=="string"){C={type:C}}var D="none";if(C&&C.type!=undefined){D=C.type}var A=Ext.layout.boxOverflow[D];if(A[this.type]){A=A[this.type]}this.overflowHandler=new A(this,C)},onLayout:function(G,H){Ext.layout.BoxLayout.superclass.onLayout.call(this,G,H);var B=this.getLayoutTargetSize(),J=this.getVisibleItems(G),C=this.calculateChildBoxes(J,B),A=C.boxes,D=C.meta;if(B.width>0){var E=this.overflowHandler,I=D.tooNarrow?"handleOverflow":"clearOverflow";var F=E[I](C,B);if(F){if(F.targetSize){B=F.targetSize}if(F.recalculate){J=this.getVisibleItems(G);C=this.calculateChildBoxes(J,B);A=C.boxes}}}this.layoutTargetLastSize=B;this.childBoxCache=C;this.updateInnerCtSize(B,C);this.updateChildBoxes(A);this.handleTargetOverflow(B,G,H)},updateChildBoxes:function(C){for(var A=0,B=C.length;A<B;A++){var D=C[A],E=D.component;if(D.dirtySize){E.setSize(D.width,D.height)}if(isNaN(D.left)||isNaN(D.top)){continue}E.setPosition(D.left,D.top)}},updateInnerCtSize:function(A,C){var E=this.align,B=this.padding,G=A.width,H=A.height;if(this.type=="hbox"){var D=G,F=C.meta.maxHeight+B.top+B.bottom;if(E=="stretch"){F=H}else{if(E=="middle"){F=Math.max(H,F)}}}else{var F=H,D=C.meta.maxWidth+B.left+B.right;if(E=="stretch"){D=G}else{if(E=="center"){D=Math.max(G,D)}}}this.innerCt.setSize(D||undefined,F||undefined)},handleTargetOverflow:function(A,C,E){var B=E.getStyle("overflow");if(B&&B!="hidden"&&!this.adjustmentPass){var D=this.getLayoutTargetSize();if(D.width!=A.width||D.height!=A.height){this.adjustmentPass=true;this.onLayout(C,E)}}delete this.adjustmentPass},isValidParent:function(A,B){return this.innerCt&&A.getPositionEl().dom.parentNode==this.innerCt.dom},getVisibleItems:function(E){var E=E||this.container,F=E.getLayoutTarget(),A=E.items.items,D=A.length,B,G,C=[];for(B=0;B<D;B++){if((G=A[B]).rendered&&this.isValidParent(G,F)&&G.hidden!==true&&G.collapsed!==true&&G.shouldLayout!==false){C.push(G)}}return C},renderAll:function(A,B){if(!this.innerCt){this.innerCt=B.createChild({cls:this.innerCls});this.padding=this.parseMargins(this.padding)}Ext.layout.BoxLayout.superclass.renderAll.call(this,A,this.innerCt)},getLayoutTargetSize:function(){var B=this.container.getLayoutTarget(),A;if(B){A=B.getViewSize();if(Ext.isIE&&Ext.isStrict&&A.width==0){A=B.getStyleSize()}A.width-=B.getPadding("lr");A.height-=B.getPadding("tb")}return A},renderItem:function(A){if(Ext.isString(A.margins)){A.margins=this.parseMargins(A.margins)}else{if(!A.margins){A.margins=this.defaultMargins}}Ext.layout.BoxLayout.superclass.renderItem.apply(this,arguments)},destroy:function(){Ext.destroy(this.overflowHandler);Ext.layout.BoxLayout.superclass.destroy.apply(this,arguments)}});Ext.layout.boxOverflow.None=Ext.extend(Object,{constructor:function(B,A){this.layout=B;Ext.apply(this,A||{})},handleOverflow:Ext.emptyFn,clearOverflow:Ext.emptyFn});Ext.layout.boxOverflow.none=Ext.layout.boxOverflow.None;Ext.layout.boxOverflow.Menu=Ext.extend(Ext.layout.boxOverflow.None,{afterCls:"x-strip-right",noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',constructor:function(A){Ext.layout.boxOverflow.Menu.superclass.constructor.apply(this,arguments);this.menuItems=[]},createInnerElements:function(){if(!this.afterCt){this.afterCt=this.layout.innerCt.insertSibling({cls:this.afterCls},"before")}},clearOverflow:function(A,F){var E=F.width+(this.afterCt?this.afterCt.getWidth():0),D=this.menuItems;this.hideTrigger();for(var C=0,B=D.length;C<B;C++){D.pop().component.show()}return{targetSize:{height:F.height,width:E}}},showTrigger:function(){this.createMenu();this.menuTrigger.show()},hideTrigger:function(){if(this.menuTrigger!=undefined){this.menuTrigger.hide()}},beforeMenuShow:function(G){var E=this.menuItems,D=E.length,C,F;var A=function(H,I){return H.isXType("buttongroup")&&!(I instanceof Ext.Toolbar.Separator)};this.clearMenu();G.removeAll();for(var B=0;B<D;B++){C=E[B].component;if(F&&(A(C,F)||A(F,C))){G.add("-")}this.addComponentToMenu(G,C);F=C}if(G.items.length<1){G.add(this.noItemsMenuText)}},createMenuConfig:function(C,D){var B=Ext.apply({},C.initialConfig),A=C.toggleGroup;Ext.copyTo(B,C,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(B,{text:C.overflowText||C.text,hideOnClick:D});if(A||C.enableToggle){Ext.apply(B,{group:A,checked:C.pressed,listeners:{checkchange:function(E,F){C.toggle(F)}}})}delete B.ownerCt;delete B.xtype;delete B.id;return B},addComponentToMenu:function(B,A){if(A instanceof Ext.Toolbar.Separator){B.add("-")}else{if(Ext.isFunction(A.isXType)){if(A.isXType("splitbutton")){B.add(this.createMenuConfig(A,true))}else{if(A.isXType("button")){B.add(this.createMenuConfig(A,!A.menu))}else{if(A.isXType("buttongroup")){A.items.each(function(C){this.addComponentToMenu(B,C)},this)}}}}}},clearMenu:function(){var A=this.moreMenu;if(A&&A.items){A.items.each(function(B){delete B.menu})}},createMenu:function(){if(!this.menuTrigger){this.createInnerElements();this.menu=new Ext.menu.Menu({ownerCt:this.layout.container,listeners:{scope:this,beforeshow:this.beforeMenuShow}});this.menuTrigger=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.menu,renderTo:this.afterCt})}},destroy:function(){Ext.destroy(this.menu,this.menuTrigger)}});Ext.layout.boxOverflow.menu=Ext.layout.boxOverflow.Menu;Ext.layout.boxOverflow.HorizontalMenu=Ext.extend(Ext.layout.boxOverflow.Menu,{constructor:function(){Ext.layout.boxOverflow.HorizontalMenu.superclass.constructor.apply(this,arguments);var B=this,C=B.layout,A=C.calculateChildBoxes;C.calculateChildBoxes=function(J,I){var E=A.apply(C,arguments),F=E.meta,K=B.menuItems;var H=0;for(var D=0,G=K.length;D<G;D++){H+=K[D].width}F.minimumWidth+=H;F.tooNarrow=F.minimumWidth>I.width;return E}},handleOverflow:function(I,M){this.showTrigger();var P=M.width-this.afterCt.getWidth(),B=I.boxes,H=0,C=false;for(var D=0,G=B.length;D<G;D++){H+=B[D].width}var K=P-H,E=0;for(var D=0,G=this.menuItems.length;D<G;D++){var A=this.menuItems[D],J=A.component,L=A.width;if(L<K){J.show();K-=L;E++;C=true}else{break}}if(C){this.menuItems=this.menuItems.slice(E)}else{for(var N=B.length-1;N>=0;N--){var F=B[N].component,O=B[N].left+B[N].width;if(O>=P){this.menuItems.unshift({component:F,width:B[N].width});F.hide()}else{break}}}if(this.menuItems.length==0){this.hideTrigger()}return{targetSize:{height:M.height,width:P},recalculate:C}}});Ext.layout.boxOverflow.menu.hbox=Ext.layout.boxOverflow.HorizontalMenu;Ext.layout.boxOverflow.Scroller=Ext.extend(Ext.layout.boxOverflow.None,{animateScroll:true,scrollIncrement:100,wheelIncrement:3,scrollRepeatInterval:400,scrollDuration:0.4,beforeCls:"x-strip-left",afterCls:"x-strip-right",scrollerCls:"x-strip-scroller",beforeScrollerCls:"x-strip-scroller-left",afterScrollerCls:"x-strip-scroller-right",createWheelListener:function(){this.layout.innerCt.on({scope:this,mousewheel:function(A){A.stopEvent();this.scrollBy(A.getWheelDelta()*this.wheelIncrement*-1,false)}})},handleOverflow:function(A,B){this.createInnerElements();this.showScrollers()},clearOverflow:function(){this.hideScrollers()},showScrollers:function(){this.createScrollers();this.beforeScroller.show();this.afterScroller.show();this.updateScrollButtons()},hideScrollers:function(){if(this.beforeScroller!=undefined){this.beforeScroller.hide();this.afterScroller.hide()}},createScrollers:function(){if(!this.beforeScroller&&!this.afterScroller){var A=this.beforeCt.createChild({cls:String.format("{0} {1} ",this.scrollerCls,this.beforeScrollerCls)});var B=this.afterCt.createChild({cls:String.format("{0} {1}",this.scrollerCls,this.afterScrollerCls)});A.addClassOnOver(this.beforeScrollerCls+"-hover");B.addClassOnOver(this.afterScrollerCls+"-hover");A.setVisibilityMode(Ext.Element.DISPLAY);B.setVisibilityMode(Ext.Element.DISPLAY);this.beforeRepeater=new Ext.util.ClickRepeater(A,{interval:this.scrollRepeatInterval,handler:this.scrollLeft,scope:this});this.afterRepeater=new Ext.util.ClickRepeater(B,{interval:this.scrollRepeatInterval,handler:this.scrollRight,scope:this});this.beforeScroller=A;this.afterScroller=B}},destroy:function(){Ext.destroy(this.beforeScroller,this.afterScroller,this.beforeRepeater,this.afterRepeater,this.beforeCt,this.afterCt)},scrollBy:function(A,B){this.scrollTo(this.getScrollPosition()+A,B)},getItem:function(A){if(Ext.isString(A)){A=Ext.getCmp(A)}else{if(Ext.isNumber(A)){A=this.items[A]}}return A},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},updateScrollButtons:function(){if(this.beforeScroller==undefined||this.afterScroller==undefined){return}var D=this.atExtremeBefore()?"addClass":"removeClass",B=this.atExtremeAfter()?"addClass":"removeClass",C=this.beforeScrollerCls+"-disabled",A=this.afterScrollerCls+"-disabled";this.beforeScroller[D](C);this.afterScroller[B](A);this.scrolling=false},atExtremeBefore:function(){return this.getScrollPosition()===0},scrollLeft:function(A){this.scrollBy(-this.scrollIncrement,A)},scrollRight:function(A){this.scrollBy(this.scrollIncrement,A)},scrollToItem:function(D,C){D=this.getItem(D);if(D!=undefined){var E=this.getItemVisibility(D);if(!E.fullyVisible){var B=D.getBox(true,true),A=B.x;if(E.hiddenRight){A-=(this.layout.innerCt.getWidth()-B.width)}this.scrollTo(A,C)}}},getItemVisibility:function(B){var A=this.getItem(B).getBox(true,true),E=A.x,D=A.x+A.width,F=this.getScrollPosition(),C=this.layout.innerCt.getWidth()+F;return{hiddenLeft:E<F,hiddenRight:D>C,fullyVisible:E>F&&D<C}}});Ext.layout.boxOverflow.scroller=Ext.layout.boxOverflow.Scroller;Ext.layout.boxOverflow.VerticalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{scrollIncrement:75,wheelIncrement:2,handleOverflow:function(A,B){Ext.layout.boxOverflow.VerticalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:B.height-(this.beforeCt.getHeight()+this.afterCt.getHeight()),width:B.width}}},createInnerElements:function(){var A=this.layout.innerCt;if(!this.beforeCt){this.beforeCt=A.insertSibling({cls:this.beforeCls},"before");this.afterCt=A.insertSibling({cls:this.afterCls},"after");this.createWheelListener()}},scrollTo:function(D,C){var A=this.getScrollPosition(),B=D.constrain(0,this.getMaxScrollBottom());if(B!=A&&!this.scrolling){if(C==undefined){C=this.animateScroll}this.layout.innerCt.scrollTo("top",B,C?this.getScrollAnim():false);if(C){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollTop,10)||0},getMaxScrollBottom:function(){return this.layout.innerCt.dom.scrollHeight-this.layout.innerCt.getHeight()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollBottom()}});Ext.layout.boxOverflow.scroller.vbox=Ext.layout.boxOverflow.VerticalScroller;Ext.layout.boxOverflow.HorizontalScroller=Ext.extend(Ext.layout.boxOverflow.Scroller,{handleOverflow:function(A,B){Ext.layout.boxOverflow.HorizontalScroller.superclass.handleOverflow.apply(this,arguments);return{targetSize:{height:B.height,width:B.width-(this.beforeCt.getWidth()+this.afterCt.getWidth())}}},createInnerElements:function(){var A=this.layout.innerCt;if(!this.beforeCt){this.afterCt=A.insertSibling({cls:this.afterCls},"before");this.beforeCt=A.insertSibling({cls:this.beforeCls},"before");this.createWheelListener()}},scrollTo:function(D,C){var A=this.getScrollPosition(),B=D.constrain(0,this.getMaxScrollRight());if(B!=A&&!this.scrolling){if(C==undefined){C=this.animateScroll}this.layout.innerCt.scrollTo("left",B,C?this.getScrollAnim():false);if(C){this.scrolling=true}else{this.scrolling=false;this.updateScrollButtons()}}},getScrollPosition:function(){return parseInt(this.layout.innerCt.dom.scrollLeft,10)||0},getMaxScrollRight:function(){return this.layout.innerCt.dom.scrollWidth-this.layout.innerCt.getWidth()},atExtremeAfter:function(){return this.getScrollPosition()>=this.getMaxScrollRight()}});Ext.layout.boxOverflow.scroller.hbox=Ext.layout.boxOverflow.HorizontalScroller;Ext.layout.HBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"top",type:"hbox",calculateChildBoxes:function(K,h){var X=K.length,D=this.padding,c=D.top,Y=D.left,t=c+D.bottom,j=Y+D.right,H=h.width-this.scrollOffset,O=h.height,Z=Math.max(0,O-t),A=this.pack=="start",G=this.pack=="center",p=this.pack=="end",J=0,n=0,I=0,x=0,M=0,F=[],Q,N,w,e,V,l,q,L,T,C,v,P;for(q=0;q<X;q++){Q=K[q];w=Q.height;N=Q.width;l=!Q.hasLayout&&typeof Q.doLayout=="function";if(typeof N!="number"){if(Q.flex&&!N){I+=Q.flex}else{if(!N&&l){Q.doLayout()}e=Q.getSize();N=e.width;w=e.height}}V=Q.margins;C=V.left+V.right;J+=C+(N||0);x+=C+(Q.flex?Q.minWidth||0:N);M+=C+(Q.minWidth||N||0);if(typeof w!="number"){if(l){Q.doLayout()}w=Q.getHeight()}n=Math.max(n,w+V.top+V.bottom);F.push({component:Q,height:w||undefined,width:N||undefined})}var S=x-H,a=M>H;var R=Math.max(0,H-J-j);if(a){for(q=0;q<X;q++){F[q].width=K[q].minWidth||K[q].width||F[q].width}}else{if(S>0){var B=[];for(var s=0,k=X;s<k;s++){var o=K[s],W=o.minWidth||0;if(o.flex){F[s].width=W}else{B.push({minWidth:W,available:F[s].width-W,index:s})}}B.sort(function(y,i){return y.available>i.available?1:-1});for(var q=0,k=B.length;q<k;q++){var b=B[q].index;if(b==undefined){continue}var o=K[b],u=F[b],U=u.width,W=o.minWidth,m=Math.max(W,U-Math.ceil(S/(k-q))),d=U-m;F[b].width=m;S-=d}}else{var r=R,E=I;for(q=0;q<X;q++){Q=K[q];L=F[q];V=Q.margins;v=V.top+V.bottom;if(A&&Q.flex&&!Q.width){T=Math.ceil((Q.flex/E)*r);r-=T;E-=Q.flex;L.width=T;L.dirtySize=true}}}}if(G){Y+=R/2}else{if(p){Y+=R}}for(q=0;q<X;q++){Q=K[q];L=F[q];V=Q.margins;Y+=V.left;v=V.top+V.bottom;L.left=Y;L.top=c+V.top;switch(this.align){case"stretch":P=Z-v;L.height=P.constrain(Q.minHeight||0,Q.maxHeight||1000000);L.dirtySize=true;break;case"stretchmax":P=n-v;L.height=P.constrain(Q.minHeight||0,Q.maxHeight||1000000);L.dirtySize=true;break;case"middle":var g=Z-L.height-v;if(g>0){L.top=c+v+(g/2)}}Y+=L.width+V.right}return{boxes:F,meta:{maxHeight:n,nonFlexWidth:J,desiredWidth:x,minimumWidth:M,shortfall:x-H,tooNarrow:a}}}});Ext.Container.LAYOUTS.hbox=Ext.layout.HBoxLayout;Ext.layout.VBoxLayout=Ext.extend(Ext.layout.BoxLayout,{align:"left",type:"vbox",calculateChildBoxes:function(L,k){var W=L.length,C=this.padding,c=C.top,X=C.left,u=c+C.bottom,m=X+C.right,I=k.width-this.scrollOffset,P=k.height,o=Math.max(0,I-m),A=this.pack=="start",H=this.pack=="center",Q=this.pack=="end",J=0,g=0,K=0,j=0,l=0,F=[],R,O,x,h,V,s,r,M,N,B,w,G,n;for(r=0;r<W;r++){R=L[r];x=R.height;O=R.width;s=!R.hasLayout&&typeof R.doLayout=="function";if(typeof x!="number"){if(R.flex&&!x){K+=R.flex}else{if(!x&&s){R.doLayout()}h=R.getSize();O=h.width;x=h.height}}V=R.margins;w=V.top+V.bottom;J+=w+(x||0);j+=w+(R.flex?R.minHeight||0:x);l+=w+(R.minHeight||x||0);if(typeof O!="number"){if(s){R.doLayout()}O=R.getWidth()}g=Math.max(g,O+V.left+V.right);F.push({component:R,height:x||undefined,width:O||undefined})}var S=j-P,Z=l>P;var e=Math.max(0,(P-J-u));if(Z){for(r=0,n=W;r<n;r++){F[r].height=L[r].minHeight||L[r].height||F[r].height}}else{if(S>0){var D=[];for(var t=0,n=W;t<n;t++){var q=L[t],T=q.minHeight||0;if(q.flex){F[t].height=T}else{D.push({minHeight:T,available:F[t].height-T,index:t})}}D.sort(function(y,i){return y.available>i.available?1:-1});for(var r=0,n=D.length;r<n;r++){var b=D[r].index;if(b==undefined){continue}var q=L[b],v=F[b],a=v.height,T=q.minHeight,U=Math.max(T,a-Math.ceil(S/(n-r))),d=a-U;F[b].height=U;S-=d}}else{var Y=e,E=K;for(r=0;r<W;r++){R=L[r];M=F[r];V=R.margins;B=V.left+V.right;if(A&&R.flex&&!R.height){N=Math.ceil((R.flex/E)*Y);Y-=N;E-=R.flex;M.height=N;M.dirtySize=true}}}}if(H){c+=e/2}else{if(Q){c+=e}}for(r=0;r<W;r++){R=L[r];M=F[r];V=R.margins;c+=V.top;B=V.left+V.right;M.left=X+V.left;M.top=c;switch(this.align){case"stretch":G=o-B;M.width=G.constrain(R.minWidth||0,R.maxWidth||1000000);M.dirtySize=true;break;case"stretchmax":G=g-B;M.width=G.constrain(R.minWidth||0,R.maxWidth||1000000);M.dirtySize=true;break;case"center":var p=o-M.width-B;if(p>0){M.left=X+B+(p/2)}}c+=M.height+V.bottom}return{boxes:F,meta:{maxWidth:g,nonFlexHeight:J,desiredHeight:j,minimumHeight:l,shortfall:j-P,tooNarrow:Z}}}});Ext.Container.LAYOUTS.vbox=Ext.layout.VBoxLayout;Ext.layout.ToolbarLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"toolbar",triggerWidth:18,noItemsMenuText:'<div class="x-toolbar-no-items">(None)</div>',lastOverflow:false,tableHTML:['<table cellspacing="0" class="x-toolbar-ct">',"<tbody>","<tr>",'<td class="x-toolbar-left" align="{0}">','<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-left-row"></tr>',"</tbody>","</table>","</td>",'<td class="x-toolbar-right" align="right">','<table cellspacing="0" class="x-toolbar-right-ct">',"<tbody>","<tr>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-right-row"></tr>',"</tbody>","</table>","</td>","<td>",'<table cellspacing="0">',"<tbody>",'<tr class="x-toolbar-extras-row"></tr>',"</tbody>","</table>","</td>","</tr>","</tbody>","</table>","</td>","</tr>","</tbody>","</table>"].join(""),onLayout:function(A,G){if(!this.leftTr){var C=A.buttonAlign=="center"?"center":"left";G.addClass("x-toolbar-layout-ct");G.insertHtml("beforeEnd",String.format(this.tableHTML,C));this.leftTr=G.child("tr.x-toolbar-left-row",true);this.rightTr=G.child("tr.x-toolbar-right-row",true);this.extrasTr=G.child("tr.x-toolbar-extras-row",true);if(this.hiddenItem==undefined){this.hiddenItems=[]}}var B=A.buttonAlign=="right"?this.rightTr:this.leftTr,I=A.items.items,F=0;for(var E=0,H=I.length,J;E<H;E++,F++){J=I[E];if(J.isFill){B=this.rightTr;F=-1}else{if(!J.rendered){J.render(this.insertCell(J,B,F));this.configureItem(J)}else{if(!J.xtbHidden&&!this.isValidParent(J,B.childNodes[F])){var D=this.insertCell(J,B,F);D.appendChild(J.getPositionEl().dom);J.container=Ext.get(D)}}}}this.cleanup(this.leftTr);this.cleanup(this.rightTr);this.cleanup(this.extrasTr);this.fitToSize(G)},cleanup:function(A){var B=A.childNodes,C,D;for(C=B.length-1;C>=0&&(D=B[C]);C--){if(!D.firstChild){A.removeChild(D)}}},insertCell:function(C,D,B){var A=document.createElement("td");A.className="x-toolbar-cell";D.insertBefore(A,D.childNodes[B]||null);return A},hideItem:function(A){this.hiddenItems.push(A);A.xtbHidden=true;A.xtbWidth=A.getPositionEl().dom.parentNode.offsetWidth;A.hide()},unhideItem:function(A){A.show();A.xtbHidden=false;this.hiddenItems.remove(A)},getItemWidth:function(A){return A.hidden?(A.xtbWidth||0):A.getPositionEl().dom.parentNode.offsetWidth},fitToSize:function(H){if(this.container.enableOverflow===false){return}var G=H.dom.clientWidth,M=H.dom.firstChild.offsetWidth,B=G-this.triggerWidth,J=this.lastWidth||0,A=this.hiddenItems,L=A.length!=0,F=G>=J;this.lastWidth=G;if(M>G||(L&&F)){var K=this.container.items.items,I=K.length,C=0,D;for(var E=0;E<I;E++){D=K[E];if(!D.isFill){C+=this.getItemWidth(D);if(C>B){if(!(D.hidden||D.xtbHidden)){this.hideItem(D)}}else{if(D.xtbHidden){this.unhideItem(D)}}}}}L=A.length!=0;if(L){this.initMore();if(!this.lastOverflow){this.container.fireEvent("overflowchange",this.container,true);this.lastOverflow=true}}else{if(this.more){this.clearMenu();this.more.destroy();delete this.more;if(this.lastOverflow){this.container.fireEvent("overflowchange",this.container,false);this.lastOverflow=false}}}},createMenuConfig:function(C,D){var B=Ext.apply({},C.initialConfig),A=C.toggleGroup;Ext.copyTo(B,C,["iconCls","icon","itemId","disabled","handler","scope","menu"]);Ext.apply(B,{text:C.overflowText||C.text,hideOnClick:D});if(A||C.enableToggle){Ext.apply(B,{group:A,checked:C.pressed,listeners:{checkchange:function(E,F){C.toggle(F)}}})}delete B.ownerCt;delete B.xtype;delete B.id;return B},addComponentToMenu:function(B,A){if(A instanceof Ext.Toolbar.Separator){B.add("-")}else{if(Ext.isFunction(A.isXType)){if(A.isXType("splitbutton")){B.add(this.createMenuConfig(A,true))}else{if(A.isXType("button")){B.add(this.createMenuConfig(A,!A.menu))}else{if(A.isXType("buttongroup")){A.items.each(function(C){this.addComponentToMenu(B,C)},this)}}}}}},clearMenu:function(){var A=this.moreMenu;if(A&&A.items){A.items.each(function(B){delete B.menu})}},beforeMoreShow:function(G){var E=this.container.items.items,D=E.length,C,F;var A=function(H,I){return H.isXType("buttongroup")&&!(I instanceof Ext.Toolbar.Separator)};this.clearMenu();G.removeAll();for(var B=0;B<D;B++){C=E[B];if(C.xtbHidden){if(F&&(A(C,F)||A(F,C))){G.add("-")}this.addComponentToMenu(G,C);F=C}}if(G.items.length<1){G.add(this.noItemsMenuText)}},initMore:function(){if(!this.more){this.moreMenu=new Ext.menu.Menu({ownerCt:this.container,listeners:{beforeshow:this.beforeMoreShow,scope:this}});this.more=new Ext.Button({iconCls:"x-toolbar-more-icon",cls:"x-toolbar-more",menu:this.moreMenu,ownerCt:this.container});var A=this.insertCell(this.more,this.extrasTr,100);this.more.render(A)}},destroy:function(){Ext.destroy(this.more,this.moreMenu);delete this.leftTr;delete this.rightTr;delete this.extrasTr;Ext.layout.ToolbarLayout.superclass.destroy.call(this)}});Ext.Container.LAYOUTS.toolbar=Ext.layout.ToolbarLayout;Ext.layout.MenuLayout=Ext.extend(Ext.layout.ContainerLayout,{monitorResize:true,type:"menu",setContainer:function(A){this.monitorResize=!A.floating;A.on("autosize",this.doAutoSize,this);Ext.layout.MenuLayout.superclass.setContainer.call(this,A)},renderItem:function(B,A,C){if(!this.itemTpl){this.itemTpl=Ext.layout.MenuLayout.prototype.itemTpl=new Ext.XTemplate('<li id="{itemId}" class="{itemCls}">','<tpl if="needsIcon">','<img alt="{altText}" src="{icon}" class="{iconCls}"/>',"</tpl>","</li>")}if(B&&!B.rendered){if(Ext.isNumber(A)){A=C.dom.childNodes[A]}var D=this.getItemArgs(B);B.render(B.positionEl=A?this.itemTpl.insertBefore(A,D,true):this.itemTpl.append(C,D,true));B.positionEl.menuItemId=B.getItemId();if(!D.isMenuItem&&D.needsIcon){B.positionEl.addClass("x-menu-list-item-indent")}this.configureItem(B)}else{if(B&&!this.isValidParent(B,C)){if(Ext.isNumber(A)){A=C.dom.childNodes[A]}C.dom.insertBefore(B.getActionEl().dom,A||null)}}},getItemArgs:function(B){var A=B instanceof Ext.menu.Item,C=!(A||B instanceof Ext.menu.Separator);return{isMenuItem:A,needsIcon:C&&(B.icon||B.iconCls),icon:B.icon||Ext.BLANK_IMAGE_URL,iconCls:"x-menu-item-icon "+(B.iconCls||""),itemId:"x-menu-el-"+B.id,itemCls:"x-menu-list-item ",altText:B.altText||""}},isValidParent:function(A,B){return A.el.up("li.x-menu-list-item",5).dom.parentNode===(B.dom||B)},onLayout:function(A,B){Ext.layout.MenuLayout.superclass.onLayout.call(this,A,B);this.doAutoSize()},doAutoSize:function(){var C=this.container,B=C.width;if(C.floating){if(B){C.setWidth(B)}else{if(Ext.isIE){C.setWidth(Ext.isStrict&&(Ext.isIE7||Ext.isIE8||Ext.isIE9)?"auto":C.minWidth);var A=C.getEl(),D=A.dom.offsetWidth;C.setWidth(C.getLayoutTarget().getWidth()+A.getFrameWidth("lr"))}}}}});Ext.Container.LAYOUTS["menu"]=Ext.layout.MenuLayout;Ext.Viewport=Ext.extend(Ext.Container,{initComponent:function(){Ext.Viewport.superclass.initComponent.call(this);document.getElementsByTagName("html")[0].className+=" x-viewport";this.el=Ext.getBody();this.el.setHeight=Ext.emptyFn;this.el.setWidth=Ext.emptyFn;this.el.setSize=Ext.emptyFn;this.el.dom.scroll="no";this.allowDomMove=false;this.autoWidth=true;this.autoHeight=true;Ext.EventManager.onWindowResize(this.fireResize,this);this.renderTo=this.el},fireResize:function(B,A){this.fireEvent("resize",this,B,A,B,A)}});Ext.reg("viewport",Ext.Viewport);Ext.Panel=Ext.extend(Ext.Container,{baseCls:"x-panel",collapsedCls:"x-panel-collapsed",maskDisabled:true,animCollapse:Ext.enableFx,headerAsText:true,buttonAlign:"right",collapsed:false,collapseFirst:true,minButtonWidth:75,elements:"body",preventBodyReset:false,padding:undefined,resizeEvent:"bodyresize",toolTarget:"header",collapseEl:"bwrap",slideAnchor:"t",disabledClass:"",deferHeight:true,expandDefaults:{duration:0.25},collapseDefaults:{duration:0.25},initComponent:function(){Ext.Panel.superclass.initComponent.call(this);this.addEvents("bodyresize","titlechange","iconchange","collapse","expand","beforecollapse","beforeexpand","beforeclose","close","activate","deactivate");if(this.unstyled){this.baseCls="x-plain"}this.toolbars=[];if(this.tbar){this.elements+=",tbar";this.topToolbar=this.createToolbar(this.tbar);this.tbar=null}if(this.bbar){this.elements+=",bbar";this.bottomToolbar=this.createToolbar(this.bbar);this.bbar=null}if(this.header===true){this.elements+=",header";this.header=null}else{if(this.headerCfg||(this.title&&this.header!==false)){this.elements+=",header"}}if(this.footerCfg||this.footer===true){this.elements+=",footer";this.footer=null}if(this.buttons){this.fbar=this.buttons;this.buttons=null}if(this.fbar){this.createFbar(this.fbar)}if(this.autoLoad){this.on("render",this.doAutoLoad,this,{delay:10})}},createFbar:function(B){var A=this.minButtonWidth;this.elements+=",footer";this.fbar=this.createToolbar(B,{buttonAlign:this.buttonAlign,toolbarCls:"x-panel-fbar",enableOverflow:false,defaults:function(C){return{minWidth:C.minWidth||A}}});this.fbar.items.each(function(C){C.minWidth=C.minWidth||this.minButtonWidth},this);this.buttons=this.fbar.items.items},createToolbar:function(A,C){var B;if(Ext.isArray(A)){A={items:A}}B=A.events?Ext.apply(A,C):this.createComponent(Ext.apply({},A,C),"toolbar");this.toolbars.push(B);return B},createElement:function(B,C){if(this[B]){C.appendChild(this[B].dom);return}if(B==="bwrap"||this.elements.indexOf(B)!=-1){if(this[B+"Cfg"]){this[B]=Ext.fly(C).createChild(this[B+"Cfg"])}else{var A=document.createElement("div");A.className=this[B+"Cls"];this[B]=Ext.get(C.appendChild(A))}if(this[B+"CssClass"]){this[B].addClass(this[B+"CssClass"])}if(this[B+"Style"]){this[B].applyStyles(this[B+"Style"])}}},onRender:function(G,D){Ext.Panel.superclass.onRender.call(this,G,D);this.createClasses();var C=this.el,B=C.dom,I,F;if(this.collapsible&&!this.hideCollapseTool){this.tools=this.tools?this.tools.slice(0):[];this.tools[this.collapseFirst?"unshift":"push"]({id:"toggle",handler:this.toggleCollapse,scope:this})}if(this.tools){F=this.tools;this.elements+=(this.header!==false)?",header":""}this.tools={};C.addClass(this.baseCls);if(B.firstChild){this.header=C.down("."+this.headerCls);this.bwrap=C.down("."+this.bwrapCls);var J=this.bwrap?this.bwrap:C;this.tbar=J.down("."+this.tbarCls);this.body=J.down("."+this.bodyCls);this.bbar=J.down("."+this.bbarCls);this.footer=J.down("."+this.footerCls);this.fromMarkup=true}if(this.preventBodyReset===true){C.addClass("x-panel-reset")}if(this.cls){C.addClass(this.cls)}if(this.buttons){this.elements+=",footer"}if(this.frame){C.insertHtml("afterBegin",String.format(Ext.Element.boxMarkup,this.baseCls));this.createElement("header",B.firstChild.firstChild.firstChild);this.createElement("bwrap",B);I=this.bwrap.dom;var A=B.childNodes[1],H=B.childNodes[2];I.appendChild(A);I.appendChild(H);var E=I.firstChild.firstChild.firstChild;this.createElement("tbar",E);this.createElement("body",E);this.createElement("bbar",E);this.createElement("footer",I.lastChild.firstChild.firstChild);if(!this.footer){this.bwrap.dom.lastChild.className+=" x-panel-nofooter"}this.ft=Ext.get(this.bwrap.dom.lastChild);this.mc=Ext.get(E)}else{this.createElement("header",B);this.createElement("bwrap",B);I=this.bwrap.dom;this.createElement("tbar",I);this.createElement("body",I);this.createElement("bbar",I);this.createElement("footer",I);if(!this.header){this.body.addClass(this.bodyCls+"-noheader");if(this.tbar){this.tbar.addClass(this.tbarCls+"-noheader")}}}if(Ext.isDefined(this.padding)){this.body.setStyle("padding",this.body.addUnits(this.padding))}if(this.border===false){this.el.addClass(this.baseCls+"-noborder");this.body.addClass(this.bodyCls+"-noborder");if(this.header){this.header.addClass(this.headerCls+"-noborder")}if(this.footer){this.footer.addClass(this.footerCls+"-noborder")}if(this.tbar){this.tbar.addClass(this.tbarCls+"-noborder")}if(this.bbar){this.bbar.addClass(this.bbarCls+"-noborder")}}if(this.bodyBorder===false){this.body.addClass(this.bodyCls+"-noborder")}this.bwrap.enableDisplayMode("block");if(this.header){this.header.unselectable();if(this.headerAsText){this.header.dom.innerHTML='<span class="'+this.headerTextCls+'">'+this.header.dom.innerHTML+"</span>";if(this.iconCls){this.setIconClass(this.iconCls)}}}if(this.floating){this.makeFloating(this.floating)}if(this.collapsible&&this.titleCollapse&&this.header){this.mon(this.header,"click",this.toggleCollapse,this);this.header.setStyle("cursor","pointer")}if(F){this.addTool.apply(this,F)}if(this.fbar){this.footer.addClass("x-panel-btns");this.fbar.ownerCt=this;this.fbar.render(this.footer);this.footer.createChild({cls:"x-clear"})}if(this.tbar&&this.topToolbar){this.topToolbar.ownerCt=this;this.topToolbar.render(this.tbar)}if(this.bbar&&this.bottomToolbar){this.bottomToolbar.ownerCt=this;this.bottomToolbar.render(this.bbar)}},setIconClass:function(C){var B=this.iconCls;this.iconCls=C;if(this.rendered&&this.header){if(this.frame){this.header.addClass("x-panel-icon");this.header.replaceClass(B,this.iconCls)}else{var E=this.header,D=E.child("img.x-panel-inline-icon");if(D){Ext.fly(D).replaceClass(B,this.iconCls)}else{var A=E.child("span."+this.headerTextCls);if(A){Ext.DomHelper.insertBefore(A.dom,{tag:"img",alt:"",src:Ext.BLANK_IMAGE_URL,cls:"x-panel-inline-icon "+this.iconCls})}}}}this.fireEvent("iconchange",this,C,B)},makeFloating:function(A){this.floating=true;this.el=new Ext.Layer(Ext.apply({},{shadow:Ext.isDefined(this.shadow)?this.shadow:"sides",shadowOffset:this.shadowOffset,constrain:false,shim:this.shim===false?false:undefined},A),this.el)},getTopToolbar:function(){return this.topToolbar},getBottomToolbar:function(){return this.bottomToolbar},getFooterToolbar:function(){return this.fbar},addButton:function(B,C,A){if(!this.fbar){this.createFbar([])}if(C){if(Ext.isString(B)){B={text:B}}B=Ext.apply({handler:C,scope:A},B)}return this.fbar.add(B)},addTool:function(){if(!this.rendered){if(!this.tools){this.tools=[]}Ext.each(arguments,function(H){this.tools.push(H)},this);return}if(!this[this.toolTarget]){return}if(!this.toolTemplate){var E=new Ext.Template('<div class="x-tool x-tool-{id}">&#160;</div>');E.disableFormats=true;E.compile();Ext.Panel.prototype.toolTemplate=E}for(var A=0,G=arguments,D=G.length;A<D;A++){var B=G[A];if(!this.tools[B.id]){var C="x-tool-"+B.id+"-over";var F=this.toolTemplate.insertFirst(this[this.toolTarget],B,true);this.tools[B.id]=F;F.enableDisplayMode("block");this.mon(F,"click",this.createToolHandler(F,B,C,this));if(B.on){this.mon(F,B.on)}if(B.hidden){F.hide()}if(B.qtip){if(Ext.isObject(B.qtip)){Ext.QuickTips.register(Ext.apply({target:F.id},B.qtip))}else{F.dom.qtip=B.qtip}}F.addClassOnOver(C)}}},onLayout:function(A,B){Ext.Panel.superclass.onLayout.apply(this,arguments);if(this.hasLayout&&this.toolbars.length>0){Ext.each(this.toolbars,function(C){C.doLayout(undefined,B)});this.syncHeight()}},syncHeight:function(){var A=this.toolbarHeight,C=this.body,D=this.lastSize.height,B;if(this.autoHeight||!Ext.isDefined(D)||D=="auto"){return}if(A!=this.getToolbarHeight()){A=Math.max(0,D-this.getFrameHeight());C.setHeight(A);B=C.getSize();this.toolbarHeight=this.getToolbarHeight();this.onBodyResize(B.width,B.height)}},onShow:function(){if(this.floating){return this.el.show()}Ext.Panel.superclass.onShow.call(this)},onHide:function(){if(this.floating){return this.el.hide()}Ext.Panel.superclass.onHide.call(this)},createToolHandler:function(D,B,C,A){return function(E){D.removeClass(C);if(B.stopEvent!==false){E.stopEvent()}if(B.handler){B.handler.call(B.scope||D,E,D,A,B)}}},afterRender:function(){if(this.floating&&!this.hidden){this.el.show()}if(this.title){this.setTitle(this.title)}Ext.Panel.superclass.afterRender.call(this);if(this.collapsed){this.collapsed=false;this.collapse(false)}this.initEvents()},getKeyMap:function(){if(!this.keyMap){this.keyMap=new Ext.KeyMap(this.el,this.keys)}return this.keyMap},initEvents:function(){if(this.keys){this.getKeyMap()}if(this.draggable){this.initDraggable()}if(this.toolbars.length>0){Ext.each(this.toolbars,function(A){A.doLayout();A.on({scope:this,afterlayout:this.syncHeight,remove:this.syncHeight})},this);this.syncHeight()}},initDraggable:function(){this.dd=new Ext.Panel.DD(this,Ext.isBoolean(this.draggable)?null:this.draggable)},beforeEffect:function(A){if(this.floating){this.el.beforeAction()}if(A!==false){this.el.addClass("x-panel-animated")}},afterEffect:function(A){this.syncShadow();this.el.removeClass("x-panel-animated")},createEffect:function(D,A,C){var B={scope:C,block:true};if(D===true){B.callback=A;return B}else{if(!D.callback){B.callback=A}else{B.callback=function(){A.call(C);Ext.callback(D.callback,D.scope)}}}return Ext.applyIf(B,D)},collapse:function(A){if(this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforecollapse",this,A)===false){return}var B=A===true||(A!==false&&this.animCollapse);this.beforeEffect(B);this.onCollapse(B,A);return this},onCollapse:function(B,A){if(B){this[this.collapseEl].slideOut(this.slideAnchor,Ext.apply(this.createEffect(A||true,this.afterCollapse,this),this.collapseDefaults))}else{this[this.collapseEl].hide(this.hideMode);this.afterCollapse(false)}},afterCollapse:function(A){this.collapsed=true;this.el.addClass(this.collapsedCls);if(A!==false){this[this.collapseEl].hide(this.hideMode)}this.afterEffect(A);this.cascade(function(B){if(B.lastSize){B.lastSize={width:undefined,height:undefined}}});this.fireEvent("collapse",this)},expand:function(A){if(!this.collapsed||this.el.hasFxBlock()||this.fireEvent("beforeexpand",this,A)===false){return}var B=A===true||(A!==false&&this.animCollapse);this.el.removeClass(this.collapsedCls);this.beforeEffect(B);this.onExpand(B,A);return this},onExpand:function(B,A){if(B){this[this.collapseEl].slideIn(this.slideAnchor,Ext.apply(this.createEffect(A||true,this.afterExpand,this),this.expandDefaults))}else{this[this.collapseEl].show(this.hideMode);this.afterExpand(false)}},afterExpand:function(A){this.collapsed=false;if(A!==false){this[this.collapseEl].show(this.hideMode)}this.afterEffect(A);if(this.deferLayout){delete this.deferLayout;this.doLayout(true)}this.fireEvent("expand",this)},toggleCollapse:function(A){this[this.collapsed?"expand":"collapse"](A);return this},onDisable:function(){if(this.rendered&&this.maskDisabled){this.el.mask()}Ext.Panel.superclass.onDisable.call(this)},onEnable:function(){if(this.rendered&&this.maskDisabled){this.el.unmask()}Ext.Panel.superclass.onEnable.call(this)},onResize:function(F,E,B,D){var C=F,A=E;if(Ext.isDefined(C)||Ext.isDefined(A)){if(!this.collapsed){if(Ext.isNumber(C)){this.body.setWidth(C=this.adjustBodyWidth(C-this.getFrameWidth()))}else{if(C=="auto"){C=this.body.setWidth("auto").dom.offsetWidth}else{C=this.body.dom.offsetWidth}}if(this.tbar){this.tbar.setWidth(C);if(this.topToolbar){this.topToolbar.setSize(C)}}if(this.bbar){this.bbar.setWidth(C);if(this.bottomToolbar){this.bottomToolbar.setSize(C);if(Ext.isIE){this.bbar.setStyle("position","static");this.bbar.setStyle("position","")}}}if(this.footer){this.footer.setWidth(C);if(this.fbar){this.fbar.setSize(Ext.isIE?(C-this.footer.getFrameWidth("lr")):"auto")}}if(Ext.isNumber(A)){A=Math.max(0,A-this.getFrameHeight());this.body.setHeight(A)}else{if(A=="auto"){this.body.setHeight(A)}}if(this.disabled&&this.el._mask){this.el._mask.setSize(this.el.dom.clientWidth,this.el.getHeight())}}else{this.queuedBodySize={width:C,height:A};if(!this.queuedExpand&&this.allowQueuedExpand!==false){this.queuedExpand=true;this.on("expand",function(){delete this.queuedExpand;this.onResize(this.queuedBodySize.width,this.queuedBodySize.height)},this,{single:true})}}this.onBodyResize(C,A)}this.syncShadow();Ext.Panel.superclass.onResize.call(this,F,E,B,D)},onBodyResize:function(B,A){this.fireEvent("bodyresize",this,B,A)},getToolbarHeight:function(){var A=0;if(this.rendered){Ext.each(this.toolbars,function(B){A+=B.getHeight()},this)}return A},adjustBodyHeight:function(A){return A},adjustBodyWidth:function(A){return A},onPosition:function(){this.syncShadow()},getFrameWidth:function(){var B=this.el.getFrameWidth("lr")+this.bwrap.getFrameWidth("lr");if(this.frame){var A=this.bwrap.dom.firstChild;B+=(Ext.fly(A).getFrameWidth("l")+Ext.fly(A.firstChild).getFrameWidth("r"));B+=this.mc.getFrameWidth("lr")}return B},getFrameHeight:function(){var A=this.el.getFrameWidth("tb")+this.bwrap.getFrameWidth("tb");A+=(this.tbar?this.tbar.getHeight():0)+(this.bbar?this.bbar.getHeight():0);if(this.frame){A+=this.el.dom.firstChild.offsetHeight+this.ft.dom.offsetHeight+this.mc.getFrameWidth("tb")}else{A+=(this.header?this.header.getHeight():0)+(this.footer?this.footer.getHeight():0)}return A},getInnerWidth:function(){return this.getSize().width-this.getFrameWidth()},getInnerHeight:function(){return this.body.getHeight()},syncShadow:function(){if(this.floating){this.el.sync(true)}},getLayoutTarget:function(){return this.body},getContentTarget:function(){return this.body},setTitle:function(A,B){this.title=A;if(this.header&&this.headerAsText){this.header.child("span").update(A)}if(B){this.setIconClass(B)}this.fireEvent("titlechange",this,A);return this},getUpdater:function(){return this.body.getUpdater()},load:function(){var A=this.body.getUpdater();A.update.apply(A,arguments);return this},beforeDestroy:function(){Ext.Panel.superclass.beforeDestroy.call(this);if(this.header){this.header.removeAllListeners()}if(this.tools){for(var A in this.tools){Ext.destroy(this.tools[A])}}if(this.toolbars.length>0){Ext.each(this.toolbars,function(B){B.un("afterlayout",this.syncHeight,this);B.un("remove",this.syncHeight,this)},this)}if(Ext.isArray(this.buttons)){while(this.buttons.length){Ext.destroy(this.buttons[0])}}if(this.rendered){Ext.destroy(this.ft,this.header,this.footer,this.tbar,this.bbar,this.body,this.mc,this.bwrap,this.dd);if(this.fbar){Ext.destroy(this.fbar,this.fbar.el)}}Ext.destroy(this.toolbars)},createClasses:function(){this.headerCls=this.baseCls+"-header";this.headerTextCls=this.baseCls+"-header-text";this.bwrapCls=this.baseCls+"-bwrap";this.tbarCls=this.baseCls+"-tbar";this.bodyCls=this.baseCls+"-body";this.bbarCls=this.baseCls+"-bbar";this.footerCls=this.baseCls+"-footer"},createGhost:function(C,D,B){var A=document.createElement("div");A.className="x-panel-ghost "+(C?C:"");if(this.header){A.appendChild(this.el.dom.firstChild.cloneNode(true))}Ext.fly(A.appendChild(document.createElement("ul"))).setHeight(this.bwrap.getHeight());A.style.width=this.el.dom.offsetWidth+"px";if(!B){this.container.dom.appendChild(A)}else{Ext.getDom(B).appendChild(A)}if(D!==false&&this.el.useShim!==false){var E=new Ext.Layer({shadow:false,useDisplay:true,constrain:false},A);E.show();return E}else{return new Ext.Element(A)}},doAutoLoad:function(){var A=this.body.getUpdater();if(this.renderer){A.setRenderer(this.renderer)}A.update(Ext.isObject(this.autoLoad)?this.autoLoad:{url:this.autoLoad})},getTool:function(A){return this.tools[A]}});Ext.reg("panel",Ext.Panel);Ext.Editor=function(B,A){if(B.field){this.field=Ext.create(B.field,"textfield");A=Ext.apply({},B);delete A.field}else{this.field=B}Ext.Editor.superclass.constructor.call(this,A)};Ext.extend(Ext.Editor,Ext.Component,{allowBlur:true,value:"",alignment:"c-c?",offsets:[0,0],shadow:"frame",constrain:false,swallowKeys:true,completeOnEnter:true,cancelOnEsc:true,updateEl:false,initComponent:function(){Ext.Editor.superclass.initComponent.call(this);this.addEvents("beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey")},onRender:function(B,A){this.el=new Ext.Layer({shadow:this.shadow,cls:"x-editor",parentEl:B,shim:this.shim,shadowOffset:this.shadowOffset||4,id:this.id,constrain:this.constrain});if(this.zIndex){this.el.setZIndex(this.zIndex)}this.el.setStyle("overflow",Ext.isGecko?"auto":"hidden");if(this.field.msgTarget!="title"){this.field.msgTarget="qtip"}this.field.inEditor=true;this.mon(this.field,{scope:this,blur:this.onBlur,specialkey:this.onSpecialKey});if(this.field.grow){this.mon(this.field,"autosize",this.el.sync,this.el,{delay:1})}this.field.render(this.el).show();this.field.getEl().dom.name="";if(this.swallowKeys){this.field.el.swallowEvent(["keypress","keydown"])}},onSpecialKey:function(D,B){var A=B.getKey(),C=this.completeOnEnter&&A==B.ENTER,E=this.cancelOnEsc&&A==B.ESC;if(C||E){B.stopEvent();if(C){this.completeEdit()}else{this.cancelEdit()}if(D.triggerBlur){D.triggerBlur()}}this.fireEvent("specialkey",D,B)},startEdit:function(A,C){if(this.editing){this.completeEdit()}this.boundEl=Ext.get(A);var B=C!==undefined?C:this.boundEl.dom.innerHTML;if(!this.rendered){this.render(this.parentEl||document.body)}if(this.fireEvent("beforestartedit",this,this.boundEl,B)!==false){this.startValue=B;this.field.reset();this.field.setValue(B);this.realign(true);this.editing=true;this.show()}},doAutoSize:function(){if(this.autoSize){var A=this.boundEl.getSize(),B=this.field.getSize();switch(this.autoSize){case"width":this.setSize(A.width,B.height);break;case"height":this.setSize(B.width,A.height);break;case"none":this.setSize(B.width,B.height);break;default:this.setSize(A.width,A.height)}}},setSize:function(B,A){delete this.field.lastSize;this.field.setSize(B,A);if(this.el){if(Ext.isGecko2||Ext.isOpera||(Ext.isIE7&&Ext.isStrict)){this.el.setSize(B,A)}this.el.sync()}},realign:function(A){if(A===true){this.doAutoSize()}this.el.alignTo(this.boundEl,this.alignment,this.offsets)},completeEdit:function(A){if(!this.editing){return}if(this.field.assertValue){this.field.assertValue()}var B=this.getValue();if(!this.field.isValid()){if(this.revertInvalid!==false){this.cancelEdit(A)}return}if(String(B)===String(this.startValue)&&this.ignoreNoChange){this.hideEdit(A);return}if(this.fireEvent("beforecomplete",this,B,this.startValue)!==false){B=this.getValue();if(this.updateEl&&this.boundEl){this.boundEl.update(B)}this.hideEdit(A);this.fireEvent("complete",this,B,this.startValue)}},onShow:function(){this.el.show();if(this.hideEl!==false){this.boundEl.hide()}this.field.show().focus(false,true);this.fireEvent("startedit",this.boundEl,this.startValue)},cancelEdit:function(A){if(this.editing){var B=this.getValue();this.setValue(this.startValue);this.hideEdit(A);this.fireEvent("canceledit",this,B,this.startValue)}},hideEdit:function(A){if(A!==true){this.editing=false;this.hide()}},onBlur:function(){if(this.allowBlur===true&&this.editing&&this.selectSameEditor!==true){this.completeEdit()}},onHide:function(){if(this.editing){this.completeEdit();return}this.field.blur();if(this.field.collapse){this.field.collapse()}this.el.hide();if(this.hideEl!==false){this.boundEl.show()}},setValue:function(A){this.field.setValue(A)},getValue:function(){return this.field.getValue()},beforeDestroy:function(){Ext.destroyMembers(this,"field");delete this.parentEl;delete this.boundEl}});Ext.reg("editor",Ext.Editor);Ext.ColorPalette=Ext.extend(Ext.Component,{itemCls:"x-color-palette",value:null,clickEvent:"click",ctype:"Ext.ColorPalette",allowReselect:false,colors:["000000","993300","333300","003300","003366","000080","333399","333333","800000","FF6600","808000","008000","008080","0000FF","666699","808080","FF0000","FF9900","99CC00","339966","33CCCC","3366FF","800080","969696","FF00FF","FFCC00","FFFF00","00FF00","00FFFF","00CCFF","993366","C0C0C0","FF99CC","FFCC99","FFFF99","CCFFCC","CCFFFF","99CCFF","CC99FF","FFFFFF"],initComponent:function(){Ext.ColorPalette.superclass.initComponent.call(this);this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope,true)}},onRender:function(B,A){this.autoEl={tag:"div",cls:this.itemCls};Ext.ColorPalette.superclass.onRender.call(this,B,A);var C=this.tpl||new Ext.XTemplate('<tpl for="."><a href="#" class="color-{.}" hidefocus="on"><em><span style="background:#{.}" unselectable="on">&#160;</span></em></a></tpl>');C.overwrite(this.el,this.colors);this.mon(this.el,this.clickEvent,this.handleClick,this,{delegate:"a"});if(this.clickEvent!="click"){this.mon(this.el,"click",Ext.emptyFn,this,{delegate:"a",preventDefault:true})}},afterRender:function(){Ext.ColorPalette.superclass.afterRender.call(this);if(this.value){var A=this.value;this.value=null;this.select(A,true)}},handleClick:function(A,B){A.preventDefault();if(!this.disabled){var C=B.className.match(/(?:^|\s)color-(.{6})(?:\s|$)/)[1];this.select(C.toUpperCase())}},select:function(C,B){C=C.replace("#","");if(C!=this.value||this.allowReselect){var A=this.el;if(this.value){A.child("a.color-"+this.value).removeClass("x-color-palette-sel")}A.child("a.color-"+C).addClass("x-color-palette-sel");this.value=C;if(B!==true){this.fireEvent("select",this,C)}}}});Ext.reg("colorpalette",Ext.ColorPalette);Ext.DatePicker=Ext.extend(Ext.BoxComponent,{todayText:"Today",okText:"&#160;OK&#160;",cancelText:"Cancel",todayTip:"{0} (Spacebar)",minText:"This date is before the minimum date",maxText:"This date is after the maximum date",format:"m/d/y",disabledDaysText:"Disabled",disabledDatesText:"Disabled",monthNames:Date.monthNames,dayNames:Date.dayNames,nextText:"Next Month (Control+Right)",prevText:"Previous Month (Control+Left)",monthYearText:"Choose a month (Control+Up/Down to move years)",startDay:0,showToday:true,focusOnSelect:true,initHour:12,initComponent:function(){Ext.DatePicker.superclass.initComponent.call(this);this.value=this.value?this.value.clearTime(true):new Date().clearTime();this.addEvents("select");if(this.handler){this.on("select",this.handler,this.scope||this)}this.initDisabledDays()},initDisabledDays:function(){if(!this.disabledDatesRE&&this.disabledDates){var C=this.disabledDates,B=C.length-1,A="(?:";Ext.each(C,function(D,E){A+=Ext.isDate(D)?"^"+Ext.escapeRe(D.dateFormat(this.format))+"$":C[E];if(E!=B){A+="|"}},this);this.disabledDatesRE=new RegExp(A+")")}},setDisabledDates:function(A){if(Ext.isArray(A)){this.disabledDates=A;this.disabledDatesRE=null}else{this.disabledDatesRE=A}this.initDisabledDays();this.update(this.value,true)},setDisabledDays:function(A){this.disabledDays=A;this.update(this.value,true)},setMinDate:function(A){this.minDate=A;this.update(this.value,true)},setMaxDate:function(A){this.maxDate=A;this.update(this.value,true)},setValue:function(A){this.value=A.clearTime(true);this.update(this.value)},getValue:function(){return this.value},focus:function(){this.update(this.activeDate)},onEnable:function(A){Ext.DatePicker.superclass.onEnable.call(this);this.doDisabled(false);this.update(A?this.value:this.activeDate);if(Ext.isIE){this.el.repaint()}},onDisable:function(){Ext.DatePicker.superclass.onDisable.call(this);this.doDisabled(true);if(Ext.isIE&&!Ext.isIE8){Ext.each([].concat(this.textNodes,this.el.query("th span")),function(A){Ext.fly(A).repaint()})}},doDisabled:function(A){this.keyNav.setDisabled(A);this.prevRepeater.setDisabled(A);this.nextRepeater.setDisabled(A);if(this.showToday){this.todayKeyListener.setDisabled(A);this.todayBtn.setDisabled(A)}},onRender:function(E,B){var G=['<table cellspacing="0">','<tr><td class="x-date-left"><a href="#" title="',this.prevText,'">&#160;</a></td><td class="x-date-middle" align="center"></td><td class="x-date-right"><a href="#" title="',this.nextText,'">&#160;</a></td></tr>','<tr><td colspan="3"><table class="x-date-inner" cellspacing="0"><thead><tr>'],F=this.dayNames,D;for(D=0;D<7;D++){var H=this.startDay+D;if(H>6){H=H-7}G.push("<th><span>",F[H].substr(0,1),"</span></th>")}G[G.length]="</tr></thead><tbody><tr>";for(D=0;D<42;D++){if(D%7===0&&D!==0){G[G.length]="</tr><tr>"}G[G.length]='<td><a href="#" hidefocus="on" class="x-date-date" tabIndex="1"><em><span></span></em></a></td>'}G.push("</tr></tbody></table></td></tr>",this.showToday?'<tr><td colspan="3" class="x-date-bottom" align="center"></td></tr>':"",'</table><div class="x-date-mp"></div>');var C=document.createElement("div");C.className="x-date-picker";C.innerHTML=G.join("");E.dom.insertBefore(C,B);this.el=Ext.get(C);this.eventEl=Ext.get(C.firstChild);this.prevRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-left a"),{handler:this.showPrevMonth,scope:this,preventDefault:true,stopDefault:true});this.nextRepeater=new Ext.util.ClickRepeater(this.el.child("td.x-date-right a"),{handler:this.showNextMonth,scope:this,preventDefault:true,stopDefault:true});this.monthPicker=this.el.down("div.x-date-mp");this.monthPicker.enableDisplayMode("block");this.keyNav=new Ext.KeyNav(this.eventEl,{"left":function(I){if(I.ctrlKey){this.showPrevMonth()}else{this.update(this.activeDate.add("d",-1))}},"right":function(I){if(I.ctrlKey){this.showNextMonth()}else{this.update(this.activeDate.add("d",1))}},"up":function(I){if(I.ctrlKey){this.showNextYear()}else{this.update(this.activeDate.add("d",-7))}},"down":function(I){if(I.ctrlKey){this.showPrevYear()}else{this.update(this.activeDate.add("d",7))}},"pageUp":function(I){this.showNextMonth()},"pageDown":function(I){this.showPrevMonth()},"enter":function(I){I.stopPropagation();return true},scope:this});this.el.unselectable();this.cells=this.el.select("table.x-date-inner tbody td");this.textNodes=this.el.query("table.x-date-inner tbody span");this.mbtn=new Ext.Button({text:"&#160;",tooltip:this.monthYearText,renderTo:this.el.child("td.x-date-middle",true)});this.mbtn.el.child("em").addClass("x-btn-arrow");if(this.showToday){this.todayKeyListener=this.eventEl.addKeyListener(Ext.EventObject.SPACE,this.selectToday,this);var A=(new Date()).dateFormat(this.format);this.todayBtn=new Ext.Button({renderTo:this.el.child("td.x-date-bottom",true),text:String.format(this.todayText,A),tooltip:String.format(this.todayTip,A),handler:this.selectToday,scope:this})}this.mon(this.eventEl,"mousewheel",this.handleMouseWheel,this);this.mon(this.eventEl,"click",this.handleDateClick,this,{delegate:"a.x-date-date"});this.mon(this.mbtn,"click",this.showMonthPicker,this);this.onEnable(true)},createMonthPicker:function(){if(!this.monthPicker.dom.firstChild){var B=['<table border="0" cellspacing="0">'];for(var A=0;A<6;A++){B.push('<tr><td class="x-date-mp-month"><a href="#">',Date.getShortMonthName(A),"</a></td>",'<td class="x-date-mp-month x-date-mp-sep"><a href="#">',Date.getShortMonthName(A+6),"</a></td>",A===0?'<td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-prev"></a></td><td class="x-date-mp-ybtn" align="center"><a class="x-date-mp-next"></a></td></tr>':'<td class="x-date-mp-year"><a href="#"></a></td><td class="x-date-mp-year"><a href="#"></a></td></tr>')}B.push('<tr class="x-date-mp-btns"><td colspan="4"><button type="button" class="x-date-mp-ok">',this.okText,'</button><button type="button" class="x-date-mp-cancel">',this.cancelText,"</button></td></tr>","</table>");this.monthPicker.update(B.join(""));this.mon(this.monthPicker,"click",this.onMonthClick,this);this.mon(this.monthPicker,"dblclick",this.onMonthDblClick,this);this.mpMonths=this.monthPicker.select("td.x-date-mp-month");this.mpYears=this.monthPicker.select("td.x-date-mp-year");this.mpMonths.each(function(D,E,C){C+=1;if((C%2)===0){D.dom.xmonth=5+Math.round(C*0.5)}else{D.dom.xmonth=Math.round((C-1)*0.5)}})}},showMonthPicker:function(){if(!this.disabled){this.createMonthPicker();var A=this.el.getSize();this.monthPicker.setSize(A);this.monthPicker.child("table").setSize(A);this.mpSelMonth=(this.activeDate||this.value).getMonth();this.updateMPMonth(this.mpSelMonth);this.mpSelYear=(this.activeDate||this.value).getFullYear();this.updateMPYear(this.mpSelYear);this.monthPicker.slideIn("t",{duration:0.2})}},updateMPYear:function(E){this.mpyear=E;var D=this.mpYears.elements;for(var A=1;A<=10;A++){var C=D[A-1],B;if((A%2)===0){B=E+Math.round(A*0.5);C.firstChild.innerHTML=B;C.xyear=B}else{B=E-(5-Math.round(A*0.5));C.firstChild.innerHTML=B;C.xyear=B}this.mpYears.item(A-1)[B==this.mpSelYear?"addClass":"removeClass"]("x-date-mp-sel")}},updateMPMonth:function(A){this.mpMonths.each(function(C,D,B){C[C.dom.xmonth==A?"addClass":"removeClass"]("x-date-mp-sel")})},selectMPMonth:function(A){},onMonthClick:function(C,D){C.stopEvent();var A=new Ext.Element(D),E;if(A.is("button.x-date-mp-cancel")){this.hideMonthPicker()}else{if(A.is("button.x-date-mp-ok")){var B=new Date(this.mpSelYear,this.mpSelMonth,(this.activeDate||this.value).getDate());if(B.getMonth()!=this.mpSelMonth){B=new Date(this.mpSelYear,this.mpSelMonth,1).getLastDateOfMonth()}this.update(B);this.hideMonthPicker()}else{if((E=A.up("td.x-date-mp-month",2))){this.mpMonths.removeClass("x-date-mp-sel");E.addClass("x-date-mp-sel");this.mpSelMonth=E.dom.xmonth}else{if((E=A.up("td.x-date-mp-year",2))){this.mpYears.removeClass("x-date-mp-sel");E.addClass("x-date-mp-sel");this.mpSelYear=E.dom.xyear}else{if(A.is("a.x-date-mp-prev")){this.updateMPYear(this.mpyear-10)}else{if(A.is("a.x-date-mp-next")){this.updateMPYear(this.mpyear+10)}}}}}}},onMonthDblClick:function(B,C){B.stopEvent();var A=new Ext.Element(C),D;if((D=A.up("td.x-date-mp-month",2))){this.update(new Date(this.mpSelYear,D.dom.xmonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}else{if((D=A.up("td.x-date-mp-year",2))){this.update(new Date(D.dom.xyear,this.mpSelMonth,(this.activeDate||this.value).getDate()));this.hideMonthPicker()}}},hideMonthPicker:function(A){if(this.monthPicker){if(A===true){this.monthPicker.hide()}else{this.monthPicker.slideOut("t",{duration:0.2})}}},showPrevMonth:function(A){this.update(this.activeDate.add("mo",-1))},showNextMonth:function(A){this.update(this.activeDate.add("mo",1))},showPrevYear:function(){this.update(this.activeDate.add("y",-1))},showNextYear:function(){this.update(this.activeDate.add("y",1))},handleMouseWheel:function(B){B.stopEvent();if(!this.disabled){var A=B.getWheelDelta();if(A>0){this.showPrevMonth()}else{if(A<0){this.showNextMonth()}}}},handleDateClick:function(A,B){A.stopEvent();if(!this.disabled&&B.dateValue&&!Ext.fly(B.parentNode).hasClass("x-date-disabled")){this.cancelFocus=this.focusOnSelect===false;this.setValue(new Date(B.dateValue));delete this.cancelFocus;this.fireEvent("select",this,this.value)}},selectToday:function(){if(this.todayBtn&&!this.todayBtn.disabled){this.setValue(new Date().clearTime());this.fireEvent("select",this,this.value)}},update:function(D,B){if(this.rendered){var P=this.activeDate,S=this.isVisible();this.activeDate=D;if(!B&&P&&this.el){var W=D.getTime();if(P.getMonth()==D.getMonth()&&P.getFullYear()==D.getFullYear()){this.cells.removeClass("x-date-selected");this.cells.each(function(d){if(d.dom.firstChild.dateValue==W){d.addClass("x-date-selected");if(S&&!this.cancelFocus){Ext.fly(d.dom.firstChild).focus(50)}return false}},this);return}}var b=D.getDaysInMonth(),U=D.getFirstDateOfMonth(),T=U.getDay()-this.startDay;if(T<0){T+=7}b+=T;var L=D.add("mo",-1),J=L.getDaysInMonth()-T,Y=this.cells.elements,e=this.textNodes,O=(new Date(L.getFullYear(),L.getMonth(),J,this.initHour)),Z=new Date().clearTime().getTime(),V=D.clearTime(true).getTime(),N=this.minDate?this.minDate.clearTime(true):Number.NEGATIVE_INFINITY,a=this.maxDate?this.maxDate.clearTime(true):Number.POSITIVE_INFINITY,Q=this.disabledDatesRE,X=this.disabledDatesText,F=this.disabledDays?this.disabledDays.join(""):false,I=this.disabledDaysText,A=this.format;if(this.showToday){var R=new Date().clearTime(),G=(R<N||R>a||(Q&&A&&Q.test(R.dateFormat(A)))||(F&&F.indexOf(R.getDay())!=-1));if(!this.disabled){this.todayBtn.setDisabled(G);this.todayKeyListener[G?"disable":"enable"]()}}var K=function(g,h){h.title="";var i=O.clearTime(true).getTime();h.firstChild.dateValue=i;if(i==Z){h.className+=" x-date-today";h.title=g.todayText}if(i==V){h.className+=" x-date-selected";if(S){Ext.fly(h.firstChild).focus(50)}}if(i<N){h.className=" x-date-disabled";h.title=g.minText;return}if(i>a){h.className=" x-date-disabled";h.title=g.maxText;return}if(F){if(F.indexOf(O.getDay())!=-1){h.title=I;h.className=" x-date-disabled"}}if(Q&&A){var d=O.dateFormat(A);if(Q.test(d)){h.title=X.replace("%0",d);h.className=" x-date-disabled"}}};var H=0;for(;H<T;H++){e[H].innerHTML=(++J);O.setDate(O.getDate()+1);Y[H].className="x-date-prevday";K(this,Y[H])}for(;H<b;H++){var E=H-T+1;e[H].innerHTML=(E);O.setDate(O.getDate()+1);Y[H].className="x-date-active";K(this,Y[H])}var c=0;for(;H<42;H++){e[H].innerHTML=(++c);O.setDate(O.getDate()+1);Y[H].className="x-date-nextday";K(this,Y[H])}this.mbtn.setText(this.monthNames[D.getMonth()]+" "+D.getFullYear());if(!this.internalRender){var M=this.el.dom.firstChild,C=M.offsetWidth;this.el.setWidth(C+this.el.getBorderWidth("lr"));Ext.fly(M).setWidth(C);this.internalRender=true;if(Ext.isOpera&&!this.secondPass){M.rows[0].cells[1].style.width=(C-(M.rows[0].cells[0].offsetWidth+M.rows[0].cells[2].offsetWidth))+"px";this.secondPass=true;this.update.defer(10,this,[D])}}}},beforeDestroy:function(){if(this.rendered){Ext.destroy(this.keyNav,this.monthPicker,this.eventEl,this.mbtn,this.nextRepeater,this.prevRepeater,this.cells.el,this.todayBtn);delete this.textNodes;delete this.cells.elements}}});Ext.reg("datepicker",Ext.DatePicker);Ext.LoadMask=function(A,B){this.el=Ext.get(A);Ext.apply(this,B);if(this.store){this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.onLoad});this.removeMask=Ext.value(this.removeMask,false)}else{var C=this.el.getUpdater();C.showLoadIndicator=false;C.on({scope:this,beforeupdate:this.onBeforeLoad,update:this.onLoad,failure:this.onLoad});this.removeMask=Ext.value(this.removeMask,true)}};Ext.LoadMask.prototype={msg:",...",msgCls:"x-mask-loading",disabled:false,disable:function(){this.disabled=true},enable:function(){this.disabled=false},onLoad:function(){this.el.unmask(this.removeMask)},onBeforeLoad:function(){if(!this.disabled){this.el.mask(this.msg,this.msgCls)}},show:function(){this.onBeforeLoad()},hide:function(){this.onLoad()},destroy:function(){if(this.store){this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoad,this)}else{var A=this.el.getUpdater();A.un("beforeupdate",this.onBeforeLoad,this);A.un("update",this.onLoad,this);A.un("failure",this.onLoad,this)}}};Ext.slider.Thumb=Ext.extend(Object,{dragging:false,constructor:function(A){Ext.apply(this,A||{},{cls:"x-slider-thumb",constrain:false});Ext.slider.Thumb.superclass.constructor.call(this,A);if(this.slider.vertical){Ext.apply(this,Ext.slider.Thumb.Vertical)}},render:function(){this.el=this.slider.innerEl.insertFirst({cls:this.cls});this.initEvents()},enable:function(){this.disabled=false;this.el.removeClass(this.slider.disabledClass)},disable:function(){this.disabled=true;this.el.addClass(this.slider.disabledClass)},initEvents:function(){var A=this.el;A.addClassOnOver("x-slider-thumb-over");this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeDragStart.createDelegate(this),onStart:this.onDragStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onDragEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(A)},onBeforeDragStart:function(A){if(this.disabled){return false}else{this.slider.promoteThumb(this);return true}},onDragStart:function(A){this.el.addClass("x-slider-thumb-drag");this.dragging=true;this.dragStartValue=this.value;this.slider.fireEvent("dragstart",this.slider,A,this)},onDrag:function(A){var D=this.slider,C=this.index,F=this.getNewValue();if(this.constrain){var B=D.thumbs[C+1],E=D.thumbs[C-1];if(E!=undefined&&F<=E.value){F=E.value}if(B!=undefined&&F>=B.value){F=B.value}}D.setValue(C,F,false);D.fireEvent("drag",D,A,this)},getNewValue:function(){var B=this.slider,A=B.innerEl.translatePoints(this.tracker.getXY());return Ext.util.Format.round(B.reverseValue(A.left),B.decimalPrecision)},onDragEnd:function(A){var C=this.slider,B=this.value;this.el.removeClass("x-slider-thumb-drag");this.dragging=false;C.fireEvent("dragend",C,A);if(this.dragStartValue!=B){C.fireEvent("changecomplete",C,B,this)}},destroy:function(){Ext.destroyMembers(this,"tracker","el")}});Ext.slider.MultiSlider=Ext.extend(Ext.BoxComponent,{vertical:false,minValue:0,maxValue:100,decimalPrecision:0,keyIncrement:1,increment:0,clickRange:[5,15],clickToChange:true,animate:true,constrainThumbs:true,topThumbZIndex:10000,initComponent:function(){if(!Ext.isDefined(this.value)){this.value=this.minValue}this.thumbs=[];Ext.slider.MultiSlider.superclass.initComponent.call(this);this.keyIncrement=Math.max(this.increment,this.keyIncrement);this.addEvents("beforechange","change","changecomplete","dragstart","drag","dragend");if(this.values==undefined||Ext.isEmpty(this.values)){this.values=[0]}var B=this.values;for(var A=0;A<B.length;A++){this.addThumb(B[A])}if(this.vertical){Ext.apply(this,Ext.slider.Vertical)}},addThumb:function(B){var A=new Ext.slider.Thumb({value:B,slider:this,index:this.thumbs.length,constrain:this.constrainThumbs});this.thumbs.push(A);if(this.rendered){A.render()}},promoteThumb:function(D){var E=this.thumbs,B,C;for(var A=0,F=E.length;A<F;A++){C=E[A];if(C==D){B=this.topThumbZIndex}else{B=""}C.el.setStyle("zIndex",B)}},onRender:function(){this.autoEl={cls:"x-slider "+(this.vertical?"x-slider-vert":"x-slider-horz"),cn:{cls:"x-slider-end",cn:{cls:"x-slider-inner",cn:[{tag:"a",cls:"x-slider-focus",href:"#",tabIndex:"-1",hidefocus:"on"}]}}};Ext.slider.MultiSlider.superclass.onRender.apply(this,arguments);this.endEl=this.el.first();this.innerEl=this.endEl.first();this.focusEl=this.innerEl.child(".x-slider-focus");for(var A=0;A<this.thumbs.length;A++){this.thumbs[A].render()}var B=this.innerEl.child(".x-slider-thumb");this.halfThumb=(this.vertical?B.getHeight():B.getWidth())/2;this.initEvents()},initEvents:function(){this.mon(this.el,{scope:this,mousedown:this.onMouseDown,keydown:this.onKeyDown});this.focusEl.swallowEvent("click",true)},onMouseDown:function(B){if(this.disabled){return}var C=false;for(var A=0;A<this.thumbs.length;A++){C=C||B.target==this.thumbs[A].el.dom}if(this.clickToChange&&!C){var D=this.innerEl.translatePoints(B.getXY());this.onClickChange(D)}this.focus()},onClickChange:function(C){if(C.top>this.clickRange[0]&&C.top<this.clickRange[1]){var A=this.getNearest(C,"left"),B=A.index;this.setValue(B,Ext.util.Format.round(this.reverseValue(C.left),this.decimalPrecision),undefined,true)}},getNearest:function(J,E){var A=E=="top"?this.innerEl.getHeight()-J[E]:J[E],D=this.reverseValue(A),H=(this.maxValue-this.minValue)+5,B=0,C=null;for(var G=0;G<this.thumbs.length;G++){var K=this.thumbs[G],F=K.value,I=Math.abs(F-D);if(Math.abs(I<=H)){C=K;B=G;H=I}}return C},onKeyDown:function(A){if(this.disabled||this.thumbs.length!==1){A.preventDefault();return}var C=A.getKey(),B;switch(C){case A.UP:case A.RIGHT:A.stopEvent();B=A.ctrlKey?this.maxValue:this.getValue(0)+this.keyIncrement;this.setValue(0,B,undefined,true);break;case A.DOWN:case A.LEFT:A.stopEvent();B=A.ctrlKey?this.minValue:this.getValue(0)-this.keyIncrement;this.setValue(0,B,undefined,true);break;default:A.preventDefault()}},doSnap:function(B){if(!(this.increment&&B)){return B}var D=B,C=this.increment,A=B%C;if(A!=0){D-=A;if(A*2>=C){D+=C}else{if(A*2<-C){D-=C}}}return D.constrain(this.minValue,this.maxValue)},afterRender:function(){Ext.slider.MultiSlider.superclass.afterRender.apply(this,arguments);for(var A=0;A<this.thumbs.length;A++){var B=this.thumbs[A];if(B.value!==undefined){var C=this.normalizeValue(B.value);if(C!==B.value){this.setValue(A,C,false)}else{this.moveThumb(A,this.translateValue(C),false)}}}},getRatio:function(){var B=this.innerEl.getWidth(),A=this.maxValue-this.minValue;return A==0?B:(B/A)},normalizeValue:function(A){A=this.doSnap(A);A=Ext.util.Format.round(A,this.decimalPrecision);A=A.constrain(this.minValue,this.maxValue);return A},setMinValue:function(D){this.minValue=D;var A=0,C=this.thumbs,B=C.length,E;for(;A<B;++A){E=C[A];E.value=E.value<D?D:E.value}this.syncThumb()},setMaxValue:function(D){this.maxValue=D;var A=0,C=this.thumbs,B=C.length,E;for(;A<B;++A){E=C[A];E.value=E.value>D?D:E.value}this.syncThumb()},setValue:function(F,E,C,B){var D=this.thumbs[F],A=D.el;E=this.normalizeValue(E);if(E!==D.value&&this.fireEvent("beforechange",this,E,D.value,D)!==false){D.value=E;if(this.rendered){this.moveThumb(F,this.translateValue(E),C!==false);this.fireEvent("change",this,E,D);if(B){this.fireEvent("changecomplete",this,E,D)}}}},translateValue:function(B){var A=this.getRatio();return(B*A)-(this.minValue*A)-this.halfThumb},reverseValue:function(B){var A=this.getRatio();return(B+(this.minValue*A))/A},moveThumb:function(D,C,A){var B=this.thumbs[D].el;if(!A||this.animate===false){B.setLeft(C)}else{B.shift({left:C,stopFx:true,duration:0.35})}},focus:function(){this.focusEl.focus(10)},onResize:function(C,A){var D=this.thumbs,E=D.length,B=0;for(;B<E;++B){D[B].el.stopFx()}if(Ext.isNumber(C)){this.innerEl.setWidth(C-(this.el.getPadding("l")+this.endEl.getPadding("r")))}this.syncThumb();Ext.slider.MultiSlider.superclass.onResize.apply(this,arguments)},onDisable:function(){Ext.slider.MultiSlider.superclass.onDisable.call(this);for(var B=0;B<this.thumbs.length;B++){var C=this.thumbs[B],A=C.el;C.disable();if(Ext.isIE){var D=A.getXY();A.hide();this.innerEl.addClass(this.disabledClass).dom.disabled=true;if(!this.thumbHolder){this.thumbHolder=this.endEl.createChild({cls:"x-slider-thumb "+this.disabledClass})}this.thumbHolder.show().setXY(D)}}},onEnable:function(){Ext.slider.MultiSlider.superclass.onEnable.call(this);for(var B=0;B<this.thumbs.length;B++){var C=this.thumbs[B],A=C.el;C.enable();if(Ext.isIE){this.innerEl.removeClass(this.disabledClass).dom.disabled=false;if(this.thumbHolder){this.thumbHolder.hide()}A.show();this.syncThumb()}}},syncThumb:function(){if(this.rendered){for(var A=0;A<this.thumbs.length;A++){this.moveThumb(A,this.translateValue(this.thumbs[A].value))}}},getValue:function(A){return this.thumbs[A].value},getValues:function(){var B=[];for(var A=0;A<this.thumbs.length;A++){B.push(this.thumbs[A].value)}return B},beforeDestroy:function(){var C=this.thumbs;for(var A=0,B=C.length;A<B;++A){C[A].destroy();C[A]=null}Ext.destroyMembers(this,"endEl","innerEl","focusEl","thumbHolder");Ext.slider.MultiSlider.superclass.beforeDestroy.call(this)}});Ext.reg("multislider",Ext.slider.MultiSlider);Ext.slider.SingleSlider=Ext.extend(Ext.slider.MultiSlider,{constructor:function(A){A=A||{};Ext.applyIf(A,{values:[A.value||0]});Ext.slider.SingleSlider.superclass.constructor.call(this,A)},getValue:function(){return Ext.slider.SingleSlider.superclass.getValue.call(this,0)},setValue:function(C,A){var D=Ext.toArray(arguments),B=D.length;if(B==1||(B<=3&&typeof arguments[1]!="number")){D.unshift(0)}return Ext.slider.SingleSlider.superclass.setValue.apply(this,D)},syncThumb:function(){return Ext.slider.SingleSlider.superclass.syncThumb.apply(this,[0].concat(arguments))},getNearest:function(){return this.thumbs[0]}});Ext.Slider=Ext.slider.SingleSlider;Ext.reg("slider",Ext.slider.SingleSlider);Ext.slider.Vertical={onResize:function(B,A){this.innerEl.setHeight(A-(this.el.getPadding("t")+this.endEl.getPadding("b")));this.syncThumb()},getRatio:function(){var A=this.innerEl.getHeight(),B=this.maxValue-this.minValue;return A/B},moveThumb:function(E,D,B){var C=this.thumbs[E],A=C.el;if(!B||this.animate===false){A.setBottom(D)}else{A.shift({bottom:D,stopFx:true,duration:0.35})}},onClickChange:function(D){if(D.left>this.clickRange[0]&&D.left<this.clickRange[1]){var B=this.getNearest(D,"top"),C=B.index,A=this.minValue+this.reverseValue(this.innerEl.getHeight()-D.top);this.setValue(C,Ext.util.Format.round(A,this.decimalPrecision),undefined,true)}}};Ext.slider.Thumb.Vertical={getNewValue:function(){var C=this.slider,D=C.innerEl,B=D.translatePoints(this.tracker.getXY()),A=D.getHeight()-B.top;return C.minValue+Ext.util.Format.round(A/C.getRatio(),C.decimalPrecision)}};Ext.ProgressBar=Ext.extend(Ext.BoxComponent,{baseCls:"x-progress",animate:false,waitTimer:null,initComponent:function(){Ext.ProgressBar.superclass.initComponent.call(this);this.addEvents("update")},onRender:function(D,C){var B=new Ext.Template('<div class="{cls}-wrap">','<div class="{cls}-inner">','<div class="{cls}-bar">','<div class="{cls}-text">',"<div>&#160;</div>","</div>","</div>",'<div class="{cls}-text {cls}-text-back">',"<div>&#160;</div>","</div>","</div>","</div>");this.el=C?B.insertBefore(C,{cls:this.baseCls},true):B.append(D,{cls:this.baseCls},true);if(this.id){this.el.dom.id=this.id}var E=this.el.dom.firstChild;this.progressBar=Ext.get(E.firstChild);if(this.textEl){this.textEl=Ext.get(this.textEl);delete this.textTopEl}else{this.textTopEl=Ext.get(this.progressBar.dom.firstChild);var A=Ext.get(E.childNodes[1]);this.textTopEl.setStyle("z-index",99).addClass("x-hidden");this.textEl=new Ext.CompositeElement([this.textTopEl.dom.firstChild,A.dom.firstChild]);this.textEl.setWidth(E.offsetWidth)}this.progressBar.setHeight(E.offsetHeight)},afterRender:function(){Ext.ProgressBar.superclass.afterRender.call(this);if(this.value){this.updateProgress(this.value,this.text)}else{this.updateText(this.text)}},updateProgress:function(D,B,A){this.value=D||0;if(B){this.updateText(B)}if(this.rendered&&!this.isDestroyed){var C=Math.floor(D*this.el.dom.firstChild.offsetWidth);this.progressBar.setWidth(C,A===true||(A!==false&&this.animate));if(this.textTopEl){this.textTopEl.removeClass("x-hidden").setWidth(C)}}this.fireEvent("update",this,D,B);return this},wait:function(A){if(!this.waitTimer){var B=this;A=A||{};this.updateText(A.text);this.waitTimer=Ext.TaskMgr.start({run:function(C){var D=A.increment||10;C-=1;this.updateProgress(((((C+D)%D)+1)*(100/D))*0.01,null,A.animate)},interval:A.interval||1000,duration:A.duration,onStop:function(){if(A.fn){A.fn.apply(A.scope||this)}this.reset()},scope:B})}return this},isWaiting:function(){return this.waitTimer!==null},updateText:function(A){this.text=A||"&#160;";if(this.rendered){this.textEl.update(this.text)}return this},syncProgressBar:function(){if(this.value){this.updateProgress(this.value,this.text)}return this},setSize:function(B,A){Ext.ProgressBar.superclass.setSize.call(this,B,A);if(this.textTopEl){var C=this.el.dom.firstChild;this.textEl.setSize(C.offsetWidth,C.offsetHeight)}this.syncProgressBar();return this},reset:function(A){this.updateProgress(0);if(this.textTopEl){this.textTopEl.addClass("x-hidden")}this.clearTimer();if(A===true){this.hide()}return this},clearTimer:function(){if(this.waitTimer){this.waitTimer.onStop=null;Ext.TaskMgr.stop(this.waitTimer);this.waitTimer=null}},onDestroy:function(){this.clearTimer();if(this.rendered){if(this.textEl.isComposite){this.textEl.clear()}Ext.destroyMembers(this,"textEl","progressBar","textTopEl")}Ext.ProgressBar.superclass.onDestroy.call(this)}});Ext.reg("progress",Ext.ProgressBar);(function(){var B=Ext.EventManager;var A=Ext.lib.Dom;Ext.dd.DragDrop=function(E,D,C){if(E){this.init(E,D,C)}};Ext.dd.DragDrop.prototype={id:null,config:null,dragElId:null,handleElId:null,invalidHandleTypes:null,invalidHandleIds:null,invalidHandleClasses:null,startPageX:0,startPageY:0,groups:null,locked:false,lock:function(){this.locked=true},moveOnly:false,unlock:function(){this.locked=false},isTarget:true,padding:null,_domRef:null,__ygDragDrop:true,constrainX:false,constrainY:false,minX:0,maxX:0,minY:0,maxY:0,maintainOffset:false,xTicks:null,yTicks:null,primaryButtonOnly:true,available:false,hasOuterHandles:false,b4StartDrag:function(C,D){},startDrag:function(C,D){},b4Drag:function(C){},onDrag:function(C){},onDragEnter:function(C,D){},b4DragOver:function(C){},onDragOver:function(C,D){},b4DragOut:function(C){},onDragOut:function(C,D){},b4DragDrop:function(C){},onDragDrop:function(C,D){},onInvalidDrop:function(C){},b4EndDrag:function(C){},endDrag:function(C){},b4MouseDown:function(C){},onMouseDown:function(C){},onMouseUp:function(C){},onAvailable:function(){},defaultPadding:{left:0,right:0,top:0,bottom:0},constrainTo:function(F,L,G){if(Ext.isNumber(L)){L={left:L,right:L,top:L,bottom:L}}L=L||this.defaultPadding;var H=Ext.get(this.getEl()).getBox(),J=Ext.get(F),C=J.getScroll(),I,M=J.dom;if(M==document.body){I={x:C.left,y:C.top,width:Ext.lib.Dom.getViewWidth(),height:Ext.lib.Dom.getViewHeight()}}else{var E=J.getXY();I={x:E[0],y:E[1],width:M.clientWidth,height:M.clientHeight}}var D=H.y-I.y,K=H.x-I.x;this.resetConstraints();this.setXConstraint(K-(L.left||0),I.width-K-H.width-(L.right||0),this.xTickSize);this.setYConstraint(D-(L.top||0),I.height-D-H.height-(L.bottom||0),this.yTickSize)},getEl:function(){if(!this._domRef){this._domRef=Ext.getDom(this.id)}return this._domRef},getDragEl:function(){return Ext.getDom(this.dragElId)},init:function(E,D,C){this.initTarget(E,D,C);B.on(this.id,"mousedown",this.handleMouseDown,this)},initTarget:function(E,D,C){this.config=C||{};this.DDM=Ext.dd.DDM;this.groups={};if(typeof E!=="string"){E=Ext.id(E)}this.id=E;this.addToGroup((D)?D:"default");this.handleElId=E;this.setDragElId(E);this.invalidHandleTypes={A:"A"};this.invalidHandleIds={};this.invalidHandleClasses=[];this.applyConfig();this.handleOnAvailable()},applyConfig:function(){this.padding=this.config.padding||[0,0,0,0];this.isTarget=(this.config.isTarget!==false);this.maintainOffset=(this.config.maintainOffset);this.primaryButtonOnly=(this.config.primaryButtonOnly!==false)},handleOnAvailable:function(){this.available=true;this.resetConstraints();this.onAvailable()},setPadding:function(F,E,D,C){if(!E&&0!==E){this.padding=[F,F,F,F]}else{if(!D&&0!==D){this.padding=[F,E,F,E]}else{this.padding=[F,E,D,C]}}},setInitPosition:function(E,F){var C=this.getEl();if(!this.DDM.verifyEl(C)){return}var D=E||0;var H=F||0;var G=A.getXY(C);this.initPageX=G[0]-D;this.initPageY=G[1]-H;this.lastPageX=G[0];this.lastPageY=G[1];this.setStartPosition(G)},setStartPosition:function(D){var C=D||A.getXY(this.getEl());this.deltaSetXY=null;this.startPageX=C[0];this.startPageY=C[1]},addToGroup:function(C){this.groups[C]=true;this.DDM.regDragDrop(this,C)},removeFromGroup:function(C){if(this.groups[C]){delete this.groups[C]}this.DDM.removeDDFromGroup(this,C)},setDragElId:function(C){this.dragElId=C},setHandleElId:function(C){if(typeof C!=="string"){C=Ext.id(C)}this.handleElId=C;this.DDM.regHandle(this.id,C)},setOuterHandleElId:function(C){if(typeof C!=="string"){C=Ext.id(C)}B.on(C,"mousedown",this.handleMouseDown,this);this.setHandleElId(C);this.hasOuterHandles=true},unreg:function(){B.un(this.id,"mousedown",this.handleMouseDown);this._domRef=null;this.DDM._remove(this)},destroy:function(){this.unreg()},isLocked:function(){return(this.DDM.isLocked()||this.locked)},handleMouseDown:function(C,E){if(this.primaryButtonOnly&&C.button!=0){return}if(this.isLocked()){return}this.DDM.refreshCache(this.groups);var D=new Ext.lib.Point(Ext.lib.Event.getPageX(C),Ext.lib.Event.getPageY(C));if(!this.hasOuterHandles&&!this.DDM.isOverTarget(D,this)){}else{if(this.clickValidator(C)){this.setStartPosition();this.b4MouseDown(C);this.onMouseDown(C);this.DDM.handleMouseDown(C,this);this.DDM.stopEvent(C)}else{}}},clickValidator:function(C){var D=C.getTarget();return(this.isValidHandleChild(D)&&(this.id==this.handleElId||this.DDM.handleWasClicked(D,this.id)))},addInvalidHandleType:function(C){var D=C.toUpperCase();this.invalidHandleTypes[D]=D},addInvalidHandleId:function(C){if(typeof C!=="string"){C=Ext.id(C)}this.invalidHandleIds[C]=C},addInvalidHandleClass:function(C){this.invalidHandleClasses.push(C)},removeInvalidHandleType:function(C){var D=C.toUpperCase();delete this.invalidHandleTypes[D]},removeInvalidHandleId:function(C){if(typeof C!=="string"){C=Ext.id(C)}delete this.invalidHandleIds[C]},removeInvalidHandleClass:function(D){for(var C=0,E=this.invalidHandleClasses.length;C<E;++C){if(this.invalidHandleClasses[C]==D){delete this.invalidHandleClasses[C]}}},isValidHandleChild:function(E){var F=true;var H;try{H=E.nodeName.toUpperCase()}catch(D){H=E.nodeName}F=F&&!this.invalidHandleTypes[H];F=F&&!this.invalidHandleIds[E.id];for(var C=0,G=this.invalidHandleClasses.length;F&&C<G;++C){F=!Ext.fly(E).hasClass(this.invalidHandleClasses[C])}return F},setXTicks:function(F,D){this.xTicks=[];this.xTickSize=D;var E={};for(var C=this.initPageX;C>=this.minX;C=C-D){if(!E[C]){this.xTicks[this.xTicks.length]=C;E[C]=true}}for(C=this.initPageX;C<=this.maxX;C=C+D){if(!E[C]){this.xTicks[this.xTicks.length]=C;E[C]=true}}this.xTicks.sort(this.DDM.numericSort)},setYTicks:function(F,D){this.yTicks=[];this.yTickSize=D;var E={};for(var C=this.initPageY;C>=this.minY;C=C-D){if(!E[C]){this.yTicks[this.yTicks.length]=C;E[C]=true}}for(C=this.initPageY;C<=this.maxY;C=C+D){if(!E[C]){this.yTicks[this.yTicks.length]=C;E[C]=true}}this.yTicks.sort(this.DDM.numericSort)},setXConstraint:function(C,D,E){this.leftConstraint=C;this.rightConstraint=D;this.minX=this.initPageX-C;this.maxX=this.initPageX+D;if(E){this.setXTicks(this.initPageX,E)}this.constrainX=true},clearConstraints:function(){this.constrainX=false;this.constrainY=false;this.clearTicks()},clearTicks:function(){this.xTicks=null;this.yTicks=null;this.xTickSize=0;this.yTickSize=0},setYConstraint:function(C,E,D){this.topConstraint=C;this.bottomConstraint=E;this.minY=this.initPageY-C;this.maxY=this.initPageY+E;if(D){this.setYTicks(this.initPageY,D)}this.constrainY=true},resetConstraints:function(){if(this.initPageX||this.initPageX===0){var C=(this.maintainOffset)?this.lastPageX-this.initPageX:0;var D=(this.maintainOffset)?this.lastPageY-this.initPageY:0;this.setInitPosition(C,D)}else{this.setInitPosition()}if(this.constrainX){this.setXConstraint(this.leftConstraint,this.rightConstraint,this.xTickSize)}if(this.constrainY){this.setYConstraint(this.topConstraint,this.bottomConstraint,this.yTickSize)}},getTick:function(I,G){if(!G){return I}else{if(G[0]>=I){return G[0]}else{for(var C=0,H=G.length;C<H;++C){var F=C+1;if(G[F]&&G[F]>=I){var D=I-G[C];var E=G[F]-I;return(E>D)?G[C]:G[F]}}return G[G.length-1]}}},toString:function(){return("DragDrop "+this.id)}}})();if(!Ext.dd.DragDropMgr){Ext.dd.DragDropMgr=function(){var A=Ext.EventManager;return{ids:{},handleIds:{},dragCurrent:null,dragOvers:{},deltaX:0,deltaY:0,preventDefault:true,stopPropagation:true,initialized:false,locked:false,init:function(){this.initialized=true},POINT:0,INTERSECT:1,mode:0,_execOnAll:function(C,F){for(var B in this.ids){for(var E in this.ids[B]){var D=this.ids[B][E];if(!this.isTypeOfDD(D)){continue}D[C].apply(D,F)}}},_onLoad:function(){this.init();A.on(document,"mouseup",this.handleMouseUp,this,true);A.on(document,"mousemove",this.handleMouseMove,this,true);A.on(window,"unload",this._onUnload,this,true);A.on(window,"resize",this._onResize,this,true)},_onResize:function(B){this._execOnAll("resetConstraints",[])},lock:function(){this.locked=true},unlock:function(){this.locked=false},isLocked:function(){return this.locked},locationCache:{},useCache:true,clickPixelThresh:3,clickTimeThresh:350,dragThreshMet:false,clickTimeout:null,startX:0,startY:0,regDragDrop:function(C,B){if(!this.initialized){this.init()}if(!this.ids[B]){this.ids[B]={}}this.ids[B][C.id]=C},removeDDFromGroup:function(D,C){if(!this.ids[C]){this.ids[C]={}}var B=this.ids[C];if(B&&B[D.id]){delete B[D.id]}},_remove:function(C){for(var B in C.groups){if(B&&this.ids[B]&&this.ids[B][C.id]){delete this.ids[B][C.id]}}delete this.handleIds[C.id]},regHandle:function(B,C){if(!this.handleIds[B]){this.handleIds[B]={}}this.handleIds[B][C]=C},isDragDrop:function(B){return(this.getDDById(B))?true:false},getRelated:function(E,D){var C=[];for(var B in E.groups){for(var F in this.ids[B]){var G=this.ids[B][F];if(!this.isTypeOfDD(G)){continue}if(!D||G.isTarget){C[C.length]=G}}}return C},isLegalTarget:function(E,F){var C=this.getRelated(E,true);for(var B=0,D=C.length;B<D;++B){if(C[B].id==F.id){return true}}return false},isTypeOfDD:function(B){return(B&&B.__ygDragDrop)},isHandle:function(B,C){return(this.handleIds[B]&&this.handleIds[B][C])},getDDById:function(C){for(var B in this.ids){if(this.ids[B][C]){return this.ids[B][C]}}return null},handleMouseDown:function(C,D){if(Ext.QuickTips){Ext.QuickTips.ddDisable()}if(this.dragCurrent){this.handleMouseUp(C)}this.currentTarget=C.getTarget();this.dragCurrent=D;var B=D.getEl();this.startX=C.getPageX();this.startY=C.getPageY();this.deltaX=this.startX-B.offsetLeft;this.deltaY=this.startY-B.offsetTop;this.dragThreshMet=false;this.clickTimeout=setTimeout(function(){var E=Ext.dd.DDM;E.startDrag(E.startX,E.startY)},this.clickTimeThresh)},startDrag:function(B,C){clearTimeout(this.clickTimeout);if(this.dragCurrent){this.dragCurrent.b4StartDrag(B,C);this.dragCurrent.startDrag(B,C)}this.dragThreshMet=true},handleMouseUp:function(B){if(Ext.QuickTips){Ext.QuickTips.ddEnable()}if(!this.dragCurrent){return}clearTimeout(this.clickTimeout);if(this.dragThreshMet){this.fireEvents(B,true)}else{}this.stopDrag(B);this.stopEvent(B)},stopEvent:function(B){if(this.stopPropagation){B.stopPropagation()}if(this.preventDefault){B.preventDefault()}},stopDrag:function(B){if(this.dragCurrent){if(this.dragThreshMet){this.dragCurrent.b4EndDrag(B);this.dragCurrent.endDrag(B)}this.dragCurrent.onMouseUp(B)}this.dragCurrent=null;this.dragOvers={}},handleMouseMove:function(B){if(!this.dragCurrent){return true}if(Ext.isIE&&(B.button!==0&&B.button!==1&&B.button!==2)){this.stopEvent(B);return this.handleMouseUp(B)}if(!this.dragThreshMet){var C=Math.abs(this.startX-B.getPageX());var D=Math.abs(this.startY-B.getPageY());if(C>this.clickPixelThresh||D>this.clickPixelThresh){this.startDrag(this.startX,this.startY)}}if(this.dragThreshMet){this.dragCurrent.b4Drag(B);this.dragCurrent.onDrag(B);if(!this.dragCurrent.moveOnly){this.fireEvents(B,false)}}this.stopEvent(B);return true},fireEvents:function(B,J){var F=this.dragCurrent;if(!F||F.isLocked()){return}var C=B.getPoint();var D=[];var G=[];var K=[];var N=[];var I=[];for(var M in this.dragOvers){var L=this.dragOvers[M];if(!this.isTypeOfDD(L)){continue}if(!this.isOverTarget(C,L,this.mode)){G.push(L)}D[M]=true;delete this.dragOvers[M]}for(var O in F.groups){if("string"!=typeof O){continue}for(M in this.ids[O]){var E=this.ids[O][M];if(!this.isTypeOfDD(E)){continue}if(E.isTarget&&!E.isLocked()&&((E!=F)||(F.ignoreSelf===false))){if(this.isOverTarget(C,E,this.mode)){if(J){N.push(E)}else{if(!D[E.id]){I.push(E)}else{K.push(E)}this.dragOvers[E.id]=E}}}}}if(this.mode){if(G.length){F.b4DragOut(B,G);F.onDragOut(B,G)}if(I.length){F.onDragEnter(B,I)}if(K.length){F.b4DragOver(B,K);F.onDragOver(B,K)}if(N.length){F.b4DragDrop(B,N);F.onDragDrop(B,N)}}else{var H=0;for(M=0,H=G.length;M<H;++M){F.b4DragOut(B,G[M].id);F.onDragOut(B,G[M].id)}for(M=0,H=I.length;M<H;++M){F.onDragEnter(B,I[M].id)}for(M=0,H=K.length;M<H;++M){F.b4DragOver(B,K[M].id);F.onDragOver(B,K[M].id)}for(M=0,H=N.length;M<H;++M){F.b4DragDrop(B,N[M].id);F.onDragDrop(B,N[M].id)}}if(J&&!N.length){F.onInvalidDrop(B)}},getBestMatch:function(D){var E=null;var C=D.length;if(C==1){E=D[0]}else{for(var B=0;B<C;++B){var F=D[B];if(F.cursorIsOver){E=F;break}else{if(!E||E.overlap.getArea()<F.overlap.getArea()){E=F}}}}return E},refreshCache:function(C){for(var D in C){if("string"!=typeof D){continue}for(var B in this.ids[D]){var E=this.ids[D][B];if(this.isTypeOfDD(E)){var F=this.getLocation(E);if(F){this.locationCache[E.id]=F}else{delete this.locationCache[E.id]}}}}},verifyEl:function(B){if(B){var D;if(Ext.isIE){try{D=B.offsetParent}catch(C){}}else{D=B.offsetParent}if(D){return true}}return false},getLocation:function(C){if(!this.isTypeOfDD(C)){return null}var I=C.getEl(),K,D,G,E,H,F,B,L,M,N;try{K=Ext.lib.Dom.getXY(I)}catch(J){}if(!K){return null}D=K[0];G=D+I.offsetWidth;E=K[1];H=E+I.offsetHeight;F=E-C.padding[0];B=G+C.padding[1];L=H+C.padding[2];M=D-C.padding[3];N=new Ext.lib.Region(F,B,L,M);I=Ext.get(I.parentNode);while(I&&N){if(I.isScrollable()){N=N.intersect(I.getRegion())}I=I.parent()}return N},isOverTarget:function(B,F,G){var C=this.locationCache[F.id];if(!C||!this.useCache){C=this.getLocation(F);this.locationCache[F.id]=C}if(!C){return false}F.cursorIsOver=C.contains(B);var D=this.dragCurrent;if(!D||!D.getTargetCoord||(!G&&!D.constrainX&&!D.constrainY)){return F.cursorIsOver}F.overlap=null;var H=D.getTargetCoord(B.x,B.y);var I=D.getDragEl();var E=new Ext.lib.Region(H.y,H.x+I.offsetWidth,H.y+I.offsetHeight,H.x);var J=E.intersect(C);if(J){F.overlap=J;return(G)?true:F.cursorIsOver}else{return false}},_onUnload:function(B,C){A.removeListener(document,"mouseup",this.handleMouseUp,this);A.removeListener(document,"mousemove",this.handleMouseMove,this);A.removeListener(window,"resize",this._onResize,this);Ext.dd.DragDropMgr.unregAll()},unregAll:function(){if(this.dragCurrent){this.stopDrag();this.dragCurrent=null}this._execOnAll("unreg",[]);for(var B in this.elementCache){delete this.elementCache[B]}this.elementCache={};this.ids={}},elementCache:{},getElWrapper:function(C){var B=this.elementCache[C];if(!B||!B.el){B=this.elementCache[C]=new this.ElementWrapper(Ext.getDom(C))}return B},getElement:function(B){return Ext.getDom(B)},getCss:function(C){var B=Ext.getDom(C);return(B)?B.style:null},ElementWrapper:function(B){this.el=B||null;this.id=this.el&&B.id;this.css=this.el&&B.style},getPosX:function(B){return Ext.lib.Dom.getX(B)},getPosY:function(B){return Ext.lib.Dom.getY(B)},swapNode:function(D,E){if(D.swapNode){D.swapNode(E)}else{var C=E.parentNode;var B=E.nextSibling;if(B==D){C.insertBefore(D,E)}else{if(E==D.nextSibling){C.insertBefore(E,D)}else{D.parentNode.replaceChild(E,D);C.insertBefore(D,B)}}}},getScroll:function(){var D,B,E=document.documentElement,C=document.body;if(E&&(E.scrollTop||E.scrollLeft)){D=E.scrollTop;B=E.scrollLeft}else{if(C){D=C.scrollTop;B=C.scrollLeft}else{}}return{top:D,left:B}},getStyle:function(B,C){return Ext.fly(B).getStyle(C)},getScrollTop:function(){return this.getScroll().top},getScrollLeft:function(){return this.getScroll().left},moveToEl:function(B,D){var C=Ext.lib.Dom.getXY(D);Ext.lib.Dom.setXY(B,C)},numericSort:function(C,B){return(C-B)},_timeoutCount:0,_addListeners:function(){var B=Ext.dd.DDM;if(Ext.lib.Event&&document){B._onLoad()}else{if(B._timeoutCount>2000){}else{setTimeout(B._addListeners,10);if(document&&document.body){B._timeoutCount+=1}}}},handleWasClicked:function(C,D){if(this.isHandle(D,C.id)){return true}else{var B=C.parentNode;while(B){if(this.isHandle(D,B.id)){return true}else{B=B.parentNode}}}return false}}}();Ext.dd.DDM=Ext.dd.DragDropMgr;Ext.dd.DDM._addListeners()}Ext.dd.DD=function(C,B,A){if(C){this.init(C,B,A)}};Ext.extend(Ext.dd.DD,Ext.dd.DragDrop,{scroll:true,autoOffset:function(B,A){var C=B-this.startPageX;var D=A-this.startPageY;this.setDelta(C,D)},setDelta:function(A,B){this.deltaX=A;this.deltaY=B},setDragElPos:function(B,A){var C=this.getDragEl();this.alignElWithMouse(C,B,A)},alignElWithMouse:function(E,B,C){var D=this.getTargetCoord(B,C);var A=E.dom?E:Ext.fly(E,"_dd");if(!this.deltaSetXY){var G=[D.x,D.y];A.setXY(G);var F=A.getLeft(true);var H=A.getTop(true);this.deltaSetXY=[F-D.x,H-D.y]}else{A.setLeftTop(D.x+this.deltaSetXY[0],D.y+this.deltaSetXY[1])}this.cachePosition(D.x,D.y);this.autoScroll(D.x,D.y,E.offsetHeight,E.offsetWidth);return D},cachePosition:function(B,A){if(B){this.lastPageX=B;this.lastPageY=A}else{var C=Ext.lib.Dom.getXY(this.getEl());this.lastPageX=C[0];this.lastPageY=C[1]}},autoScroll:function(L,M,G,D){if(this.scroll){var B=Ext.lib.Dom.getViewHeight();var I=Ext.lib.Dom.getViewWidth();var A=this.DDM.getScrollTop();var H=this.DDM.getScrollLeft();var N=G+M;var C=D+L;var E=(B+A-M-this.deltaY);var J=(I+H-L-this.deltaX);var K=40;var F=(document.all)?80:30;if(N>B&&E<K){window.scrollTo(H,A+F)}if(M<A&&A>0&&M-A<K){window.scrollTo(H,A-F)}if(C>I&&J<K){window.scrollTo(H+F,A)}if(L<H&&H>0&&L-H<K){window.scrollTo(H-F,A)}}},getTargetCoord:function(B,A){var C=B-this.deltaX;var D=A-this.deltaY;if(this.constrainX){if(C<this.minX){C=this.minX}if(C>this.maxX){C=this.maxX}}if(this.constrainY){if(D<this.minY){D=this.minY}if(D>this.maxY){D=this.maxY}}C=this.getTick(C,this.xTicks);D=this.getTick(D,this.yTicks);return{x:C,y:D}},applyConfig:function(){Ext.dd.DD.superclass.applyConfig.call(this);this.scroll=(this.config.scroll!==false)},b4MouseDown:function(A){this.autoOffset(A.getPageX(),A.getPageY())},b4Drag:function(A){this.setDragElPos(A.getPageX(),A.getPageY())},toString:function(){return("DD "+this.id)}});Ext.dd.DDProxy=function(C,B,A){if(C){this.init(C,B,A);this.initFrame()}};Ext.dd.DDProxy.dragElId="ygddfdiv";Ext.extend(Ext.dd.DDProxy,Ext.dd.DD,{resizeFrame:true,centerFrame:false,createFrame:function(){var A=this;var C=document.body;if(!C||!C.firstChild){setTimeout(function(){A.createFrame()},50);return}var D=this.getDragEl();if(!D){D=document.createElement("div");D.id=this.dragElId;var B=D.style;B.position="absolute";B.visibility="hidden";B.cursor="move";B.border="2px solid #aaa";B.zIndex=999;C.insertBefore(D,C.firstChild)}},initFrame:function(){this.createFrame()},applyConfig:function(){Ext.dd.DDProxy.superclass.applyConfig.call(this);this.resizeFrame=(this.config.resizeFrame!==false);this.centerFrame=(this.config.centerFrame);this.setDragElId(this.config.dragElId||Ext.dd.DDProxy.dragElId)},showFrame:function(B,A){var C=this.getEl();var E=this.getDragEl();var D=E.style;this._resizeProxy();if(this.centerFrame){this.setDelta(Math.round(parseInt(D.width,10)/2),Math.round(parseInt(D.height,10)/2))}this.setDragElPos(B,A);Ext.fly(E).show()},_resizeProxy:function(){if(this.resizeFrame){var A=this.getEl();Ext.fly(this.getDragEl()).setSize(A.offsetWidth,A.offsetHeight)}},b4MouseDown:function(A){var B=A.getPageX();var C=A.getPageY();this.autoOffset(B,C);this.setDragElPos(B,C)},b4StartDrag:function(A,B){this.showFrame(A,B)},b4EndDrag:function(A){Ext.fly(this.getDragEl()).hide()},endDrag:function(A){var C=this.getEl();var B=this.getDragEl();B.style.visibility="";this.beforeMove();C.style.visibility="hidden";Ext.dd.DDM.moveToEl(C,B);B.style.visibility="hidden";C.style.visibility="";this.afterDrag()},beforeMove:function(){},afterDrag:function(){},toString:function(){return("DDProxy "+this.id)}});Ext.dd.DDTarget=function(C,B,A){if(C){this.initTarget(C,B,A)}};Ext.extend(Ext.dd.DDTarget,Ext.dd.DragDrop,{getDragEl:Ext.emptyFn,isValidHandleChild:Ext.emptyFn,startDrag:Ext.emptyFn,endDrag:Ext.emptyFn,onDrag:Ext.emptyFn,onDragDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragOut:Ext.emptyFn,onDragOver:Ext.emptyFn,onInvalidDrop:Ext.emptyFn,onMouseDown:Ext.emptyFn,onMouseUp:Ext.emptyFn,setXConstraint:Ext.emptyFn,setYConstraint:Ext.emptyFn,resetConstraints:Ext.emptyFn,clearConstraints:Ext.emptyFn,clearTicks:Ext.emptyFn,setInitPosition:Ext.emptyFn,setDragElId:Ext.emptyFn,setHandleElId:Ext.emptyFn,setOuterHandleElId:Ext.emptyFn,addInvalidHandleClass:Ext.emptyFn,addInvalidHandleId:Ext.emptyFn,addInvalidHandleType:Ext.emptyFn,removeInvalidHandleClass:Ext.emptyFn,removeInvalidHandleId:Ext.emptyFn,removeInvalidHandleType:Ext.emptyFn,toString:function(){return("DDTarget "+this.id)}});Ext.dd.DragTracker=Ext.extend(Ext.util.Observable,{active:false,tolerance:5,autoStart:false,constructor:function(A){Ext.apply(this,A);this.addEvents("mousedown","mouseup","mousemove","dragstart","dragend","drag");this.dragRegion=new Ext.lib.Region(0,0,0,0);if(this.el){this.initEl(this.el)}Ext.dd.DragTracker.superclass.constructor.call(this,A)},initEl:function(A){this.el=Ext.get(A);A.on("mousedown",this.onMouseDown,this,this.delegate?{delegate:this.delegate}:undefined)},destroy:function(){this.el.un("mousedown",this.onMouseDown,this);delete this.el},onMouseDown:function(A,B){if(this.fireEvent("mousedown",this,A)!==false&&this.onBeforeStart(A)!==false){this.startXY=this.lastXY=A.getXY();this.dragTarget=this.delegate?B:this.el.dom;if(this.preventDefault!==false){A.preventDefault()}Ext.getDoc().on({scope:this,mouseup:this.onMouseUp,mousemove:this.onMouseMove,selectstart:this.stopSelect});if(this.autoStart){this.timer=this.triggerStart.defer(this.autoStart===true?1000:this.autoStart,this,[A])}}},onMouseMove:function(B,D){if(this.active&&Ext.isIE&&!B.browserEvent.button){B.preventDefault();this.onMouseUp(B);return}B.preventDefault();var A=B.getXY(),C=this.startXY;this.lastXY=A;if(!this.active){if(Math.abs(C[0]-A[0])>this.tolerance||Math.abs(C[1]-A[1])>this.tolerance){this.triggerStart(B)}else{return}}this.fireEvent("mousemove",this,B);this.onDrag(B);this.fireEvent("drag",this,B)},onMouseUp:function(A){var C=Ext.getDoc(),B=this.active;C.un("mousemove",this.onMouseMove,this);C.un("mouseup",this.onMouseUp,this);C.un("selectstart",this.stopSelect,this);A.preventDefault();this.clearStart();this.active=false;delete this.elRegion;this.fireEvent("mouseup",this,A);if(B){this.onEnd(A);this.fireEvent("dragend",this,A)}},triggerStart:function(A){this.clearStart();this.active=true;this.onStart(A);this.fireEvent("dragstart",this,A)},clearStart:function(){if(this.timer){clearTimeout(this.timer);delete this.timer}},stopSelect:function(A){A.stopEvent();return false},onBeforeStart:function(A){},onStart:function(A){},onDrag:function(A){},onEnd:function(A){},getDragTarget:function(){return this.dragTarget},getDragCt:function(){return this.el},getXY:function(A){return A?this.constrainModes[A].call(this,this.lastXY):this.lastXY},getOffset:function(C){var A=this.getXY(C),B=this.startXY;return[B[0]-A[0],B[1]-A[1]]},constrainModes:{"point":function(A){if(!this.elRegion){this.elRegion=this.getDragCt().getRegion()}var B=this.dragRegion;B.left=A[0];B.top=A[1];B.right=A[0];B.bottom=A[1];B.constrainTo(this.elRegion);return[B.left,B.top]}}});Ext.dd.ScrollManager=function(){var H=Ext.dd.DragDropMgr;var D={};var E=null;var F={};var J=function(K){E=null;I()};var C=function(){if(H.dragCurrent){H.refreshCache(H.dragCurrent.groups)}};var B=function(){if(H.dragCurrent){var K=Ext.dd.ScrollManager;var L=F.el.ddScrollConfig?F.el.ddScrollConfig.increment:K.increment;if(!K.animate){if(F.el.scroll(F.dir,L)){C()}}else{F.el.scroll(F.dir,L,true,K.animDuration,C)}}};var I=function(){if(F.id){clearInterval(F.id)}F.id=0;F.el=null;F.dir=""};var G=function(K,N){I();F.el=K;F.dir=N;var L=K.ddScrollConfig?K.ddScrollConfig.ddGroup:undefined,M=(K.ddScrollConfig&&K.ddScrollConfig.frequency)?K.ddScrollConfig.frequency:Ext.dd.ScrollManager.frequency;if(L===undefined||H.dragCurrent.ddGroup==L){F.id=setInterval(B,M)}};var A=function(K,Q){if(Q||!H.dragCurrent){return}var P=Ext.dd.ScrollManager;if(!E||E!=H.dragCurrent){E=H.dragCurrent;P.refreshCache()}var N=Ext.lib.Event.getXY(K);var L=new Ext.lib.Point(N[0],N[1]);for(var R in D){var O=D[R],M=O._region;var S=O.ddScrollConfig?O.ddScrollConfig:P;if(M&&M.contains(L)&&O.isScrollable()){if(M.bottom-L.y<=S.vthresh){if(F.el!=O){G(O,"down")}return}else{if(M.right-L.x<=S.hthresh){if(F.el!=O){G(O,"left")}return}else{if(L.y-M.top<=S.vthresh){if(F.el!=O){G(O,"up")}return}else{if(L.x-M.left<=S.hthresh){if(F.el!=O){G(O,"right")}return}}}}}}I()};H.fireEvents=H.fireEvents.createSequence(A,H);H.stopDrag=H.stopDrag.createSequence(J,H);return{register:function(K){if(Ext.isArray(K)){for(var L=0,M=K.length;L<M;L++){this.register(K[L])}}else{K=Ext.get(K);D[K.id]=K}},unregister:function(K){if(Ext.isArray(K)){for(var L=0,M=K.length;L<M;L++){this.unregister(K[L])}}else{K=Ext.get(K);delete D[K.id]}},vthresh:25,hthresh:25,increment:100,frequency:500,animate:true,animDuration:0.4,ddGroup:undefined,refreshCache:function(){for(var K in D){if(typeof D[K]=="object"){D[K]._region=D[K].getRegion()}}}}}();Ext.dd.Registry=function(){var A={};var B={};var D=0;var C=function(E,F){if(typeof E=="string"){return E}var G=E.id;if(!G&&F!==false){G="extdd-"+(++D);E.id=G}return G};return{register:function(E,I){I=I||{};if(typeof E=="string"){E=document.getElementById(E)}I.ddel=E;A[C(E)]=I;if(I.isHandle!==false){B[I.ddel.id]=I}if(I.handles){var F=I.handles;for(var G=0,H=F.length;G<H;G++){B[C(F[G])]=I}}},unregister:function(E){var J=C(E,false);var H=A[J];if(H){delete A[J];if(H.handles){var F=H.handles;for(var G=0,I=F.length;G<I;G++){delete B[C(F[G],false)]}}}},getHandle:function(E){if(typeof E!="string"){E=E.id}return B[E]},getHandleFromEvent:function(E){var F=Ext.lib.Event.getTarget(E);return F?B[F.id]:null},getTarget:function(E){if(typeof E!="string"){E=E.id}return A[E]},getTargetFromEvent:function(E){var F=Ext.lib.Event.getTarget(E);return F?A[F.id]||B[F.id]:null}}}();Ext.dd.StatusProxy=function(A){Ext.apply(this,A);this.id=this.id||Ext.id();this.el=new Ext.Layer({dh:{id:this.id,tag:"div",cls:"x-dd-drag-proxy "+this.dropNotAllowed,children:[{tag:"div",cls:"x-dd-drop-icon"},{tag:"div",cls:"x-dd-drag-ghost"}]},shadow:!A||A.shadow!==false});this.ghost=Ext.get(this.el.dom.childNodes[1]);this.dropStatus=this.dropNotAllowed};Ext.dd.StatusProxy.prototype={dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",setStatus:function(A){A=A||this.dropNotAllowed;if(this.dropStatus!=A){this.el.replaceClass(this.dropStatus,A);this.dropStatus=A}},reset:function(A){this.el.dom.className="x-dd-drag-proxy "+this.dropNotAllowed;this.dropStatus=this.dropNotAllowed;if(A){this.ghost.update("")}},update:function(A){if(typeof A=="string"){this.ghost.update(A)}else{this.ghost.update("");A.style.margin="0";this.ghost.dom.appendChild(A)}var B=this.ghost.dom.firstChild;if(B){Ext.fly(B).setStyle("float","none")}},getEl:function(){return this.el},getGhost:function(){return this.ghost},hide:function(A){this.el.hide();if(A){this.reset(true)}},stop:function(){if(this.anim&&this.anim.isAnimated&&this.anim.isAnimated()){this.anim.stop()}},show:function(){this.el.show()},sync:function(){this.el.sync()},repair:function(A,C,B){this.callback=C;this.scope=B;if(A&&this.animRepair!==false){this.el.addClass("x-dd-drag-repair");this.el.hideUnders(true);this.anim=this.el.shift({duration:this.repairDuration||0.5,easing:"easeOut",xy:A,stopFx:true,callback:this.afterRepair,scope:this})}else{this.afterRepair()}},afterRepair:function(){this.hide(true);if(typeof this.callback=="function"){this.callback.call(this.scope||this)}this.callback=null;this.scope=null},destroy:function(){Ext.destroy(this.ghost,this.el)}};Ext.dd.DragSource=function(A,B){this.el=Ext.get(A);if(!this.dragData){this.dragData={}}Ext.apply(this,B);if(!this.proxy){this.proxy=new Ext.dd.StatusProxy()}Ext.dd.DragSource.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{dragElId:this.proxy.id,resizeFrame:false,isTarget:false,scroll:this.scroll===true});this.dragging=false};Ext.extend(Ext.dd.DragSource,Ext.dd.DDProxy,{dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",getDragData:function(A){return this.dragData},onDragEnter:function(A,D){var C=Ext.dd.DragDropMgr.getDDById(D);this.cachedTarget=C;if(this.beforeDragEnter(C,A,D)!==false){if(C.isNotifyTarget){var B=C.notifyEnter(this,A,this.dragData);this.proxy.setStatus(B)}else{this.proxy.setStatus(this.dropAllowed)}if(this.afterDragEnter){this.afterDragEnter(C,A,D)}}},beforeDragEnter:function(B,A,C){return true},alignElWithMouse:function(){Ext.dd.DragSource.superclass.alignElWithMouse.apply(this,arguments);this.proxy.sync()},onDragOver:function(A,D){var C=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(D);if(this.beforeDragOver(C,A,D)!==false){if(C.isNotifyTarget){var B=C.notifyOver(this,A,this.dragData);this.proxy.setStatus(B)}if(this.afterDragOver){this.afterDragOver(C,A,D)}}},beforeDragOver:function(B,A,C){return true},onDragOut:function(A,C){var B=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(C);if(this.beforeDragOut(B,A,C)!==false){if(B.isNotifyTarget){B.notifyOut(this,A,this.dragData)}this.proxy.reset();if(this.afterDragOut){this.afterDragOut(B,A,C)}}this.cachedTarget=null},beforeDragOut:function(B,A,C){return true},onDragDrop:function(A,C){var B=this.cachedTarget||Ext.dd.DragDropMgr.getDDById(C);if(this.beforeDragDrop(B,A,C)!==false){if(B.isNotifyTarget){if(B.notifyDrop(this,A,this.dragData)){this.onValidDrop(B,A,C)}else{this.onInvalidDrop(B,A,C)}}else{this.onValidDrop(B,A,C)}if(this.afterDragDrop){this.afterDragDrop(B,A,C)}}delete this.cachedTarget},beforeDragDrop:function(B,A,C){return true},onValidDrop:function(B,A,C){this.hideProxy();if(this.afterValidDrop){this.afterValidDrop(B,A,C)}},getRepairXY:function(A,B){return this.el.getXY()},onInvalidDrop:function(B,A,C){this.beforeInvalidDrop(B,A,C);if(this.cachedTarget){if(this.cachedTarget.isNotifyTarget){this.cachedTarget.notifyOut(this,A,this.dragData)}this.cacheTarget=null}this.proxy.repair(this.getRepairXY(A,this.dragData),this.afterRepair,this);if(this.afterInvalidDrop){this.afterInvalidDrop(A,C)}},afterRepair:function(){if(Ext.enableFx){this.el.highlight(this.hlColor||"c3daf9")}this.dragging=false},beforeInvalidDrop:function(B,A,C){return true},handleMouseDown:function(A){if(this.dragging){return}var B=this.getDragData(A);if(B&&this.onBeforeDrag(B,A)!==false){this.dragData=B;this.proxy.stop();Ext.dd.DragSource.superclass.handleMouseDown.apply(this,arguments)}},onBeforeDrag:function(B,A){return true},onStartDrag:Ext.emptyFn,startDrag:function(A,B){this.proxy.reset();this.dragging=true;this.proxy.update("");this.onInitDrag(A,B);this.proxy.show()},onInitDrag:function(B,C){var A=this.el.dom.cloneNode(true);A.id=Ext.id();this.proxy.update(A);this.onStartDrag(B,C);return true},getProxy:function(){return this.proxy},hideProxy:function(){this.proxy.hide();this.proxy.reset(true);this.dragging=false},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)},b4EndDrag:function(A){},endDrag:function(A){this.onEndDrag(this.dragData,A)},onEndDrag:function(B,A){},autoOffset:function(A,B){this.setDelta(-12,-20)},destroy:function(){Ext.dd.DragSource.superclass.destroy.call(this);Ext.destroy(this.proxy)}});Ext.dd.DropTarget=Ext.extend(Ext.dd.DDTarget,{constructor:function(A,B){this.el=Ext.get(A);Ext.apply(this,B);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}Ext.dd.DropTarget.superclass.constructor.call(this,this.el.dom,this.ddGroup||this.group,{isTarget:true})},dropAllowed:"x-dd-drop-ok",dropNotAllowed:"x-dd-drop-nodrop",isTarget:true,isNotifyTarget:true,notifyEnter:function(C,A,B){if(this.overClass){this.el.addClass(this.overClass)}return this.dropAllowed},notifyOver:function(C,A,B){return this.dropAllowed},notifyOut:function(C,A,B){if(this.overClass){this.el.removeClass(this.overClass)}},notifyDrop:function(C,A,B){return false},destroy:function(){Ext.dd.DropTarget.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DragZone=Ext.extend(Ext.dd.DragSource,{constructor:function(A,B){Ext.dd.DragZone.superclass.constructor.call(this,A,B);if(this.containerScroll){Ext.dd.ScrollManager.register(this.el)}},getDragData:function(A){return Ext.dd.Registry.getHandleFromEvent(A)},onInitDrag:function(A,B){this.proxy.update(this.dragData.ddel.cloneNode(true));this.onStartDrag(A,B);return true},afterRepair:function(){if(Ext.enableFx){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false},getRepairXY:function(A){return Ext.Element.fly(this.dragData.ddel).getXY()},destroy:function(){Ext.dd.DragZone.superclass.destroy.call(this);if(this.containerScroll){Ext.dd.ScrollManager.unregister(this.el)}}});Ext.dd.DropZone=function(A,B){Ext.dd.DropZone.superclass.constructor.call(this,A,B)};Ext.extend(Ext.dd.DropZone,Ext.dd.DropTarget,{getTargetFromEvent:function(A){return Ext.dd.Registry.getTargetFromEvent(A)},onNodeEnter:function(A,D,C,B){},onNodeOver:function(A,D,C,B){return this.dropAllowed},onNodeOut:function(A,D,C,B){},onNodeDrop:function(A,D,C,B){return false},onContainerOver:function(C,A,B){return this.dropNotAllowed},onContainerDrop:function(C,A,B){return false},notifyEnter:function(C,A,B){return this.dropNotAllowed},notifyOver:function(D,A,B){var C=this.getTargetFromEvent(A);if(!C){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,D,A,B);this.lastOverNode=null}return this.onContainerOver(D,A,B)}if(this.lastOverNode!=C){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,D,A,B)}this.onNodeEnter(C,D,A,B);this.lastOverNode=C}return this.onNodeOver(C,D,A,B)},notifyOut:function(C,A,B){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,C,A,B);this.lastOverNode=null}},notifyDrop:function(D,A,B){if(this.lastOverNode){this.onNodeOut(this.lastOverNode,D,A,B);this.lastOverNode=null}var C=this.getTargetFromEvent(A);return C?this.onNodeDrop(C,D,A,B):this.onContainerDrop(D,A,B)},triggerCacheRefresh:function(){Ext.dd.DDM.refreshCache(this.groups)}});Ext.Element.addMethods({initDD:function(A,B,C){var D=new Ext.dd.DD(Ext.id(this.dom),A,B);return Ext.apply(D,C)},initDDProxy:function(A,B,C){var D=new Ext.dd.DDProxy(Ext.id(this.dom),A,B);return Ext.apply(D,C)},initDDTarget:function(A,B,C){var D=new Ext.dd.DDTarget(Ext.id(this.dom),A,B);return Ext.apply(D,C)}});Ext.data.Api=(function(){var A={};return{actions:{create:"create",read:"read",update:"update",destroy:"destroy"},restActions:{create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},isAction:function(B){return(Ext.data.Api.actions[B])?true:false},getVerb:function(B){if(A[B]){return A[B]}for(var C in this.actions){if(this.actions[C]===B){A[B]=C;break}}return(A[B]!==undefined)?A[B]:null},isValid:function(E){var C=[];var D=this.actions;for(var B in E){if(!(B in D)){C.push(B)}}return(!C.length)?true:C},hasUniqueUrl:function(D,F){var C=(D.api[F])?D.api[F].url:null;var E=true;for(var B in D.api){if((E=(B===F)?true:(D.api[B].url!=C)?true:false)===false){break}}return E},prepare:function(C){if(!C.api){C.api={}}for(var D in this.actions){var B=this.actions[D];C.api[B]=C.api[B]||C.url||C.directFn;if(typeof(C.api[B])=="string"){C.api[B]={url:C.api[B],method:(C.restful===true)?Ext.data.Api.restActions[B]:undefined}}}},restify:function(B){B.restful=true;for(var C in this.restActions){B.api[this.actions[C]].method||(B.api[this.actions[C]].method=this.restActions[C])}B.onWrite=B.onWrite.createInterceptor(function(D,F,I,E){var G=F.reader;var H=new Ext.data.Response({action:D,raw:I});switch(I.status){case 200:return true;break;case 201:if(Ext.isEmpty(H.raw.responseText)){H.success=true}else{return true}break;case 204:H.success=true;H.data=null;break;default:return true;break}if(H.success===true){this.fireEvent("write",this,D,H.data,H,E,F.request.arg)}else{this.fireEvent("exception",this,"remote",D,F,H,E)}F.request.callback.call(F.request.scope,H.data,H,H.success);return false},B)}}})();Ext.data.Response=function(B,A){Ext.apply(this,B,{raw:A})};Ext.data.Response.prototype={message:null,success:false,status:null,root:null,raw:null,getMessage:function(){return this.message},getSuccess:function(){return this.success},getStatus:function(){return this.status},getRoot:function(){return this.root},getRawResponse:function(){return this.raw}};Ext.data.Api.Error=Ext.extend(Ext.Error,{constructor:function(B,A){this.arg=A;Ext.Error.call(this,B)},name:"Ext.data.Api"});Ext.apply(Ext.data.Api.Error.prototype,{lang:{"action-url-undefined":"No fallback url defined for this action.  When defining a DataProxy api, please be sure to define an url for each CRUD action in Ext.data.Api.actions or define a default url in addition to your api-configuration.","invalid":"received an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions defined in Ext.data.Api.actions","invalid-url":"Invalid url.  Please review your proxy configuration.","execute":'Attempted to execute an unknown action.  Valid API actions are defined in Ext.data.Api.actions"'}});Ext.data.SortTypes={none:function(A){return A},stripTagsRE:/<\/?[^>]+>/gi,asText:function(A){return String(A).replace(this.stripTagsRE,"")},asUCText:function(A){return String(A).toUpperCase().replace(this.stripTagsRE,"")},asUCString:function(A){return String(A).toUpperCase()},asDate:function(A){if(!A){return 0}if(Ext.isDate(A)){return A.getTime()}return Date.parse(String(A))},asFloat:function(A){var B=parseFloat(String(A).replace(/,/g,""));return isNaN(B)?0:B},asInt:function(A){var B=parseInt(String(A).replace(/,/g,""),10);return isNaN(B)?0:B}};Ext.data.Record=function(B,A){this.id=(A||A===0)?A:Ext.data.Record.id(this);this.data=B||{}};Ext.data.Record.create=function(B){var E=Ext.extend(Ext.data.Record,{});var C=E.prototype;C.fields=new Ext.util.MixedCollection(false,function(F){return F.name});for(var A=0,D=B.length;A<D;A++){C.fields.add(new Ext.data.Field(B[A]))}E.getField=function(F){return C.fields.get(F)};return E};Ext.data.Record.PREFIX="ext-record";Ext.data.Record.AUTO_ID=1;Ext.data.Record.EDIT="edit";Ext.data.Record.REJECT="reject";Ext.data.Record.COMMIT="commit";Ext.data.Record.id=function(A){A.phantom=true;return[Ext.data.Record.PREFIX,"-",Ext.data.Record.AUTO_ID++].join("")};Ext.data.Record.prototype={dirty:false,editing:false,error:null,modified:null,phantom:false,join:function(A){this.store=A},set:function(B,C){var A=Ext.isPrimitive(C)?String:Ext.encode;if(A(this.data[B])==A(C)){return}this.dirty=true;if(!this.modified){this.modified={}}if(this.modified[B]===undefined){this.modified[B]=this.data[B]}this.data[B]=C;if(!this.editing){this.afterEdit()}},afterEdit:function(){if(this.store!=undefined&&typeof this.store.afterEdit=="function"){this.store.afterEdit(this)}},afterReject:function(){if(this.store){this.store.afterReject(this)}},afterCommit:function(){if(this.store){this.store.afterCommit(this)}},get:function(A){return this.data[A]},beginEdit:function(){this.editing=true;this.modified=this.modified||{}},cancelEdit:function(){this.editing=false;delete this.modified},endEdit:function(){this.editing=false;if(this.dirty){this.afterEdit()}},reject:function(C){var B=this.modified;for(var A in B){if(typeof B[A]!="function"){this.data[A]=B[A]}}this.dirty=false;delete this.modified;this.editing=false;if(C!==true){this.afterReject()}},commit:function(A){this.dirty=false;delete this.modified;this.editing=false;if(A!==true){this.afterCommit()}},getChanges:function(){var B=this.modified,C={};for(var A in B){if(B.hasOwnProperty(A)){C[A]=this.data[A]}}return C},hasError:function(){return this.error!==null},clearError:function(){this.error=null},copy:function(A){return new this.constructor(Ext.apply({},this.data),A||this.id)},isModified:function(A){return !!(this.modified&&this.modified.hasOwnProperty(A))},isValid:function(){return this.fields.find(function(A){return(A.allowBlank===false&&Ext.isEmpty(this.data[A.name]))?true:false},this)?false:true},markDirty:function(){this.dirty=true;if(!this.modified){this.modified={}}this.fields.each(function(A){this.modified[A.name]=this.data[A.name]},this)}};Ext.StoreMgr=Ext.apply(new Ext.util.MixedCollection(),{register:function(){for(var A=0,B;(B=arguments[A]);A++){this.add(B)}},unregister:function(){for(var A=0,B;(B=arguments[A]);A++){this.remove(this.lookup(B))}},lookup:function(E){if(Ext.isArray(E)){var C=["field1"],B=!Ext.isArray(E[0]);if(!B){for(var A=2,D=E[0].length;A<=D;++A){C.push("field"+A)}}return new Ext.data.ArrayStore({fields:C,data:E,expandData:B,autoDestroy:true,autoCreated:true})}return Ext.isObject(E)?(E.events?E:Ext.create(E,"store")):this.get(E)},getKey:function(A){return A.storeId}});Ext.data.Store=Ext.extend(Ext.util.Observable,{writer:undefined,remoteSort:false,autoDestroy:false,pruneModifiedRecords:false,lastOptions:null,autoSave:true,batch:true,restful:false,paramNames:undefined,defaultParamNames:{start:"start",limit:"limit",sort:"sort",dir:"dir"},isDestroyed:false,hasMultiSort:false,batchKey:"_ext_batch_",constructor:function(A){this.data=new Ext.util.MixedCollection(false);this.data.getKey=function(B){return B.id};this.removed=[];if(A&&A.data){this.inlineData=A.data;delete A.data}Ext.apply(this,A);this.baseParams=Ext.isObject(this.baseParams)?this.baseParams:{};this.paramNames=Ext.applyIf(this.paramNames||{},this.defaultParamNames);if((this.url||this.api)&&!this.proxy){this.proxy=new Ext.data.HttpProxy({url:this.url,api:this.api})}if(this.restful===true&&this.proxy){this.batch=false;Ext.data.Api.restify(this.proxy)}if(this.reader){if(!this.recordType){this.recordType=this.reader.recordType}if(this.reader.onMetaChange){this.reader.onMetaChange=this.reader.onMetaChange.createSequence(this.onMetaChange,this)}if(this.writer){if(this.writer instanceof (Ext.data.DataWriter)===false){this.writer=this.buildWriter(this.writer)}this.writer.meta=this.reader.meta;this.pruneModifiedRecords=true}}if(this.recordType){this.fields=this.recordType.prototype.fields}this.modified=[];this.addEvents("datachanged","metachange","add","remove","update","clear","exception","beforeload","load","loadexception","beforewrite","write","beforesave","save");if(this.proxy){this.relayEvents(this.proxy,["loadexception","exception"])}if(this.writer){this.on({scope:this,add:this.createRecords,remove:this.destroyRecord,update:this.updateRecord,clear:this.onClear})}this.sortToggle={};if(this.sortField){this.setDefaultSort(this.sortField,this.sortDir)}else{if(this.sortInfo){this.setDefaultSort(this.sortInfo.field,this.sortInfo.direction)}}Ext.data.Store.superclass.constructor.call(this);if(this.id){this.storeId=this.id;delete this.id}if(this.storeId){Ext.StoreMgr.register(this)}if(this.inlineData){this.loadData(this.inlineData);delete this.inlineData}else{if(this.autoLoad){this.load.defer(10,this,[typeof this.autoLoad=="object"?this.autoLoad:undefined])}}this.batchCounter=0;this.batches={}},buildWriter:function(B){var C=undefined,A=(B.format||"json").toLowerCase();switch(A){case"json":C=Ext.data.JsonWriter;break;case"xml":C=Ext.data.XmlWriter;break;default:C=Ext.data.JsonWriter}return new C(B)},destroy:function(){if(!this.isDestroyed){if(this.storeId){Ext.StoreMgr.unregister(this)}this.clearData();this.data=null;Ext.destroy(this.proxy);this.reader=this.writer=null;this.purgeListeners();this.isDestroyed=true}},add:function(B){var A,D,C,E;B=[].concat(B);if(B.length<1){return}for(A=0,D=B.length;A<D;A++){C=B[A];C.join(this);if(C.dirty||C.phantom){this.modified.push(C)}}E=this.data.length;this.data.addAll(B);if(this.snapshot){this.snapshot.addAll(B)}this.fireEvent("add",this,B,E)},addSorted:function(A){var B=this.findInsertIndex(A);this.insert(B,A)},doUpdate:function(A){var B=A.id;this.getById(B).join(null);this.data.replace(B,A);if(this.snapshot){this.snapshot.replace(B,A)}A.join(this);this.fireEvent("update",this,A,Ext.data.Record.COMMIT)},remove:function(A){if(Ext.isArray(A)){Ext.each(A,function(C){this.remove(C)},this);return}var B=this.data.indexOf(A);if(B>-1){A.join(null);this.data.removeAt(B)}if(this.pruneModifiedRecords){this.modified.remove(A)}if(this.snapshot){this.snapshot.remove(A)}if(B>-1){this.fireEvent("remove",this,A,B)}},removeAt:function(A){this.remove(this.getAt(A))},removeAll:function(B){var A=[];this.each(function(C){A.push(C)});this.clearData();if(this.snapshot){this.snapshot.clear()}if(this.pruneModifiedRecords){this.modified=[]}if(B!==true){this.fireEvent("clear",this,A)}},onClear:function(A,B){Ext.each(B,function(C,D){this.destroyRecord(this,C,D)},this)},insert:function(E,B){var A,D,C;B=[].concat(B);for(A=0,D=B.length;A<D;A++){C=B[A];this.data.insert(E+A,C);C.join(this);if(C.dirty||C.phantom){this.modified.push(C)}}if(this.snapshot){this.snapshot.addAll(B)}this.fireEvent("add",this,B,E)},indexOf:function(A){return this.data.indexOf(A)},indexOfId:function(A){return this.data.indexOfKey(A)},getById:function(A){return(this.snapshot||this.data).key(A)},getAt:function(A){return this.data.itemAt(A)},getRange:function(B,A){return this.data.getRange(B,A)},storeOptions:function(A){A=Ext.apply({},A);delete A.callback;delete A.scope;this.lastOptions=A},clearData:function(){this.data.each(function(A){A.join(null)});this.data.clear()},load:function(B){B=Ext.apply({},B);this.storeOptions(B);if(this.sortInfo&&this.remoteSort){var C=this.paramNames;B.params=Ext.apply({},B.params);B.params[C.sort]=this.sortInfo.field;B.params[C.dir]=this.sortInfo.direction}try{return this.execute("read",null,B)}catch(A){this.handleException(A);return false}},updateRecord:function(B,C,A){if(A==Ext.data.Record.EDIT&&this.autoSave===true&&(!C.phantom||(C.phantom&&C.isValid()))){this.save()}},createRecords:function(B,C,G){var A=this.modified,D=C.length,F,E;for(E=0;E<D;E++){F=C[E];if(F.phantom&&F.isValid()){F.markDirty();if(A.indexOf(F)==-1){A.push(F)}}}if(this.autoSave===true){this.save()}},destroyRecord:function(A,B,C){if(this.modified.indexOf(B)!=-1){this.modified.remove(B)}if(!B.phantom){this.removed.push(B);B.lastIndex=C;if(this.autoSave===true){this.save()}}},execute:function(A,B,C,E){if(!Ext.data.Api.isAction(A)){throw new Ext.data.Api.Error("execute",A)}C=Ext.applyIf(C||{},{params:{}});if(E!==undefined){this.addToBatch(E)}var D=true;if(A==="read"){D=this.fireEvent("beforeload",this,C);Ext.applyIf(C.params,this.baseParams)}else{if(this.writer.listful===true&&this.restful!==true){B=(Ext.isArray(B))?B:[B]}else{if(Ext.isArray(B)&&B.length==1){B=B.shift()}}if((D=this.fireEvent("beforewrite",this,A,B,C))!==false){this.writer.apply(C.params,this.baseParams,A,B)}}if(D!==false){if(this.writer&&this.proxy.url&&!this.proxy.restful&&!Ext.data.Api.hasUniqueUrl(this.proxy,A)){C.params.xaction=A}this.proxy.request(Ext.data.Api.actions[A],B,C.params,this.reader,this.createCallback(A,B,E),this,C)}return D},save:function(){if(!this.writer){throw new Ext.data.Store.Error("writer-undefined")}var C=[],H,G,F,B={},E;if(this.removed.length){C.push(["destroy",this.removed])}var D=[].concat(this.getModifiedRecords());if(D.length){var I=[];for(E=D.length-1;E>=0;E--){if(D[E].phantom===true){var A=D.splice(E,1).shift();if(A.isValid()){I.push(A)}}else{if(!D[E].isValid()){D.splice(E,1)}}}if(I.length){C.push(["create",I])}if(D.length){C.push(["update",D])}}H=C.length;if(H){F=++this.batchCounter;for(E=0;E<H;++E){G=C[E];B[G[0]]=G[1]}if(this.fireEvent("beforesave",this,B)!==false){for(E=0;E<H;++E){G=C[E];this.doTransaction(G[0],G[1],F)}return F}}return -1},doTransaction:function(A,B,F){function D(G){try{this.execute(A,G,undefined,F)}catch(H){this.handleException(H)}}if(this.batch===false){for(var C=0,E=B.length;C<E;C++){D.call(this,B[C])}}else{D.call(this,B)}},addToBatch:function(D){var C=this.batches,A=this.batchKey+D,B=C[A];if(!B){C[A]=B={id:D,count:0,data:{}}}++B.count},removeFromBatch:function(F,A,G){var D=this.batches,B=this.batchKey+F,C=D[B],E;if(C){E=C.data[A]||[];C.data[A]=E.concat(G);if(C.count===1){G=C.data;delete D[B];this.fireEvent("save",this,F,G)}else{--C.count}}},createCallback:function(A,B,D){var C=Ext.data.Api.actions;return(A=="read")?this.loadRecords:function(G,F,E){this["on"+Ext.util.Format.capitalize(A)+"Records"](E,B,[].concat(G));if(E===true){this.fireEvent("write",this,A,G,F,B)}this.removeFromBatch(D,A,G)}},clearModified:function(A){if(Ext.isArray(A)){for(var B=A.length-1;B>=0;B--){this.modified.splice(this.modified.indexOf(A[B]),1)}}else{this.modified.splice(this.modified.indexOf(A),1)}},reMap:function(B){if(Ext.isArray(B)){for(var A=0,C=B.length;A<C;A++){this.reMap(B[A])}}else{delete this.data.map[B._phid];this.data.map[B.id]=B;var D=this.data.keys.indexOf(B._phid);this.data.keys.splice(D,1,B.id);delete B._phid}},onCreateRecords:function(A,B,D){if(A===true){try{this.reader.realize(B,D)}catch(C){this.handleException(C);if(Ext.isArray(B)){this.onCreateRecords(A,B,D)}}}},onUpdateRecords:function(A,B,D){if(A===true){try{this.reader.update(B,D)}catch(C){this.handleException(C);if(Ext.isArray(B)){this.onUpdateRecords(A,B,D)}}}},onDestroyRecords:function(A,B,E){B=(B instanceof Ext.data.Record)?[B]:[].concat(B);for(var C=0,D=B.length;C<D;C++){this.removed.splice(this.removed.indexOf(B[C]),1)}if(A===false){for(C=B.length-1;C>=0;C--){this.insert(B[C].lastIndex,B[C])}}},handleException:function(A){Ext.handleError(A)},reload:function(A){this.load(Ext.applyIf(A||{},this.lastOptions))},loadRecords:function(I,H,B){var G,J;if(this.isDestroyed===true){return}if(!I||B===false){if(B!==false){this.fireEvent("load",this,[],H)}if(H.callback){H.callback.call(H.scope||this,[],H,false,I)}return}var A=I.records,D=I.totalRecords||A.length;if(!H||H.add!==true){if(this.pruneModifiedRecords){this.modified=[]}for(G=0,J=A.length;G<J;G++){A[G].join(this)}if(this.snapshot){this.data=this.snapshot;delete this.snapshot}this.clearData();this.data.addAll(A);this.totalLength=D;this.applySort();this.fireEvent("datachanged",this)}else{var E=[],C,F=0;for(G=0,J=A.length;G<J;++G){C=A[G];if(this.indexOfId(C.id)>-1){this.doUpdate(C)}else{E.push(C);++F}}this.totalLength=Math.max(D,this.data.length+F);this.add(E)}this.fireEvent("load",this,A,H);if(H.callback){H.callback.call(H.scope||this,A,H,true)}},loadData:function(B,C){var A=this.reader.readRecords(B);this.loadRecords(A,{add:C},true)},getCount:function(){return this.data.length||0},getTotalCount:function(){return this.totalLength||0},getSortState:function(){return this.sortInfo},applySort:function(){if((this.sortInfo||this.multiSortInfo)&&!this.remoteSort){this.sortData()}},sortData:function(){var H=this.hasMultiSort?this.multiSortInfo:this.sortInfo,A=H.direction||"ASC",C=H.sorters,F=[];if(!this.hasMultiSort){C=[{direction:A,field:H.field}]}for(var E=0,D=C.length;E<D;E++){F.push(this.createSortFunction(C[E].field,C[E].direction))}if(F.length==0){return}var B=A.toUpperCase()=="DESC"?-1:1;var G=function(J,K){var L=F[0].call(this,J,K);if(F.length>1){for(var I=1,M=F.length;I<M;I++){L=L||F[I].call(this,J,K)}}return B*L};this.data.sort(A,G);if(this.snapshot&&this.snapshot!=this.data){this.snapshot.sort(A,G)}},createSortFunction:function(B,D){D=D||"ASC";var A=D.toUpperCase()=="DESC"?-1:1;var C=this.fields.get(B).sortType;return function(E,F){var G=C(E.data[B]),H=C(F.data[B]);return A*(G>H?1:(G<H?-1:0))}},setDefaultSort:function(B,A){A=A?A.toUpperCase():"ASC";this.sortInfo={field:B,direction:A};this.sortToggle[B]=A},sort:function(B,A){if(Ext.isArray(arguments[0])){return this.multiSort.call(this,B,A)}else{return this.singleSort(B,A)}},singleSort:function(D,A){var E=this.fields.get(D);if(!E){return false}var C=E.name,F=this.sortInfo||null,B=this.sortToggle?this.sortToggle[C]:null;if(!A){if(F&&F.field==C){A=(this.sortToggle[C]||"ASC").toggle("ASC","DESC")}else{A=E.sortDir}}this.sortToggle[C]=A;this.sortInfo={field:C,direction:A};this.hasMultiSort=false;if(this.remoteSort){if(!this.load(this.lastOptions)){if(B){this.sortToggle[C]=B}if(F){this.sortInfo=F}}}else{this.applySort();this.fireEvent("datachanged",this)}return true},multiSort:function(A,B){this.hasMultiSort=true;B=B||"ASC";if(this.multiSortInfo&&B==this.multiSortInfo.direction){B=B.toggle("ASC","DESC")}this.multiSortInfo={sorters:A,direction:B};if(this.remoteSort){this.singleSort(A[0].field,A[0].direction)}else{this.applySort();this.fireEvent("datachanged",this)}},each:function(A,B){this.data.each(A,B)},getModifiedRecords:function(){return this.modified},sum:function(C,F,E){var A=this.data.items,D=0;F=F||0;E=(E||E===0)?E:A.length-1;for(var B=F;B<=E;B++){D+=(A[B].data[C]||0)}return D},createFilterFn:function(B,D,A,E,C){if(Ext.isEmpty(D,false)){return false}D=this.data.createValueMatcher(D,A,E,C);return function(F){return D.test(F.data[B])}},createMultipleFilterFn:function(A){return function(D){var E=true;for(var B=0,H=A.length;B<H;B++){var G=A[B],C=G.fn,F=G.scope;E=E&&C.call(F,D)}return E}},filter:function(A,E,I,J,F){var G;if(Ext.isObject(A)){A=[A]}if(Ext.isArray(A)){var K=[];for(var H=0,D=A.length;H<D;H++){var C=A[H],L=C.fn,B=C.scope||this;if(!Ext.isFunction(L)){L=this.createFilterFn(C.property,C.value,C.anyMatch,C.caseSensitive,C.exactMatch)}K.push({fn:L,scope:B})}G=this.createMultipleFilterFn(K)}else{G=this.createFilterFn(A,E,I,J,F)}return G?this.filterBy(G):this.clearFilter()},filterBy:function(A,B){this.snapshot=this.snapshot||this.data;this.data=this.queryBy(A,B||this);this.fireEvent("datachanged",this)},clearFilter:function(A){if(this.isFiltered()){this.data=this.snapshot;delete this.snapshot;if(A!==true){this.fireEvent("datachanged",this)}}},isFiltered:function(){return !!this.snapshot&&this.snapshot!=this.data},query:function(C,D,A,E){var B=this.createFilterFn(C,D,A,E);return B?this.queryBy(B):this.data.clone()},queryBy:function(A,B){var C=this.snapshot||this.data;return C.filterBy(A,B||this)},find:function(C,D,F,A,E){var B=this.createFilterFn(C,D,A,E);return B?this.data.findIndexBy(B,null,F):-1},findExact:function(A,B,C){return this.data.findIndexBy(function(D){return D.get(A)===B},this,C)},findBy:function(A,B,C){return this.data.findIndexBy(A,B,C)},collect:function(G,B,I){var J=(I===true&&this.snapshot)?this.snapshot.items:this.data.items;var C,D,A=[],F={};for(var E=0,H=J.length;E<H;E++){C=J[E].data[G];D=String(C);if((B||!Ext.isEmpty(C))&&!F[D]){F[D]=true;A[A.length]=C}}return A},afterEdit:function(A){if(this.modified.indexOf(A)==-1){this.modified.push(A)}this.fireEvent("update",this,A,Ext.data.Record.EDIT)},afterReject:function(A){this.modified.remove(A);this.fireEvent("update",this,A,Ext.data.Record.REJECT)},afterCommit:function(A){this.modified.remove(A);this.fireEvent("update",this,A,Ext.data.Record.COMMIT)},commitChanges:function(){var B=this.modified.slice(0),A=B.length,C;for(C=0;C<A;C++){B[C].commit()}this.modified=[];this.removed=[]},rejectChanges:function(){var C=this.modified.slice(0),B=this.removed.slice(0).reverse(),E=C.length,A=B.length,D;for(D=0;D<E;D++){C[D].reject()}for(D=0;D<A;D++){this.insert(B[D].lastIndex||0,B[D]);B[D].reject()}this.modified=[];this.removed=[]},onMetaChange:function(A){this.recordType=this.reader.recordType;this.fields=this.recordType.prototype.fields;delete this.snapshot;if(this.reader.meta.sortInfo){this.sortInfo=this.reader.meta.sortInfo}else{if(this.sortInfo&&!this.fields.get(this.sortInfo.field)){delete this.sortInfo}}if(this.writer){this.writer.meta=this.reader.meta}this.modified=[];this.fireEvent("metachange",this,this.reader.meta)},findInsertIndex:function(A){this.suspendEvents();var C=this.data.clone();this.data.add(A);this.applySort();var B=this.data.indexOf(A);this.data=C;this.resumeEvents();return B},setBaseParam:function(A,B){this.baseParams=this.baseParams||{};this.baseParams[A]=B}});Ext.reg("store",Ext.data.Store);Ext.data.Store.Error=Ext.extend(Ext.Error,{name:"Ext.data.Store"});Ext.apply(Ext.data.Store.Error.prototype,{lang:{"writer-undefined":"Attempted to execute a write-action without a DataWriter installed."}});Ext.data.Field=Ext.extend(Object,{constructor:function(C){if(Ext.isString(C)){C={name:C}}Ext.apply(this,C);var A=Ext.data.Types,B=this.sortType,D;if(this.type){if(Ext.isString(this.type)){this.type=Ext.data.Types[this.type.toUpperCase()]||A.AUTO}}else{this.type=A.AUTO}if(Ext.isString(B)){this.sortType=Ext.data.SortTypes[B]}else{if(Ext.isEmpty(B)){this.sortType=this.type.sortType}}if(!this.convert){this.convert=this.type.convert}},dateFormat:null,useNull:false,defaultValue:"",mapping:null,sortType:null,sortDir:"ASC",allowBlank:true});Ext.data.DataReader=function(B,A){this.meta=B;this.recordType=Ext.isArray(A)?Ext.data.Record.create(A):A;if(this.recordType){this.buildExtractors()}};Ext.data.DataReader.prototype={getTotal:Ext.emptyFn,getRoot:Ext.emptyFn,getMessage:Ext.emptyFn,getSuccess:Ext.emptyFn,getId:Ext.emptyFn,buildExtractors:Ext.emptyFn,extractValues:Ext.emptyFn,realize:function(A,C){if(Ext.isArray(A)){for(var B=A.length-1;B>=0;B--){if(Ext.isArray(C)){this.realize(A.splice(B,1).shift(),C.splice(B,1).shift())}else{this.realize(A.splice(B,1).shift(),C)}}}else{if(Ext.isArray(C)&&C.length==1){C=C.shift()}if(!this.isData(C)){throw new Ext.data.DataReader.Error("realize",A)}A.phantom=false;A._phid=A.id;A.id=this.getId(C);A.data=C;A.commit();A.store.reMap(A)}},update:function(A,C){if(Ext.isArray(A)){for(var B=A.length-1;B>=0;B--){if(Ext.isArray(C)){this.update(A.splice(B,1).shift(),C.splice(B,1).shift())}else{this.update(A.splice(B,1).shift(),C)}}}else{if(Ext.isArray(C)&&C.length==1){C=C.shift()}if(this.isData(C)){A.data=Ext.apply(A.data,C)}A.commit()}},extractData:function(E,A){var F=(this instanceof Ext.data.JsonReader)?"json":"node";var D=[];if(this.isData(E)&&!(this instanceof Ext.data.XmlReader)){E=[E]}var K=this.recordType.prototype.fields,I=K.items,C=K.length,D=[];if(A===true){var L=this.recordType;for(var H=0;H<E.length;H++){var G=E[H];var J=new L(this.extractValues(G,I,C),this.getId(G));J[F]=G;D.push(J)}}else{for(var H=0;H<E.length;H++){var B=this.extractValues(E[H],I,C);B[this.meta.idProperty]=this.getId(E[H]);D.push(B)}}return D},isData:function(A){return(A&&Ext.isObject(A)&&!Ext.isEmpty(this.getId(A)))?true:false},onMetaChange:function(A){delete this.ef;this.meta=A;this.recordType=Ext.data.Record.create(A.fields);this.buildExtractors()}};Ext.data.DataReader.Error=Ext.extend(Ext.Error,{constructor:function(B,A){this.arg=A;Ext.Error.call(this,B)},name:"Ext.data.DataReader"});Ext.apply(Ext.data.DataReader.Error.prototype,{lang:{"update":"#update received invalid data from server.  Please see docs for DataReader#update and review your DataReader configuration.","realize":"#realize was called with invalid remote-data.  Please see the docs for DataReader#realize and review your DataReader configuration.","invalid-response":"#readResponse received an invalid response from the server."}});Ext.data.DataWriter=function(A){Ext.apply(this,A)};Ext.data.DataWriter.prototype={writeAllFields:false,listful:false,apply:function(E,A,C,B){var F=[],D=C+"Record";if(Ext.isArray(B)){Ext.each(B,function(G){F.push(this[D](G))},this)}else{if(B instanceof Ext.data.Record){F=this[D](B)}}this.render(E,A,F)},render:Ext.emptyFn,updateRecord:Ext.emptyFn,createRecord:Ext.emptyFn,destroyRecord:Ext.emptyFn,toHash:function(A,C){var B=A.fields.map,F={},D=(this.writeAllFields===false&&A.phantom===false)?A.getChanges():A.data,E;Ext.iterate(D,function(G,H){if((E=B[G])){F[E.mapping?E.mapping:E.name]=H}});if(A.phantom){if(A.fields.containsKey(this.meta.idProperty)&&Ext.isEmpty(A.data[this.meta.idProperty])){delete F[this.meta.idProperty]}}else{F[this.meta.idProperty]=A.id}return F},toArray:function(B){var A=[];Ext.iterate(B,function(D,C){A.push({name:D,value:C})},this);return A}};Ext.data.DataProxy=function(B){B=B||{};this.api=B.api;this.url=B.url;this.restful=B.restful;this.listeners=B.listeners;this.prettyUrls=B.prettyUrls;this.addEvents("exception","beforeload","load","loadexception","beforewrite","write");Ext.data.DataProxy.superclass.constructor.call(this);try{Ext.data.Api.prepare(this)}catch(A){if(A instanceof Ext.data.Api.Error){A.toConsole()}}Ext.data.DataProxy.relayEvents(this,["beforewrite","write","exception"])};Ext.extend(Ext.data.DataProxy,Ext.util.Observable,{restful:false,setApi:function(){if(arguments.length==1){var A=Ext.data.Api.isValid(arguments[0]);if(A===true){this.api=arguments[0]}else{throw new Ext.data.Api.Error("invalid",A)}}else{if(arguments.length==2){if(!Ext.data.Api.isAction(arguments[0])){throw new Ext.data.Api.Error("invalid",arguments[0])}this.api[arguments[0]]=arguments[1]}}Ext.data.Api.prepare(this)},isApiAction:function(A){return(this.api[A])?true:false},request:function(A,B,G,D,F,E,C){if(!this.api[A]&&!this.load){throw new Ext.data.DataProxy.Error("action-undefined",A)}G=G||{};if((A===Ext.data.Api.actions.read)?this.fireEvent("beforeload",this,G):this.fireEvent("beforewrite",this,A,B,G)!==false){this.doRequest.apply(this,arguments)}else{F.call(E||this,null,C,false)}},load:null,doRequest:function(A,B,G,D,F,E,C){this.load(G,D,F,E,C)},onRead:Ext.emptyFn,onWrite:Ext.emptyFn,buildUrl:function(A,C){C=C||null;var B=(this.conn&&this.conn.url)?this.conn.url:(this.api[A])?this.api[A].url:this.url;if(!B){throw new Ext.data.Api.Error("invalid-url",A)}var E=null;var D=B.match(/(.*)(\.json|\.xml|\.html)$/);if(D){E=D[2];B=D[1]}if((this.restful===true||this.prettyUrls===true)&&C instanceof Ext.data.Record&&!C.phantom){B+="/"+C.id}return(E===null)?B:B+E},destroy:function(){this.purgeListeners()}});Ext.apply(Ext.data.DataProxy,Ext.util.Observable.prototype);Ext.util.Observable.call(Ext.data.DataProxy);Ext.data.DataProxy.Error=Ext.extend(Ext.Error,{constructor:function(B,A){this.arg=A;Ext.Error.call(this,B)},name:"Ext.data.DataProxy"});Ext.apply(Ext.data.DataProxy.Error.prototype,{lang:{"action-undefined":"DataProxy attempted to execute an API-action but found an undefined url / function.  Please review your Proxy url/api-configuration.","api-invalid":"Recieved an invalid API-configuration.  Please ensure your proxy API-configuration contains only the actions from Ext.data.Api.actions."}});Ext.data.Request=function(A){Ext.apply(this,A)};Ext.data.Request.prototype={action:undefined,rs:undefined,params:undefined,callback:Ext.emptyFn,scope:undefined,reader:undefined};Ext.data.Response=function(A){Ext.apply(this,A)};Ext.data.Response.prototype={action:undefined,success:undefined,message:undefined,data:undefined,raw:undefined,records:undefined};Ext.data.ScriptTagProxy=function(A){Ext.apply(this,A);Ext.data.ScriptTagProxy.superclass.constructor.call(this,A);this.head=document.getElementsByTagName("head")[0]};Ext.data.ScriptTagProxy.TRANS_ID=1000;Ext.extend(Ext.data.ScriptTagProxy,Ext.data.DataProxy,{timeout:30000,callbackParam:"callback",nocache:true,doRequest:function(K,F,H,J,C,D,L){var B=Ext.urlEncode(Ext.apply(H,this.extraParams));var A=this.buildUrl(K,F);if(!A){throw new Ext.data.Api.Error("invalid-url",A)}A=Ext.urlAppend(A,B);if(this.nocache){A=Ext.urlAppend(A,"_dc="+(new Date().getTime()))}var G=++Ext.data.ScriptTagProxy.TRANS_ID;var I={id:G,action:K,cb:"stcCallback"+G,scriptId:"stcScript"+G,params:H,arg:L,url:A,callback:C,scope:D,reader:J};window[I.cb]=this.createCallback(K,F,I);A+=String.format("&{0}={1}",this.callbackParam,I.cb);if(this.autoAbort!==false){this.abort()}I.timeoutId=this.handleFailure.defer(this.timeout,this,[I]);var E=document.createElement("script");E.setAttribute("src",A);E.setAttribute("type","text/javascript");E.setAttribute("id",I.scriptId);this.head.appendChild(E);this.trans=I},createCallback:function(A,B,D){var C=this;return function(E){C.trans=false;C.destroyTrans(D,true);if(A===Ext.data.Api.actions.read){C.onRead.call(C,A,D,E)}else{C.onWrite.call(C,A,D,E,B)}}},onRead:function(A,D,E){var C;try{C=D.reader.readRecords(E)}catch(B){this.fireEvent("loadexception",this,D,E,B);this.fireEvent("exception",this,"response",A,D,E,B);D.callback.call(D.scope||window,null,D.arg,false);return}if(C.success===false){this.fireEvent("loadexception",this,D,E);this.fireEvent("exception",this,"remote",A,D,E,null)}else{this.fireEvent("load",this,E,D.arg)}D.callback.call(D.scope||window,C,D.arg,C.success)},onWrite:function(A,E,G,B){var C=E.reader;try{var F=C.readResponse(A,G)}catch(D){this.fireEvent("exception",this,"response",A,E,F,D);E.callback.call(E.scope||window,null,F,false);return}if(!F.success===true){this.fireEvent("exception",this,"remote",A,E,F,B);E.callback.call(E.scope||window,null,F,false);return}this.fireEvent("write",this,A,F.data,F,B,E.arg);E.callback.call(E.scope||window,F.data,F,true)},isLoading:function(){return this.trans?true:false},abort:function(){if(this.isLoading()){this.destroyTrans(this.trans)}},destroyTrans:function(B,C){this.head.removeChild(document.getElementById(B.scriptId));clearTimeout(B.timeoutId);if(C){window[B.cb]=undefined;try{delete window[B.cb]}catch(A){}}else{window[B.cb]=function(){window[B.cb]=undefined;try{delete window[B.cb]}catch(D){}}}},handleFailure:function(A){this.trans=false;this.destroyTrans(A,false);if(A.action===Ext.data.Api.actions.read){this.fireEvent("loadexception",this,null,A.arg)}this.fireEvent("exception",this,"response",A.action,{response:null,options:A.arg});A.callback.call(A.scope||window,null,A.arg,false)},destroy:function(){this.abort();Ext.data.ScriptTagProxy.superclass.destroy.call(this)}});Ext.data.HttpProxy=function(A){Ext.data.HttpProxy.superclass.constructor.call(this,A);this.conn=A;this.conn.url=null;this.useAjax=!A||!A.events;var B=Ext.data.Api.actions;this.activeRequest={};for(var C in B){this.activeRequest[B[C]]=undefined}};Ext.extend(Ext.data.HttpProxy,Ext.data.DataProxy,{getConnection:function(){return this.useAjax?Ext.Ajax:this.conn},setUrl:function(A,B){this.conn.url=A;if(B===true){this.url=A;this.api=null;Ext.data.Api.prepare(this)}},doRequest:function(G,C,D,F,A,B,H){var E={method:(this.api[G])?this.api[G]["method"]:undefined,request:{callback:A,scope:B,arg:H},reader:F,callback:this.createCallback(G,C),scope:this};if(D.jsonData){E.jsonData=D.jsonData}else{if(D.xmlData){E.xmlData=D.xmlData}else{E.params=D||{}}}this.conn.url=this.buildUrl(G,C);if(this.useAjax){Ext.applyIf(E,this.conn);if(this.activeRequest[G]){}this.activeRequest[G]=Ext.Ajax.request(E)}else{this.conn.request(E)}this.conn.url=null},createCallback:function(A,B){return function(D,C,E){this.activeRequest[A]=undefined;if(!C){if(A===Ext.data.Api.actions.read){this.fireEvent("loadexception",this,D,E)}this.fireEvent("exception",this,"response",A,D,E);D.request.callback.call(D.request.scope,null,D.request.arg,false);return}if(A===Ext.data.Api.actions.read){this.onRead(A,D,E)}else{this.onWrite(A,D,E,B)}}},onRead:function(A,C,F){var E;try{E=C.reader.read(F)}catch(B){this.fireEvent("loadexception",this,C,F,B);this.fireEvent("exception",this,"response",A,C,F,B);C.request.callback.call(C.request.scope,null,C.request.arg,false);return}if(E.success===false){this.fireEvent("loadexception",this,C,F);var D=C.reader.readResponse(A,F);this.fireEvent("exception",this,"remote",A,C,D,null)}else{this.fireEvent("load",this,C,C.request.arg)}C.request.callback.call(C.request.scope,E,C.request.arg,E.success)},onWrite:function(A,D,G,B){var E=D.reader;var F;try{F=E.readResponse(A,G)}catch(C){this.fireEvent("exception",this,"response",A,D,G,C);D.request.callback.call(D.request.scope,null,D.request.arg,false);return}if(F.success===true){this.fireEvent("write",this,A,F.data,F,B,D.request.arg)}else{this.fireEvent("exception",this,"remote",A,D,F,B)}D.request.callback.call(D.request.scope,F.data,F,F.success)},destroy:function(){if(!this.useAjax){this.conn.abort()}else{if(this.activeRequest){var A=Ext.data.Api.actions;for(var B in A){if(this.activeRequest[A[B]]){Ext.Ajax.abort(this.activeRequest[A[B]])}}}}Ext.data.HttpProxy.superclass.destroy.call(this)}});Ext.data.MemoryProxy=function(B){var A={};A[Ext.data.Api.actions.read]=true;Ext.data.MemoryProxy.superclass.constructor.call(this,{api:A});this.data=B};Ext.extend(Ext.data.MemoryProxy,Ext.data.DataProxy,{doRequest:function(H,E,F,G,C,D,I){F=F||{};var B;try{B=G.readRecords(this.data)}catch(A){this.fireEvent("loadexception",this,null,I,A);this.fireEvent("exception",this,"response",H,I,null,A);C.call(D,null,I,false);return}C.call(D,B,I,true)}});Ext.data.Types=new function(){var A=Ext.data.SortTypes;Ext.apply(this,{stripRe:/[\$,%]/g,AUTO:{convert:function(B){return B},sortType:A.none,type:"auto"},STRING:{convert:function(B){return(B===undefined||B===null)?"":String(B)},sortType:A.asUCString,type:"string"},INT:{convert:function(B){return B!==undefined&&B!==null&&B!==""?parseInt(String(B).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:A.none,type:"int"},FLOAT:{convert:function(B){return B!==undefined&&B!==null&&B!==""?parseFloat(String(B).replace(Ext.data.Types.stripRe,""),10):(this.useNull?null:0)},sortType:A.none,type:"float"},BOOL:{convert:function(B){return B===true||B==="true"||B==1},sortType:A.none,type:"bool"},DATE:{convert:function(C){var B=this.dateFormat;if(!C){return null}if(Ext.isDate(C)){return C}if(B){if(B=="timestamp"){return new Date(C*1000)}if(B=="time"){return new Date(parseInt(C,10))}return Date.parseDate(C,B)}var D=Date.parse(C);return D?new Date(D):null},sortType:A.asDate,type:"date"}});Ext.apply(this,{BOOLEAN:this.BOOL,INTEGER:this.INT,NUMBER:this.FLOAT})};Ext.data.JsonWriter=Ext.extend(Ext.data.DataWriter,{encode:true,encodeDelete:false,constructor:function(A){Ext.data.JsonWriter.superclass.constructor.call(this,A)},render:function(C,A,D){if(this.encode===true){Ext.apply(C,A);C[this.meta.root]=Ext.encode(D)}else{var B=Ext.apply({},A);B[this.meta.root]=D;C.jsonData=B}},createRecord:function(A){return this.toHash(A)},updateRecord:function(A){return this.toHash(A)},destroyRecord:function(A){if(this.encodeDelete){var B={};B[this.meta.idProperty]=A.id;return B}else{return A.id}}});Ext.data.JsonReader=function(B,A){B=B||{};Ext.applyIf(B,{idProperty:"id",successProperty:"success",totalProperty:"total"});Ext.data.JsonReader.superclass.constructor.call(this,B,A||B.fields)};Ext.extend(Ext.data.JsonReader,Ext.data.DataReader,{read:function(C){var B=C.responseText;var A=Ext.decode(B);if(!A){throw {message:"JsonReader.read: Json object not found"}}return this.readRecords(A)},readResponse:function(A,G){var C=(G.responseText!==undefined)?Ext.decode(G.responseText):G;if(!C){throw new Ext.data.JsonReader.Error("response")}var B=this.getRoot(C),E=this.getSuccess(C);if(E&&A===Ext.data.Api.actions.create){var F=Ext.isDefined(B);if(F&&Ext.isEmpty(B)){throw new Ext.data.JsonReader.Error("root-empty",this.meta.root)}else{if(!F){throw new Ext.data.JsonReader.Error("root-undefined-response",this.meta.root)}}}var D=new Ext.data.Response({action:A,success:E,data:(B)?this.extractData(B,false):[],message:this.getMessage(C),raw:C});if(Ext.isEmpty(D.success)){throw new Ext.data.JsonReader.Error("successProperty-response",this.meta.successProperty)}return D},readRecords:function(G){this.jsonData=G;if(G.metaData){this.onMetaChange(G.metaData)}var A=this.meta,K=this.recordType,J=K.prototype.fields,H=J.items,E=J.length,C;var F=this.getRoot(G),I=F.length,D=I,B=true;if(A.totalProperty){C=parseInt(this.getTotal(G),10);if(!isNaN(C)){D=C}}if(A.successProperty){C=this.getSuccess(G);if(C===false||C==="false"){B=false}}return{success:B,records:this.extractData(F,true),totalRecords:D}},buildExtractors:function(){if(this.ef){return}var A=this.meta,I=this.recordType,G=I.prototype.fields,F=G.items,C=G.length;if(A.totalProperty){this.getTotal=this.createAccessor(A.totalProperty)}if(A.successProperty){this.getSuccess=this.createAccessor(A.successProperty)}if(A.messageProperty){this.getMessage=this.createAccessor(A.messageProperty)}this.getRoot=A.root?this.createAccessor(A.root):function(J){return J};if(A.id||A.idProperty){var H=this.createAccessor(A.id||A.idProperty);this.getId=function(J){var K=H(J);return(K===undefined||K==="")?null:K}}else{this.getId=function(){return null}}var B=[];for(var D=0;D<C;D++){G=F[D];var E=(G.mapping!==undefined&&G.mapping!==null)?G.mapping:G.name;B.push(this.createAccessor(E))}this.ef=B},simpleAccess:function(B,A){return B[A]},createAccessor:function(){var A=/[\[\.]/;return function(B){if(Ext.isEmpty(B)){return Ext.emptyFn}if(Ext.isFunction(B)){return B}var C=String(B).search(A);if(C>=0){return new Function("obj","return obj"+(C>0?".":"")+B)}return function(D){return D[B]}}}(),extractValues:function(G,D,C){var A,E={};for(var F=0;F<C;F++){A=D[F];var B=this.ef[F](G);E[A.name]=A.convert((B!==undefined)?B:A.defaultValue,G)}return E}});Ext.data.JsonReader.Error=Ext.extend(Ext.Error,{constructor:function(B,A){this.arg=A;Ext.Error.call(this,B)},name:"Ext.data.JsonReader"});Ext.apply(Ext.data.JsonReader.Error.prototype,{lang:{"response":"An error occurred while json-decoding your server response","successProperty-response":'Could not locate your "successProperty" in your server response.  Please review your JsonReader config to ensure the config-property "successProperty" matches the property in your server-response.  See the JsonReader docs.',"root-undefined-config":'Your JsonReader was configured without a "root" property.  Please review your JsonReader config and make sure to define the root property.  See the JsonReader docs.',"idProperty-undefined":'Your JsonReader was configured without an "idProperty"  Please review your JsonReader configuration and ensure the "idProperty" is set (e.g.: "id").  See the JsonReader docs.',"root-empty":'Data was expected to be returned by the server in the "root" property of the response.  Please review your JsonReader configuration to ensure the "root" property matches that returned in the server-response.  See JsonReader docs.'}});Ext.data.ArrayReader=Ext.extend(Ext.data.JsonReader,{readRecords:function(I){this.arrayData=I;var A=this.meta,T=A?Ext.num(A.idIndex,A.id):null,P=this.recordType,N=P.prototype.fields,M=[],S=true,D;var L=this.getRoot(I);for(var G=0,C=L.length;G<C;G++){var H=L[G],B={},O=((T||T===0)&&H[T]!==undefined&&H[T]!==""?H[T]:null);for(var E=0,Q=N.length;E<Q;E++){var K=N.items[E],F=K.mapping!==undefined&&K.mapping!==null?K.mapping:E;D=H[F]!==undefined?H[F]:K.defaultValue;D=K.convert(D,H);B[K.name]=D}var J=new P(B,O);J.json=H;M[M.length]=J}var R=M.length;if(A.totalProperty){D=parseInt(this.getTotal(I),10);if(!isNaN(D)){R=D}}if(A.successProperty){D=this.getSuccess(I);if(D===false||D==="false"){S=false}}return{success:S,records:M,totalRecords:R}}});Ext.data.ArrayStore=Ext.extend(Ext.data.Store,{constructor:function(A){Ext.data.ArrayStore.superclass.constructor.call(this,Ext.apply(A,{reader:new Ext.data.ArrayReader(A)}))},loadData:function(E,D){if(this.expandData===true){var A=[];for(var B=0,C=E.length;B<C;B++){A[A.length]=[E[B]]}E=A}Ext.data.ArrayStore.superclass.loadData.call(this,E,D)}});Ext.reg("arraystore",Ext.data.ArrayStore);Ext.data.SimpleStore=Ext.data.ArrayStore;Ext.reg("simplestore",Ext.data.SimpleStore);Ext.data.JsonStore=Ext.extend(Ext.data.Store,{constructor:function(A){Ext.data.JsonStore.superclass.constructor.call(this,Ext.apply(A,{reader:new Ext.data.JsonReader(A)}))}});Ext.reg("jsonstore",Ext.data.JsonStore);Ext.Resizable=Ext.extend(Ext.util.Observable,{constructor:function(L,A){this.el=Ext.get(L);if(A&&A.wrap){A.resizeChild=this.el;this.el=this.el.wrap(typeof A.wrap=="object"?A.wrap:{cls:"xresizable-wrap"});this.el.id=this.el.dom.id=A.resizeChild.id+"-rzwrap";this.el.setStyle("overflow","hidden");this.el.setPositioning(A.resizeChild.getPositioning());A.resizeChild.clearPositioning();if(!A.width||!A.height){var B=A.resizeChild.getSize();this.el.setSize(B.width,B.height)}if(A.pinned&&!A.adjustments){A.adjustments="auto"}}this.proxy=this.el.createProxy({tag:"div",cls:"x-resizable-proxy",id:this.el.id+"-rzproxy"},Ext.getBody());this.proxy.unselectable();this.proxy.enableDisplayMode("block");Ext.apply(this,A);if(this.pinned){this.disableTrackOver=true;this.el.addClass("x-resizable-pinned")}var K=this.el.getStyle("position");if(K!="absolute"&&K!="fixed"){this.el.setStyle("position","relative")}if(!this.handles){this.handles="s,e,se";if(this.multiDirectional){this.handles+=",n,w"}}if(this.handles=="all"){this.handles="n s e w ne nw se sw"}var M=this.handles.split(/\s*?[,;]\s*?| /);var H=Ext.Resizable.positions;for(var I=0,F=M.length;I<F;I++){if(M[I]&&H[M[I]]){var D=H[M[I]];this[D]=new Ext.Resizable.Handle(this,D,this.disableTrackOver,this.transparent,this.handleCls)}}this.corner=this.southeast;if(this.handles.indexOf("n")!=-1||this.handles.indexOf("w")!=-1){this.updateBox=true}this.activeHandle=null;if(this.resizeChild){if(typeof this.resizeChild=="boolean"){this.resizeChild=Ext.get(this.el.dom.firstChild,true)}else{this.resizeChild=Ext.get(this.resizeChild,true)}}if(this.adjustments=="auto"){var E=this.resizeChild;var J=this.west,G=this.east,C=this.north,M=this.south;if(E&&(J||C)){E.position("relative");E.setLeft(J?J.el.getWidth():0);E.setTop(C?C.el.getHeight():0)}this.adjustments=[(G?-G.el.getWidth():0)+(J?-J.el.getWidth():0),(C?-C.el.getHeight():0)+(M?-M.el.getHeight():0)-1]}if(this.draggable){this.dd=this.dynamic?this.el.initDD(null):this.el.initDDProxy(null,{dragElId:this.proxy.id});this.dd.setHandleElId(this.resizeChild?this.resizeChild.id:this.el.id);if(this.constrainTo){this.dd.constrainTo(this.constrainTo)}}this.addEvents("beforeresize","resize");if(this.width!==null&&this.height!==null){this.resizeTo(this.width,this.height)}else{this.updateChildSize()}if(Ext.isIE){this.el.dom.style.zoom=1}Ext.Resizable.superclass.constructor.call(this)},adjustments:[0,0],animate:false,disableTrackOver:false,draggable:false,duration:0.35,dynamic:false,easing:"easeOutStrong",enabled:true,handles:false,multiDirectional:false,height:null,width:null,heightIncrement:0,widthIncrement:0,minHeight:5,minWidth:5,maxHeight:10000,maxWidth:10000,minX:0,minY:0,pinned:false,preserveRatio:false,resizeChild:false,transparent:false,resizeTo:function(B,A){this.el.setSize(B,A);this.updateChildSize();this.fireEvent("resize",this,B,A,null)},startSizing:function(B,A){this.fireEvent("beforeresize",this,B);if(this.enabled){if(!this.overlay){this.overlay=this.el.createProxy({tag:"div",cls:"x-resizable-overlay",html:"&#160;"},Ext.getBody());this.overlay.unselectable();this.overlay.enableDisplayMode("block");this.overlay.on({scope:this,mousemove:this.onMouseMove,mouseup:this.onMouseUp})}this.overlay.setStyle("cursor",A.el.getStyle("cursor"));this.resizing=true;this.startBox=this.el.getBox();this.startPoint=B.getXY();this.offsets=[(this.startBox.x+this.startBox.width)-this.startPoint[0],(this.startBox.y+this.startBox.height)-this.startPoint[1]];this.overlay.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.overlay.show();if(this.constrainTo){var C=Ext.get(this.constrainTo);this.resizeRegion=C.getRegion().adjust(C.getFrameWidth("t"),C.getFrameWidth("l"),-C.getFrameWidth("b"),-C.getFrameWidth("r"))}this.proxy.setStyle("visibility","hidden");this.proxy.show();this.proxy.setBox(this.startBox);if(!this.dynamic){this.proxy.setStyle("visibility","visible")}}},onMouseDown:function(A,B){if(this.enabled){B.stopEvent();this.activeHandle=A;this.startSizing(B,A)}},onMouseUp:function(B){this.activeHandle=null;var A=this.resizeElement();this.resizing=false;this.handleOut();this.overlay.hide();this.proxy.hide();this.fireEvent("resize",this,A.width,A.height,B)},updateChildSize:function(){if(this.resizeChild){var A=this.el;var B=this.resizeChild;var C=this.adjustments;if(A.dom.offsetWidth){var D=A.getSize(true);B.setSize(D.width+C[0],D.height+C[1])}if(Ext.isIE){setTimeout(function(){if(A.dom.offsetWidth){var E=A.getSize(true);B.setSize(E.width+C[0],E.height+C[1])}},10)}}},snap:function(C,D,A){if(!D||!C){return C}var E=C;var B=C%D;if(B>0){if(B>(D/2)){E=C+(D-B)}else{E=C-B}}return Math.max(A,E)},resizeElement:function(){var A=this.proxy.getBox();if(this.updateBox){this.el.setBox(A,false,this.animate,this.duration,null,this.easing)}else{this.el.setSize(A.width,A.height,this.animate,this.duration,null,this.easing)}this.updateChildSize();if(!this.dynamic){this.proxy.hide()}if(this.draggable&&this.constrainTo){this.dd.resetConstraints();this.dd.constrainTo(this.constrainTo)}return A},constrain:function(A,D,B,C){if(A-D<B){D=A-B}else{if(A-D>C){D=A-C}}return D},onMouseMove:function(P){if(this.enabled&&this.activeHandle){try{if(this.resizeRegion&&!this.resizeRegion.contains(P.getPoint())){return}var Y=this.curSize||this.startBox,V=this.startBox.x,W=this.startBox.y,B=V,Q=W,J=Y.width,E=Y.height,R=J,K=E,S=this.minWidth,M=this.minHeight,T=this.maxWidth,L=this.maxHeight,C=this.widthIncrement,O=this.heightIncrement,G=P.getXY(),X=-(this.startPoint[0]-Math.max(this.minX,G[0])),U=-(this.startPoint[1]-Math.max(this.minY,G[1])),A=this.activeHandle.position,N,F;switch(A){case"east":J+=X;J=Math.min(Math.max(S,J),T);break;case"south":E+=U;E=Math.min(Math.max(M,E),L);break;case"southeast":J+=X;E+=U;J=Math.min(Math.max(S,J),T);E=Math.min(Math.max(M,E),L);break;case"north":U=this.constrain(E,U,M,L);W+=U;E-=U;break;case"west":X=this.constrain(J,X,S,T);V+=X;J-=X;break;case"northeast":J+=X;J=Math.min(Math.max(S,J),T);U=this.constrain(E,U,M,L);W+=U;E-=U;break;case"northwest":X=this.constrain(J,X,S,T);U=this.constrain(E,U,M,L);W+=U;E-=U;V+=X;J-=X;break;case"southwest":X=this.constrain(J,X,S,T);E+=U;E=Math.min(Math.max(M,E),L);V+=X;J-=X;break}var I=this.snap(J,C,S);var D=this.snap(E,O,M);if(I!=J||D!=E){switch(A){case"northeast":W-=D-E;break;case"north":W-=D-E;break;case"southwest":V-=I-J;break;case"west":V-=I-J;break;case"northwest":V-=I-J;W-=D-E;break}J=I;E=D}if(this.preserveRatio){switch(A){case"southeast":case"east":E=K*(J/R);E=Math.min(Math.max(M,E),L);J=R*(E/K);break;case"south":J=R*(E/K);J=Math.min(Math.max(S,J),T);E=K*(J/R);break;case"northeast":J=R*(E/K);J=Math.min(Math.max(S,J),T);E=K*(J/R);break;case"north":N=J;J=R*(E/K);J=Math.min(Math.max(S,J),T);E=K*(J/R);V+=(N-J)/2;break;case"southwest":E=K*(J/R);E=Math.min(Math.max(M,E),L);N=J;J=R*(E/K);V+=N-J;break;case"west":F=E;E=K*(J/R);E=Math.min(Math.max(M,E),L);W+=(F-E)/2;N=J;J=R*(E/K);V+=N-J;break;case"northwest":N=J;F=E;E=K*(J/R);E=Math.min(Math.max(M,E),L);J=R*(E/K);W+=F-E;V+=N-J;break}}this.proxy.setBounds(V,W,J,E);if(this.dynamic){this.resizeElement()}}catch(H){}}},handleOver:function(){if(this.enabled){this.el.addClass("x-resizable-over")}},handleOut:function(){if(!this.resizing){this.el.removeClass("x-resizable-over")}},getEl:function(){return this.el},getResizeChild:function(){return this.resizeChild},destroy:function(B){Ext.destroy(this.dd,this.overlay,this.proxy);this.overlay=null;this.proxy=null;var A=Ext.Resizable.positions;for(var C in A){if(typeof A[C]!="function"&&this[A[C]]){this[A[C]].destroy()}}if(B){this.el.update("");Ext.destroy(this.el);this.el=null}this.purgeListeners()},syncHandleHeight:function(){var A=this.el.getHeight(true);if(this.west){this.west.el.setHeight(A)}if(this.east){this.east.el.setHeight(A)}}});Ext.Resizable.positions={n:"north",s:"south",e:"east",w:"west",se:"southeast",sw:"southwest",nw:"northwest",ne:"northeast"};Ext.Resizable.Handle=Ext.extend(Object,{constructor:function(A,B,F,C,E){if(!this.tpl){var D=Ext.DomHelper.createTemplate({tag:"div",cls:"x-resizable-handle x-resizable-handle-{0}"});D.compile();Ext.Resizable.Handle.prototype.tpl=D}this.position=B;this.rz=A;this.el=this.tpl.append(A.el.dom,[this.position],true);this.el.unselectable();if(C){this.el.setOpacity(0)}if(!Ext.isEmpty(E)){this.el.addClass(E)}this.el.on("mousedown",this.onMouseDown,this);if(!F){this.el.on({scope:this,mouseover:this.onMouseOver,mouseout:this.onMouseOut})}},afterResize:function(A){},onMouseDown:function(A){this.rz.onMouseDown(this,A)},onMouseOver:function(A){this.rz.handleOver(this,A)},onMouseOut:function(A){this.rz.handleOut(this,A)},destroy:function(){Ext.destroy(this.el);this.el=null}});Ext.Window=Ext.extend(Ext.Panel,{baseCls:"x-window",resizable:true,draggable:true,closable:true,closeAction:"close",constrain:false,constrainHeader:false,plain:false,minimizable:false,maximizable:false,minHeight:100,minWidth:200,expandOnShow:true,showAnimDuration:0.25,hideAnimDuration:0.25,collapsible:false,initHidden:undefined,hidden:true,elements:"header,body",frame:true,floating:true,initComponent:function(){this.initTools();Ext.Window.superclass.initComponent.call(this);this.addEvents("resize","maximize","minimize","restore");if(Ext.isDefined(this.initHidden)){this.hidden=this.initHidden}if(this.hidden===false){this.hidden=true;this.show()}},getState:function(){return Ext.apply(Ext.Window.superclass.getState.call(this)||{},this.getBox(true))},onRender:function(B,A){Ext.Window.superclass.onRender.call(this,B,A);if(this.plain){this.el.addClass("x-window-plain")}this.focusEl=this.el.createChild({tag:"a",href:"#",cls:"x-dlg-focus",tabIndex:"-1",html:"&#160;"});this.focusEl.swallowEvent("click",true);this.proxy=this.el.createProxy("x-window-proxy");this.proxy.enableDisplayMode("block");if(this.modal){this.mask=this.container.createChild({cls:"ext-el-mask"},this.el.dom);this.mask.enableDisplayMode("block");this.mask.hide();this.mon(this.mask,"click",this.focus,this)}if(this.maximizable){this.mon(this.header,"dblclick",this.toggleMaximize,this)}},initEvents:function(){Ext.Window.superclass.initEvents.call(this);if(this.animateTarget){this.setAnimateTarget(this.animateTarget)}if(this.resizable){this.resizer=new Ext.Resizable(this.el,{minWidth:this.minWidth,minHeight:this.minHeight,handles:this.resizeHandles||"all",pinned:true,resizeElement:this.resizerAction,handleCls:"x-window-handle"});this.resizer.window=this;this.mon(this.resizer,"beforeresize",this.beforeResize,this)}if(this.draggable){this.header.addClass("x-window-draggable")}this.mon(this.el,"mousedown",this.toFront,this);this.manager=this.manager||Ext.WindowMgr;this.manager.register(this);if(this.maximized){this.maximized=false;this.maximize()}if(this.closable){var A=this.getKeyMap();A.on(27,this.onEsc,this);A.disable()}},initDraggable:function(){this.dd=new Ext.Window.DD(this)},onEsc:function(B,A){if(this.activeGhost){this.unghost()}A.stopEvent();this[this.closeAction]()},beforeDestroy:function(){if(this.rendered){this.hide();this.clearAnchor();Ext.destroy(this.focusEl,this.resizer,this.dd,this.proxy,this.mask)}Ext.Window.superclass.beforeDestroy.call(this)},onDestroy:function(){if(this.manager){this.manager.unregister(this)}Ext.Window.superclass.onDestroy.call(this)},initTools:function(){if(this.minimizable){this.addTool({id:"minimize",handler:this.minimize.createDelegate(this,[])})}if(this.maximizable){this.addTool({id:"maximize",handler:this.maximize.createDelegate(this,[])});this.addTool({id:"restore",handler:this.restore.createDelegate(this,[]),hidden:true})}if(this.closable){this.addTool({id:"close",handler:this[this.closeAction].createDelegate(this,[])})}},resizerAction:function(){var A=this.proxy.getBox();this.proxy.hide();this.window.handleResize(A);return A},beforeResize:function(){this.resizer.minHeight=Math.max(this.minHeight,this.getFrameHeight()+40);this.resizer.minWidth=Math.max(this.minWidth,this.getFrameWidth()+40);this.resizeBox=this.el.getBox()},updateHandles:function(){if(Ext.isIE&&this.resizer){this.resizer.syncHandleHeight();this.el.repaint()}},handleResize:function(B){var A=this.resizeBox;if(A.x!=B.x||A.y!=B.y){this.updateBox(B)}else{this.setSize(B);if(Ext.isIE6&&Ext.isStrict){this.doLayout()}}this.focus();this.updateHandles();this.saveState()},focus:function(){var E=this.focusEl,B=this.defaultButton,C=typeof B,A,D;if(Ext.isDefined(B)){if(Ext.isNumber(B)&&this.fbar){E=this.fbar.items.get(B)}else{if(Ext.isString(B)){E=Ext.getCmp(B)}else{E=B}}A=E.getEl();D=Ext.getDom(this.container);if(A&&D){if(D!=document.body&&!Ext.lib.Region.getRegion(D).contains(Ext.lib.Region.getRegion(A.dom))){return}}}E=E||this.focusEl;E.focus.defer(10,E)},setAnimateTarget:function(A){A=Ext.get(A);this.animateTarget=A},beforeShow:function(){delete this.el.lastXY;delete this.el.lastLT;if(this.x===undefined||this.y===undefined){var A=this.el.getAlignToXY(this.container,"c-c");var B=this.el.translatePoints(A[0],A[1]);this.x=this.x===undefined?B.left:this.x;this.y=this.y===undefined?B.top:this.y}this.el.setLeftTop(this.x,this.y);if(this.expandOnShow){this.expand(false)}if(this.modal){Ext.getBody().addClass("x-body-masked");this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true));this.mask.show()}},show:function(B,A,C){if(!this.rendered){this.render(Ext.getBody())}if(this.hidden===false){this.toFront();return this}if(this.fireEvent("beforeshow",this)===false){return this}if(A){this.on("show",A,C,{single:true})}this.hidden=false;if(Ext.isDefined(B)){this.setAnimateTarget(B)}this.beforeShow();if(this.animateTarget){this.animShow()}else{this.afterShow()}return this},afterShow:function(B){if(this.isDestroyed){return false}this.proxy.hide();this.el.setStyle("display","block");this.el.show();if(this.maximized){this.fitContainer()}if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.onWindowResize(this.onWindowResize,this)}this.doConstrain();this.doLayout();if(this.keyMap){this.keyMap.enable()}this.toFront();this.updateHandles();if(B&&(Ext.isIE||Ext.isWebKit)){var A=this.getSize();this.onResize(A.width,A.height)}this.onShow();this.fireEvent("show",this)},animShow:function(){this.proxy.show();this.proxy.setBox(this.animateTarget.getBox());this.proxy.setOpacity(0);var A=this.getBox();this.el.setStyle("display","none");this.proxy.shift(Ext.apply(A,{callback:this.afterShow.createDelegate(this,[true],false),scope:this,easing:"easeNone",duration:this.showAnimDuration,opacity:0.5}))},hide:function(B,A,C){if(this.hidden||this.fireEvent("beforehide",this)===false){return this}if(A){this.on("hide",A,C,{single:true})}this.hidden=true;if(B!==undefined){this.setAnimateTarget(B)}if(this.modal){this.mask.hide();Ext.getBody().removeClass("x-body-masked")}if(this.animateTarget){this.animHide()}else{this.el.hide();this.afterHide()}return this},afterHide:function(){this.proxy.hide();if(this.monitorResize||this.modal||this.constrain||this.constrainHeader){Ext.EventManager.removeResizeListener(this.onWindowResize,this)}if(this.keyMap){this.keyMap.disable()}this.onHide();this.fireEvent("hide",this)},animHide:function(){this.proxy.setOpacity(0.5);this.proxy.show();var A=this.getBox(false);this.proxy.setBox(A);this.el.hide();this.proxy.shift(Ext.apply(this.animateTarget.getBox(),{callback:this.afterHide,scope:this,duration:this.hideAnimDuration,easing:"easeNone",opacity:0}))},onShow:Ext.emptyFn,onHide:Ext.emptyFn,onWindowResize:function(){if(this.maximized){this.fitContainer()}if(this.modal){this.mask.setSize("100%","100%");var A=this.mask.dom.offsetHeight;this.mask.setSize(Ext.lib.Dom.getViewWidth(true),Ext.lib.Dom.getViewHeight(true))}this.doConstrain()},doConstrain:function(){if(this.constrain||this.constrainHeader){var B;if(this.constrain){B={right:this.el.shadowOffset,left:this.el.shadowOffset,bottom:this.el.shadowOffset}}else{var C=this.getSize();B={right:-(C.width-100),bottom:-(C.height-25+this.el.getConstrainOffset())}}var A=this.el.getConstrainToXY(this.container,true,B);if(A){this.setPosition(A[0],A[1])}}},ghost:function(B){var C=this.createGhost(B);var A=this.getBox(true);C.setLeftTop(A.x,A.y);C.setWidth(A.width);this.el.hide();this.activeGhost=C;return C},unghost:function(B,A){if(!this.activeGhost){return}if(B!==false){this.el.show();this.focus.defer(10,this);if(Ext.isMac&&Ext.isGecko2){this.cascade(this.setAutoScroll)}}if(A!==false){this.setPosition(this.activeGhost.getLeft(true),this.activeGhost.getTop(true))}this.activeGhost.hide();this.activeGhost.remove();delete this.activeGhost},minimize:function(){this.fireEvent("minimize",this);return this},close:function(){if(this.fireEvent("beforeclose",this)!==false){if(this.hidden){this.doClose()}else{this.hide(null,this.doClose,this)}}},doClose:function(){this.fireEvent("close",this);this.destroy()},maximize:function(){if(!this.maximized){this.expand(false);this.restoreSize=this.getSize();this.restorePos=this.getPosition(true);if(this.maximizable){this.tools.maximize.hide();this.tools.restore.show()}this.maximized=true;this.el.disableShadow();if(this.dd){this.dd.lock()}if(this.collapsible){this.tools.toggle.hide()}this.el.addClass("x-window-maximized");this.container.addClass("x-window-maximized-ct");this.setPosition(0,0);this.fitContainer();this.fireEvent("maximize",this)}return this},restore:function(){if(this.maximized){var A=this.tools;this.el.removeClass("x-window-maximized");if(A.restore){A.restore.hide()}if(A.maximize){A.maximize.show()}this.setPosition(this.restorePos[0],this.restorePos[1]);this.setSize(this.restoreSize.width,this.restoreSize.height);delete this.restorePos;delete this.restoreSize;this.maximized=false;this.el.enableShadow(true);if(this.dd){this.dd.unlock()}if(this.collapsible&&A.toggle){A.toggle.show()}this.container.removeClass("x-window-maximized-ct");this.doConstrain();this.fireEvent("restore",this)}return this},toggleMaximize:function(){return this[this.maximized?"restore":"maximize"]()},fitContainer:function(){var A=this.container.getViewSize(false);this.setSize(A.width,A.height)},setZIndex:function(A){if(this.modal){this.mask.setStyle("z-index",A)}this.el.setZIndex(++A);A+=5;if(this.resizer){this.resizer.proxy.setStyle("z-index",++A)}this.lastZIndex=A},alignTo:function(D,C,B){var A=this.el.getAlignToXY(D,C,B);this.setPagePosition(A[0],A[1]);return this},anchorTo:function(A,B,C,E){this.clearAnchor();this.anchorTarget={el:A,alignment:B,offsets:C};Ext.EventManager.onWindowResize(this.doAnchor,this);var D=typeof E;if(D!="undefined"){Ext.EventManager.on(window,"scroll",this.doAnchor,this,{buffer:D=="number"?E:50})}return this.doAnchor()},doAnchor:function(){var A=this.anchorTarget;this.alignTo(A.el,A.alignment,A.offsets);return this},clearAnchor:function(){if(this.anchorTarget){Ext.EventManager.removeResizeListener(this.doAnchor,this);Ext.EventManager.un(window,"scroll",this.doAnchor,this);delete this.anchorTarget}return this},toFront:function(A){if(this.manager.bringToFront(this)){if(!A||!A.getTarget().focus){this.focus()}}return this},setActive:function(A){if(A){if(!this.maximized){this.el.enableShadow(true)}this.fireEvent("activate",this)}else{this.el.disableShadow();this.fireEvent("deactivate",this)}},toBack:function(){this.manager.sendToBack(this);return this},center:function(){var A=this.el.getAlignToXY(this.container,"c-c");this.setPagePosition(A[0],A[1]);return this}});Ext.reg("window",Ext.Window);Ext.Window.DD=Ext.extend(Ext.dd.DD,{constructor:function(A){this.win=A;Ext.Window.DD.superclass.constructor.call(this,A.el.id,"WindowDD-"+A.id);this.setHandleElId(A.header.id);this.scroll=false},moveOnly:true,headerOffsets:[100,25],startDrag:function(){var B=this.win;this.proxy=B.ghost(B.initialConfig.cls);if(B.constrain!==false){var C=B.el.shadowOffset;this.constrainTo(B.container,{right:C,left:C,bottom:C})}else{if(B.constrainHeader!==false){var A=this.proxy.getSize();this.constrainTo(B.container,{right:-(A.width-this.headerOffsets[0]),bottom:-(A.height-this.headerOffsets[1])})}}},b4Drag:Ext.emptyFn,onDrag:function(A){this.alignElWithMouse(this.proxy,A.getPageX(),A.getPageY())},endDrag:function(A){this.win.unghost();this.win.saveState()}});Ext.WindowGroup=function(){var C={};var F=[];var G=null;var A=function(H,I){return(!H._lastAccess||H._lastAccess<I._lastAccess)?-1:1};var E=function(){var L=F,K=L.length;if(K>0){L.sort(A);var I=L[0].manager.zseed;for(var H=0;H<K;H++){var J=L[H];if(J&&!J.hidden){J.setZIndex(I+(H*10))}}}B()};var D=function(H){if(H!=G){if(G){G.setActive(false)}G=H;if(H){H.setActive(true)}}};var B=function(){for(var H=F.length-1;H>=0;--H){if(!F[H].hidden){D(F[H]);return}}D(null)};return{zseed:9000,register:function(H){if(H.manager){H.manager.unregister(H)}H.manager=this;C[H.id]=H;F.push(H);H.on("hide",B)},unregister:function(H){delete H.manager;delete C[H.id];H.un("hide",B);F.remove(H)},get:function(H){return typeof H=="object"?H:C[H]},bringToFront:function(H){H=this.get(H);if(H!=G){H._lastAccess=new Date().getTime();E();return true}return false},sendToBack:function(H){H=this.get(H);H._lastAccess=-(new Date().getTime());E();return H},hideAll:function(){for(var H in C){if(C[H]&&typeof C[H]!="function"&&C[H].isVisible()){C[H].hide()}}},getActive:function(){return G},getBy:function(K,L){var H=[];for(var I=F.length-1;I>=0;--I){var J=F[I];if(K.call(L||J,J)!==false){H.push(J)}}return H},each:function(H,I){for(var J in C){if(C[J]&&typeof C[J]!="function"){if(H.call(I||C[J],C[J])===false){return}}}}}};Ext.WindowMgr=new Ext.WindowGroup();Ext.MessageBox=function(){var V,J,Q,C,D,F,L,E,M,O,N,G,S,T,P,A="",H="",I=["ok","yes","no","cancel"];var R=function(W){S[W].blur();if(V.isVisible()){V.hide();B();Ext.callback(J.fn,J.scope||window,[W,T.dom.value,J],1)}};var B=function(){if(J&&J.cls){V.el.removeClass(J.cls)}M.reset()};var U=function(W,Y,X){if(J&&J.closable!==false){V.hide();B()}if(X){X.stopEvent()}};var K=function(W){var Y=0,X;if(!W){Ext.each(I,function(Z){S[Z].hide()});return Y}V.footer.dom.style.display="";Ext.iterate(S,function(Z,a){X=W[Z];if(X){a.show();a.setText(Ext.isString(X)?X:Ext.MessageBox.buttonText[Z]);Y+=a.getEl().getWidth()+15}else{a.hide()}});return Y};return{getDialog:function(X){if(!V){var W=[];S={};Ext.each(I,function(Z){W.push(S[Z]=new Ext.Button({text:this.buttonText[Z],handler:R.createCallback(Z),hideMode:"offsets"}))},this);V=new Ext.Window({autoCreate:true,title:X,resizable:false,constrain:true,constrainHeader:true,minimizable:false,maximizable:false,stateful:false,modal:true,shim:true,buttonAlign:"center",width:400,height:100,shadow:!Ext.useShims,minHeight:80,plain:true,footer:true,closable:true,close:function(){if(J&&J.buttons&&J.buttons.no&&!J.buttons.cancel){R("no")}else{R("cancel")}},fbar:new Ext.Toolbar({items:W,enableOverflow:false})});V.render(document.body);V.getEl().addClass("x-window-dlg");Q=V.mask;D=V.body.createChild({html:'<div class="ext-mb-icon"></div><div class="ext-mb-content"><span class="ext-mb-text"></span><br /><div class="ext-mb-fix-cursor"><input type="text" class="ext-mb-input" /><textarea class="ext-mb-textarea"></textarea></div></div>'});N=Ext.get(D.dom.firstChild);var Y=D.dom.childNodes[1];F=Ext.get(Y.firstChild);L=Ext.get(Y.childNodes[2].firstChild);L.enableDisplayMode();L.addKeyListener([10,13],function(){if(V.isVisible()&&J&&J.buttons){if(J.buttons.ok){R("ok")}else{if(J.buttons.yes){R("yes")}}}});E=Ext.get(Y.childNodes[2].childNodes[1]);E.enableDisplayMode();M=new Ext.ProgressBar({renderTo:D});D.createChild({cls:"x-clear"})}return V},updateText:function(Y){if(!V.isVisible()&&!J.width){V.setSize(this.maxWidth,100)}F.update(Y?Y+" ":"&#160;");var b=H!=""?(N.getWidth()+N.getMargins("lr")):0,W=F.getWidth()+F.getMargins("lr"),a=V.getFrameWidth("lr"),X=V.body.getFrameWidth("lr"),Z;Z=Math.max(Math.min(J.width||b+W+a+X,J.maxWidth||this.maxWidth),Math.max(J.minWidth||this.minWidth,P||0));if(J.prompt===true){T.setWidth(Z-b-a-X)}if(J.progress===true||J.wait===true){M.setSize(Z-b-a-X)}if(Ext.isIE&&Z==P){Z+=4}F.update(Y||"&#160;");V.setSize(Z,"auto").center();return this},updateProgress:function(W,X,Y){M.updateProgress(W,X);if(Y){this.updateText(Y)}return this},isVisible:function(){return V&&V.isVisible()},hide:function(){var W=V?V.activeGhost:null;if(this.isVisible()||W){V.hide();B();if(W){V.unghost(false,false)}}return this},show:function(Y){if(this.isVisible()){this.hide()}J=Y;var X=this.getDialog(J.title||"&#160;");X.setTitle(J.title||"&#160;");var W=(J.closable!==false&&J.progress!==true&&J.wait!==true);X.tools.close.setDisplayed(W);T=L;J.prompt=J.prompt||(J.multiline?true:false);if(J.prompt){if(J.multiline){L.hide();E.show();E.setHeight(Ext.isNumber(J.multiline)?J.multiline:this.defaultTextHeight);T=E}else{L.show();E.hide()}}else{L.hide();E.hide()}T.dom.value=J.value||"";if(J.prompt){X.focusEl=T}else{var Z=J.buttons;var a=null;if(Z&&Z.ok){a=S["ok"]}else{if(Z&&Z.yes){a=S["yes"]}}if(a){X.focusEl=a}}if(Ext.isDefined(J.iconCls)){X.setIconClass(J.iconCls)}this.setIcon(Ext.isDefined(J.icon)?J.icon:A);P=K(J.buttons);M.setVisible(J.progress===true||J.wait===true);this.updateProgress(0,J.progressText);this.updateText(J.msg);if(J.cls){X.el.addClass(J.cls)}X.proxyDrag=J.proxyDrag===true;X.modal=J.modal!==false;X.mask=J.modal!==false?Q:false;if(!X.isVisible()){document.body.appendChild(V.el.dom);X.setAnimateTarget(J.animEl);X.on("show",function(){if(W===true){X.keyMap.enable()}else{X.keyMap.disable()}},this,{single:true});X.show(J.animEl)}if(J.wait===true){M.wait(J.waitConfig)}return this},setIcon:function(W){if(!V){A=W;return}A=undefined;if(W&&W!=""){N.removeClass("x-hidden");N.replaceClass(H,W);D.addClass("x-dlg-icon");H=W}else{N.replaceClass(H,"x-hidden");D.removeClass("x-dlg-icon");H=""}return this},progress:function(W,Y,X){this.show({title:W,msg:Y,buttons:false,progress:true,closable:false,minWidth:this.minProgressWidth,progressText:X});return this},wait:function(Y,X,W){this.show({title:X,msg:Y,buttons:false,closable:false,wait:true,modal:true,minWidth:this.minProgressWidth,waitConfig:W});return this},alert:function(X,Z,W,Y){this.show({title:X,msg:Z,buttons:this.OK,fn:W,scope:Y,minWidth:this.minWidth});return this},confirm:function(X,Z,W,Y){this.show({title:X,msg:Z,buttons:this.YESNO,fn:W,scope:Y,icon:this.QUESTION,minWidth:this.minWidth});return this},prompt:function(Z,b,Y,a,X,W){this.show({title:Z,msg:b,buttons:this.OKCANCEL,fn:Y,minWidth:this.minPromptWidth,scope:a,prompt:true,multiline:X,value:W});return this},OK:{ok:true},CANCEL:{cancel:true},OKCANCEL:{ok:true,cancel:true},YESNO:{yes:true,no:true},YESNOCANCEL:{yes:true,no:true,cancel:true},INFO:"ext-mb-info",WARNING:"ext-mb-warning",QUESTION:"ext-mb-question",ERROR:"ext-mb-error",defaultTextHeight:75,maxWidth:600,minWidth:100,minProgressWidth:250,minPromptWidth:250,buttonText:{ok:"OK",cancel:"Cancel",yes:"Yes",no:"No"}}}();Ext.Msg=Ext.MessageBox;Ext.dd.PanelProxy=Ext.extend(Object,{constructor:function(A,B){this.panel=A;this.id=this.panel.id+"-ddproxy";Ext.apply(this,B)},insertProxy:true,setStatus:Ext.emptyFn,reset:Ext.emptyFn,update:Ext.emptyFn,stop:Ext.emptyFn,sync:Ext.emptyFn,getEl:function(){return this.ghost},getGhost:function(){return this.ghost},getProxy:function(){return this.proxy},hide:function(){if(this.ghost){if(this.proxy){this.proxy.remove();delete this.proxy}this.panel.el.dom.style.display="";this.ghost.remove();delete this.ghost}},show:function(){if(!this.ghost){this.ghost=this.panel.createGhost(this.panel.initialConfig.cls,undefined,Ext.getBody());this.ghost.setXY(this.panel.el.getXY());if(this.insertProxy){this.proxy=this.panel.el.insertSibling({cls:"x-panel-dd-spacer"});this.proxy.setSize(this.panel.getSize())}this.panel.el.dom.style.display="none"}},repair:function(A,C,B){this.hide();if(typeof C=="function"){C.call(B||this)}},moveProxy:function(A,B){if(this.proxy){A.insertBefore(this.proxy.dom,B)}}});Ext.Panel.DD=Ext.extend(Ext.dd.DragSource,{constructor:function(A,D){this.panel=A;this.dragData={panel:A};this.proxy=new Ext.dd.PanelProxy(A,D);Ext.Panel.DD.superclass.constructor.call(this,A.el,D);var B=A.header,C=A.body;if(B){this.setHandleElId(B.id);C=A.header}C.setStyle("cursor","move");this.scroll=false},showFrame:Ext.emptyFn,startDrag:Ext.emptyFn,b4StartDrag:function(A,B){this.proxy.show()},b4MouseDown:function(A){var B=A.getPageX(),C=A.getPageY();this.autoOffset(B,C)},onInitDrag:function(A,B){this.onStartDrag(A,B);return true},createFrame:Ext.emptyFn,getDragEl:function(A){return this.proxy.ghost.dom},endDrag:function(A){this.proxy.hide();this.panel.saveState()},autoOffset:function(A,B){A-=this.startPageX;B-=this.startPageY;this.setDelta(A,B)}});Ext.state.Provider=Ext.extend(Ext.util.Observable,{constructor:function(){this.addEvents("statechange");this.state={};Ext.state.Provider.superclass.constructor.call(this)},get:function(A,B){return typeof this.state[A]=="undefined"?B:this.state[A]},clear:function(A){delete this.state[A];this.fireEvent("statechange",this,A,null)},set:function(A,B){this.state[A]=B;this.fireEvent("statechange",this,A,B)},decodeValue:function(G){var B=/^(a|n|d|b|s|o|e)\:(.*)$/,C=B.exec(unescape(G)),A,F,D,E;if(!C||!C[1]){return}F=C[1];D=C[2];switch(F){case"e":return null;case"n":return parseFloat(D);case"d":return new Date(Date.parse(D));case"b":return(D=="1");case"a":A=[];if(D!=""){Ext.each(D.split("^"),function(H){A.push(this.decodeValue(H))},this)}return A;case"o":A={};if(D!=""){Ext.each(D.split("^"),function(H){E=H.split("=");A[E[0]]=this.decodeValue(E[1])},this)}return A;default:return D}},encodeValue:function(D){var F,C="",B=0,E,A;if(D==null){return"e:1"}else{if(typeof D=="number"){F="n:"+D}else{if(typeof D=="boolean"){F="b:"+(D?"1":"0")}else{if(Ext.isDate(D)){F="d:"+D.toGMTString()}else{if(Ext.isArray(D)){for(E=D.length;B<E;B++){C+=this.encodeValue(D[B]);if(B!=E-1){C+="^"}}F="a:"+C}else{if(typeof D=="object"){for(A in D){if(typeof D[A]!="function"&&D[A]!==undefined){C+=A+"="+this.encodeValue(D[A])+"^"}}F="o:"+C.substring(0,C.length-1)}else{F="s:"+D}}}}}}return escape(F)}});Ext.state.Manager=function(){var A=new Ext.state.Provider();return{setProvider:function(B){A=B},get:function(B,C){return A.get(B,C)},set:function(B,C){A.set(B,C)},clear:function(B){A.clear(B)},getProvider:function(){return A}}}();Ext.state.CookieProvider=Ext.extend(Ext.state.Provider,{constructor:function(A){Ext.state.CookieProvider.superclass.constructor.call(this);this.path="/";this.expires=new Date(new Date().getTime()+(1000*60*60*24*7));this.domain=null;this.secure=false;Ext.apply(this,A);this.state=this.readCookies()},set:function(A,B){if(typeof B=="undefined"||B===null){this.clear(A);return}this.setCookie(A,B);Ext.state.CookieProvider.superclass.set.call(this,A,B)},clear:function(A){this.clearCookie(A);Ext.state.CookieProvider.superclass.clear.call(this,A)},readCookies:function(){var B={},E=document.cookie+";",F=/\s?(.*?)=(.*?);/g,C,D,A;while((C=F.exec(E))!=null){D=C[1];A=C[2];if(D&&D.substring(0,3)=="ys-"){B[D.substr(3)]=this.decodeValue(A)}}return B},setCookie:function(A,B){document.cookie="ys-"+A+"="+this.encodeValue(B)+((this.expires==null)?"":("; expires="+this.expires.toGMTString()))+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")},clearCookie:function(A){document.cookie="ys-"+A+"=null; expires=Thu, 01-Jan-70 00:00:01 GMT"+((this.path==null)?"":("; path="+this.path))+((this.domain==null)?"":("; domain="+this.domain))+((this.secure==true)?"; secure":"")}});Ext.DataView=Ext.extend(Ext.BoxComponent,{selectedClass:"x-view-selected",emptyText:"",deferEmptyText:true,trackOver:false,blockRefresh:false,last:false,initComponent:function(){Ext.DataView.superclass.initComponent.call(this);if(Ext.isString(this.tpl)||Ext.isArray(this.tpl)){this.tpl=new Ext.XTemplate(this.tpl)}this.addEvents("beforeclick","click","mouseenter","mouseleave","containerclick","dblclick","contextmenu","containercontextmenu","selectionchange","beforeselect");this.store=Ext.StoreMgr.lookup(this.store);this.all=new Ext.CompositeElementLite();this.selected=new Ext.CompositeElementLite()},afterRender:function(){Ext.DataView.superclass.afterRender.call(this);this.mon(this.getTemplateTarget(),{"click":this.onClick,"dblclick":this.onDblClick,"contextmenu":this.onContextMenu,scope:this});if(this.overClass||this.trackOver){this.mon(this.getTemplateTarget(),{"mouseover":this.onMouseOver,"mouseout":this.onMouseOut,scope:this})}if(this.store){this.bindStore(this.store,true)}},refresh:function(){this.clearSelections(false,true);var A=this.getTemplateTarget(),B=this.store.getRange();A.update("");if(B.length<1){if(!this.deferEmptyText||this.hasSkippedEmptyText){A.update(this.emptyText)}this.all.clear()}else{this.tpl.overwrite(A,this.collectData(B,0));this.all.fill(Ext.query(this.itemSelector,A.dom));this.updateIndexes(0)}this.hasSkippedEmptyText=true},getTemplateTarget:function(){return this.el},prepareData:function(A){return A},collectData:function(B,D){var A=[],C=0,E=B.length;for(;C<E;C++){A[A.length]=this.prepareData(B[C].data,D+C,B[C])}return A},bufferRender:function(A,C){var B=document.createElement("div");this.tpl.overwrite(B,this.collectData(A,C));return Ext.query(this.itemSelector,B)},onUpdate:function(A,D){var F=this.store.indexOf(D);if(F>-1){var E=this.isSelected(F),B=this.all.elements[F],C=this.bufferRender([D],F)[0];this.all.replaceElement(F,C,true);if(E){this.selected.replaceElement(B,C);this.all.item(F).addClass(this.selectedClass)}this.updateIndexes(F,F)}},onAdd:function(A,B,E){if(this.all.getCount()===0){this.refresh();return}var D=this.bufferRender(B,E),C,F=this.all.elements;if(E<this.all.getCount()){C=this.all.item(E).insertSibling(D,"before",true);F.splice.apply(F,[E,0].concat(D))}else{C=this.all.last().insertSibling(D,"after",true);F.push.apply(F,D)}this.updateIndexes(E)},onRemove:function(A,B,C){this.deselect(C);this.all.removeElement(C,true);this.updateIndexes(C);if(this.store.getCount()===0){this.refresh()}},refreshNode:function(A){this.onUpdate(this.store,this.store.getAt(A))},updateIndexes:function(C,D){var A=this.all.elements;C=C||0;D=D||((D===0)?0:(A.length-1));for(var B=C;B<=D;B++){A[B].viewIndex=B}},getStore:function(){return this.store},bindStore:function(A,B){if(!B&&this.store){if(A!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("datachanged",this.onDataChanged,this);this.store.un("add",this.onAdd,this);this.store.un("remove",this.onRemove,this);this.store.un("update",this.onUpdate,this);this.store.un("clear",this.refresh,this)}if(!A){this.store=null}}if(A){A=Ext.StoreMgr.lookup(A);A.on({scope:this,beforeload:this.onBeforeLoad,datachanged:this.onDataChanged,add:this.onAdd,remove:this.onRemove,update:this.onUpdate,clear:this.refresh})}this.store=A;if(A){this.refresh()}},onDataChanged:function(){if(this.blockRefresh!==true){this.refresh.apply(this,arguments)}},findItemFromChild:function(A){return Ext.fly(A).findParent(this.itemSelector,this.getTemplateTarget())},onClick:function(A){var B=A.getTarget(this.itemSelector,this.getTemplateTarget()),C;if(B){C=this.indexOf(B);if(this.onItemClick(B,C,A)!==false){this.fireEvent("click",this,C,B,A)}}else{if(this.fireEvent("containerclick",this,A)!==false){this.onContainerClick(A)}}},onContainerClick:function(A){this.clearSelections()},onContextMenu:function(A){var B=A.getTarget(this.itemSelector,this.getTemplateTarget());if(B){this.fireEvent("contextmenu",this,this.indexOf(B),B,A)}else{this.fireEvent("containercontextmenu",this,A)}},onDblClick:function(A){var B=A.getTarget(this.itemSelector,this.getTemplateTarget());if(B){this.fireEvent("dblclick",this,this.indexOf(B),B,A)}},onMouseOver:function(A){var B=A.getTarget(this.itemSelector,this.getTemplateTarget());if(B&&B!==this.lastItem){this.lastItem=B;Ext.fly(B).addClass(this.overClass);this.fireEvent("mouseenter",this,this.indexOf(B),B,A)}},onMouseOut:function(A){if(this.lastItem){if(!A.within(this.lastItem,true,true)){Ext.fly(this.lastItem).removeClass(this.overClass);this.fireEvent("mouseleave",this,this.indexOf(this.lastItem),this.lastItem,A);delete this.lastItem}}},onItemClick:function(B,C,A){if(this.fireEvent("beforeclick",this,C,B,A)===false){return false}if(this.multiSelect){this.doMultiSelection(B,C,A);A.preventDefault()}else{if(this.singleSelect){this.doSingleSelection(B,C,A);A.preventDefault()}}return true},doSingleSelection:function(B,C,A){if(A.ctrlKey&&this.isSelected(C)){this.deselect(C)}else{this.select(C,false)}},doMultiSelection:function(B,C,A){if(A.shiftKey&&this.last!==false){var D=this.last;this.selectRange(D,C,A.ctrlKey);this.last=D}else{if((A.ctrlKey||this.simpleSelect)&&this.isSelected(C)){this.deselect(C)}else{this.select(C,A.ctrlKey||A.shiftKey||this.simpleSelect)}}},getSelectionCount:function(){return this.selected.getCount()},getSelectedNodes:function(){return this.selected.elements},getSelectedIndexes:function(){var B=[],D=this.selected.elements,A=0,C=D.length;for(;A<C;A++){B.push(D[A].viewIndex)}return B},getSelectedRecords:function(){return this.getRecords(this.selected.elements)},getRecords:function(C){var B=[],A=0,D=C.length;for(;A<D;A++){B[B.length]=this.store.getAt(C[A].viewIndex)}return B},getRecord:function(A){return this.store.getAt(A.viewIndex)},clearSelections:function(B,A){if((this.multiSelect||this.singleSelect)&&this.selected.getCount()>0){if(!A){this.selected.removeClass(this.selectedClass)}this.selected.clear();this.last=false;if(!B){this.fireEvent("selectionchange",this,this.selected.elements)}}},isSelected:function(A){return this.selected.contains(this.getNode(A))},deselect:function(A){if(this.isSelected(A)){A=this.getNode(A);this.selected.removeElement(A);if(this.last==A.viewIndex){this.last=false}Ext.fly(A).removeClass(this.selectedClass);this.fireEvent("selectionchange",this,this.selected.elements)}},select:function(A,F,C){if(Ext.isArray(A)){if(!F){this.clearSelections(true)}for(var B=0,E=A.length;B<E;B++){this.select(A[B],true,true)}if(!C){this.fireEvent("selectionchange",this,this.selected.elements)}}else{var D=this.getNode(A);if(!F){this.clearSelections(true)}if(D&&!this.isSelected(D)){if(this.fireEvent("beforeselect",this,D,this.selected.elements)!==false){Ext.fly(D).addClass(this.selectedClass);this.selected.add(D);this.last=D.viewIndex;if(!C){this.fireEvent("selectionchange",this,this.selected.elements)}}}}},selectRange:function(B,A,C){if(!C){this.clearSelections(true)}this.select(this.getNodes(B,A),true)},getNode:function(A){if(Ext.isString(A)){return document.getElementById(A)}else{if(Ext.isNumber(A)){return this.all.elements[A]}else{if(A instanceof Ext.data.Record){var B=this.store.indexOf(A);return this.all.elements[B]}}}return A},getNodes:function(E,D){var A=this.all.elements,C=[],B;E=E||0;D=!Ext.isDefined(D)?Math.max(A.length-1,0):D;if(E<=D){for(B=E;B<=D&&A[B];B++){C.push(A[B])}}else{for(B=E;B>=D&&A[B];B--){C.push(A[B])}}return C},indexOf:function(A){A=this.getNode(A);if(Ext.isNumber(A.viewIndex)){return A.viewIndex}return this.all.indexOf(A)},onBeforeLoad:function(){if(this.loadingText){this.clearSelections(false,true);this.getTemplateTarget().update('<div class="loading-indicator">'+this.loadingText+"</div>");this.all.clear()}},onDestroy:function(){this.all.clear();this.selected.clear();Ext.DataView.superclass.onDestroy.call(this);this.bindStore(null)}});Ext.DataView.prototype.setStore=Ext.DataView.prototype.bindStore;Ext.reg("dataview",Ext.DataView);Ext.list.ListView=Ext.extend(Ext.DataView,{itemSelector:"dl",selectedClass:"x-list-selected",overClass:"x-list-over",scrollOffset:undefined,columnResize:true,columnSort:true,maxColumnWidth:Ext.isIE?99:100,initComponent:function(){if(this.columnResize){this.colResizer=new Ext.list.ColumnResizer(this.colResizer);this.colResizer.init(this)}if(this.columnSort){this.colSorter=new Ext.list.Sorter(this.columnSort);this.colSorter.init(this)}if(!this.internalTpl){this.internalTpl=new Ext.XTemplate('<div class="x-list-header"><div class="x-list-header-inner">','<tpl for="columns">','<div style="width:{[values.width*100]}%;text-align:{align};"><em unselectable="on" id="',this.id,'-xlhd-{#}">',"{header}","</em></div>","</tpl>",'<div class="x-clear"></div>',"</div></div>",'<div class="x-list-body"><div class="x-list-body-inner">',"</div></div>")}if(!this.tpl){this.tpl=new Ext.XTemplate('<tpl for="rows">',"<dl>",'<tpl for="parent.columns">','<dt style="width:{[values.width*100]}%;text-align:{align};">','<em unselectable="on"<tpl if="cls"> class="{cls}</tpl>">',"{[values.tpl.apply(parent)]}","</em></dt>","</tpl>",'<div class="x-clear"></div>',"</dl>","</tpl>")}var B=this.columns,D=0,G=0,A=B.length,E=[];for(var H=0;H<A;H++){var J=B[H];if(!J.isColumn){J.xtype=J.xtype?(/^lv/.test(J.xtype)?J.xtype:"lv"+J.xtype):"lvcolumn";J=Ext.create(J)}if(J.width){D+=J.width*100;if(D>this.maxColumnWidth){J.width-=(D-this.maxColumnWidth)/100}G++}E.push(J)}B=this.columns=E;if(G<A){var C=A-G;if(D<this.maxColumnWidth){var I=((this.maxColumnWidth-D)/C)/100;for(var F=0;F<A;F++){var J=B[F];if(!J.width){J.width=I}}}}Ext.list.ListView.superclass.initComponent.call(this)},onRender:function(){this.autoEl={cls:"x-list-wrap"};Ext.list.ListView.superclass.onRender.apply(this,arguments);this.internalTpl.overwrite(this.el,{columns:this.columns});this.innerBody=Ext.get(this.el.dom.childNodes[1].firstChild);this.innerHd=Ext.get(this.el.dom.firstChild.firstChild);if(this.hideHeaders){this.el.dom.firstChild.style.display="none"}},getTemplateTarget:function(){return this.innerBody},collectData:function(){var A=Ext.list.ListView.superclass.collectData.apply(this,arguments);return{columns:this.columns,rows:A}},verifyInternalSize:function(){if(this.lastSize){this.onResize(this.lastSize.width,this.lastSize.height)}},onResize:function(D,A){var B=this.innerBody.dom,C=this.innerHd.dom,E=D-Ext.num(this.scrollOffset,Ext.getScrollBarWidth())+"px",F;if(!B){return}F=B.parentNode;if(Ext.isNumber(D)){if(this.reserveScrollOffset||((F.offsetWidth-F.clientWidth)>10)){B.style.width=E;C.style.width=E}else{B.style.width=D+"px";C.style.width=D+"px";setTimeout(function(){if((F.offsetWidth-F.clientWidth)>10){B.style.width=E;C.style.width=E}},10)}}if(Ext.isNumber(A)){F.style.height=Math.max(0,A-C.parentNode.offsetHeight)+"px"}},updateIndexes:function(){Ext.list.ListView.superclass.updateIndexes.apply(this,arguments);this.verifyInternalSize()},findHeaderIndex:function(C){C=C.dom||C;var B=C.parentNode,E=B.parentNode.childNodes,A=0,D;for(;D=E[A];A++){if(D==B){return A}}return -1},setHdWidths:function(){var C=this.innerHd.dom.getElementsByTagName("div"),A=0,D=this.columns,B=D.length;for(;A<B;A++){C[A].style.width=(D[A].width*100)+"%"}}});Ext.reg("listview",Ext.list.ListView);Ext.ListView=Ext.list.ListView;Ext.list.Column=Ext.extend(Object,{isColumn:true,align:"left",header:"",width:null,cls:"",constructor:function(A){if(!A.tpl){A.tpl=new Ext.XTemplate("{"+A.dataIndex+"}")}else{if(Ext.isString(A.tpl)){A.tpl=new Ext.XTemplate(A.tpl)}}Ext.apply(this,A)}});Ext.reg("lvcolumn",Ext.list.Column);Ext.list.NumberColumn=Ext.extend(Ext.list.Column,{format:"0,000.00",constructor:function(A){A.tpl=A.tpl||new Ext.XTemplate("{"+A.dataIndex+':number("'+(A.format||this.format)+'")}');Ext.list.NumberColumn.superclass.constructor.call(this,A)}});Ext.reg("lvnumbercolumn",Ext.list.NumberColumn);Ext.list.DateColumn=Ext.extend(Ext.list.Column,{format:"m/d/Y",constructor:function(A){A.tpl=A.tpl||new Ext.XTemplate("{"+A.dataIndex+':date("'+(A.format||this.format)+'")}');Ext.list.DateColumn.superclass.constructor.call(this,A)}});Ext.reg("lvdatecolumn",Ext.list.DateColumn);Ext.list.BooleanColumn=Ext.extend(Ext.list.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(A){A.tpl=A.tpl||new Ext.XTemplate("{"+A.dataIndex+":this.format}");var B=this.trueText,D=this.falseText,C=this.undefinedText;A.tpl.format=function(E){if(E===undefined){return C}if(!E||E==="false"){return D}return B};Ext.list.DateColumn.superclass.constructor.call(this,A)}});Ext.reg("lvbooleancolumn",Ext.list.BooleanColumn);Ext.list.ColumnResizer=Ext.extend(Ext.util.Observable,{minPct:0.05,constructor:function(A){Ext.apply(this,A);Ext.list.ColumnResizer.superclass.constructor.call(this)},init:function(A){this.view=A;A.on("render",this.initEvents,this)},initEvents:function(A){A.mon(A.innerHd,"mousemove",this.handleHdMove,this);this.tracker=new Ext.dd.DragTracker({onBeforeStart:this.onBeforeStart.createDelegate(this),onStart:this.onStart.createDelegate(this),onDrag:this.onDrag.createDelegate(this),onEnd:this.onEnd.createDelegate(this),tolerance:3,autoStart:300});this.tracker.initEl(A.innerHd);A.on("beforedestroy",this.tracker.destroy,this.tracker)},handleHdMove:function(A,C){var B=5,F=A.getPageX(),G=A.getTarget("em",3,true);if(G){var H=G.getRegion(),E=G.dom.style,D=G.dom.parentNode;if(F-H.left<=B&&D!=D.parentNode.firstChild){this.activeHd=Ext.get(D.previousSibling.firstChild);E.cursor=Ext.isWebKit?"e-resize":"col-resize"}else{if(H.right-F<=B&&D!=D.parentNode.lastChild.previousSibling){this.activeHd=G;E.cursor=Ext.isWebKit?"w-resize":"col-resize"}else{delete this.activeHd;E.cursor=""}}}},onBeforeStart:function(A){this.dragHd=this.activeHd;return !!this.dragHd},onStart:function(A){var C=this,E=C.view,B=C.dragHd,D=C.tracker.getXY()[0];C.proxy=E.el.createChild({cls:"x-list-resizer"});C.dragX=B.getX();C.headerIndex=E.findHeaderIndex(B);C.headersDisabled=E.disableHeaders;E.disableHeaders=true;C.proxy.setHeight(E.el.getHeight());C.proxy.setX(C.dragX);C.proxy.setWidth(D-C.dragX);this.setBoundaries()},setBoundaries:function(K){var A=this.view,C=this.headerIndex,G=A.innerHd.getWidth(),K=A.innerHd.getX(),D=Math.ceil(G*this.minPct),F=G-D,E=A.columns.length,I=A.innerHd.select("em",true),H=D+K,B=F+K,J;if(E==2){this.minX=H;this.maxX=B}else{J=I.item(C+2);this.minX=I.item(C).getX()+D;this.maxX=J?J.getX()-D:B;if(C==0){this.minX=H}else{if(C==E-2){this.maxX=B}}}},onDrag:function(A){var B=this,C=B.tracker.getXY()[0].constrain(B.minX,B.maxX);B.proxy.setWidth(C-this.dragX)},onEnd:function(F){var K=this.proxy.getWidth(),C=this.headerIndex,A=this.view,E=A.columns,I=A.innerHd.getWidth(),G=Math.ceil(K*A.maxColumnWidth/I)/100,H=this.headersDisabled,B=E[C],D=E[C+1],J=B.width+D.width;this.proxy.remove();B.width=G;D.width=J-G;delete this.dragHd;A.setHdWidths();A.refresh();setTimeout(function(){A.disableHeaders=H},100)}});Ext.ListView.ColumnResizer=Ext.list.ColumnResizer;Ext.list.Sorter=Ext.extend(Ext.util.Observable,{sortClasses:["sort-asc","sort-desc"],constructor:function(A){Ext.apply(this,A);Ext.list.Sorter.superclass.constructor.call(this)},init:function(A){this.view=A;A.on("render",this.initEvents,this)},initEvents:function(A){A.mon(A.innerHd,"click",this.onHdClick,this);A.innerHd.setStyle("cursor","pointer");A.mon(A.store,"datachanged",this.updateSortState,this);this.updateSortState.defer(10,this,[A.store])},updateSortState:function(A){var G=A.getSortState();if(!G){return}this.sortState=G;var D=this.view.columns,C=-1;for(var B=0,E=D.length;B<E;B++){if(D[B].dataIndex==G.field){C=B;break}}if(C!=-1){var F=G.direction;this.updateSortIcon(C,F)}},updateSortIcon:function(B,A){var D=this.sortClasses;var C=this.view.innerHd.select("em").removeClass(D);C.item(B).addClass(D[A=="DESC"?1:0])},onHdClick:function(A){var C=A.getTarget("em",3);if(C&&!this.view.disableHeaders){var B=this.view.findHeaderIndex(C);this.view.store.sort(this.view.columns[B].dataIndex)}}});Ext.ListView.Sorter=Ext.list.Sorter;Ext.TabPanel=Ext.extend(Ext.Panel,{deferredRender:true,tabWidth:120,minTabWidth:30,resizeTabs:false,enableTabScroll:false,scrollIncrement:0,scrollRepeatInterval:400,scrollDuration:0.35,animScroll:true,tabPosition:"top",baseCls:"x-tab-panel",autoTabs:false,autoTabSelector:"div.x-tab",activeTab:undefined,tabMargin:2,plain:false,wheelIncrement:20,idDelimiter:"__",itemCls:"x-tab-item",elements:"body",headerAsText:false,frame:false,hideBorders:true,initComponent:function(){this.frame=false;Ext.TabPanel.superclass.initComponent.call(this);this.addEvents("beforetabchange","tabchange","contextmenu");this.setLayout(new Ext.layout.CardLayout(Ext.apply({layoutOnCardChange:this.layoutOnTabChange,deferredRender:this.deferredRender},this.layoutConfig)));if(this.tabPosition=="top"){this.elements+=",header";this.stripTarget="header"}else{this.elements+=",footer";this.stripTarget="footer"}if(!this.stack){this.stack=Ext.TabPanel.AccessStack()}this.initItems()},onRender:function(D,C){Ext.TabPanel.superclass.onRender.call(this,D,C);if(this.plain){var B=this.tabPosition=="top"?"header":"footer";this[B].addClass("x-tab-panel-"+B+"-plain")}var A=this[this.stripTarget];this.stripWrap=A.createChild({cls:"x-tab-strip-wrap",cn:{tag:"ul",cls:"x-tab-strip x-tab-strip-"+this.tabPosition}});var E=(this.tabPosition=="bottom"?this.stripWrap:null);A.createChild({cls:"x-tab-strip-spacer"},E);this.strip=new Ext.Element(this.stripWrap.dom.firstChild);this.edge=this.strip.createChild({tag:"li",cls:"x-tab-edge",cn:[{tag:"span",cls:"x-tab-strip-text",cn:"&#160;"}]});this.strip.createChild({cls:"x-clear"});this.body.addClass("x-tab-panel-body-"+this.tabPosition);if(!this.itemTpl){var F=new Ext.Template('<li class="{cls}" id="{id}"><a class="x-tab-strip-close"></a>','<a class="x-tab-right" href="#"><em class="x-tab-left">','<span class="x-tab-strip-inner"><span class="x-tab-strip-text {iconCls}">{text}</span></span>',"</em></a></li>");F.disableFormats=true;F.compile();Ext.TabPanel.prototype.itemTpl=F}this.items.each(this.initTab,this)},afterRender:function(){Ext.TabPanel.superclass.afterRender.call(this);if(this.autoTabs){this.readTabs(false)}if(this.activeTab!==undefined){var A=Ext.isObject(this.activeTab)?this.activeTab:this.items.get(this.activeTab);delete this.activeTab;this.setActiveTab(A)}},initEvents:function(){Ext.TabPanel.superclass.initEvents.call(this);this.mon(this.strip,{scope:this,mousedown:this.onStripMouseDown,contextmenu:this.onStripContextMenu});if(this.enableTabScroll){this.mon(this.strip,"mousewheel",this.onWheel,this)}},findTargets:function(A){var B=null,C=A.getTarget("li:not(.x-tab-edge)",this.strip);if(C){B=this.getComponent(C.id.split(this.idDelimiter)[1]);if(B.disabled){return{close:null,item:null,el:null}}}return{close:A.getTarget(".x-tab-strip-close",this.strip),item:B,el:C}},onStripMouseDown:function(A){if(A.button!==0){return}A.preventDefault();var B=this.findTargets(A);if(B.close){if(B.item.fireEvent("beforeclose",B.item)!==false){B.item.fireEvent("close",B.item);this.remove(B.item)}return}if(B.item&&B.item!=this.activeTab){this.setActiveTab(B.item)}},onStripContextMenu:function(A){A.preventDefault();var B=this.findTargets(A);if(B.item){this.fireEvent("contextmenu",this,B.item,A)}},readTabs:function(B){if(B===true){this.items.each(function(G){this.remove(G)},this)}var D=this.el.query(this.autoTabSelector);for(var A=0,E=D.length;A<E;A++){var C=D[A],F=C.getAttribute("title");C.removeAttribute("title");this.add({title:F,contentEl:C})}},initTab:function(D,F){var E=this.strip.dom.childNodes[F],B=this.getTemplateArgs(D),A=E?this.itemTpl.insertBefore(E,B):this.itemTpl.append(this.strip,B),C="x-tab-strip-over",G=Ext.get(A);G.hover(function(){if(!D.disabled){G.addClass(C)}},function(){G.removeClass(C)});if(D.tabTip){G.child("span.x-tab-strip-text",true).qtip=D.tabTip}D.tabEl=A;G.select("a").on("click",function(H){if(!H.getPageX()){this.onStripMouseDown(H)}},this,{preventDefault:true});D.on({scope:this,disable:this.onItemDisabled,enable:this.onItemEnabled,titlechange:this.onItemTitleChanged,iconchange:this.onItemIconChanged,beforeshow:this.onBeforeShowItem})},getTemplateArgs:function(B){var A=B.closable?"x-tab-strip-closable":"";if(B.disabled){A+=" x-item-disabled"}if(B.iconCls){A+=" x-tab-with-icon"}if(B.tabCls){A+=" "+B.tabCls}return{id:this.id+this.idDelimiter+B.getItemId(),text:B.title,cls:A,iconCls:B.iconCls||""}},onAdd:function(B){Ext.TabPanel.superclass.onAdd.call(this,B);if(this.rendered){var A=this.items;this.initTab(B,A.indexOf(B));this.delegateUpdates()}},onBeforeAdd:function(B){var C=B.events?(this.items.containsKey(B.getItemId())?B:null):this.items.get(B);if(C){this.setActiveTab(B);return false}Ext.TabPanel.superclass.onBeforeAdd.apply(this,arguments);var A=B.elements;B.elements=A?A.replace(",header",""):A;B.border=(B.border===true)},onRemove:function(C){var A=Ext.get(C.tabEl);if(A){A.select("a").removeAllListeners();Ext.destroy(A)}Ext.TabPanel.superclass.onRemove.call(this,C);this.stack.remove(C);delete C.tabEl;C.un("disable",this.onItemDisabled,this);C.un("enable",this.onItemEnabled,this);C.un("titlechange",this.onItemTitleChanged,this);C.un("iconchange",this.onItemIconChanged,this);C.un("beforeshow",this.onBeforeShowItem,this);if(C==this.activeTab){var B=this.stack.next();if(B){this.setActiveTab(B)}else{if(this.items.getCount()>0){this.setActiveTab(0)}else{this.setActiveTab(null)}}}if(!this.destroying){this.delegateUpdates()}},onBeforeShowItem:function(A){if(A!=this.activeTab){this.setActiveTab(A);return false}},onItemDisabled:function(B){var A=this.getTabEl(B);if(A){Ext.fly(A).addClass("x-item-disabled")}this.stack.remove(B)},onItemEnabled:function(B){var A=this.getTabEl(B);if(A){Ext.fly(A).removeClass("x-item-disabled")}},onItemTitleChanged:function(B){var A=this.getTabEl(B);if(A){Ext.fly(A).child("span.x-tab-strip-text",true).innerHTML=B.title}},onItemIconChanged:function(B,D,C){var A=this.getTabEl(B);if(A){A=Ext.get(A);A.child("span.x-tab-strip-text").replaceClass(C,D);A[Ext.isEmpty(D)?"removeClass":"addClass"]("x-tab-with-icon")}},getTabEl:function(A){var B=this.getComponent(A);return B?B.tabEl:null},onResize:function(){Ext.TabPanel.superclass.onResize.apply(this,arguments);this.delegateUpdates()},beginUpdate:function(){this.suspendUpdates=true},endUpdate:function(){this.suspendUpdates=false;this.delegateUpdates()},hideTabStripItem:function(B){B=this.getComponent(B);var A=this.getTabEl(B);if(A){A.style.display="none";this.delegateUpdates()}this.stack.remove(B)},unhideTabStripItem:function(B){B=this.getComponent(B);var A=this.getTabEl(B);if(A){A.style.display="";this.delegateUpdates()}},delegateUpdates:function(){var A=this.rendered;if(this.suspendUpdates){return}if(this.resizeTabs&&A){this.autoSizeTabs()}if(this.enableTabScroll&&A){this.autoScrollTabs()}},autoSizeTabs:function(){var C=this.items.length,K=this.tabPosition!="bottom"?"header":"footer",H=this[K].dom.offsetWidth,L=this[K].dom.clientWidth;if(!this.resizeTabs||C<1||!L){return}var A=Math.max(Math.min(Math.floor((L-4)/C)-this.tabMargin,this.tabWidth),this.minTabWidth);this.lastTabWidth=A;var I=this.strip.query("li:not(.x-tab-edge)");for(var F=0,J=I.length;F<J;F++){var E=I[F],B=Ext.fly(E).child(".x-tab-strip-inner",true),D=E.offsetWidth,G=B.offsetWidth;B.style.width=(A-(D-G))+"px"}},adjustBodyWidth:function(A){if(this.header){this.header.setWidth(A)}if(this.footer){this.footer.setWidth(A)}return A},setActiveTab:function(B){B=this.getComponent(B);if(this.fireEvent("beforetabchange",this,B,this.activeTab)===false){return}if(!this.rendered){this.activeTab=B;return}if(this.activeTab!=B){if(this.activeTab){var C=this.getTabEl(this.activeTab);if(C){Ext.fly(C).removeClass("x-tab-strip-active")}}this.activeTab=B;if(B){var A=this.getTabEl(B);Ext.fly(A).addClass("x-tab-strip-active");this.stack.add(B);this.layout.setActiveItem(B);this.delegateUpdates();if(this.scrolling){this.scrollToTab(B,this.animScroll)}}this.fireEvent("tabchange",this,B)}},getActiveTab:function(){return this.activeTab||null},getItem:function(A){return this.getComponent(A)},autoScrollTabs:function(){this.pos=this.tabPosition=="bottom"?this.footer:this.header;var A=this.items.length,F=this.pos.dom.offsetWidth,B=this.pos.dom.clientWidth,D=this.stripWrap,C=D.dom,H=C.offsetWidth,E=this.getScrollPos(),G=this.edge.getOffsetsTo(this.stripWrap)[0]+E;if(!this.enableTabScroll||H<20){return}if(A==0||G<=B){C.scrollLeft=0;D.setWidth(B);if(this.scrolling){this.scrolling=false;this.pos.removeClass("x-tab-scrolling");this.scrollLeft.hide();this.scrollRight.hide();if(Ext.isAir||Ext.isWebKit){C.style.marginLeft="";C.style.marginRight=""}}}else{if(!this.scrolling){this.pos.addClass("x-tab-scrolling");if(Ext.isAir||Ext.isWebKit){C.style.marginLeft="18px";C.style.marginRight="18px"}}B-=D.getMargins("lr");D.setWidth(B>20?B:20);if(!this.scrolling){if(!this.scrollLeft){this.createScrollers()}else{this.scrollLeft.show();this.scrollRight.show()}}this.scrolling=true;if(E>(G-B)){C.scrollLeft=G-B}else{this.scrollToTab(this.activeTab,false)}this.updateScrollButtons()}},createScrollers:function(){this.pos.addClass("x-tab-scrolling-"+this.tabPosition);var A=this.stripWrap.dom.offsetHeight;var B=this.pos.insertFirst({cls:"x-tab-scroller-left"});B.setHeight(A);B.addClassOnOver("x-tab-scroller-left-over");this.leftRepeater=new Ext.util.ClickRepeater(B,{interval:this.scrollRepeatInterval,handler:this.onScrollLeft,scope:this});this.scrollLeft=B;var C=this.pos.insertFirst({cls:"x-tab-scroller-right"});C.setHeight(A);C.addClassOnOver("x-tab-scroller-right-over");this.rightRepeater=new Ext.util.ClickRepeater(C,{interval:this.scrollRepeatInterval,handler:this.onScrollRight,scope:this});this.scrollRight=C},getScrollWidth:function(){return this.edge.getOffsetsTo(this.stripWrap)[0]+this.getScrollPos()},getScrollPos:function(){return parseInt(this.stripWrap.dom.scrollLeft,10)||0},getScrollArea:function(){return parseInt(this.stripWrap.dom.clientWidth,10)||0},getScrollAnim:function(){return{duration:this.scrollDuration,callback:this.updateScrollButtons,scope:this}},getScrollIncrement:function(){return this.scrollIncrement||(this.resizeTabs?this.lastTabWidth+2:100)},scrollToTab:function(F,D){if(!F){return}var A=this.getTabEl(F),E=this.getScrollPos(),G=this.getScrollArea(),C=Ext.fly(A).getOffsetsTo(this.stripWrap)[0]+E,B=C+A.offsetWidth;if(C<E){this.scrollTo(C,D)}else{if(B>(E+G)){this.scrollTo(B-G,D)}}},scrollTo:function(B,A){this.stripWrap.scrollTo("left",B,A?this.getScrollAnim():false);if(!A){this.updateScrollButtons()}},onWheel:function(C){var B=C.getWheelDelta()*this.wheelIncrement*-1;C.stopEvent();var E=this.getScrollPos(),D=E+B,A=this.getScrollWidth()-this.getScrollArea();var F=Math.max(0,Math.min(A,D));if(F!=E){this.scrollTo(F,false)}},onScrollRight:function(){var A=this.getScrollWidth()-this.getScrollArea(),C=this.getScrollPos(),B=Math.min(A,C+this.getScrollIncrement());if(B!=C){this.scrollTo(B,this.animScroll)}},onScrollLeft:function(){var B=this.getScrollPos(),A=Math.max(0,B-this.getScrollIncrement());if(A!=B){this.scrollTo(A,this.animScroll)}},updateScrollButtons:function(){var A=this.getScrollPos();this.scrollLeft[A===0?"addClass":"removeClass"]("x-tab-scroller-left-disabled");this.scrollRight[A>=(this.getScrollWidth()-this.getScrollArea())?"addClass":"removeClass"]("x-tab-scroller-right-disabled")},beforeDestroy:function(){Ext.destroy(this.leftRepeater,this.rightRepeater);this.deleteMembers("strip","edge","scrollLeft","scrollRight","stripWrap");this.activeTab=null;Ext.TabPanel.superclass.beforeDestroy.apply(this)}});Ext.reg("tabpanel",Ext.TabPanel);Ext.TabPanel.prototype.activate=Ext.TabPanel.prototype.setActiveTab;Ext.TabPanel.AccessStack=function(){var A=[];return{add:function(B){A.push(B);if(A.length>10){A.shift()}},remove:function(D){var C=[];for(var B=0,E=A.length;B<E;B++){if(A[B]!=D){C.push(A[B])}}A=C},next:function(){return A.pop()}}};Ext.Button=Ext.extend(Ext.BoxComponent,{hidden:false,disabled:false,pressed:false,enableToggle:false,menuAlign:"tl-bl?",type:"button",menuClassTarget:"tr:nth(2)",clickEvent:"click",handleMouseEvents:true,tooltipType:"qtip",buttonSelector:"button:first-child",scale:"small",iconAlign:"left",arrowAlign:"right",initComponent:function(){if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}Ext.Button.superclass.initComponent.call(this);this.addEvents("click","toggle","mouseover","mouseout","menushow","menuhide","menutriggerover","menutriggerout");if(Ext.isString(this.toggleGroup)){this.enableToggle=true}},getTemplateArgs:function(){return[this.type,"x-btn-"+this.scale+" x-btn-icon-"+this.scale+"-"+this.iconAlign,this.getMenuClass(),this.cls,this.id]},setButtonClass:function(){if(this.useSetClass){if(!Ext.isEmpty(this.oldCls)){this.el.removeClass([this.oldCls,"x-btn-pressed"])}this.oldCls=(this.iconCls||this.icon)?(this.text?"x-btn-text-icon":"x-btn-icon"):"x-btn-noicon";this.el.addClass([this.oldCls,this.pressed?"x-btn-pressed":null])}},getMenuClass:function(){return this.menu?(this.arrowAlign!="bottom"?"x-btn-arrow":"x-btn-arrow-bottom"):""},onRender:function(C,A){if(!this.template){if(!Ext.Button.buttonTemplate){Ext.Button.buttonTemplate=new Ext.Template('<table id="{4}" cellspacing="0" class="x-btn {3}"><tbody class="{1}">','<tr><td class="x-btn-tl"><i>&#160;</i></td><td class="x-btn-tc"></td><td class="x-btn-tr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-ml"><i>&#160;</i></td><td class="x-btn-mc"><em class="{2}" unselectable="on"><button type="{0}"></button></em></td><td class="x-btn-mr"><i>&#160;</i></td></tr>','<tr><td class="x-btn-bl"><i>&#160;</i></td><td class="x-btn-bc"></td><td class="x-btn-br"><i>&#160;</i></td></tr>',"</tbody></table>");Ext.Button.buttonTemplate.compile()}this.template=Ext.Button.buttonTemplate}var B,D=this.getTemplateArgs();if(A){B=this.template.insertBefore(A,D,true)}else{B=this.template.append(C,D,true)}this.btnEl=B.child(this.buttonSelector);this.mon(this.btnEl,{scope:this,focus:this.onFocus,blur:this.onBlur});this.initButtonEl(B,this.btnEl);Ext.ButtonToggleMgr.register(this)},initButtonEl:function(B,C){this.el=B;this.setIcon(this.icon);this.setText(this.text);this.setIconClass(this.iconCls);if(Ext.isDefined(this.tabIndex)){C.dom.tabIndex=this.tabIndex}if(this.tooltip){this.setTooltip(this.tooltip,true)}if(this.handleMouseEvents){this.mon(B,{scope:this,mouseover:this.onMouseOver,mousedown:this.onMouseDown})}if(this.menu){this.mon(this.menu,{scope:this,show:this.onMenuShow,hide:this.onMenuHide})}if(this.repeat){var A=new Ext.util.ClickRepeater(B,Ext.isObject(this.repeat)?this.repeat:{});this.mon(A,"click",this.onRepeatClick,this)}else{this.mon(B,this.clickEvent,this.onClick,this)}},afterRender:function(){Ext.Button.superclass.afterRender.call(this);this.useSetClass=true;this.setButtonClass();this.doc=Ext.getDoc();this.doAutoWidth()},setIconClass:function(A){this.iconCls=A;if(this.el){this.btnEl.dom.className="";this.btnEl.addClass(["x-btn-text",A||""]);this.setButtonClass()}return this},setTooltip:function(B,A){if(this.rendered){if(!A){this.clearTip()}if(Ext.isObject(B)){Ext.QuickTips.register(Ext.apply({target:this.btnEl.id},B));this.tooltip=B}else{this.btnEl.dom[this.tooltipType]=B}}else{this.tooltip=B}return this},clearTip:function(){if(Ext.isObject(this.tooltip)){Ext.QuickTips.unregister(this.btnEl)}},beforeDestroy:function(){if(this.rendered){this.clearTip()}if(this.menu&&this.destroyMenu!==false){Ext.destroy(this.btnEl,this.menu)}Ext.destroy(this.repeater)},onDestroy:function(){if(this.rendered){this.doc.un("mouseover",this.monitorMouseOver,this);this.doc.un("mouseup",this.onMouseUp,this);delete this.doc;delete this.btnEl;Ext.ButtonToggleMgr.unregister(this)}Ext.Button.superclass.onDestroy.call(this)},doAutoWidth:function(){if(this.autoWidth!==false&&this.el&&this.text&&this.width===undefined){this.el.setWidth("auto");if(Ext.isIE7&&Ext.isStrict){var A=this.btnEl;if(A&&A.getWidth()>20){A.clip();A.setWidth(Ext.util.TextMetrics.measure(A,this.text).width+A.getFrameWidth("lr"))}}if(this.minWidth){if(this.el.getWidth()<this.minWidth){this.el.setWidth(this.minWidth)}}}},setHandler:function(A,B){this.handler=A;this.scope=B;return this},setText:function(A){this.text=A;if(this.el){this.btnEl.update(A||"&#160;");this.setButtonClass()}this.doAutoWidth();return this},setIcon:function(A){this.icon=A;if(this.el){this.btnEl.setStyle("background-image",A?"url("+A+")":"");this.setButtonClass()}return this},getText:function(){return this.text},toggle:function(B,A){B=B===undefined?!this.pressed:!!B;if(B!=this.pressed){if(this.rendered){this.el[B?"addClass":"removeClass"]("x-btn-pressed")}this.pressed=B;if(!A){this.fireEvent("toggle",this,B);if(this.toggleHandler){this.toggleHandler.call(this.scope||this,this,B)}}}return this},onDisable:function(){this.onDisableChange(true)},onEnable:function(){this.onDisableChange(false)},onDisableChange:function(A){if(this.el){if(!Ext.isIE6||!this.text){this.el[A?"addClass":"removeClass"](this.disabledClass)}this.el.dom.disabled=A}this.disabled=A},showMenu:function(){if(this.rendered&&this.menu){if(this.tooltip){Ext.QuickTips.getQuickTip().cancelShow(this.btnEl)}if(this.menu.isVisible()){this.menu.hide()}this.menu.ownerCt=this;this.menu.show(this.el,this.menuAlign)}return this},hideMenu:function(){if(this.hasVisibleMenu()){this.menu.hide()}return this},hasVisibleMenu:function(){return this.menu&&this.menu.ownerCt==this&&this.menu.isVisible()},onRepeatClick:function(B,A){this.onClick(A)},onClick:function(A){if(A){A.preventDefault()}if(A.button!==0){return}if(!this.disabled){this.doToggle();if(this.menu&&!this.hasVisibleMenu()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("click",this,A);if(this.handler){this.handler.call(this.scope||this,this,A)}}},doToggle:function(){if(this.enableToggle&&(this.allowDepress!==false||!this.pressed)){this.toggle()}},isMenuTriggerOver:function(A,B){return this.menu&&!B},isMenuTriggerOut:function(A,B){return this.menu&&!B},onMouseOver:function(A){if(!this.disabled){var B=A.within(this.el,true);if(!B){this.el.addClass("x-btn-over");if(!this.monitoringMouseOver){this.doc.on("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=true}this.fireEvent("mouseover",this,A)}if(this.isMenuTriggerOver(A,B)){this.fireEvent("menutriggerover",this,this.menu,A)}}},monitorMouseOver:function(A){if(A.target!=this.el.dom&&!A.within(this.el)){if(this.monitoringMouseOver){this.doc.un("mouseover",this.monitorMouseOver,this);this.monitoringMouseOver=false}this.onMouseOut(A)}},onMouseOut:function(A){var B=A.within(this.el)&&A.target!=this.el.dom;this.el.removeClass("x-btn-over");this.fireEvent("mouseout",this,A);if(this.isMenuTriggerOut(A,B)){this.fireEvent("menutriggerout",this,this.menu,A)}},focus:function(){this.btnEl.focus()},blur:function(){this.btnEl.blur()},onFocus:function(A){if(!this.disabled){this.el.addClass("x-btn-focus")}},onBlur:function(A){this.el.removeClass("x-btn-focus")},getClickEl:function(A,B){return this.el},onMouseDown:function(A){if(!this.disabled&&A.button===0){this.getClickEl(A).addClass("x-btn-click");this.doc.on("mouseup",this.onMouseUp,this)}},onMouseUp:function(A){if(A.button===0){this.getClickEl(A,true).removeClass("x-btn-click");this.doc.un("mouseup",this.onMouseUp,this)}},onMenuShow:function(A){if(this.menu.ownerCt==this){this.menu.ownerCt=this;this.ignoreNextClick=0;this.el.addClass("x-btn-menu-active");this.fireEvent("menushow",this,this.menu)}},onMenuHide:function(A){if(this.menu.ownerCt==this){this.el.removeClass("x-btn-menu-active");this.ignoreNextClick=this.restoreClick.defer(250,this);this.fireEvent("menuhide",this,this.menu);delete this.menu.ownerCt}},restoreClick:function(){this.ignoreNextClick=0}});Ext.reg("button",Ext.Button);Ext.ButtonToggleMgr=function(){var A={};function B(F,G){if(G){var C=A[F.toggleGroup];for(var D=0,E=C.length;D<E;D++){if(C[D]!=F){C[D].toggle(false)}}}}return{register:function(D){if(!D.toggleGroup){return}var C=A[D.toggleGroup];if(!C){C=A[D.toggleGroup]=[]}C.push(D);D.on("toggle",B)},unregister:function(D){if(!D.toggleGroup){return}var C=A[D.toggleGroup];if(C){C.remove(D);D.un("toggle",B)}},getPressed:function(D){var C=A[D];if(C){for(var E=0,F=C.length;E<F;E++){if(C[E].pressed===true){return C[E]}}}return null}}}();Ext.SplitButton=Ext.extend(Ext.Button,{arrowSelector:"em",split:true,initComponent:function(){Ext.SplitButton.superclass.initComponent.call(this);this.addEvents("arrowclick")},onRender:function(){Ext.SplitButton.superclass.onRender.apply(this,arguments);if(this.arrowTooltip){this.el.child(this.arrowSelector).dom[this.tooltipType]=this.arrowTooltip}},setArrowHandler:function(A,B){this.arrowHandler=A;this.scope=B},getMenuClass:function(){return"x-btn-split"+(this.arrowAlign=="bottom"?"-bottom":"")},isClickOnArrow:function(C){if(this.arrowAlign!="bottom"){var A=this.el.child("em.x-btn-split");var B=A.getRegion().right-A.getPadding("r");return C.getPageX()>B}else{return C.getPageY()>this.btnEl.getRegion().bottom}},onClick:function(A,B){A.preventDefault();if(!this.disabled){if(this.isClickOnArrow(A)){if(this.menu&&!this.menu.isVisible()&&!this.ignoreNextClick){this.showMenu()}this.fireEvent("arrowclick",this,A);if(this.arrowHandler){this.arrowHandler.call(this.scope||this,this,A)}}else{this.doToggle();this.fireEvent("click",this,A);if(this.handler){this.handler.call(this.scope||this,this,A)}}}},isMenuTriggerOver:function(A){return this.menu&&A.target.tagName==this.arrowSelector},isMenuTriggerOut:function(A,B){return this.menu&&A.target.tagName!=this.arrowSelector}});Ext.reg("splitbutton",Ext.SplitButton);Ext.CycleButton=Ext.extend(Ext.SplitButton,{getItemText:function(A){if(A&&this.showText===true){var B="";if(this.prependText){B+=this.prependText}B+=A.text;return B}return undefined},setActiveItem:function(B,A){if(!Ext.isObject(B)){B=this.menu.getComponent(B)}if(B){if(!this.rendered){this.text=this.getItemText(B);this.iconCls=B.iconCls}else{var C=this.getItemText(B);if(C){this.setText(C)}this.setIconClass(B.iconCls)}this.activeItem=B;if(!B.checked){B.setChecked(true,A)}if(this.forceIcon){this.setIconClass(this.forceIcon)}if(!A){this.fireEvent("change",this,B)}}},getActiveItem:function(){return this.activeItem},initComponent:function(){this.addEvents("change");if(this.changeHandler){this.on("change",this.changeHandler,this.scope||this);delete this.changeHandler}this.itemCount=this.items.length;this.menu={cls:"x-cycle-menu",items:[]};var A=0;Ext.each(this.items,function(C,B){Ext.apply(C,{group:C.group||this.id,itemIndex:B,checkHandler:this.checkHandler,scope:this,checked:C.checked||false});this.menu.items.push(C);if(C.checked){A=B}},this);Ext.CycleButton.superclass.initComponent.call(this);this.on("click",this.toggleSelected,this);this.setActiveItem(A,true)},checkHandler:function(B,A){if(A){this.setActiveItem(B)}},toggleSelected:function(){var B=this.menu;B.render();if(!B.hasLayout){B.doLayout()}var C,D;for(var A=1;A<this.itemCount;A++){C=(this.activeItem.itemIndex+A)%this.itemCount;D=B.items.itemAt(C);if(!D.disabled){D.setChecked(true);break}}}});Ext.reg("cycle",Ext.CycleButton);Ext.Toolbar=function(A){if(Ext.isArray(A)){A={items:A,layout:"toolbar"}}else{A=Ext.apply({layout:"toolbar"},A);if(A.buttons){A.items=A.buttons}}Ext.Toolbar.superclass.constructor.call(this,A)};(function(){var A=Ext.Toolbar;Ext.extend(A,Ext.Container,{defaultType:"button",enableOverflow:false,trackMenus:true,internalDefaults:{removeMode:"container",hideParent:true},toolbarCls:"x-toolbar",initComponent:function(){A.superclass.initComponent.call(this);this.addEvents("overflowchange")},onRender:function(C,B){if(!this.el){if(!this.autoCreate){this.autoCreate={cls:this.toolbarCls+" x-small-editor"}}this.el=C.createChild(Ext.apply({id:this.id},this.autoCreate),B);Ext.Toolbar.superclass.onRender.apply(this,arguments)}},lookupComponent:function(B){if(Ext.isString(B)){if(B=="-"){B=new A.Separator()}else{if(B==" "){B=new A.Spacer()}else{if(B=="->"){B=new A.Fill()}else{B=new A.TextItem(B)}}}this.applyDefaults(B)}else{if(B.isFormField||B.render){B=this.createComponent(B)}else{if(B.tag){B=new A.Item({autoEl:B})}else{if(B.tagName){B=new A.Item({el:B})}else{if(Ext.isObject(B)){B=B.xtype?this.createComponent(B):this.constructButton(B)}}}}}return B},applyDefaults:function(C){if(!Ext.isString(C)){C=Ext.Toolbar.superclass.applyDefaults.call(this,C);var B=this.internalDefaults;if(C.events){Ext.applyIf(C.initialConfig,B);Ext.apply(C,B)}else{Ext.applyIf(C,B)}}return C},addSeparator:function(){return this.add(new A.Separator())},addSpacer:function(){return this.add(new A.Spacer())},addFill:function(){this.add(new A.Fill())},addElement:function(B){return this.addItem(new A.Item({el:B}))},addItem:function(B){return this.add.apply(this,arguments)},addButton:function(C){if(Ext.isArray(C)){var D=[];for(var B=0,E=C.length;B<E;B++){D.push(this.addButton(C[B]))}return D}return this.add(this.constructButton(C))},addText:function(B){return this.addItem(new A.TextItem(B))},addDom:function(B){return this.add(new A.Item({autoEl:B}))},addField:function(B){return this.add(B)},insertButton:function(E,C){if(Ext.isArray(C)){var F=[];for(var B=0,D=C.length;B<D;B++){F.push(this.insertButton(E+B,C[B]))}return F}return Ext.Toolbar.superclass.insert.call(this,E,C)},trackMenu:function(C,B){if(this.trackMenus&&C.menu){var D=B?"mun":"mon";this[D](C,"menutriggerover",this.onButtonTriggerOver,this);this[D](C,"menushow",this.onButtonMenuShow,this);this[D](C,"menuhide",this.onButtonMenuHide,this)}},constructButton:function(B){var C=B.events?B:this.createComponent(B,B.split?"splitbutton":this.defaultType);return C},onAdd:function(B){Ext.Toolbar.superclass.onAdd.call(this);this.trackMenu(B);if(this.disabled){B.disable()}},onRemove:function(B){Ext.Toolbar.superclass.onRemove.call(this);if(B==this.activeMenuBtn){delete this.activeMenuBtn}this.trackMenu(B,true)},onDisable:function(){this.items.each(function(B){if(B.disable){B.disable()}})},onEnable:function(){this.items.each(function(B){if(B.enable){B.enable()}})},onButtonTriggerOver:function(B){if(this.activeMenuBtn&&this.activeMenuBtn!=B){this.activeMenuBtn.hideMenu();B.showMenu();this.activeMenuBtn=B}},onButtonMenuShow:function(B){this.activeMenuBtn=B},onButtonMenuHide:function(B){delete this.activeMenuBtn}});Ext.reg("toolbar",Ext.Toolbar);A.Item=Ext.extend(Ext.BoxComponent,{hideParent:true,enable:Ext.emptyFn,disable:Ext.emptyFn,focus:Ext.emptyFn});Ext.reg("tbitem",A.Item);A.Separator=Ext.extend(A.Item,{onRender:function(C,B){this.el=C.createChild({tag:"span",cls:"xtb-sep"},B)}});Ext.reg("tbseparator",A.Separator);A.Spacer=Ext.extend(A.Item,{onRender:function(C,B){this.el=C.createChild({tag:"div",cls:"xtb-spacer",style:this.width?"width:"+this.width+"px":""},B)}});Ext.reg("tbspacer",A.Spacer);A.Fill=Ext.extend(A.Item,{render:Ext.emptyFn,isFill:true});Ext.reg("tbfill",A.Fill);A.TextItem=Ext.extend(A.Item,{constructor:function(B){A.TextItem.superclass.constructor.call(this,Ext.isString(B)?{text:B}:B)},onRender:function(C,B){this.autoEl={cls:"xtb-text",html:this.text||""};A.TextItem.superclass.onRender.call(this,C,B)},setText:function(B){if(this.rendered){this.el.update(B)}else{this.text=B}}});Ext.reg("tbtext",A.TextItem);A.Button=Ext.extend(Ext.Button,{});A.SplitButton=Ext.extend(Ext.SplitButton,{});Ext.reg("tbbutton",A.Button);Ext.reg("tbsplit",A.SplitButton)})();Ext.ButtonGroup=Ext.extend(Ext.Panel,{baseCls:"x-btn-group",layout:"table",defaultType:"button",frame:true,internalDefaults:{removeMode:"container",hideParent:true},initComponent:function(){this.layoutConfig=this.layoutConfig||{};Ext.applyIf(this.layoutConfig,{columns:this.columns});if(!this.title){this.addClass("x-btn-group-notitle")}this.on("afterlayout",this.onAfterLayout,this);Ext.ButtonGroup.superclass.initComponent.call(this)},applyDefaults:function(B){B=Ext.ButtonGroup.superclass.applyDefaults.call(this,B);var A=this.internalDefaults;if(B.events){Ext.applyIf(B.initialConfig,A);Ext.apply(B,A)}else{Ext.applyIf(B,A)}return B},onAfterLayout:function(){var A=this.body.getFrameWidth("lr")+this.body.dom.firstChild.offsetWidth;this.body.setWidth(A);this.el.setWidth(A+this.getFrameWidth())}});Ext.reg("buttongroup",Ext.ButtonGroup);(function(){var A=Ext.Toolbar;Ext.PagingToolbar=Ext.extend(Ext.Toolbar,{pageSize:20,displayMsg:"Displaying {0} - {1} of {2}",emptyMsg:"No data to display",beforePageText:"Page",afterPageText:"of {0}",firstText:"First Page",prevText:"Previous Page",nextText:"Next Page",lastText:"Last Page",refreshText:"Refresh",initComponent:function(){var B=[this.first=new A.Button({tooltip:this.firstText,overflowText:this.firstText,iconCls:"x-tbar-page-first",disabled:true,handler:this.moveFirst,scope:this}),this.prev=new A.Button({tooltip:this.prevText,overflowText:this.prevText,iconCls:"x-tbar-page-prev",disabled:true,handler:this.movePrevious,scope:this}),"-",this.beforePageText,this.inputItem=new Ext.form.NumberField({cls:"x-tbar-page-number",allowDecimals:false,allowNegative:false,enableKeyEvents:true,selectOnFocus:true,submitValue:false,listeners:{scope:this,keydown:this.onPagingKeyDown,blur:this.onPagingBlur}}),this.afterTextItem=new A.TextItem({text:String.format(this.afterPageText,1)}),"-",this.next=new A.Button({tooltip:this.nextText,overflowText:this.nextText,iconCls:"x-tbar-page-next",disabled:true,handler:this.moveNext,scope:this}),this.last=new A.Button({tooltip:this.lastText,overflowText:this.lastText,iconCls:"x-tbar-page-last",disabled:true,handler:this.moveLast,scope:this}),"-",this.refresh=new A.Button({tooltip:this.refreshText,overflowText:this.refreshText,iconCls:"x-tbar-loading",handler:this.doRefresh,scope:this})];var C=this.items||this.buttons||[];if(this.prependButtons){this.items=C.concat(B)}else{this.items=B.concat(C)}delete this.buttons;if(this.displayInfo){this.items.push("->");this.items.push(this.displayItem=new A.TextItem({}))}Ext.PagingToolbar.superclass.initComponent.call(this);this.addEvents("change","beforechange");this.on("afterlayout",this.onFirstLayout,this,{single:true});this.cursor=0;this.bindStore(this.store,true)},onFirstLayout:function(){if(this.dsLoaded){this.onLoad.apply(this,this.dsLoaded)}},updateInfo:function(){if(this.displayItem){var B=this.store.getCount();var C=B==0?this.emptyMsg:String.format(this.displayMsg,this.cursor+1,this.cursor+B,this.store.getTotalCount());this.displayItem.setText(C)}},onLoad:function(B,C,D){if(!this.rendered){this.dsLoaded=[B,C,D];return}var E=this.getParams();this.cursor=(D.params&&D.params[E.start])?D.params[E.start]:0;var F=this.getPageData(),H=F.activePage,G=F.pages;this.afterTextItem.setText(String.format(this.afterPageText,F.pages));this.inputItem.setValue(H);this.first.setDisabled(H==1);this.prev.setDisabled(H==1);this.next.setDisabled(H==G);this.last.setDisabled(H==G);this.refresh.enable();this.updateInfo();this.fireEvent("change",this,F)},getPageData:function(){var B=this.store.getTotalCount();return{total:B,activePage:Math.ceil((this.cursor+this.pageSize)/this.pageSize),pages:B<this.pageSize?1:Math.ceil(B/this.pageSize)}},changePage:function(B){this.doLoad(((B-1)*this.pageSize).constrain(0,this.store.getTotalCount()))},onLoadError:function(){if(!this.rendered){return}this.refresh.enable()},readPage:function(B){var D=this.inputItem.getValue(),C;if(!D||isNaN(C=parseInt(D,10))){this.inputItem.setValue(B.activePage);return false}return C},onPagingFocus:function(){this.inputItem.select()},onPagingBlur:function(B){this.inputItem.setValue(this.getPageData().activePage)},onPagingKeyDown:function(F,D){var G=D.getKey(),C=this.getPageData(),B;if(G==D.RETURN){D.stopEvent();B=this.readPage(C);if(B!==false){B=Math.min(Math.max(1,B),C.pages)-1;this.doLoad(B*this.pageSize)}}else{if(G==D.HOME||G==D.END){D.stopEvent();B=G==D.HOME?1:C.pages;F.setValue(B)}else{if(G==D.UP||G==D.PAGEUP||G==D.DOWN||G==D.PAGEDOWN){D.stopEvent();if((B=this.readPage(C))){var E=D.shiftKey?10:1;if(G==D.DOWN||G==D.PAGEDOWN){E*=-1}B+=E;if(B>=1&B<=C.pages){F.setValue(B)}}}}}},getParams:function(){return this.paramNames||this.store.paramNames},beforeLoad:function(){if(this.rendered&&this.refresh){this.refresh.disable()}},doLoad:function(D){var B={},C=this.getParams();B[C.start]=D;B[C.limit]=this.pageSize;if(this.fireEvent("beforechange",this,B)!==false){this.store.load({params:B})}},moveFirst:function(){this.doLoad(0)},movePrevious:function(){this.doLoad(Math.max(0,this.cursor-this.pageSize))},moveNext:function(){this.doLoad(this.cursor+this.pageSize)},moveLast:function(){var B=this.store.getTotalCount(),C=B%this.pageSize;this.doLoad(C?(B-C):B-this.pageSize)},doRefresh:function(){this.doLoad(this.cursor)},bindStore:function(B,C){var D;if(!C&&this.store){if(B!==this.store&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.beforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.onLoadError,this)}if(!B){this.store=null}}if(B){B=Ext.StoreMgr.lookup(B);B.on({scope:this,beforeload:this.beforeLoad,load:this.onLoad,exception:this.onLoadError});D=true}this.store=B;if(D){this.onLoad(B,null,{})}},unbind:function(B){this.bindStore(null)},bind:function(B){this.bindStore(B)},onDestroy:function(){this.bindStore(null);Ext.PagingToolbar.superclass.onDestroy.call(this)}})})();Ext.reg("paging",Ext.PagingToolbar);Ext.History=(function(){var F,A;var G=false;var D;function E(){var K=location.href,L=K.indexOf("#"),M=L>=0?K.substr(L+1):null;if(Ext.isGecko){M=decodeURIComponent(M)}return M}function B(){A.value=D}function I(K){D=K;Ext.History.fireEvent("change",K)}function C(L){var K=['<html><body><div id="state">',Ext.util.Format.htmlEncode(L),"</div></body></html>"].join("");try{var N=F.contentWindow.document;N.open();N.write(K);N.close();return true}catch(M){return false}}function H(){if(!F.contentWindow||!F.contentWindow.document){setTimeout(H,10);return}var N=F.contentWindow.document;var L=N.getElementById("state");var K=L?L.innerText:null;var M=E();setInterval(function(){N=F.contentWindow.document;L=N.getElementById("state");var P=L?L.innerText:null;var O=E();if(P!==K){K=P;I(K);location.hash=K;M=K;B()}else{if(O!==M){M=O;C(O)}}},50);G=true;Ext.History.fireEvent("ready",Ext.History)}function J(){D=A.value?A.value:E();if(Ext.isIE){H()}else{var K=E();setInterval(function(){var L=E();if(L!==K){K=L;I(K);B()}},50);G=true;Ext.History.fireEvent("ready",Ext.History)}}return{fieldId:"x-history-field",iframeId:"x-history-frame",events:{},init:function(L,K){if(G){Ext.callback(L,K,[this]);return}if(!Ext.isReady){Ext.onReady(function(){Ext.History.init(L,K)});return}A=Ext.getDom(Ext.History.fieldId);if(Ext.isIE){F=Ext.getDom(Ext.History.iframeId)}this.addEvents("ready","change");if(L){this.on("ready",L,K,{single:true})}J()},add:function(K,L){if(L!==false){if(this.getToken()==K){return true}}if(Ext.isIE){return C(K)}else{location.hash=K;return true}},back:function(){history.go(-1)},forward:function(){history.go(1)},getToken:function(){return G?D:E()}}})();Ext.apply(Ext.History,new Ext.util.Observable());Ext.Tip=Ext.extend(Ext.Panel,{minWidth:40,maxWidth:300,shadow:"sides",defaultAlign:"tl-bl?",autoRender:true,quickShowInterval:250,frame:true,hidden:true,baseCls:"x-tip",floating:{shadow:true,shim:true,useDisplay:true,constrain:false},autoHeight:true,closeAction:"hide",initComponent:function(){Ext.Tip.superclass.initComponent.call(this);if(this.closable&&!this.title){this.elements+=",header"}},afterRender:function(){Ext.Tip.superclass.afterRender.call(this);if(this.closable){this.addTool({id:"close",handler:this[this.closeAction],scope:this})}},showAt:function(A){Ext.Tip.superclass.show.call(this);if(this.measureWidth!==false&&(!this.initialConfig||typeof this.initialConfig.width!="number")){this.doAutoWidth()}if(this.constrainPosition){A=this.el.adjustForConstraints(A)}this.setPagePosition(A[0],A[1])},doAutoWidth:function(A){A=A||0;var B=this.body.getTextWidth();if(this.title){B=Math.max(B,this.header.child("span").getTextWidth(this.title))}B+=this.getFrameWidth()+(this.closable?20:0)+this.body.getPadding("lr")+A;if(Ext.isIE){B++}this.setWidth(B.constrain(this.minWidth,this.maxWidth));if(Ext.isIE7&&!this.repainted){this.el.repaint();this.repainted=true}},showBy:function(A,B){if(!this.rendered){this.render(Ext.getBody())}this.showAt(this.el.getAlignToXY(A,B||this.defaultAlign))},initDraggable:function(){this.dd=new Ext.Tip.DD(this,typeof this.draggable=="boolean"?null:this.draggable);this.header.addClass("x-tip-draggable")}});Ext.reg("tip",Ext.Tip);Ext.Tip.DD=function(A,B){Ext.apply(this,B);this.tip=A;Ext.Tip.DD.superclass.constructor.call(this,A.el.id,"WindowDD-"+A.id);this.setHandleElId(A.header.id);this.scroll=false};Ext.extend(Ext.Tip.DD,Ext.dd.DD,{moveOnly:true,scroll:false,headerOffsets:[100,25],startDrag:function(){this.tip.el.disableShadow()},endDrag:function(A){this.tip.el.enableShadow(true)}});Ext.ToolTip=Ext.extend(Ext.Tip,{showDelay:500,hideDelay:200,dismissDelay:5000,trackMouse:false,anchorToTarget:true,anchorOffset:0,targetCounter:0,constrainPosition:false,initComponent:function(){Ext.ToolTip.superclass.initComponent.call(this);this.lastActive=new Date();this.initTarget(this.target);this.origAnchor=this.anchor},onRender:function(B,A){Ext.ToolTip.superclass.onRender.call(this,B,A);this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl=this.el.createChild({cls:"x-tip-anchor "+this.anchorCls})},afterRender:function(){Ext.ToolTip.superclass.afterRender.call(this);this.anchorEl.setStyle("z-index",this.el.getZIndex()+1).setVisibilityMode(Ext.Element.DISPLAY)},initTarget:function(C){var B;if((B=Ext.get(C))){if(this.target){var A=Ext.get(this.target);this.mun(A,"mouseover",this.onTargetOver,this);this.mun(A,"mouseout",this.onTargetOut,this);this.mun(A,"mousemove",this.onMouseMove,this)}this.mon(B,{mouseover:this.onTargetOver,mouseout:this.onTargetOut,mousemove:this.onMouseMove,scope:this});this.target=B}if(this.anchor){this.anchorTarget=this.target}},onMouseMove:function(A){var B=this.delegate?A.getTarget(this.delegate):this.triggerElement=true;if(B){this.targetXY=A.getXY();if(B===this.triggerElement){if(!this.hidden&&this.trackMouse){this.setPagePosition(this.getTargetXY())}}else{this.hide();this.lastActive=new Date(0);this.onTargetOver(A)}}else{if(!this.closable&&this.isVisible()){this.hide()}}},getTargetXY:function(){if(this.delegate){this.anchorTarget=this.triggerElement}if(this.anchor){this.targetCounter++;var F=this.getOffsets(),D=(this.anchorToTarget&&!this.trackMouse)?this.el.getAlignToXY(this.anchorTarget,this.getAnchorAlign()):this.targetXY,B=Ext.lib.Dom.getViewWidth()-5,H=Ext.lib.Dom.getViewHeight()-5,A=document.documentElement,K=document.body,J=(A.scrollLeft||K.scrollLeft||0)+5,I=(A.scrollTop||K.scrollTop||0)+5,G=[D[0]+F[0],D[1]+F[1]],C=this.getSize();this.anchorEl.removeClass(this.anchorCls);if(this.targetCounter<2){if(G[0]<J){if(this.anchorToTarget){this.defaultAlign="l-r";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor="left";return this.getTargetXY()}if(G[0]+C.width>B){if(this.anchorToTarget){this.defaultAlign="r-l";if(this.mouseOffset){this.mouseOffset[0]*=-1}}this.anchor="right";return this.getTargetXY()}if(G[1]<I){if(this.anchorToTarget){this.defaultAlign="t-b";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor="top";return this.getTargetXY()}if(G[1]+C.height>H){if(this.anchorToTarget){this.defaultAlign="b-t";if(this.mouseOffset){this.mouseOffset[1]*=-1}}this.anchor="bottom";return this.getTargetXY()}}this.anchorCls="x-tip-anchor-"+this.getAnchorPosition();this.anchorEl.addClass(this.anchorCls);this.targetCounter=0;return G}else{var E=this.getMouseOffset();return[this.targetXY[0]+E[0],this.targetXY[1]+E[1]]}},getMouseOffset:function(){var A=this.anchor?[0,0]:[15,18];if(this.mouseOffset){A[0]+=this.mouseOffset[0];A[1]+=this.mouseOffset[1]}return A},getAnchorPosition:function(){if(this.anchor){this.tipAnchor=this.anchor.charAt(0)}else{var A=this.defaultAlign.match(/^([a-z]+)-([a-z]+)(\?)?$/);if(!A){throw"AnchorTip.defaultAlign is invalid"}this.tipAnchor=A[1].charAt(0)}switch(this.tipAnchor){case"t":return"top";case"b":return"bottom";case"r":return"right"}return"left"},getAnchorAlign:function(){switch(this.anchor){case"top":return"tl-bl";case"left":return"tl-tr";case"right":return"tr-tl";default:return"bl-tl"}},getOffsets:function(){var A,C=this.getAnchorPosition().charAt(0);if(this.anchorToTarget&&!this.trackMouse){switch(C){case"t":A=[0,9];break;case"b":A=[0,-13];break;case"r":A=[-13,0];break;default:A=[9,0];break}}else{switch(C){case"t":A=[-15-this.anchorOffset,30];break;case"b":A=[-19-this.anchorOffset,-13-this.el.dom.offsetHeight];break;case"r":A=[-15-this.el.dom.offsetWidth,-13-this.anchorOffset];break;default:A=[25,-13-this.anchorOffset];break}}var B=this.getMouseOffset();A[0]+=B[0];A[1]+=B[1];return A},onTargetOver:function(A){if(this.disabled||A.within(this.target.dom,true)){return}var B=A.getTarget(this.delegate);if(B){this.triggerElement=B;this.clearTimer("hide");this.targetXY=A.getXY();this.delayShow()}},delayShow:function(){if(this.hidden&&!this.showTimer){if(this.lastActive.getElapsed()<this.quickShowInterval){this.show()}else{this.showTimer=this.show.defer(this.showDelay,this)}}else{if(!this.hidden&&this.autoHide!==false){this.show()}}},onTargetOut:function(A){if(this.disabled||A.within(this.target.dom,true)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},delayHide:function(){if(!this.hidden&&!this.hideTimer){this.hideTimer=this.hide.defer(this.hideDelay,this)}},hide:function(){this.clearTimer("dismiss");this.lastActive=new Date();if(this.anchorEl){this.anchorEl.hide()}Ext.ToolTip.superclass.hide.call(this);delete this.triggerElement},show:function(){if(this.anchor){this.showAt([-1000,-1000]);this.origConstrainPosition=this.constrainPosition;this.constrainPosition=false;this.anchor=this.origAnchor}this.showAt(this.getTargetXY());if(this.anchor){this.anchorEl.show();this.syncAnchor();this.constrainPosition=this.origConstrainPosition}else{this.anchorEl.hide()}},showAt:function(A){this.lastActive=new Date();this.clearTimers();Ext.ToolTip.superclass.showAt.call(this,A);if(this.dismissDelay&&this.autoHide!==false){this.dismissTimer=this.hide.defer(this.dismissDelay,this)}if(this.anchor&&!this.anchorEl.isVisible()){this.syncAnchor();this.anchorEl.show()}else{this.anchorEl.hide()}},syncAnchor:function(){var C,B,A;switch(this.tipAnchor.charAt(0)){case"t":C="b";B="tl";A=[20+this.anchorOffset,2];break;case"r":C="l";B="tr";A=[-2,11+this.anchorOffset];break;case"b":C="t";B="bl";A=[20+this.anchorOffset,-2];break;default:C="r";B="tl";A=[2,11+this.anchorOffset];break}this.anchorEl.alignTo(this.el,C+"-"+B,A)},setPagePosition:function(A,B){Ext.ToolTip.superclass.setPagePosition.call(this,A,B);if(this.anchor){this.syncAnchor()}},clearTimer:function(A){A=A+"Timer";clearTimeout(this[A]);delete this[A]},clearTimers:function(){this.clearTimer("show");this.clearTimer("dismiss");this.clearTimer("hide")},onShow:function(){Ext.ToolTip.superclass.onShow.call(this);Ext.getDoc().on("mousedown",this.onDocMouseDown,this)},onHide:function(){Ext.ToolTip.superclass.onHide.call(this);Ext.getDoc().un("mousedown",this.onDocMouseDown,this)},onDocMouseDown:function(A){if(this.autoHide!==true&&!this.closable&&!A.within(this.el.dom)){this.disable();this.doEnable.defer(100,this)}},doEnable:function(){if(!this.isDestroyed){this.enable()}},onDisable:function(){this.clearTimers();this.hide()},adjustPosition:function(C,D){if(this.constrainPosition){var B=this.targetXY[1],A=this.getSize().height;if(D<=B&&(D+A)>=B){D=B-A-5}}return{x:C,y:D}},beforeDestroy:function(){this.clearTimers();Ext.destroy(this.anchorEl);delete this.anchorEl;delete this.target;delete this.anchorTarget;delete this.triggerElement;Ext.ToolTip.superclass.beforeDestroy.call(this)},onDestroy:function(){Ext.getDoc().un("mousedown",this.onDocMouseDown,this);Ext.ToolTip.superclass.onDestroy.call(this)}});Ext.reg("tooltip",Ext.ToolTip);Ext.QuickTip=Ext.extend(Ext.ToolTip,{interceptTitles:false,tagConfig:{namespace:"ext",attribute:"qtip",width:"qwidth",target:"target",title:"qtitle",hide:"hide",cls:"qclass",align:"qalign",anchor:"anchor"},initComponent:function(){this.target=this.target||Ext.getDoc();this.targets=this.targets||{};Ext.QuickTip.superclass.initComponent.call(this)},register:function(C){var B=Ext.isArray(C)?C:arguments;for(var F=0,A=B.length;F<A;F++){var H=B[F];var G=H.target;if(G){if(Ext.isArray(G)){for(var D=0,E=G.length;D<E;D++){this.targets[Ext.id(G[D])]=H}}else{this.targets[Ext.id(G)]=H}}}},unregister:function(A){delete this.targets[Ext.id(A)]},cancelShow:function(A){var B=this.activeTarget;A=Ext.get(A).dom;if(this.isVisible()){if(B&&B.el==A){this.hide()}}else{if(B&&B.el==A){this.clearTimer("show")}}},getTipCfg:function(A){var C=A.getTarget(),D,B;if(this.interceptTitles&&C.title&&Ext.isString(C.title)){D=C.title;C.qtip=D;C.removeAttribute("title");A.preventDefault()}else{B=this.tagConfig;D=C.qtip||Ext.fly(C).getAttribute(B.attribute,B.namespace)}return D},onTargetOver:function(B){if(this.disabled){return}this.targetXY=B.getXY();var F=B.getTarget();if(!F||F.nodeType!==1||F==document||F==document.body){return}if(this.activeTarget&&((F==this.activeTarget.el)||Ext.fly(this.activeTarget.el).contains(F))){this.clearTimer("hide");this.show();return}if(F&&this.targets[F.id]){this.activeTarget=this.targets[F.id];this.activeTarget.el=F;this.anchor=this.activeTarget.anchor;if(this.anchor){this.anchorTarget=F}this.delayShow();return}var G,D=Ext.fly(F),C=this.tagConfig,A=C.namespace;if(G=this.getTipCfg(B)){var E=D.getAttribute(C.hide,A);this.activeTarget={el:F,text:G,width:D.getAttribute(C.width,A),autoHide:E!="user"&&E!=="false",title:D.getAttribute(C.title,A),cls:D.getAttribute(C.cls,A),align:D.getAttribute(C.align,A)};this.anchor=D.getAttribute(C.anchor,A);if(this.anchor){this.anchorTarget=F}this.delayShow()}},onTargetOut:function(A){if(this.activeTarget&&A.within(this.activeTarget.el)&&!this.getTipCfg(A)){return}this.clearTimer("show");if(this.autoHide!==false){this.delayHide()}},showAt:function(A){var B=this.activeTarget;if(B){if(!this.rendered){this.render(Ext.getBody());this.activeTarget=B}if(B.width){this.setWidth(B.width);this.body.setWidth(this.adjustBodyWidth(B.width-this.getFrameWidth()));this.measureWidth=false}else{this.measureWidth=true}this.setTitle(B.title||"");this.body.update(B.text);this.autoHide=B.autoHide;this.dismissDelay=B.dismissDelay||this.dismissDelay;if(this.lastCls){this.el.removeClass(this.lastCls);delete this.lastCls}if(B.cls){this.el.addClass(B.cls);this.lastCls=B.cls}if(this.anchor){this.constrainPosition=false}else{if(B.align){A=this.el.getAlignToXY(B.el,B.align);this.constrainPosition=false}else{this.constrainPosition=true}}}Ext.QuickTip.superclass.showAt.call(this,A)},hide:function(){delete this.activeTarget;Ext.QuickTip.superclass.hide.call(this)}});Ext.reg("quicktip",Ext.QuickTip);Ext.QuickTips=function(){var A,B=false;return{init:function(C){if(!A){if(!Ext.isReady){Ext.onReady(function(){Ext.QuickTips.init(C)});return}A=new Ext.QuickTip({elements:"header,body",disabled:B});if(C!==false){A.render(Ext.getBody())}}},ddDisable:function(){if(A&&!B){A.disable()}},ddEnable:function(){if(A&&!B){A.enable()}},enable:function(){if(A){A.enable()}B=false},disable:function(){if(A){A.disable()}B=true},isEnabled:function(){return A!==undefined&&!A.disabled},getQuickTip:function(){return A},register:function(){A.register.apply(A,arguments)},unregister:function(){A.unregister.apply(A,arguments)},tips:function(){A.register.apply(A,arguments)}}}();Ext.slider.Tip=Ext.extend(Ext.Tip,{minWidth:10,offsets:[0,-10],init:function(A){A.on({scope:this,dragstart:this.onSlide,drag:this.onSlide,dragend:this.hide,destroy:this.destroy})},onSlide:function(C,A,B){this.show();this.body.update(this.getText(B));this.doAutoWidth();this.el.alignTo(B.el,"b-t?",this.offsets)},getText:function(A){return String(A.value)}});Ext.ux.SliderTip=Ext.slider.Tip;Ext.tree.TreePanel=Ext.extend(Ext.Panel,{rootVisible:true,animate:Ext.enableFx,lines:true,enableDD:false,hlDrop:Ext.enableFx,pathSeparator:"/",bubbleEvents:[],initComponent:function(){Ext.tree.TreePanel.superclass.initComponent.call(this);if(!this.eventModel){this.eventModel=new Ext.tree.TreeEventModel(this)}var B=this.loader;if(!B){B=new Ext.tree.TreeLoader({dataUrl:this.dataUrl,requestMethod:this.requestMethod})}else{if(Ext.isObject(B)&&!B.load){B=new Ext.tree.TreeLoader(B)}}this.loader=B;this.nodeHash={};if(this.root){var A=this.root;delete this.root;this.setRootNode(A)}this.addEvents("append","remove","movenode","insert","beforeappend","beforeremove","beforemovenode","beforeinsert","beforeload","load","textchange","beforeexpandnode","beforecollapsenode","expandnode","disabledchange","collapsenode","beforeclick","click","containerclick","checkchange","beforedblclick","dblclick","containerdblclick","contextmenu","containercontextmenu","beforechildrenrendered","startdrag","enddrag","dragdrop","beforenodedrop","nodedrop","nodedragover");if(this.singleExpand){this.on("beforeexpandnode",this.restrictExpand,this)}},proxyNodeEvent:function(F,A,C,D,E,G,B){if(F=="collapse"||F=="expand"||F=="beforecollapse"||F=="beforeexpand"||F=="move"||F=="beforemove"){F=F+"node"}return this.fireEvent(F,A,C,D,E,G,B)},getRootNode:function(){return this.root},setRootNode:function(B){this.destroyRoot();if(!B.render){B=this.loader.createNode(B)}this.root=B;B.ownerTree=this;B.isRoot=true;this.registerNode(B);if(!this.rootVisible){var A=B.attributes.uiProvider;B.ui=A?new A(B):new Ext.tree.RootTreeNodeUI(B)}if(this.innerCt){this.clearInnerCt();this.renderRoot()}return B},clearInnerCt:function(){this.innerCt.update("")},renderRoot:function(){this.root.render();if(!this.rootVisible){this.root.renderChildren()}},getNodeById:function(A){return this.nodeHash[A]},registerNode:function(A){this.nodeHash[A.id]=A},unregisterNode:function(A){delete this.nodeHash[A.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"},restrictExpand:function(B){var A=B.parentNode;if(A){if(A.expandedChild&&A.expandedChild.parentNode==A){A.expandedChild.collapse()}A.expandedChild=B}},getChecked:function(C,B){B=B||this.root;var A=[];var D=function(){if(this.attributes.checked){A.push(!C?this:(C=="id"?this.id:this.attributes[C]))}};B.cascade(D);return A},getLoader:function(){return this.loader},expandAll:function(){this.root.expand(true)},collapseAll:function(){this.root.collapse(true)},getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.tree.DefaultSelectionModel()}return this.selModel},expandPath:function(G,D,A){if(Ext.isEmpty(G)){if(A){A(false,undefined)}return}D=D||"id";var E=G.split(this.pathSeparator);var F=this.root;if(F.attributes[D]!=E[1]){if(A){A(false,null)}return}var C=1;var B=function(){if(++C==E.length){if(A){A(true,F)}return}var H=F.findChild(D,E[C]);if(!H){if(A){A(false,F)}return}F=H;H.expand(false,false,B)};F.expand(false,false,B)},selectPath:function(F,C,A){if(Ext.isEmpty(F)){if(A){A(false,undefined)}return}C=C||"id";var E=F.split(this.pathSeparator),D=E.pop();if(E.length>1){var B=function(G,I){if(G&&I){var H=I.findChild(C,D);if(H){H.select();if(A){A(true,H)}}else{if(A){A(false,H)}}}else{if(A){A(false,H)}}};this.expandPath(E.join(this.pathSeparator),C,B)}else{this.root.select();if(A){A(true,this.root)}}},getTreeEl:function(){return this.body},onRender:function(B,A){Ext.tree.TreePanel.superclass.onRender.call(this,B,A);this.el.addClass("x-tree");this.innerCt=this.body.createChild({tag:"ul",cls:"x-tree-root-ct "+(this.useArrows?"x-tree-arrows":this.lines?"x-tree-lines":"x-tree-no-lines")})},initEvents:function(){Ext.tree.TreePanel.superclass.initEvents.call(this);if(this.containerScroll){Ext.dd.ScrollManager.register(this.body)}if((this.enableDD||this.enableDrop)&&!this.dropZone){this.dropZone=new Ext.tree.TreeDropZone(this,this.dropConfig||{ddGroup:this.ddGroup||"TreeDD",appendOnly:this.ddAppendOnly===true})}if((this.enableDD||this.enableDrag)&&!this.dragZone){this.dragZone=new Ext.tree.TreeDragZone(this,this.dragConfig||{ddGroup:this.ddGroup||"TreeDD",scroll:this.ddScroll})}this.getSelectionModel().init(this)},afterRender:function(){Ext.tree.TreePanel.superclass.afterRender.call(this);this.renderRoot()},beforeDestroy:function(){if(this.rendered){Ext.dd.ScrollManager.unregister(this.body);Ext.destroy(this.dropZone,this.dragZone)}this.destroyRoot();Ext.destroy(this.loader);this.nodeHash=this.root=this.loader=null;Ext.tree.TreePanel.superclass.beforeDestroy.call(this)},destroyRoot:function(){if(this.root&&this.root.destroy){this.root.destroy(true)}}});Ext.tree.TreePanel.nodeTypes={};Ext.reg("treepanel",Ext.tree.TreePanel);Ext.tree.TreeEventModel=function(A){this.tree=A;this.tree.on("render",this.initEvents,this)};Ext.tree.TreeEventModel.prototype={initEvents:function(){var A=this.tree;if(A.trackMouseOver!==false){A.mon(A.innerCt,{scope:this,mouseover:this.delegateOver,mouseout:this.delegateOut})}A.mon(A.getTreeEl(),{scope:this,click:this.delegateClick,dblclick:this.delegateDblClick,contextmenu:this.delegateContextMenu})},getNode:function(A){var B;if(B=A.getTarget(".x-tree-node-el",10)){var C=Ext.fly(B,"_treeEvents").getAttribute("tree-node-id","ext");if(C){return this.tree.getNodeById(C)}}return null},getNodeTarget:function(A){var B=A.getTarget(".x-tree-node-icon",1);if(!B){B=A.getTarget(".x-tree-node-el",6)}return B},delegateOut:function(A,C){if(!this.beforeEvent(A)){return}if(A.getTarget(".x-tree-ec-icon",1)){var B=this.getNode(A);this.onIconOut(A,B);if(B==this.lastEcOver){delete this.lastEcOver}}if((C=this.getNodeTarget(A))&&!A.within(C,true)){this.onNodeOut(A,this.getNode(A))}},delegateOver:function(A,B){if(!this.beforeEvent(A)){return}if(Ext.isGecko&&!this.trackingDoc){Ext.getBody().on("mouseover",this.trackExit,this);this.trackingDoc=true}if(this.lastEcOver){this.onIconOut(A,this.lastEcOver);delete this.lastEcOver}if(A.getTarget(".x-tree-ec-icon",1)){this.lastEcOver=this.getNode(A);this.onIconOver(A,this.lastEcOver)}if(B=this.getNodeTarget(A)){this.onNodeOver(A,this.getNode(A))}},trackExit:function(A){if(this.lastOverNode){if(this.lastOverNode.ui&&!A.within(this.lastOverNode.ui.getEl())){this.onNodeOut(A,this.lastOverNode)}delete this.lastOverNode;Ext.getBody().un("mouseover",this.trackExit,this);this.trackingDoc=false}},delegateClick:function(A,B){if(this.beforeEvent(A)){if(A.getTarget("input[type=checkbox]",1)){this.onCheckboxClick(A,this.getNode(A))}else{if(A.getTarget(".x-tree-ec-icon",1)){this.onIconClick(A,this.getNode(A))}else{if(this.getNodeTarget(A)){this.onNodeClick(A,this.getNode(A))}}}}else{this.checkContainerEvent(A,"click")}},delegateDblClick:function(A,B){if(this.beforeEvent(A)){if(this.getNodeTarget(A)){this.onNodeDblClick(A,this.getNode(A))}}else{this.checkContainerEvent(A,"dblclick")}},delegateContextMenu:function(A,B){if(this.beforeEvent(A)){if(this.getNodeTarget(A)){this.onNodeContextMenu(A,this.getNode(A))}}else{this.checkContainerEvent(A,"contextmenu")}},checkContainerEvent:function(B,A){if(this.disabled){B.stopEvent();return false}this.onContainerEvent(B,A)},onContainerEvent:function(B,A){this.tree.fireEvent("container"+A,this.tree,B)},onNodeClick:function(A,B){B.ui.onClick(A)},onNodeOver:function(A,B){this.lastOverNode=B;B.ui.onOver(A)},onNodeOut:function(A,B){B.ui.onOut(A)},onIconOver:function(A,B){B.ui.addClass("x-tree-ec-over")},onIconOut:function(A,B){B.ui.removeClass("x-tree-ec-over")},onIconClick:function(A,B){B.ui.ecClick(A)},onCheckboxClick:function(A,B){B.ui.onCheckChange(A)},onNodeDblClick:function(A,B){B.ui.onDblClick(A)},onNodeContextMenu:function(A,B){B.ui.onContextMenu(A)},beforeEvent:function(A){var B=this.getNode(A);if(this.disabled||!B||!B.ui){A.stopEvent();return false}return true},disable:function(){this.disabled=true},enable:function(){this.disabled=false}};Ext.tree.DefaultSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(A){this.selNode=null;this.addEvents("selectionchange","beforeselect");Ext.apply(this,A);Ext.tree.DefaultSelectionModel.superclass.constructor.call(this)},init:function(A){this.tree=A;A.mon(A.getTreeEl(),"keydown",this.onKeyDown,this);A.on("click",this.onNodeClick,this)},onNodeClick:function(B,A){this.select(B)},select:function(A,B){if(!Ext.fly(A.ui.wrap).isVisible()&&B){return B.call(this,A)}var C=this.selNode;if(A==C){A.ui.onSelectedChange(true)}else{if(this.fireEvent("beforeselect",this,A,C)!==false){if(C&&C.ui){C.ui.onSelectedChange(false)}this.selNode=A;A.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,A,C)}}return A},unselect:function(A,B){if(this.selNode==A){this.clearSelections(B)}},clearSelections:function(B){var A=this.selNode;if(A){A.ui.onSelectedChange(false);this.selNode=null;if(B!==true){this.fireEvent("selectionchange",this,null)}}return A},getSelectedNode:function(){return this.selNode},isSelected:function(A){return this.selNode==A},selectPrevious:function(A){if(!(A=A||this.selNode||this.lastSelNode)){return null}var B=A.previousSibling;if(B){if(!B.isExpanded()||B.childNodes.length<1){return this.select(B,this.selectPrevious)}else{var C=B.lastChild;while(C&&C.isExpanded()&&Ext.fly(C.ui.wrap).isVisible()&&C.childNodes.length>0){C=C.lastChild}return this.select(C,this.selectPrevious)}}else{if(A.parentNode&&(this.tree.rootVisible||!A.parentNode.isRoot)){return this.select(A.parentNode,this.selectPrevious)}}return null},selectNext:function(A){if(!(A=A||this.selNode||this.lastSelNode)){return null}if(A.firstChild&&A.isExpanded()&&Ext.fly(A.ui.wrap).isVisible()){return this.select(A.firstChild,this.selectNext)}else{if(A.nextSibling){return this.select(A.nextSibling,this.selectNext)}else{if(A.parentNode){var B=null;A.parentNode.bubble(function(){if(this.nextSibling){B=this.getOwnerTree().selModel.select(this.nextSibling,this.selectNext);return false}});return B}}}return null},onKeyDown:function(A){var B=this.selNode||this.lastSelNode;var C=this;if(!B){return}var D=A.getKey();switch(D){case A.DOWN:A.stopEvent();this.selectNext();break;case A.UP:A.stopEvent();this.selectPrevious();break;case A.RIGHT:A.preventDefault();if(B.hasChildNodes()){if(!B.isExpanded()){B.expand()}else{if(B.firstChild){this.select(B.firstChild,A)}}}break;case A.LEFT:A.preventDefault();if(B.hasChildNodes()&&B.isExpanded()){B.collapse()}else{if(B.parentNode&&(this.tree.rootVisible||B.parentNode!=this.tree.getRootNode())){this.select(B.parentNode,A)}}break}}});Ext.tree.MultiSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(A){this.selNodes=[];this.selMap={};this.addEvents("selectionchange");Ext.apply(this,A);Ext.tree.MultiSelectionModel.superclass.constructor.call(this)},init:function(A){this.tree=A;A.mon(A.getTreeEl(),"keydown",this.onKeyDown,this);A.on("click",this.onNodeClick,this)},onNodeClick:function(B,A){if(A.ctrlKey&&this.isSelected(B)){this.unselect(B)}else{this.select(B,A,A.ctrlKey)}},select:function(B,A,C){if(C!==true){this.clearSelections(true)}if(this.isSelected(B)){this.lastSelNode=B;return B}this.selNodes.push(B);this.selMap[B.id]=B;this.lastSelNode=B;B.ui.onSelectedChange(true);this.fireEvent("selectionchange",this,this.selNodes);return B},unselect:function(B){if(this.selMap[B.id]){B.ui.onSelectedChange(false);var C=this.selNodes;var A=C.indexOf(B);if(A!=-1){this.selNodes.splice(A,1)}delete this.selMap[B.id];this.fireEvent("selectionchange",this,this.selNodes)}},clearSelections:function(B){var D=this.selNodes;if(D.length>0){for(var A=0,C=D.length;A<C;A++){D[A].ui.onSelectedChange(false)}this.selNodes=[];this.selMap={};if(B!==true){this.fireEvent("selectionchange",this,this.selNodes)}}},isSelected:function(A){return this.selMap[A.id]?true:false},getSelectedNodes:function(){return this.selNodes.concat([])},onKeyDown:Ext.tree.DefaultSelectionModel.prototype.onKeyDown,selectNext:Ext.tree.DefaultSelectionModel.prototype.selectNext,selectPrevious:Ext.tree.DefaultSelectionModel.prototype.selectPrevious});Ext.data.Tree=Ext.extend(Ext.util.Observable,{constructor:function(A){this.nodeHash={};this.root=null;if(A){this.setRootNode(A)}this.addEvents("append","remove","move","insert","beforeappend","beforeremove","beforemove","beforeinsert");Ext.data.Tree.superclass.constructor.call(this)},pathSeparator:"/",proxyNodeEvent:function(){return this.fireEvent.apply(this,arguments)},getRootNode:function(){return this.root},setRootNode:function(A){this.root=A;A.ownerTree=this;A.isRoot=true;this.registerNode(A);return A},getNodeById:function(A){return this.nodeHash[A]},registerNode:function(A){this.nodeHash[A.id]=A},unregisterNode:function(A){delete this.nodeHash[A.id]},toString:function(){return"[Tree"+(this.id?" "+this.id:"")+"]"}});Ext.data.Node=Ext.extend(Ext.util.Observable,{constructor:function(A){this.attributes=A||{};this.leaf=this.attributes.leaf;this.id=this.attributes.id;if(!this.id){this.id=Ext.id(null,"xnode-");this.attributes.id=this.id}this.childNodes=[];this.parentNode=null;this.firstChild=null;this.lastChild=null;this.previousSibling=null;this.nextSibling=null;this.addEvents({"append":true,"remove":true,"move":true,"insert":true,"beforeappend":true,"beforeremove":true,"beforemove":true,"beforeinsert":true});this.listeners=this.attributes.listeners;Ext.data.Node.superclass.constructor.call(this)},fireEvent:function(B){if(Ext.data.Node.superclass.fireEvent.apply(this,arguments)===false){return false}var A=this.getOwnerTree();if(A){if(A.proxyNodeEvent.apply(A,arguments)===false){return false}}return true},isLeaf:function(){return this.leaf===true},setFirstChild:function(A){this.firstChild=A},setLastChild:function(A){this.lastChild=A},isLast:function(){return(!this.parentNode?true:this.parentNode.lastChild==this)},isFirst:function(){return(!this.parentNode?true:this.parentNode.firstChild==this)},hasChildNodes:function(){return !this.isLeaf()&&this.childNodes.length>0},isExpandable:function(){return this.attributes.expandable||this.hasChildNodes()},appendChild:function(D){var G=false;if(Ext.isArray(D)){G=D}else{if(arguments.length>1){G=arguments}}if(G){for(var A=0,E=G.length;A<E;A++){this.appendChild(G[A])}}else{if(this.fireEvent("beforeappend",this.ownerTree,this,D)===false){return false}var F=this.childNodes.length;var B=D.parentNode;if(B){if(D.fireEvent("beforemove",D.getOwnerTree(),D,B,this,F)===false){return false}B.removeChild(D)}F=this.childNodes.length;if(F===0){this.setFirstChild(D)}this.childNodes.push(D);D.parentNode=this;var C=this.childNodes[F-1];if(C){D.previousSibling=C;C.nextSibling=D}else{D.previousSibling=null}D.nextSibling=null;this.setLastChild(D);D.setOwnerTree(this.getOwnerTree());this.fireEvent("append",this.ownerTree,this,D,F);if(B){D.fireEvent("move",this.ownerTree,D,B,this,F)}return D}},removeChild:function(B,C){var A=this.childNodes.indexOf(B);if(A==-1){return false}if(this.fireEvent("beforeremove",this.ownerTree,this,B)===false){return false}this.childNodes.splice(A,1);if(B.previousSibling){B.previousSibling.nextSibling=B.nextSibling}if(B.nextSibling){B.nextSibling.previousSibling=B.previousSibling}if(this.firstChild==B){this.setFirstChild(B.nextSibling)}if(this.lastChild==B){this.setLastChild(B.previousSibling)}this.fireEvent("remove",this.ownerTree,this,B);if(C){B.destroy(true)}else{B.clear()}return B},clear:function(A){this.setOwnerTree(null,A);this.parentNode=this.previousSibling=this.nextSibling=null;if(A){this.firstChild=this.lastChild=null}},destroy:function(A){if(A===true){this.purgeListeners();this.clear(true);Ext.each(this.childNodes,function(B){B.destroy(true)});this.childNodes=null}else{this.remove(true)}},insertBefore:function(E,B){if(!B){return this.appendChild(E)}if(E==B){return false}if(this.fireEvent("beforeinsert",this.ownerTree,this,E,B)===false){return false}var F=this.childNodes.indexOf(B);var C=E.parentNode;var A=F;if(C==this&&this.childNodes.indexOf(E)<F){A--}if(C){if(E.fireEvent("beforemove",E.getOwnerTree(),E,C,this,F,B)===false){return false}C.removeChild(E)}if(A===0){this.setFirstChild(E)}this.childNodes.splice(A,0,E);E.parentNode=this;var D=this.childNodes[A-1];if(D){E.previousSibling=D;D.nextSibling=E}else{E.previousSibling=null}E.nextSibling=B;B.previousSibling=E;E.setOwnerTree(this.getOwnerTree());this.fireEvent("insert",this.ownerTree,this,E,B);if(C){E.fireEvent("move",this.ownerTree,E,C,this,A,B)}return E},remove:function(A){if(this.parentNode){this.parentNode.removeChild(this,A)}return this},removeAll:function(C){var A=this.childNodes,B;while((B=A[0])){this.removeChild(B,C)}return this},item:function(A){return this.childNodes[A]},replaceChild:function(C,B){var A=B?B.nextSibling:null;this.removeChild(B);this.insertBefore(C,A);return B},indexOf:function(A){return this.childNodes.indexOf(A)},getOwnerTree:function(){if(!this.ownerTree){var A=this;while(A){if(A.ownerTree){this.ownerTree=A.ownerTree;break}A=A.parentNode}}return this.ownerTree},getDepth:function(){var B=0;var A=this;while(A.parentNode){++B;A=A.parentNode}return B},setOwnerTree:function(A,B){if(A!=this.ownerTree){if(this.ownerTree){this.ownerTree.unregisterNode(this)}this.ownerTree=A;if(B!==true){Ext.each(this.childNodes,function(C){C.setOwnerTree(A)})}if(A){A.registerNode(this)}}},setId:function(B){if(B!==this.id){var A=this.ownerTree;if(A){A.unregisterNode(this)}this.id=this.attributes.id=B;if(A){A.registerNode(this)}this.onIdChange(B)}},onIdChange:Ext.emptyFn,getPath:function(D){D=D||"id";var A=this.parentNode;var C=[this.attributes[D]];while(A){C.unshift(A.attributes[D]);A=A.parentNode}var B=this.getOwnerTree().pathSeparator;return B+C.join(B)},bubble:function(B,C,D){var A=this;while(A){if(B.apply(C||A,D||[A])===false){break}A=A.parentNode}},cascade:function(B,D,F){if(B.apply(D||this,F||[this])!==false){var C=this.childNodes;for(var A=0,E=C.length;A<E;A++){C[A].cascade(B,D,F)}}},eachChild:function(B,D,F){var C=this.childNodes;for(var A=0,E=C.length;A<E;A++){if(B.apply(D||C[A],F||[C[A]])===false){break}}},findChild:function(A,C,B){return this.findChildBy(function(){return this.attributes[A]==C},null,B)},findChildBy:function(E,B,G){var A=this.childNodes,F=A.length,C=0,D,H;for(;C<F;C++){D=A[C];if(E.call(B||D,D)===true){return D}else{if(G){H=D.findChildBy(E,B,G);if(H!=null){return H}}}}return null},sort:function(D,F){var E=this.childNodes;var G=E.length;if(G>0){var B=F?function(){D.apply(F,arguments)}:D;E.sort(B);for(var A=0;A<G;A++){var C=E[A];C.previousSibling=E[A-1];C.nextSibling=E[A+1];if(A===0){this.setFirstChild(C)}if(A==G-1){this.setLastChild(C)}}}},contains:function(A){return A.isAncestor(this)},isAncestor:function(B){var A=this.parentNode;while(A){if(A==B){return true}A=A.parentNode}return false},toString:function(){return"[Node"+(this.id?" "+this.id:"")+"]"}});Ext.tree.TreeNode=Ext.extend(Ext.data.Node,{constructor:function(B){B=B||{};if(Ext.isString(B)){B={text:B}}this.childrenRendered=false;this.rendered=false;Ext.tree.TreeNode.superclass.constructor.call(this,B);this.expanded=B.expanded===true;this.isTarget=B.isTarget!==false;this.draggable=B.draggable!==false&&B.allowDrag!==false;this.allowChildren=B.allowChildren!==false&&B.allowDrop!==false;this.text=B.text;this.disabled=B.disabled===true;this.hidden=B.hidden===true;this.addEvents("textchange","beforeexpand","beforecollapse","expand","disabledchange","collapse","beforeclick","click","checkchange","beforedblclick","dblclick","contextmenu","beforechildrenrendered");var A=this.attributes.uiProvider||this.defaultUI||Ext.tree.TreeNodeUI;this.ui=new A(this)},preventHScroll:true,isExpanded:function(){return this.expanded},getUI:function(){return this.ui},getLoader:function(){var A;return this.loader||((A=this.getOwnerTree())&&A.loader?A.loader:(this.loader=new Ext.tree.TreeLoader()))},setFirstChild:function(A){var B=this.firstChild;Ext.tree.TreeNode.superclass.setFirstChild.call(this,A);if(this.childrenRendered&&B&&A!=B){B.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},setLastChild:function(B){var A=this.lastChild;Ext.tree.TreeNode.superclass.setLastChild.call(this,B);if(this.childrenRendered&&A&&B!=A){A.renderIndent(true,true)}if(this.rendered){this.renderIndent(true,true)}},appendChild:function(A){if(!A.render&&!Ext.isArray(A)){A=this.getLoader().createNode(A)}var B=Ext.tree.TreeNode.superclass.appendChild.call(this,A);if(B&&this.childrenRendered){B.render()}this.ui.updateExpandIcon();return B},removeChild:function(B,C){this.ownerTree.getSelectionModel().unselect(B);Ext.tree.TreeNode.superclass.removeChild.apply(this,arguments);if(!C){var A=B.ui.rendered;if(A){B.ui.remove()}if(A&&this.childNodes.length<1){this.collapse(false,false)}else{this.ui.updateExpandIcon()}if(!this.firstChild&&!this.isHiddenRoot()){this.childrenRendered=false}}return B},insertBefore:function(B,A){if(!B.render){B=this.getLoader().createNode(B)}var C=Ext.tree.TreeNode.superclass.insertBefore.call(this,B,A);if(C&&A&&this.childrenRendered){B.render()}this.ui.updateExpandIcon();return C},setText:function(A){var B=this.text;this.text=this.attributes.text=A;if(this.rendered){this.ui.onTextChange(this,A,B)}this.fireEvent("textchange",this,A,B)},setIconCls:function(B){var A=this.attributes.iconCls;this.attributes.iconCls=B;if(this.rendered){this.ui.onIconClsChange(this,B,A)}},setTooltip:function(A,B){this.attributes.qtip=A;this.attributes.qtipTitle=B;if(this.rendered){this.ui.onTipChange(this,A,B)}},setIcon:function(A){this.attributes.icon=A;if(this.rendered){this.ui.onIconChange(this,A)}},setHref:function(A,B){this.attributes.href=A;this.attributes.hrefTarget=B;if(this.rendered){this.ui.onHrefChange(this,A,B)}},setCls:function(B){var A=this.attributes.cls;this.attributes.cls=B;if(this.rendered){this.ui.onClsChange(this,B,A)}},select:function(){var A=this.getOwnerTree();if(A){A.getSelectionModel().select(this)}},unselect:function(B){var A=this.getOwnerTree();if(A){A.getSelectionModel().unselect(this,B)}},isSelected:function(){var A=this.getOwnerTree();return A?A.getSelectionModel().isSelected(this):false},expand:function(C,B,A,D){if(!this.expanded){if(this.fireEvent("beforeexpand",this,C,B)===false){return}if(!this.childrenRendered){this.renderChildren()}this.expanded=true;if(!this.isHiddenRoot()&&(this.getOwnerTree().animate&&B!==false)||B){this.ui.animExpand(function(){this.fireEvent("expand",this);this.runCallback(A,D||this,[this]);if(C===true){this.expandChildNodes(true,true)}}.createDelegate(this));return}else{this.ui.expand();this.fireEvent("expand",this);this.runCallback(A,D||this,[this])}}else{this.runCallback(A,D||this,[this])}if(C===true){this.expandChildNodes(true)}},runCallback:function(A,B,C){if(Ext.isFunction(A)){A.apply(B,C)}},isHiddenRoot:function(){return this.isRoot&&!this.getOwnerTree().rootVisible},collapse:function(D,C,A,F){if(this.expanded&&!this.isHiddenRoot()){if(this.fireEvent("beforecollapse",this,D,C)===false){return}this.expanded=false;if((this.getOwnerTree().animate&&C!==false)||C){this.ui.animCollapse(function(){this.fireEvent("collapse",this);this.runCallback(A,F||this,[this]);if(D===true){this.collapseChildNodes(true)}}.createDelegate(this));return}else{this.ui.collapse();this.fireEvent("collapse",this);this.runCallback(A,F||this,[this])}}else{if(!this.expanded){this.runCallback(A,F||this,[this])}}if(D===true){var E=this.childNodes;for(var B=0,G=E.length;B<G;B++){E[B].collapse(true,false)}}},delayedExpand:function(A){if(!this.expandProcId){this.expandProcId=this.expand.defer(A,this)}},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId)}this.expandProcId=false},toggle:function(){if(this.expanded){this.collapse()}else{this.expand()}},ensureVisible:function(A,C){var B=this.getOwnerTree();B.expandPath(this.parentNode?this.parentNode.getPath():this.getPath(),false,function(){var D=B.getNodeById(this.id);B.getTreeEl().scrollChildIntoView(D.ui.anchor);this.runCallback(A,C||this,[this])}.createDelegate(this))},expandChildNodes:function(C,B){var D=this.childNodes,A,E=D.length;for(A=0;A<E;A++){D[A].expand(C,B)}},collapseChildNodes:function(B){var C=this.childNodes;for(var A=0,D=C.length;A<D;A++){C[A].collapse(B)}},disable:function(){this.disabled=true;this.unselect();if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,true)}this.fireEvent("disabledchange",this,true)},enable:function(){this.disabled=false;if(this.rendered&&this.ui.onDisableChange){this.ui.onDisableChange(this,false)}this.fireEvent("disabledchange",this,false)},renderChildren:function(B){if(B!==false){this.fireEvent("beforechildrenrendered",this)}var C=this.childNodes;for(var A=0,D=C.length;A<D;A++){C[A].render(true)}this.childrenRendered=true},sort:function(B,D){Ext.tree.TreeNode.superclass.sort.apply(this,arguments);if(this.childrenRendered){var C=this.childNodes;for(var A=0,E=C.length;A<E;A++){C[A].render(true)}}},render:function(A){this.ui.render(A);if(!this.rendered){this.getOwnerTree().registerNode(this);this.rendered=true;if(this.expanded){this.expanded=false;this.expand(false,false)}}},renderIndent:function(B,E){if(E){this.ui.childIndent=null}this.ui.renderIndent();if(B===true&&this.childrenRendered){var C=this.childNodes;for(var A=0,D=C.length;A<D;A++){C[A].renderIndent(true,E)}}},beginUpdate:function(){this.childrenRendered=false},endUpdate:function(){if(this.expanded&&this.rendered){this.renderChildren()}},destroy:function(A){if(A===true){this.unselect(true)}Ext.tree.TreeNode.superclass.destroy.call(this,A);Ext.destroy(this.ui,this.loader);this.ui=this.loader=null},onIdChange:function(A){this.ui.onIdChange(A)}});Ext.tree.TreePanel.nodeTypes.node=Ext.tree.TreeNode;Ext.tree.AsyncTreeNode=function(A){this.loaded=A&&A.loaded===true;this.loading=false;Ext.tree.AsyncTreeNode.superclass.constructor.apply(this,arguments);this.addEvents("beforeload","load")};Ext.extend(Ext.tree.AsyncTreeNode,Ext.tree.TreeNode,{expand:function(D,C,A,E){if(this.loading){var F;var G=function(){if(!this.loading){clearInterval(F);this.expand(D,C,A,E)}}.createDelegate(this);F=setInterval(G,200);return}if(!this.loaded){if(this.fireEvent("beforeload",this)===false){return}this.loading=true;this.ui.beforeLoad(this);var B=this.loader||this.attributes.loader||this.getOwnerTree().getLoader();if(B){B.load(this,this.loadComplete.createDelegate(this,[D,C,A,E]),this);return}}Ext.tree.AsyncTreeNode.superclass.expand.call(this,D,C,A,E)},isLoading:function(){return this.loading},loadComplete:function(C,B,A,D){this.loading=false;this.loaded=true;this.ui.afterLoad(this);this.fireEvent("load",this);this.expand(C,B,A,D)},isLoaded:function(){return this.loaded},hasChildNodes:function(){if(!this.isLeaf()&&!this.loaded){return true}else{return Ext.tree.AsyncTreeNode.superclass.hasChildNodes.call(this)}},reload:function(A,B){this.collapse(false,false);while(this.firstChild){this.removeChild(this.firstChild).destroy()}this.childrenRendered=false;this.loaded=false;if(this.isHiddenRoot()){this.expanded=false}this.expand(false,false,A,B)}});Ext.tree.TreePanel.nodeTypes.async=Ext.tree.AsyncTreeNode;Ext.tree.TreeNodeUI=Ext.extend(Object,{constructor:function(A){Ext.apply(this,{node:A,rendered:false,animating:false,wasLeaf:true,ecc:"x-tree-ec-icon x-tree-elbow",emptyIcon:Ext.BLANK_IMAGE_URL})},removeChild:function(A){if(this.rendered){this.ctNode.removeChild(A.ui.getEl())}},beforeLoad:function(){this.addClass("x-tree-node-loading")},afterLoad:function(){this.removeClass("x-tree-node-loading")},onTextChange:function(A,B,C){if(this.rendered){this.textNode.innerHTML=B}},onIconClsChange:function(A,C,B){if(this.rendered){Ext.fly(this.iconNode).replaceClass(B,C)}},onIconChange:function(A,B){if(this.rendered){var C=Ext.isEmpty(B);this.iconNode.src=C?this.emptyIcon:B;Ext.fly(this.iconNode)[C?"removeClass":"addClass"]("x-tree-node-inline-icon")}},onTipChange:function(C,A,D){if(this.rendered){var B=Ext.isDefined(D);if(this.textNode.setAttributeNS){this.textNode.setAttributeNS("ext","qtip",A);if(B){this.textNode.setAttributeNS("ext","qtitle",D)}}else{this.textNode.setAttribute("ext:qtip",A);if(B){this.textNode.setAttribute("ext:qtitle",D)}}}},onHrefChange:function(B,A,C){if(this.rendered){this.anchor.href=this.getHref(A);if(Ext.isDefined(C)){this.anchor.target=C}}},onClsChange:function(A,C,B){if(this.rendered){Ext.fly(this.elNode).replaceClass(B,C)}},onDisableChange:function(A,B){this.disabled=B;if(this.checkbox){this.checkbox.disabled=B}this[B?"addClass":"removeClass"]("x-tree-node-disabled")},onSelectedChange:function(A){if(A){this.focus();this.addClass("x-tree-selected")}else{this.removeClass("x-tree-selected")}},onMove:function(H,D,A,G,B,E){this.childIndent=null;if(this.rendered){var C=G.ui.getContainer();if(!C){this.holder=document.createElement("div");this.holder.appendChild(this.wrap);return}var F=E?E.ui.getEl():null;if(F){C.insertBefore(this.wrap,F)}else{C.appendChild(this.wrap)}this.node.renderIndent(true,A!=G)}},addClass:function(A){if(this.elNode){Ext.fly(this.elNode).addClass(A)}},removeClass:function(A){if(this.elNode){Ext.fly(this.elNode).removeClass(A)}},remove:function(){if(this.rendered){this.holder=document.createElement("div");this.holder.appendChild(this.wrap)}},fireEvent:function(){return this.node.fireEvent.apply(this.node,arguments)},initEvents:function(){this.node.on("move",this.onMove,this);if(this.node.disabled){this.onDisableChange(this.node,true)}if(this.node.hidden){this.hide()}var A=this.node.getOwnerTree();var B=A.enableDD||A.enableDrag||A.enableDrop;if(B&&(!this.node.isRoot||A.rootVisible)){Ext.dd.Registry.register(this.elNode,{node:this.node,handles:this.getDDHandles(),isHandle:false})}},getDDHandles:function(){return[this.iconNode,this.textNode,this.elNode]},hide:function(){this.node.hidden=true;if(this.wrap){this.wrap.style.display="none"}},show:function(){this.node.hidden=false;if(this.wrap){this.wrap.style.display=""}},onContextMenu:function(A){if(this.node.hasListener("contextmenu")||this.node.getOwnerTree().hasListener("contextmenu")){A.preventDefault();this.focus();this.fireEvent("contextmenu",this.node,A)}},onClick:function(A){if(this.dropping){A.stopEvent();return}if(this.fireEvent("beforeclick",this.node,A)!==false){var B=A.getTarget("a");if(!this.disabled&&this.node.attributes.href&&B){this.fireEvent("click",this.node,A);return}else{if(B&&A.ctrlKey){A.stopEvent()}}A.preventDefault();if(this.disabled){return}if(this.node.attributes.singleClickExpand&&!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("click",this.node,A)}else{A.stopEvent()}},onDblClick:function(A){A.preventDefault();if(this.disabled){return}if(this.fireEvent("beforedblclick",this.node,A)!==false){if(this.checkbox){this.toggleCheck()}if(!this.animating&&this.node.isExpandable()){this.node.toggle()}this.fireEvent("dblclick",this.node,A)}},onOver:function(A){this.addClass("x-tree-node-over")},onOut:function(A){this.removeClass("x-tree-node-over")},onCheckChange:function(){var A=this.checkbox.checked;this.checkbox.defaultChecked=A;this.node.attributes.checked=A;this.fireEvent("checkchange",this.node,A)},ecClick:function(A){if(!this.animating&&this.node.isExpandable()){this.node.toggle()}},startDrop:function(){this.dropping=true},endDrop:function(){setTimeout(function(){this.dropping=false}.createDelegate(this),50)},expand:function(){this.updateExpandIcon();this.ctNode.style.display=""},focus:function(){if(!this.node.preventHScroll){try{this.anchor.focus()}catch(A){}}else{try{var C=this.node.getOwnerTree().getTreeEl().dom;var B=C.scrollLeft;this.anchor.focus();C.scrollLeft=B}catch(A){}}},toggleCheck:function(B){var A=this.checkbox;if(A){A.checked=(B===undefined?!A.checked:B);this.onCheckChange()}},blur:function(){try{this.anchor.blur()}catch(A){}},animExpand:function(A){var B=Ext.get(this.ctNode);B.stopFx();if(!this.node.isExpandable()){this.updateExpandIcon();this.ctNode.style.display="";Ext.callback(A);return}this.animating=true;this.updateExpandIcon();B.slideIn("t",{callback:function(){this.animating=false;Ext.callback(A)},scope:this,duration:this.node.ownerTree.duration||0.25})},highlight:function(){var A=this.node.getOwnerTree();Ext.fly(this.wrap).highlight(A.hlColor||"C3DAF9",{endColor:A.hlBaseColor})},collapse:function(){this.updateExpandIcon();this.ctNode.style.display="none"},animCollapse:function(A){var B=Ext.get(this.ctNode);B.enableDisplayMode("block");B.stopFx();this.animating=true;this.updateExpandIcon();B.slideOut("t",{callback:function(){this.animating=false;Ext.callback(A)},scope:this,duration:this.node.ownerTree.duration||0.25})},getContainer:function(){return this.ctNode},getEl:function(){return this.wrap},appendDDGhost:function(A){A.appendChild(this.elNode.cloneNode(true))},getDDRepairXY:function(){return Ext.lib.Dom.getXY(this.iconNode)},onRender:function(){this.render()},render:function(D){var A=this.node,C=A.attributes;var B=A.parentNode?A.parentNode.ui.getContainer():A.ownerTree.innerCt.dom;if(!this.rendered){this.rendered=true;this.renderElements(A,C,B,D);if(C.qtip){this.onTipChange(A,C.qtip,C.qtipTitle)}else{if(C.qtipCfg){C.qtipCfg.target=Ext.id(this.textNode);Ext.QuickTips.register(C.qtipCfg)}}this.initEvents();if(!this.node.expanded){this.updateExpandIcon(true)}}else{if(D===true){B.appendChild(this.wrap)}}},renderElements:function(F,I,E,J){this.indentMarkup=F.parentNode?F.parentNode.ui.getChildIndent():"";var B=Ext.isBoolean(I.checked),D,H=this.getHref(I.href),C=['<li class="x-tree-node"><div ext:tree-node-id="',F.id,'" class="x-tree-node-el x-tree-node-leaf x-unselectable ',I.cls,'" unselectable="on">','<span class="x-tree-node-indent">',this.indentMarkup,"</span>",'<img alt="" src="',this.emptyIcon,'" class="x-tree-ec-icon x-tree-elbow" />','<img alt="" src="',I.icon||this.emptyIcon,'" class="x-tree-node-icon',(I.icon?" x-tree-node-inline-icon":""),(I.iconCls?" "+I.iconCls:""),'" unselectable="on" />',B?('<input class="x-tree-node-cb" type="checkbox" '+(I.checked?'checked="checked" />':"/>")):"",'<a hidefocus="on" class="x-tree-node-anchor" href="',H,'" tabIndex="1" ',I.hrefTarget?' target="'+I.hrefTarget+'"':"",'><span unselectable="on">',F.text,"</span></a></div>",'<ul class="x-tree-node-ct" style="display:none;"></ul>',"</li>"].join("");if(J!==true&&F.nextSibling&&(D=F.nextSibling.ui.getEl())){this.wrap=Ext.DomHelper.insertHtml("beforeBegin",D,C)}else{this.wrap=Ext.DomHelper.insertHtml("beforeEnd",E,C)}this.elNode=this.wrap.childNodes[0];this.ctNode=this.wrap.childNodes[1];var A=this.elNode.childNodes;this.indentNode=A[0];this.ecNode=A[1];this.iconNode=A[2];var G=3;if(B){this.checkbox=A[3];this.checkbox.defaultChecked=this.checkbox.checked;G++}this.anchor=A[G];this.textNode=A[G].firstChild},getHref:function(A){return Ext.isEmpty(A)?(Ext.isGecko?"":"#"):A},getAnchor:function(){return this.anchor},getTextEl:function(){return this.textNode},getIconEl:function(){return this.iconNode},isChecked:function(){return this.checkbox?this.checkbox.checked:false},updateExpandIcon:function(){if(this.rendered){var B=this.node,F,A,D=B.isLast()?"x-tree-elbow-end":"x-tree-elbow",E=B.hasChildNodes();if(E||B.attributes.expandable){if(B.expanded){D+="-minus";F="x-tree-node-collapsed";A="x-tree-node-expanded"}else{D+="-plus";F="x-tree-node-expanded";A="x-tree-node-collapsed"}if(this.wasLeaf){this.removeClass("x-tree-node-leaf");this.wasLeaf=false}if(this.c1!=F||this.c2!=A){Ext.fly(this.elNode).replaceClass(F,A);this.c1=F;this.c2=A}}else{if(!this.wasLeaf){Ext.fly(this.elNode).replaceClass("x-tree-node-expanded","x-tree-node-collapsed");delete this.c1;delete this.c2;this.wasLeaf=true}}var C="x-tree-ec-icon "+D;if(this.ecc!=C){this.ecNode.className=C;this.ecc=C}}},onIdChange:function(A){if(this.rendered){this.elNode.setAttribute("ext:tree-node-id",A)}},getChildIndent:function(){if(!this.childIndent){var B=[],A=this.node;while(A){if(!A.isRoot||(A.isRoot&&A.ownerTree.rootVisible)){if(!A.isLast()){B.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-elbow-line" />')}else{B.unshift('<img alt="" src="'+this.emptyIcon+'" class="x-tree-icon" />')}}A=A.parentNode}this.childIndent=B.join("")}return this.childIndent},renderIndent:function(){if(this.rendered){var B="",A=this.node.parentNode;if(A){B=A.ui.getChildIndent()}if(this.indentMarkup!=B){this.indentNode.innerHTML=B;this.indentMarkup=B}this.updateExpandIcon()}},destroy:function(){if(this.elNode){Ext.dd.Registry.unregister(this.elNode.id)}Ext.each(["textnode","anchor","checkbox","indentNode","ecNode","iconNode","elNode","ctNode","wrap","holder"],function(A){if(this[A]){Ext.fly(this[A]).remove();delete this[A]}},this);delete this.node}});Ext.tree.RootTreeNodeUI=Ext.extend(Ext.tree.TreeNodeUI,{render:function(){if(!this.rendered){var A=this.node.ownerTree.innerCt.dom;this.node.expanded=true;A.innerHTML='<div class="x-tree-root-node"></div>';this.wrap=this.ctNode=A.firstChild}},collapse:Ext.emptyFn,expand:Ext.emptyFn});Ext.tree.TreeLoader=function(A){this.baseParams={};Ext.apply(this,A);this.addEvents("beforeload","load","loadexception");Ext.tree.TreeLoader.superclass.constructor.call(this);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\s,|]/)}};Ext.extend(Ext.tree.TreeLoader,Ext.util.Observable,{uiProviders:{},clearOnLoad:true,paramOrder:undefined,paramsAsHash:false,nodeParameter:"node",directFn:undefined,load:function(B,A,C){if(this.clearOnLoad){while(B.firstChild){B.removeChild(B.firstChild)}}if(this.doPreload(B)){this.runCallback(A,C||B,[B])}else{if(this.directFn||this.dataUrl||this.url){this.requestData(B,A,C||B)}}},doPreload:function(C){if(C.attributes.children){if(C.childNodes.length<1){var D=C.attributes.children;C.beginUpdate();for(var B=0,E=D.length;B<E;B++){var A=C.appendChild(this.createNode(D[B]));if(this.preloadChildren){this.doPreload(A)}}C.endUpdate()}return true}return false},getParams:function(C){var E=Ext.apply({},this.baseParams),B=this.nodeParameter,G=this.paramOrder;B&&(E[B]=C.id);if(this.directFn){var D=[C.id];if(G){if(B&&G.indexOf(B)>-1){D=[]}for(var A=0,F=G.length;A<F;A++){D.push(E[G[A]])}}else{if(this.paramsAsHash){D=[E]}}return D}else{return E}},requestData:function(B,A,C){if(this.fireEvent("beforeload",this,B,A)!==false){if(this.directFn){var D=this.getParams(B);D.push(this.processDirectResponse.createDelegate(this,[{callback:A,node:B,scope:C}],true));this.directFn.apply(window,D)}else{this.transId=Ext.Ajax.request({method:this.requestMethod,url:this.dataUrl||this.url,success:this.handleResponse,failure:this.handleFailure,scope:this,argument:{callback:A,node:B,scope:C},params:this.getParams(B)})}}else{this.runCallback(A,C||B,[])}},processDirectResponse:function(A,B,C){if(B.status){this.handleResponse({responseData:Ext.isArray(A)?A:null,responseText:A,argument:C})}else{this.handleFailure({argument:C})}},runCallback:function(A,B,C){if(Ext.isFunction(A)){A.apply(B,C)}},isLoading:function(){return !!this.transId},abort:function(){if(this.isLoading()){Ext.Ajax.abort(this.transId)}},createNode:function(attr){if(this.baseAttrs){Ext.applyIf(attr,this.baseAttrs)}if(this.applyLoader!==false&&!attr.loader){attr.loader=this}if(Ext.isString(attr.uiProvider)){attr.uiProvider=this.uiProviders[attr.uiProvider]||eval(attr.uiProvider)}if(attr.nodeType){return new Ext.tree.TreePanel.nodeTypes[attr.nodeType](attr)}else{return attr.leaf?new Ext.tree.TreeNode(attr):new Ext.tree.AsyncTreeNode(attr)}},processResponse:function(J,G,B,C){var D=J.responseText;try{var H=J.responseData||Ext.decode(D);G.beginUpdate();for(var E=0,I=H.length;E<I;E++){var F=this.createNode(H[E]);if(F){G.appendChild(F)}}G.endUpdate();this.runCallback(B,C||G,[G])}catch(A){this.handleFailure(J)}},handleResponse:function(B){this.transId=false;var A=B.argument;this.processResponse(B,A.node,A.callback,A.scope);this.fireEvent("load",this,A.node,B)},handleFailure:function(B){this.transId=false;var A=B.argument;this.fireEvent("loadexception",this,A.node,B);this.runCallback(A.callback,A.scope||A.node,[A.node])},destroy:function(){this.abort();this.purgeListeners()}});Ext.tree.TreeFilter=function(A,B){this.tree=A;this.filtered={};Ext.apply(this,B)};Ext.tree.TreeFilter.prototype={clearBlank:false,reverse:false,autoClear:false,remove:false,filter:function(C,E,B){E=E||"text";var A;if(typeof C=="string"){var D=C.length;if(D==0&&this.clearBlank){this.clear();return}C=C.toLowerCase();A=function(F){return F.attributes[E].substr(0,D).toLowerCase()==C}}else{if(C.exec){A=function(F){return C.test(F.attributes[E])}}else{throw"Illegal filter type, must be string or regex"}}this.filterBy(A,null,B)},filterBy:function(F,C,B){B=B||this.tree.root;if(this.autoClear){this.clear()}var A=this.filtered,D=this.reverse;var H=function(I){if(I==B){return true}if(A[I.id]){return false}var J=F.call(C||I,I);if(!J||D){A[I.id]=I;I.ui.hide();return false}return true};B.cascade(H);if(this.remove){for(var G in A){if(typeof G!="function"){var E=A[G];if(E&&E.parentNode){E.parentNode.removeChild(E)}}}}},clear:function(){var C=this.tree;var A=this.filtered;for(var D in A){if(typeof D!="function"){var B=A[D];if(B){B.ui.show()}}}this.filtered={}}};Ext.tree.TreeSorter=Ext.extend(Object,{constructor:function(C,B){Ext.apply(this,B);C.on({scope:this,beforechildrenrendered:this.doSort,append:this.updateSort,insert:this.updateSort,textchange:this.updateSortParent});var F=this.dir&&this.dir.toLowerCase()=="desc",E=this.property||"text",A=this.sortType,G=this.folderSort,H=this.caseSensitive===true,D=this.leafAttr||"leaf";if(Ext.isString(A)){A=Ext.data.SortTypes[A]}this.sortFn=function(P,K){var J=P.attributes,I=K.attributes;if(G){if(J[D]&&!I[D]){return 1}if(!J[D]&&I[D]){return -1}}var L=J[E],N=I[E],M=A?A(L):(H?L:L.toUpperCase()),O=A?A(N):(H?N:N.toUpperCase());if(M<O){return F?1:-1}else{if(M>O){return F?-1:1}}return 0}},doSort:function(A){A.sort(this.sortFn)},updateSort:function(A,B){if(B.childrenRendered){this.doSort.defer(1,this,[B])}},updateSortParent:function(B){var A=B.parentNode;if(A&&A.childrenRendered){this.doSort.defer(1,this,[A])}}});if(Ext.dd.DropZone){Ext.tree.TreeDropZone=function(A,B){this.allowParentInsert=B.allowParentInsert||false;this.allowContainerDrop=B.allowContainerDrop||false;this.appendOnly=B.appendOnly||false;Ext.tree.TreeDropZone.superclass.constructor.call(this,A.getTreeEl(),B);this.tree=A;this.dragOverData={};this.lastInsertClass="x-tree-no-status"};Ext.extend(Ext.tree.TreeDropZone,Ext.dd.DropZone,{ddGroup:"TreeDD",expandDelay:1000,expandNode:function(A){if(A.hasChildNodes()&&!A.isExpanded()){A.expand(false,null,this.triggerCacheRefresh.createDelegate(this))}},queueExpand:function(A){this.expandProcId=this.expandNode.defer(this.expandDelay,this,[A])},cancelExpand:function(){if(this.expandProcId){clearTimeout(this.expandProcId);this.expandProcId=false}},isValidDropPoint:function(G,B,D,A,E){if(!G||!E){return false}var F=G.node;var I=E.node;if(!(F&&F.isTarget&&B)){return false}if(B=="append"&&F.allowChildren===false){return false}if((B=="above"||B=="below")&&(F.parentNode&&F.parentNode.allowChildren===false)){return false}if(I&&(F==I||I.contains(F))){return false}var H=this.dragOverData;H.tree=this.tree;H.target=F;H.data=E;H.point=B;H.source=D;H.rawEvent=A;H.dropNode=I;H.cancel=false;var C=this.tree.fireEvent("nodedragover",H);return H.cancel===false&&C!==false},getDropPoint:function(A,G,B){var K=G.node;if(K.isRoot){return K.allowChildren!==false?"append":false}var F=G.ddel;var D=Ext.lib.Dom.getY(F),I=D+F.offsetHeight;var J=Ext.lib.Event.getPageY(A);var H=K.allowChildren===false||K.isLeaf();if(this.appendOnly||K.parentNode.allowChildren===false){return H?false:"append"}var C=false;if(!this.allowParentInsert){C=K.hasChildNodes()&&K.isExpanded()}var E=(I-D)/(H?2:3);if(J>=D&&J<(D+E)){return"above"}else{if(!C&&(H||J>=I-E&&J<=I)){return"below"}else{return"append"}}},onNodeEnter:function(A,D,C,B){this.cancelExpand()},onContainerOver:function(C,A,B){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",C,A,B)){return this.dropAllowed}return this.dropNotAllowed},onNodeOver:function(G,C,A,D){var B=this.getDropPoint(A,G,C);var H=G.node;if(!this.expandProcId&&B=="append"&&H.hasChildNodes()&&!G.node.isExpanded()){this.queueExpand(H)}else{if(B!="append"){this.cancelExpand()}}var I=this.dropNotAllowed;if(this.isValidDropPoint(G,B,C,A,D)){if(B){var F=G.ddel;var E;if(B=="above"){I=G.node.isFirst()?"x-tree-drop-ok-above":"x-tree-drop-ok-between";E="x-tree-drag-insert-above"}else{if(B=="below"){I=G.node.isLast()?"x-tree-drop-ok-below":"x-tree-drop-ok-between";E="x-tree-drag-insert-below"}else{I="x-tree-drop-ok-append";E="x-tree-drag-append"}}if(this.lastInsertClass!=E){Ext.fly(F).replaceClass(this.lastInsertClass,E);this.lastInsertClass=E}}}return I},onNodeOut:function(A,D,C,B){this.cancelExpand();this.removeDropIndicators(A)},onNodeDrop:function(B,G,D,C){var A=this.getDropPoint(D,B,G);var E=B.node;E.ui.startDrop();if(!this.isValidDropPoint(B,A,G,D,C)){E.ui.endDrop();return false}var F=C.node||(G.getTreeNode?G.getTreeNode(C,E,A,D):null);return this.processDrop(E,C,A,G,D,F)},onContainerDrop:function(E,A,B){if(this.allowContainerDrop&&this.isValidDropPoint({ddel:this.tree.getRootNode().ui.elNode,node:this.tree.getRootNode()},"append",E,A,B)){var D=this.tree.getRootNode();D.ui.startDrop();var C=B.node||(E.getTreeNode?E.getTreeNode(B,D,"append",A):null);return this.processDrop(D,B,"append",E,A,C)}return false},processDrop:function(F,D,G,C,A,B){var H={tree:this.tree,target:F,data:D,point:G,source:C,rawEvent:A,dropNode:B,cancel:!B,dropStatus:false};var E=this.tree.fireEvent("beforenodedrop",H);if(E===false||H.cancel===true||!H.dropNode){F.ui.endDrop();return H.dropStatus}F=H.target;if(G=="append"&&!F.isExpanded()){F.expand(false,null,function(){this.completeDrop(H)}.createDelegate(this))}else{this.completeDrop(H)}return true},completeDrop:function(A){var C=A.dropNode,D=A.point,G=A.target;if(!Ext.isArray(C)){C=[C]}var B;for(var E=0,F=C.length;E<F;E++){B=C[E];if(D=="above"){G.parentNode.insertBefore(B,G)}else{if(D=="below"){G.parentNode.insertBefore(B,G.nextSibling)}else{G.appendChild(B)}}}B.ui.focus();if(Ext.enableFx&&this.tree.hlDrop){B.ui.highlight()}G.ui.endDrop();this.tree.fireEvent("nodedrop",A)},afterNodeMoved:function(E,B,A,D,C){if(Ext.enableFx&&this.tree.hlDrop){C.ui.focus();C.ui.highlight()}this.tree.fireEvent("nodedrop",this.tree,D,B,E,A)},getTree:function(){return this.tree},removeDropIndicators:function(B){if(B&&B.ddel){var A=B.ddel;Ext.fly(A).removeClass(["x-tree-drag-insert-above","x-tree-drag-insert-below","x-tree-drag-append"]);this.lastInsertClass="_noclass"}},beforeDragDrop:function(B,A,C){this.cancelExpand();return true},afterRepair:function(A){if(A&&Ext.enableFx){A.node.ui.highlight()}this.hideProxy()}})}if(Ext.dd.DragZone){Ext.tree.TreeDragZone=function(A,B){Ext.tree.TreeDragZone.superclass.constructor.call(this,A.innerCt,B);this.tree=A};Ext.extend(Ext.tree.TreeDragZone,Ext.dd.DragZone,{ddGroup:"TreeDD",onBeforeDrag:function(C,A){var B=C.node;return B&&B.draggable&&!B.disabled},onInitDrag:function(A){var B=this.dragData;this.tree.getSelectionModel().select(B.node);this.tree.eventModel.disable();this.proxy.update("");B.node.ui.appendDDGhost(this.proxy.ghost.dom);this.tree.fireEvent("startdrag",this.tree,B.node,A)},getRepairXY:function(A,B){return B.node.ui.getDDRepairXY()},onEndDrag:function(B,A){this.tree.eventModel.enable.defer(100,this.tree.eventModel);this.tree.fireEvent("enddrag",this.tree,B.node,A)},onValidDrop:function(C,A,B){this.tree.fireEvent("dragdrop",this.tree,this.dragData.node,C,A);this.hideProxy()},beforeInvalidDrop:function(A,C){var B=this.tree.getSelectionModel();B.clearSelections();B.select(this.dragData.node)},afterRepair:function(){if(Ext.enableFx&&this.tree.hlDrop){Ext.Element.fly(this.dragData.ddel).highlight(this.hlColor||"c3daf9")}this.dragging=false}})}Ext.tree.TreeEditor=function(A,C,B){C=C||{};var D=C.events?C:new Ext.form.TextField(C);Ext.tree.TreeEditor.superclass.constructor.call(this,D,B);this.tree=A;if(!A.rendered){A.on("render",this.initEditor,this)}else{this.initEditor(A)}};Ext.extend(Ext.tree.TreeEditor,Ext.Editor,{alignment:"l-l",autoSize:false,hideEl:false,cls:"x-small-editor x-tree-editor",shim:false,shadow:"frame",maxWidth:250,editDelay:350,initEditor:function(A){A.on({scope:this,beforeclick:this.beforeNodeClick,dblclick:this.onNodeDblClick});this.on({scope:this,complete:this.updateNode,beforestartedit:this.fitToTree,specialkey:this.onSpecialKey});this.on("startedit",this.bindScroll,this,{delay:10})},fitToTree:function(A,B){var C=this.tree.getTreeEl().dom,E=B.dom;if(C.scrollLeft>E.offsetLeft){C.scrollLeft=E.offsetLeft}var D=Math.min(this.maxWidth,(C.clientWidth>20?C.clientWidth:C.offsetWidth)-Math.max(0,E.offsetLeft-C.scrollLeft)-5);this.setSize(D,"")},triggerEdit:function(A,C){this.completeEdit();if(A.attributes.editable!==false){this.editNode=A;if(this.tree.autoScroll){Ext.fly(A.ui.getEl()).scrollIntoView(this.tree.body)}var B=A.text||"";if(!Ext.isGecko&&Ext.isEmpty(A.text)){A.setText("&#160;")}this.autoEditTimer=this.startEdit.defer(this.editDelay,this,[A.ui.textNode,B]);return false}},bindScroll:function(){this.tree.getTreeEl().on("scroll",this.cancelEdit,this)},beforeNodeClick:function(B,A){clearTimeout(this.autoEditTimer);if(this.tree.getSelectionModel().isSelected(B)){A.stopEvent();return this.triggerEdit(B)}},onNodeDblClick:function(B,A){clearTimeout(this.autoEditTimer)},updateNode:function(A,B){this.tree.getTreeEl().un("scroll",this.cancelEdit,this);this.editNode.setText(B)},onHide:function(){Ext.tree.TreeEditor.superclass.onHide.call(this);if(this.editNode){this.editNode.ui.focus.defer(50,this.editNode.ui)}},onSpecialKey:function(B,A){var C=A.getKey();if(C==A.ESC){A.stopEvent();this.cancelEdit()}else{if(C==A.ENTER&&!A.hasModifier()){A.stopEvent();this.completeEdit()}}},onDestroy:function(){clearTimeout(this.autoEditTimer);Ext.tree.TreeEditor.superclass.onDestroy.call(this);var A=this.tree;A.un("beforeclick",this.beforeNodeClick,this);A.un("dblclick",this.onNodeDblClick,this)}});Ext.menu.Menu=Ext.extend(Ext.Container,{minWidth:120,shadow:"sides",subMenuAlign:"tl-tr?",defaultAlign:"tl-bl?",allowOtherMenus:false,ignoreParentClicks:false,enableScrolling:true,maxHeight:null,scrollIncrement:24,showSeparator:true,defaultOffsets:[0,0],plain:false,floating:true,zIndex:15000,hidden:true,layout:"menu",hideMode:"offsets",scrollerHeight:8,autoLayout:true,defaultType:"menuitem",bufferResize:false,initComponent:function(){if(Ext.isArray(this.initialConfig)){Ext.apply(this,{items:this.initialConfig})}this.addEvents("click","mouseover","mouseout","itemclick");Ext.menu.MenuMgr.register(this);if(this.floating){Ext.EventManager.onWindowResize(this.hide,this)}else{if(this.initialConfig.hidden!==false){this.hidden=false}this.internalDefaults={hideOnClick:false}}Ext.menu.Menu.superclass.initComponent.call(this);if(this.autoLayout){var A=this.doLayout.createDelegate(this,[]);this.on({add:A,remove:A})}},getLayoutTarget:function(){return this.ul},onRender:function(C,B){if(!C){C=Ext.getBody()}var A={id:this.getId(),cls:"x-menu "+((this.floating)?"x-menu-floating x-layer ":"")+(this.cls||"")+(this.plain?" x-menu-plain":"")+(this.showSeparator?"":" x-menu-nosep"),style:this.style,cn:[{tag:"a",cls:"x-menu-focus",href:"#",onclick:"return false;",tabIndex:"-1"},{tag:"ul",cls:"x-menu-list"}]};if(this.floating){this.el=new Ext.Layer({shadow:this.shadow,dh:A,constrain:false,parentEl:C,zindex:this.zIndex})}else{this.el=C.createChild(A)}Ext.menu.Menu.superclass.onRender.call(this,C,B);if(!this.keyNav){this.keyNav=new Ext.menu.MenuNav(this)}this.focusEl=this.el.child("a.x-menu-focus");this.ul=this.el.child("ul.x-menu-list");this.mon(this.ul,{scope:this,click:this.onClick,mouseover:this.onMouseOver,mouseout:this.onMouseOut});if(this.enableScrolling){this.mon(this.el,{scope:this,delegate:".x-menu-scroller",click:this.onScroll,mouseover:this.deactivateActive})}},findTargetItem:function(A){var B=A.getTarget(".x-menu-list-item",this.ul,true);if(B&&B.menuItemId){return this.items.get(B.menuItemId)}},onClick:function(A){var B=this.findTargetItem(A);if(B){if(B.isFormField){this.setActiveItem(B)}else{if(B instanceof Ext.menu.BaseItem){if(B.menu&&this.ignoreParentClicks){B.expandMenu();A.preventDefault()}else{if(B.onClick){B.onClick(A);this.fireEvent("click",this,B,A)}}}}}},setActiveItem:function(A,B){if(A!=this.activeItem){this.deactivateActive();if((this.activeItem=A).isFormField){A.focus()}else{A.activate(B)}}else{if(B){A.expandMenu()}}},deactivateActive:function(){var A=this.activeItem;if(A){if(A.isFormField){if(A.collapse){A.collapse()}}else{A.deactivate()}delete this.activeItem}},tryActivate:function(F,A){var E=this.items;for(var B=F,D=E.length;B>=0&&B<D;B+=A){var C=E.get(B);if(C.isVisible()&&!C.disabled&&(C.canActivate||C.isFormField)){this.setActiveItem(C,false);return C}}return false},onMouseOver:function(A){var B=this.findTargetItem(A);if(B){if(B.canActivate&&!B.disabled){this.setActiveItem(B,true)}}this.over=true;this.fireEvent("mouseover",this,A,B)},onMouseOut:function(A){var B=this.findTargetItem(A);if(B){if(B==this.activeItem&&B.shouldDeactivate&&B.shouldDeactivate(A)){this.activeItem.deactivate();delete this.activeItem}}this.over=false;this.fireEvent("mouseout",this,A,B)},onScroll:function(A,D){if(A){A.stopEvent()}var C=this.ul.dom,B=Ext.fly(D).is(".x-menu-scroller-top");C.scrollTop+=this.scrollIncrement*(B?-1:1);if(B?C.scrollTop<=0:C.scrollTop+this.activeMax>=C.scrollHeight){this.onScrollerOut(null,D)}},onScrollerIn:function(A,D){var C=this.ul.dom,B=Ext.fly(D).is(".x-menu-scroller-top");if(B?C.scrollTop>0:C.scrollTop+this.activeMax<C.scrollHeight){Ext.fly(D).addClass(["x-menu-item-active","x-menu-scroller-active"])}},onScrollerOut:function(A,B){Ext.fly(B).removeClass(["x-menu-item-active","x-menu-scroller-active"])},show:function(A,B,C){if(this.floating){this.parentMenu=C;if(!this.el){this.render();this.doLayout(false,true)}this.showAt(this.el.getAlignToXY(A,B||this.defaultAlign,this.defaultOffsets),C)}else{Ext.menu.Menu.superclass.show.call(this)}},showAt:function(A,B){if(this.fireEvent("beforeshow",this)!==false){this.parentMenu=B;if(!this.el){this.render()}if(this.enableScrolling){this.el.setXY(A);A[1]=this.constrainScroll(A[1]);A=[this.el.adjustForConstraints(A)[0],A[1]]}else{A=this.el.adjustForConstraints(A)}this.el.setXY(A);this.el.show();Ext.menu.Menu.superclass.onShow.call(this);if(Ext.isIE){this.fireEvent("autosize",this);if(!Ext.isIE8){this.el.repaint()}}this.hidden=false;this.focus();this.fireEvent("show",this)}},constrainScroll:function(G){var B,C=this.ul.setHeight("auto").getHeight(),F=G,A,E,D,H;if(this.floating){E=Ext.fly(this.el.dom.parentNode);D=E.getScroll().top;H=E.getViewSize().height;A=G-D;B=this.maxHeight?this.maxHeight:H-A;if(C>H){B=H;F=G-A}else{if(B<C){F=G-(C-B);B=C}}}else{B=this.getHeight()}if(this.maxHeight){B=Math.min(this.maxHeight,B)}if(C>B&&B>0){this.activeMax=B-this.scrollerHeight*2-this.el.getFrameWidth("tb")-Ext.num(this.el.shadowOffset,0);this.ul.setHeight(this.activeMax);this.createScrollers();this.el.select(".x-menu-scroller").setDisplayed("")}else{this.ul.setHeight(C);this.el.select(".x-menu-scroller").setDisplayed("none")}this.ul.dom.scrollTop=0;return F},createScrollers:function(){if(!this.scroller){this.scroller={pos:0,top:this.el.insertFirst({tag:"div",cls:"x-menu-scroller x-menu-scroller-top",html:"&#160;"}),bottom:this.el.createChild({tag:"div",cls:"x-menu-scroller x-menu-scroller-bottom",html:"&#160;"})};this.scroller.top.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.topRepeater=new Ext.util.ClickRepeater(this.scroller.top,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.top],false)}});this.scroller.bottom.hover(this.onScrollerIn,this.onScrollerOut,this);this.scroller.bottomRepeater=new Ext.util.ClickRepeater(this.scroller.bottom,{listeners:{click:this.onScroll.createDelegate(this,[null,this.scroller.bottom],false)}})}},onLayout:function(){if(this.isVisible()){if(this.enableScrolling){this.constrainScroll(this.el.getTop())}if(this.floating){this.el.sync()}}},focus:function(){if(!this.hidden){this.doFocus.defer(50,this)}},doFocus:function(){if(!this.hidden){this.focusEl.focus()}},hide:function(A){if(!this.isDestroyed){this.deepHide=A;Ext.menu.Menu.superclass.hide.call(this);delete this.deepHide}},onHide:function(){Ext.menu.Menu.superclass.onHide.call(this);this.deactivateActive();if(this.el&&this.floating){this.el.hide()}var A=this.parentMenu;if(this.deepHide===true&&A){if(A.floating){A.hide(true)}else{A.deactivateActive()}}},lookupComponent:function(A){if(Ext.isString(A)){A=(A=="separator"||A=="-")?new Ext.menu.Separator():new Ext.menu.TextItem(A);this.applyDefaults(A)}else{if(Ext.isObject(A)){A=this.getMenuItem(A)}else{if(A.tagName||A.el){A=new Ext.BoxComponent({el:A})}}}return A},applyDefaults:function(B){if(!Ext.isString(B)){B=Ext.menu.Menu.superclass.applyDefaults.call(this,B);var A=this.internalDefaults;if(A){if(B.events){Ext.applyIf(B.initialConfig,A);Ext.apply(B,A)}else{Ext.applyIf(B,A)}}}return B},getMenuItem:function(A){A.ownerCt=this;if(!A.isXType){if(!A.xtype&&Ext.isBoolean(A.checked)){return new Ext.menu.CheckItem(A)}return Ext.create(A,this.defaultType)}return A},addSeparator:function(){return this.add(new Ext.menu.Separator())},addElement:function(A){return this.add(new Ext.menu.BaseItem({el:A}))},addItem:function(A){return this.add(A)},addMenuItem:function(A){return this.add(this.getMenuItem(A))},addText:function(A){return this.add(new Ext.menu.TextItem(A))},onDestroy:function(){Ext.EventManager.removeResizeListener(this.hide,this);var B=this.parentMenu;if(B&&B.activeChild==this){delete B.activeChild}delete this.parentMenu;Ext.menu.Menu.superclass.onDestroy.call(this);Ext.menu.MenuMgr.unregister(this);if(this.keyNav){this.keyNav.disable()}var A=this.scroller;if(A){Ext.destroy(A.topRepeater,A.bottomRepeater,A.top,A.bottom)}Ext.destroy(this.el,this.focusEl,this.ul)}});Ext.reg("menu",Ext.menu.Menu);Ext.menu.MenuNav=Ext.extend(Ext.KeyNav,function(){function B(C,D){if(!D.tryActivate(D.items.indexOf(D.activeItem)-1,-1)){D.tryActivate(D.items.length-1,-1)}}function A(C,D){if(!D.tryActivate(D.items.indexOf(D.activeItem)+1,1)){D.tryActivate(0,1)}}return{constructor:function(C){Ext.menu.MenuNav.superclass.constructor.call(this,C.el);this.scope=this.menu=C},doRelay:function(D,C){var E=D.getKey();if(this.menu.activeItem&&this.menu.activeItem.isFormField&&E!=D.TAB){return false}if(!this.menu.activeItem&&D.isNavKeyPress()&&E!=D.SPACE&&E!=D.RETURN){this.menu.tryActivate(0,1);return false}return C.call(this.scope||this,D,this.menu)},tab:function(C,D){C.stopEvent();if(C.shiftKey){B(C,D)}else{A(C,D)}},up:B,down:A,right:function(C,D){if(D.activeItem){D.activeItem.expandMenu(true)}},left:function(C,D){D.hide();if(D.parentMenu&&D.parentMenu.activeItem){D.parentMenu.activeItem.activate()}},enter:function(C,D){if(D.activeItem){C.stopPropagation();D.activeItem.onClick(C);D.fireEvent("click",this,D.activeItem);return true}}}}());Ext.menu.MenuMgr=function(){var A,I,K,H={},M=false,D=new Date();function E(){A={};I=new Ext.util.MixedCollection();K=Ext.getDoc().addKeyListener(27,J);K.disable()}function J(){if(I&&I.length>0){var N=I.clone();N.each(function(O){O.hide()});return true}return false}function C(N){I.remove(N);if(I.length<1){K.disable();Ext.getDoc().un("mousedown",G);M=false}}function F(N){var O=I.last();D=new Date();I.add(N);if(!M){K.enable();Ext.getDoc().on("mousedown",G);M=true}if(N.parentMenu){N.getEl().setZIndex(parseInt(N.parentMenu.getEl().getStyle("z-index"),10)+3);N.parentMenu.activeChild=N}else{if(O&&!O.isDestroyed&&O.isVisible()){N.getEl().setZIndex(parseInt(O.getEl().getStyle("z-index"),10)+3)}}}function B(N){if(N.activeChild){N.activeChild.hide()}if(N.autoHideTimer){clearTimeout(N.autoHideTimer);delete N.autoHideTimer}}function L(O){var N=O.parentMenu;if(!N&&!O.allowOtherMenus){J()}else{if(N&&N.activeChild){N.activeChild.hide()}}}function G(N){if(D.getElapsed()>50&&I.length>0&&!N.getTarget(".x-menu")){J()}}return{hideAll:function(){return J()},register:function(N){if(!A){E()}A[N.id]=N;N.on({beforehide:B,hide:C,beforeshow:L,show:F})},get:function(N){if(typeof N=="string"){if(!A){return null}return A[N]}else{if(N.events){return N}else{if(typeof N.length=="number"){return new Ext.menu.Menu({items:N})}else{return Ext.create(N,"menu")}}}},unregister:function(N){delete A[N.id];N.un("beforehide",B);N.un("hide",C);N.un("beforeshow",L);N.un("show",F)},registerCheckable:function(O){var N=O.group;if(N){if(!H[N]){H[N]=[]}H[N].push(O)}},unregisterCheckable:function(O){var N=O.group;if(N){H[N].remove(O)}},onCheckChange:function(Q,S){if(Q.group&&S){var N=H[Q.group],O=0,R=N.length,P;for(;O<R;O++){P=N[O];if(P!=Q){P.setChecked(false)}}}},getCheckedItem:function(Q){var N=H[Q];if(N){for(var O=0,P=N.length;O<P;O++){if(N[O].checked){return N[O]}}}return null},setCheckedItem:function(R,N){var P=H[R];if(P){for(var O=0,Q=P.length;O<Q;O++){if(P[O].id==N){P[O].setChecked(true)}}}return null}}}();Ext.menu.BaseItem=Ext.extend(Ext.Component,{canActivate:false,activeClass:"x-menu-item-active",hideOnClick:true,clickHideDelay:1,ctype:"Ext.menu.BaseItem",actionMode:"container",initComponent:function(){Ext.menu.BaseItem.superclass.initComponent.call(this);this.addEvents("click","activate","deactivate");if(this.handler){this.on("click",this.handler,this.scope)}},onRender:function(B,A){Ext.menu.BaseItem.superclass.onRender.apply(this,arguments);if(this.ownerCt&&this.ownerCt instanceof Ext.menu.Menu){this.parentMenu=this.ownerCt}else{this.container.addClass("x-menu-list-item");this.mon(this.el,{scope:this,click:this.onClick,mouseenter:this.activate,mouseleave:this.deactivate})}},setHandler:function(A,B){if(this.handler){this.un("click",this.handler,this.scope)}this.on("click",this.handler=A,this.scope=B)},onClick:function(A){if(!this.disabled&&this.fireEvent("click",this,A)!==false&&(this.parentMenu&&this.parentMenu.fireEvent("itemclick",this,A)!==false)){this.handleClick(A)}else{A.stopEvent()}},activate:function(){if(this.disabled){return false}var A=this.container;A.addClass(this.activeClass);this.region=A.getRegion().adjust(2,2,-2,-2);this.fireEvent("activate",this);return true},deactivate:function(){this.container.removeClass(this.activeClass);this.fireEvent("deactivate",this)},shouldDeactivate:function(A){return !this.region||!this.region.contains(A.getPoint())},handleClick:function(A){var B=this.parentMenu;if(this.hideOnClick){if(B.floating){this.clickHideDelayTimer=B.hide.defer(this.clickHideDelay,B,[true])}else{B.deactivateActive()}}},beforeDestroy:function(){clearTimeout(this.clickHideDelayTimer);Ext.menu.BaseItem.superclass.beforeDestroy.call(this)},expandMenu:Ext.emptyFn,hideMenu:Ext.emptyFn});Ext.reg("menubaseitem",Ext.menu.BaseItem);Ext.menu.TextItem=Ext.extend(Ext.menu.BaseItem,{hideOnClick:false,itemCls:"x-menu-text",constructor:function(A){if(typeof A=="string"){A={text:A}}Ext.menu.TextItem.superclass.constructor.call(this,A)},onRender:function(){var A=document.createElement("span");A.className=this.itemCls;A.innerHTML=this.text;this.el=A;Ext.menu.TextItem.superclass.onRender.apply(this,arguments)}});Ext.reg("menutextitem",Ext.menu.TextItem);Ext.menu.Separator=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-sep",hideOnClick:false,activeClass:"",onRender:function(B){var A=document.createElement("span");A.className=this.itemCls;A.innerHTML="&#160;";this.el=A;B.addClass("x-menu-sep-li");Ext.menu.Separator.superclass.onRender.apply(this,arguments)}});Ext.reg("menuseparator",Ext.menu.Separator);Ext.menu.Item=Ext.extend(Ext.menu.BaseItem,{itemCls:"x-menu-item",canActivate:true,showDelay:200,altText:"",hideDelay:200,ctype:"Ext.menu.Item",initComponent:function(){Ext.menu.Item.superclass.initComponent.call(this);if(this.menu){if(Ext.isArray(this.menu)){this.menu={items:this.menu}}if(Ext.isObject(this.menu)){this.menu.ownerCt=this}this.menu=Ext.menu.MenuMgr.get(this.menu);this.menu.ownerCt=undefined}},onRender:function(B,A){if(!this.itemTpl){this.itemTpl=Ext.menu.Item.prototype.itemTpl=new Ext.XTemplate('<a id="{id}" class="{cls}" hidefocus="true" unselectable="on" href="{href}"','<tpl if="hrefTarget">',' target="{hrefTarget}"',"</tpl>",">",'<img alt="{altText}" src="{icon}" class="x-menu-item-icon {iconCls}"/>','<span class="x-menu-item-text">{text}</span>',"</a>")}var C=this.getTemplateArgs();this.el=A?this.itemTpl.insertBefore(A,C,true):this.itemTpl.append(B,C,true);this.iconEl=this.el.child("img.x-menu-item-icon");this.textEl=this.el.child(".x-menu-item-text");if(!this.href){this.mon(this.el,"click",Ext.emptyFn,null,{preventDefault:true})}Ext.menu.Item.superclass.onRender.call(this,B,A)},getTemplateArgs:function(){return{id:this.id,cls:this.itemCls+(this.menu?" x-menu-item-arrow":"")+(this.cls?" "+this.cls:""),href:this.href||"#",hrefTarget:this.hrefTarget,icon:this.icon||Ext.BLANK_IMAGE_URL,iconCls:this.iconCls||"",text:this.itemText||this.text||"&#160;",altText:this.altText||""}},setText:function(A){this.text=A||"&#160;";if(this.rendered){this.textEl.update(this.text);this.parentMenu.layout.doAutoSize()}},setIconClass:function(A){var B=this.iconCls;this.iconCls=A;if(this.rendered){this.iconEl.replaceClass(B,this.iconCls)}},beforeDestroy:function(){clearTimeout(this.showTimer);clearTimeout(this.hideTimer);if(this.menu){delete this.menu.ownerCt;this.menu.destroy()}Ext.menu.Item.superclass.beforeDestroy.call(this)},handleClick:function(A){if(!this.href){A.stopEvent()}Ext.menu.Item.superclass.handleClick.apply(this,arguments)},activate:function(A){if(Ext.menu.Item.superclass.activate.apply(this,arguments)){this.focus();if(A){this.expandMenu()}}return true},shouldDeactivate:function(A){if(Ext.menu.Item.superclass.shouldDeactivate.call(this,A)){if(this.menu&&this.menu.isVisible()){return !this.menu.getEl().getRegion().contains(A.getPoint())}return true}return false},deactivate:function(){Ext.menu.Item.superclass.deactivate.apply(this,arguments);this.hideMenu()},expandMenu:function(A){if(!this.disabled&&this.menu){clearTimeout(this.hideTimer);delete this.hideTimer;if(!this.menu.isVisible()&&!this.showTimer){this.showTimer=this.deferExpand.defer(this.showDelay,this,[A])}else{if(this.menu.isVisible()&&A){this.menu.tryActivate(0,1)}}}},deferExpand:function(A){delete this.showTimer;this.menu.show(this.container,this.parentMenu.subMenuAlign||"tl-tr?",this.parentMenu);if(A){this.menu.tryActivate(0,1)}},hideMenu:function(){clearTimeout(this.showTimer);delete this.showTimer;if(!this.hideTimer&&this.menu&&this.menu.isVisible()){this.hideTimer=this.deferHide.defer(this.hideDelay,this)}},deferHide:function(){delete this.hideTimer;if(this.menu.over){this.parentMenu.setActiveItem(this,false)}else{this.menu.hide()}}});Ext.reg("menuitem",Ext.menu.Item);Ext.menu.CheckItem=Ext.extend(Ext.menu.Item,{itemCls:"x-menu-item x-menu-check-item",groupClass:"x-menu-group-item",checked:false,ctype:"Ext.menu.CheckItem",initComponent:function(){Ext.menu.CheckItem.superclass.initComponent.call(this);this.addEvents("beforecheckchange","checkchange");if(this.checkHandler){this.on("checkchange",this.checkHandler,this.scope)}Ext.menu.MenuMgr.registerCheckable(this)},onRender:function(A){Ext.menu.CheckItem.superclass.onRender.apply(this,arguments);if(this.group){this.el.addClass(this.groupClass)}if(this.checked){this.checked=false;this.setChecked(true,true)}},destroy:function(){Ext.menu.MenuMgr.unregisterCheckable(this);Ext.menu.CheckItem.superclass.destroy.apply(this,arguments)},setChecked:function(C,A){var B=A===true;if(this.checked!=C&&(B||this.fireEvent("beforecheckchange",this,C)!==false)){Ext.menu.MenuMgr.onCheckChange(this,C);if(this.container){this.container[C?"addClass":"removeClass"]("x-menu-item-checked")}this.checked=C;if(!B){this.fireEvent("checkchange",this,C)}}},handleClick:function(A){if(!this.disabled&&!(this.checked&&this.group)){this.setChecked(!this.checked)}Ext.menu.CheckItem.superclass.handleClick.apply(this,arguments)}});Ext.reg("menucheckitem",Ext.menu.CheckItem);Ext.menu.DateMenu=Ext.extend(Ext.menu.Menu,{enableScrolling:false,hideOnClick:true,pickerId:null,cls:"x-date-menu",initComponent:function(){this.on("beforeshow",this.onBeforeShow,this);if(this.strict=(Ext.isIE7&&Ext.isStrict)){this.on("show",this.onShow,this,{single:true,delay:20})}Ext.apply(this,{plain:true,showSeparator:false,items:this.picker=new Ext.DatePicker(Ext.applyIf({internalRender:this.strict||!Ext.isIE,ctCls:"x-menu-date-item",id:this.pickerId},this.initialConfig))});this.picker.purgeListeners();Ext.menu.DateMenu.superclass.initComponent.call(this);this.relayEvents(this.picker,["select"]);this.on("show",this.picker.focus,this.picker);this.on("select",this.menuHide,this);if(this.handler){this.on("select",this.handler,this.scope||this)}},menuHide:function(){if(this.hideOnClick){this.hide(true)}},onBeforeShow:function(){if(this.picker){this.picker.hideMonthPicker(true)}},onShow:function(){var A=this.picker.getEl();A.setWidth(A.getWidth())}});Ext.reg("datemenu",Ext.menu.DateMenu);Ext.form.Field=Ext.extend(Ext.BoxComponent,{invalidClass:"x-form-invalid",invalidText:"The value in this field is invalid",focusClass:"x-form-focus",validationEvent:"keyup",validateOnBlur:true,validationDelay:250,defaultAutoCreate:{tag:"input",type:"text",size:"20",autocomplete:"off"},fieldClass:"x-form-field",msgTarget:"qtip",msgFx:"normal",readOnly:false,disabled:false,submitValue:true,isFormField:true,msgDisplay:"",hasFocus:false,initComponent:function(){Ext.form.Field.superclass.initComponent.call(this);this.addEvents("focus","blur","specialkey","change","invalid","valid")},getName:function(){return this.rendered&&this.el.dom.name?this.el.dom.name:this.name||this.id||""},onRender:function(D,C){if(!this.el){var B=this.getAutoCreate();if(!B.name){B.name=this.name||this.id}if(this.inputType){B.type=this.inputType}this.autoEl=B}Ext.form.Field.superclass.onRender.call(this,D,C);if(this.submitValue===false){this.el.dom.removeAttribute("name")}var A=this.el.dom.type;if(A){if(A=="password"){A="text"}this.el.addClass("x-form-"+A)}if(this.readOnly){this.setReadOnly(true)}if(this.tabIndex!==undefined){this.el.dom.setAttribute("tabIndex",this.tabIndex)}this.el.addClass([this.fieldClass,this.cls])},getItemCt:function(){return this.itemCt},initValue:function(){if(this.value!==undefined){this.setValue(this.value)}else{if(!Ext.isEmpty(this.el.dom.value)&&this.el.dom.value!=this.emptyText){this.setValue(this.el.dom.value)}}this.originalValue=this.getValue()},isDirty:function(){if(this.disabled||!this.rendered){return false}return String(this.getValue())!==String(this.originalValue)},setReadOnly:function(A){if(this.rendered){this.el.dom.readOnly=A}this.readOnly=A},afterRender:function(){Ext.form.Field.superclass.afterRender.call(this);this.initEvents();this.initValue()},fireKey:function(A){if(A.isSpecialKey()){this.fireEvent("specialkey",this,A)}},reset:function(){this.setValue(this.originalValue);this.clearInvalid()},initEvents:function(){this.mon(this.el,Ext.EventManager.getKeyEvent(),this.fireKey,this);this.mon(this.el,"focus",this.onFocus,this);this.mon(this.el,"blur",this.onBlur,this,this.inEditor?{buffer:10}:null)},preFocus:Ext.emptyFn,onFocus:function(){this.preFocus();if(this.focusClass){this.el.addClass(this.focusClass)}if(!this.hasFocus){this.hasFocus=true;this.startValue=this.getValue();this.fireEvent("focus",this)}},beforeBlur:Ext.emptyFn,onBlur:function(){this.beforeBlur();if(this.focusClass){this.el.removeClass(this.focusClass)}this.hasFocus=false;if(this.validationEvent!==false&&(this.validateOnBlur||this.validationEvent=="blur")){this.validate()}var A=this.getValue();if(String(A)!==String(this.startValue)){this.fireEvent("change",this,A,this.startValue)}this.fireEvent("blur",this);this.postBlur()},postBlur:Ext.emptyFn,isValid:function(A){if(this.disabled){return true}var C=this.preventMark;this.preventMark=A===true;var B=this.validateValue(this.processValue(this.getRawValue()),A);this.preventMark=C;return B},validate:function(){if(this.disabled||this.validateValue(this.processValue(this.getRawValue()))){this.clearInvalid();return true}return false},processValue:function(A){return A},validateValue:function(A){var B=this.getErrors(A)[0];if(B==undefined){return true}else{this.markInvalid(B);return false}},getErrors:function(){return[]},getActiveError:function(){return this.activeError||""},markInvalid:function(C){if(this.rendered&&!this.preventMark){C=C||this.invalidText;var A=this.getMessageHandler();if(A){A.mark(this,C)}else{if(this.msgTarget){this.el.addClass(this.invalidClass);var B=Ext.getDom(this.msgTarget);if(B){B.innerHTML=C;B.style.display=this.msgDisplay}}}}this.setActiveError(C)},clearInvalid:function(){if(this.rendered&&!this.preventMark){this.el.removeClass(this.invalidClass);var A=this.getMessageHandler();if(A){A.clear(this)}else{if(this.msgTarget){this.el.removeClass(this.invalidClass);var B=Ext.getDom(this.msgTarget);if(B){B.innerHTML="";B.style.display="none"}}}}this.unsetActiveError()},setActiveError:function(B,A){this.activeError=B;if(A!==true){this.fireEvent("invalid",this,B)}},unsetActiveError:function(A){delete this.activeError;if(A!==true){this.fireEvent("valid",this)}},getMessageHandler:function(){return Ext.form.MessageTargets[this.msgTarget]},getErrorCt:function(){return this.el.findParent(".x-form-element",5,true)||this.el.findParent(".x-form-field-wrap",5,true)},alignErrorEl:function(){this.errorEl.setWidth(this.getErrorCt().getWidth(true)-20)},alignErrorIcon:function(){this.errorIcon.alignTo(this.el,"tl-tr",[2,0])},getRawValue:function(){var A=this.rendered?this.el.getValue():Ext.value(this.value,"");if(A===this.emptyText){A=""}return A},getValue:function(){if(!this.rendered){return this.value}var A=this.el.getValue();if(A===this.emptyText||A===undefined){A=""}return A},setRawValue:function(A){return this.rendered?(this.el.dom.value=(Ext.isEmpty(A)?"":A)):""},setValue:function(A){this.value=A;if(this.rendered){this.el.dom.value=(Ext.isEmpty(A)?"":A);this.validate()}return this},append:function(A){this.setValue([this.getValue(),A].join(""))}});Ext.form.MessageTargets={"qtip":{mark:function(A,B){A.el.addClass(A.invalidClass);A.el.dom.qtip=B;A.el.dom.qclass="x-form-invalid-tip";if(Ext.QuickTips){Ext.QuickTips.enable()}},clear:function(A){A.el.removeClass(A.invalidClass);A.el.dom.qtip=""}},"title":{mark:function(A,B){A.el.addClass(A.invalidClass);A.el.dom.title=B},clear:function(A){A.el.dom.title=""}},"under":{mark:function(A,B){A.el.addClass(A.invalidClass);if(!A.errorEl){var C=A.getErrorCt();if(!C){A.el.dom.title=B;return}A.errorEl=C.createChild({cls:"x-form-invalid-msg"});A.on("resize",A.alignErrorEl,A);A.on("destroy",function(){Ext.destroy(this.errorEl)},A)}A.alignErrorEl();A.errorEl.update(B);Ext.form.Field.msgFx[A.msgFx].show(A.errorEl,A)},clear:function(A){A.el.removeClass(A.invalidClass);if(A.errorEl){Ext.form.Field.msgFx[A.msgFx].hide(A.errorEl,A)}else{A.el.dom.title=""}}},"side":{mark:function(A,B){A.el.addClass(A.invalidClass);if(!A.errorIcon){var C=A.getErrorCt();if(!C){A.el.dom.title=B;return}A.errorIcon=C.createChild({cls:"x-form-invalid-icon"});if(A.ownerCt){A.ownerCt.on("afterlayout",A.alignErrorIcon,A);A.ownerCt.on("expand",A.alignErrorIcon,A)}A.on("resize",A.alignErrorIcon,A);A.on("destroy",function(){Ext.destroy(this.errorIcon)},A)}A.alignErrorIcon();A.errorIcon.dom.qtip=B;A.errorIcon.dom.qclass="x-form-invalid-tip";A.errorIcon.show()},clear:function(A){A.el.removeClass(A.invalidClass);if(A.errorIcon){A.errorIcon.dom.qtip="";A.errorIcon.hide()}else{A.el.dom.title=""}}}};Ext.form.Field.msgFx={normal:{show:function(A,B){A.setDisplayed("block")},hide:function(A,B){A.setDisplayed(false).update("")}},slide:{show:function(A,B){A.slideIn("t",{stopFx:true})},hide:function(A,B){A.slideOut("t",{stopFx:true,useDisplay:true})}},slideRight:{show:function(A,B){A.fixDisplay();A.alignTo(B.el,"tl-tr");A.slideIn("l",{stopFx:true})},hide:function(A,B){A.slideOut("l",{stopFx:true,useDisplay:true})}}};Ext.reg("field",Ext.form.Field);Ext.form.TextField=Ext.extend(Ext.form.Field,{grow:false,growMin:30,growMax:800,vtype:null,maskRe:null,disableKeyFilter:false,allowBlank:true,minLength:0,maxLength:Number.MAX_VALUE,minLengthText:"The minimum length for this field is {0}",maxLengthText:"The maximum length for this field is {0}",selectOnFocus:false,blankText:"This field is required",validator:null,regex:null,regexText:"",emptyText:null,emptyClass:"x-form-empty-field",initComponent:function(){Ext.form.TextField.superclass.initComponent.call(this);this.addEvents("autosize","keydown","keyup","keypress")},initEvents:function(){Ext.form.TextField.superclass.initEvents.call(this);if(this.validationEvent=="keyup"){this.validationTask=new Ext.util.DelayedTask(this.validate,this);this.mon(this.el,"keyup",this.filterValidation,this)}else{if(this.validationEvent!==false&&this.validationEvent!="blur"){this.mon(this.el,this.validationEvent,this.validate,this,{buffer:this.validationDelay})}}if(this.selectOnFocus||this.emptyText){this.mon(this.el,"mousedown",this.onMouseDown,this);if(this.emptyText){this.applyEmptyText()}}if(this.maskRe||(this.vtype&&this.disableKeyFilter!==true&&(this.maskRe=Ext.form.VTypes[this.vtype+"Mask"]))){this.mon(this.el,"keypress",this.filterKeys,this)}if(this.grow){this.mon(this.el,"keyup",this.onKeyUpBuffered,this,{buffer:50});this.mon(this.el,"click",this.autoSize,this)}if(this.enableKeyEvents){this.mon(this.el,{scope:this,keyup:this.onKeyUp,keydown:this.onKeyDown,keypress:this.onKeyPress})}},onMouseDown:function(A){if(!this.hasFocus){this.mon(this.el,"mouseup",Ext.emptyFn,this,{single:true,preventDefault:true})}},processValue:function(A){if(this.stripCharsRe){var B=A.replace(this.stripCharsRe,"");if(B!==A){this.setRawValue(B);return B}}return A},filterValidation:function(A){if(!A.isNavKeyPress()){this.validationTask.delay(this.validationDelay)}},onDisable:function(){Ext.form.TextField.superclass.onDisable.call(this);if(Ext.isIE){this.el.dom.unselectable="on"}},onEnable:function(){Ext.form.TextField.superclass.onEnable.call(this);if(Ext.isIE){this.el.dom.unselectable=""}},onKeyUpBuffered:function(A){if(this.doAutoSize(A)){this.autoSize()}},doAutoSize:function(A){return !A.isNavKeyPress()},onKeyUp:function(A){this.fireEvent("keyup",this,A)},onKeyDown:function(A){this.fireEvent("keydown",this,A)},onKeyPress:function(A){this.fireEvent("keypress",this,A)},reset:function(){Ext.form.TextField.superclass.reset.call(this);this.applyEmptyText()},applyEmptyText:function(){if(this.rendered&&this.emptyText&&this.getRawValue().length<1&&!this.hasFocus){this.setRawValue(this.emptyText);this.el.addClass(this.emptyClass)}},preFocus:function(){var A=this.el,B;if(this.emptyText){if(A.dom.value==this.emptyText){this.setRawValue("");B=true}A.removeClass(this.emptyClass)}if(this.selectOnFocus||B){A.dom.select()}},postBlur:function(){this.applyEmptyText()},filterKeys:function(A){if(A.ctrlKey){return}var C=A.getKey();if(Ext.isGecko&&(A.isNavKeyPress()||C==A.BACKSPACE||(C==A.DELETE&&A.button==-1))){return}var B=String.fromCharCode(A.getCharCode());if(!Ext.isGecko&&A.isSpecialKey()&&!B){return}if(!this.maskRe.test(B)){A.stopEvent()}},setValue:function(A){if(this.emptyText&&this.el&&!Ext.isEmpty(A)){this.el.removeClass(this.emptyClass)}Ext.form.TextField.superclass.setValue.apply(this,arguments);this.applyEmptyText();this.autoSize();return this},getErrors:function(C){var A=Ext.form.TextField.superclass.getErrors.apply(this,arguments);C=Ext.isDefined(C)?C:this.processValue(this.getRawValue());if(Ext.isFunction(this.validator)){var D=this.validator(C);if(D!==true){A.push(D)}}if(C.length<1||C===this.emptyText){if(this.allowBlank){return A}else{A.push(this.blankText)}}if(!this.allowBlank&&(C.length<1||C===this.emptyText)){A.push(this.blankText)}if(C.length<this.minLength){A.push(String.format(this.minLengthText,this.minLength))}if(C.length>this.maxLength){A.push(String.format(this.maxLengthText,this.maxLength))}if(this.vtype){var B=Ext.form.VTypes;if(!B[this.vtype](C,this)){A.push(this.vtypeText||B[this.vtype+"Text"])}}if(this.regex&&!this.regex.test(C)){A.push(this.regexText)}return A},selectText:function(F,D){var C=this.getRawValue();var E=false;if(C.length>0){F=F===undefined?0:F;D=D===undefined?C.length:D;var A=this.el.dom;if(A.setSelectionRange){A.setSelectionRange(F,D)}else{if(A.createTextRange){var B=A.createTextRange();B.moveStart("character",F);B.moveEnd("character",D-C.length);B.select()}}E=Ext.isGecko||Ext.isOpera}else{E=true}if(E){this.focus()}},autoSize:function(){if(!this.grow||!this.rendered){return}if(!this.metrics){this.metrics=Ext.util.TextMetrics.createInstance(this.el)}var A=this.el;var C=A.dom.value;var B=document.createElement("div");B.appendChild(document.createTextNode(C));C=B.innerHTML;Ext.removeNode(B);B=null;C+="&#160;";var D=Math.min(this.growMax,Math.max(this.metrics.getWidth(C)+10,this.growMin));this.el.setWidth(D);this.fireEvent("autosize",this,D)},onDestroy:function(){if(this.validationTask){this.validationTask.cancel();this.validationTask=null}Ext.form.TextField.superclass.onDestroy.call(this)}});Ext.reg("textfield",Ext.form.TextField);Ext.form.TriggerField=Ext.extend(Ext.form.TextField,{defaultAutoCreate:{tag:"input",type:"text",size:"16",autocomplete:"off"},hideTrigger:false,editable:true,readOnly:false,wrapFocusClass:"x-trigger-wrap-focus",autoSize:Ext.emptyFn,monitorTab:true,deferHeight:true,mimicing:false,actionMode:"wrap",defaultTriggerWidth:17,onResize:function(C,A){Ext.form.TriggerField.superclass.onResize.call(this,C,A);var B=this.getTriggerWidth();if(Ext.isNumber(C)){this.el.setWidth(C-B)}this.wrap.setWidth(this.el.getWidth()+B)},getTriggerWidth:function(){var A=this.trigger.getWidth();if(!this.hideTrigger&&!this.readOnly&&A===0){A=this.defaultTriggerWidth}return A},alignErrorIcon:function(){if(this.wrap){this.errorIcon.alignTo(this.wrap,"tl-tr",[2,0])}},onRender:function(B,A){this.doc=Ext.isIE?Ext.getBody():Ext.getDoc();Ext.form.TriggerField.superclass.onRender.call(this,B,A);this.wrap=this.el.wrap({cls:"x-form-field-wrap x-form-field-trigger-wrap"});this.trigger=this.wrap.createChild(this.triggerConfig||{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.triggerClass});this.initTrigger();if(!this.width){this.wrap.setWidth(this.el.getWidth()+this.trigger.getWidth())}this.resizeEl=this.positionEl=this.wrap},getWidth:function(){return(this.el.getWidth()+this.trigger.getWidth())},updateEditState:function(){if(this.rendered){if(this.readOnly){this.el.dom.readOnly=true;this.el.addClass("x-trigger-noedit");this.mun(this.el,"click",this.onTriggerClick,this);this.trigger.setDisplayed(false)}else{if(!this.editable){this.el.dom.readOnly=true;this.el.addClass("x-trigger-noedit");this.mon(this.el,"click",this.onTriggerClick,this)}else{this.el.dom.readOnly=false;this.el.removeClass("x-trigger-noedit");this.mun(this.el,"click",this.onTriggerClick,this)}this.trigger.setDisplayed(!this.hideTrigger)}this.onResize(this.width||this.wrap.getWidth())}},setHideTrigger:function(A){if(A!=this.hideTrigger){this.hideTrigger=A;this.updateEditState()}},setEditable:function(A){if(A!=this.editable){this.editable=A;this.updateEditState()}},setReadOnly:function(A){if(A!=this.readOnly){this.readOnly=A;this.updateEditState()}},afterRender:function(){Ext.form.TriggerField.superclass.afterRender.call(this);this.updateEditState()},initTrigger:function(){this.mon(this.trigger,"click",this.onTriggerClick,this,{preventDefault:true});this.trigger.addClassOnOver("x-form-trigger-over");this.trigger.addClassOnClick("x-form-trigger-click")},onDestroy:function(){Ext.destroy(this.trigger,this.wrap);if(this.mimicing){this.doc.un("mousedown",this.mimicBlur,this)}delete this.doc;Ext.form.TriggerField.superclass.onDestroy.call(this)},onFocus:function(){Ext.form.TriggerField.superclass.onFocus.call(this);if(!this.mimicing){this.wrap.addClass(this.wrapFocusClass);this.mimicing=true;this.doc.on("mousedown",this.mimicBlur,this,{delay:10});if(this.monitorTab){this.on("specialkey",this.checkTab,this)}}},checkTab:function(B,A){if(A.getKey()==A.TAB){this.triggerBlur()}},onBlur:Ext.emptyFn,mimicBlur:function(A){if(!this.isDestroyed&&!this.wrap.contains(A.target)&&this.validateBlur(A)){this.triggerBlur()}},triggerBlur:function(){this.mimicing=false;this.doc.un("mousedown",this.mimicBlur,this);if(this.monitorTab&&this.el){this.un("specialkey",this.checkTab,this)}Ext.form.TriggerField.superclass.onBlur.call(this);if(this.wrap){this.wrap.removeClass(this.wrapFocusClass)}},beforeBlur:Ext.emptyFn,validateBlur:function(A){return true},onTriggerClick:Ext.emptyFn});Ext.form.TwinTriggerField=Ext.extend(Ext.form.TriggerField,{initComponent:function(){Ext.form.TwinTriggerField.superclass.initComponent.call(this);this.triggerConfig={tag:"span",cls:"x-form-twin-triggers",cn:[{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger1Class},{tag:"img",src:Ext.BLANK_IMAGE_URL,alt:"",cls:"x-form-trigger "+this.trigger2Class}]}},getTrigger:function(A){return this.triggers[A]},afterRender:function(){Ext.form.TwinTriggerField.superclass.afterRender.call(this);var C=this.triggers,A=0,B=C.length;for(;A<B;++A){if(this["hideTrigger"+(A+1)]){C[A].hide()}}},initTrigger:function(){var A=this.trigger.select(".x-form-trigger",true),B=this;A.each(function(F,C,D){var E="Trigger"+(D+1);F.hide=function(){var G=B.wrap.getWidth();this.dom.style.display="none";B.el.setWidth(G-B.trigger.getWidth());B["hidden"+E]=true};F.show=function(){var G=B.wrap.getWidth();this.dom.style.display="";B.el.setWidth(G-B.trigger.getWidth());B["hidden"+E]=false};this.mon(F,"click",this["on"+E+"Click"],this,{preventDefault:true});F.addClassOnOver("x-form-trigger-over");F.addClassOnClick("x-form-trigger-click")},this);this.triggers=A.elements},getTriggerWidth:function(){var A=0;Ext.each(this.triggers,function(D,B){var C="Trigger"+(B+1),E=D.getWidth();if(E===0&&!this["hidden"+C]){A+=this.defaultTriggerWidth}else{A+=E}},this);return A},onDestroy:function(){Ext.destroy(this.triggers);Ext.form.TwinTriggerField.superclass.onDestroy.call(this)},onTrigger1Click:Ext.emptyFn,onTrigger2Click:Ext.emptyFn});Ext.reg("trigger",Ext.form.TriggerField);Ext.form.TextArea=Ext.extend(Ext.form.TextField,{growMin:60,growMax:1000,growAppend:"&#160;\n&#160;",enterIsSpecial:false,preventScrollbars:false,onRender:function(B,A){if(!this.el){this.defaultAutoCreate={tag:"textarea",style:"width:100px;height:60px;",autocomplete:"off"}}Ext.form.TextArea.superclass.onRender.call(this,B,A);if(this.grow){this.textSizeEl=Ext.DomHelper.append(document.body,{tag:"pre",cls:"x-form-grow-sizer"});if(this.preventScrollbars){this.el.setStyle("overflow","hidden")}this.el.setHeight(this.growMin)}},onDestroy:function(){Ext.removeNode(this.textSizeEl);Ext.form.TextArea.superclass.onDestroy.call(this)},fireKey:function(A){if(A.isSpecialKey()&&(this.enterIsSpecial||(A.getKey()!=A.ENTER||A.hasModifier()))){this.fireEvent("specialkey",this,A)}},doAutoSize:function(A){return !A.isNavKeyPress()||A.getKey()==A.ENTER},filterValidation:function(A){if(!A.isNavKeyPress()||(!this.enterIsSpecial&&A.keyCode==A.ENTER)){this.validationTask.delay(this.validationDelay)}},autoSize:function(){if(!this.grow||!this.textSizeEl){return}var A=this.el,C=Ext.util.Format.htmlEncode(A.dom.value),D=this.textSizeEl,B;Ext.fly(D).setWidth(this.el.getWidth());if(C.length<1){C="&#160;&#160;"}else{C+=this.growAppend;if(Ext.isIE){C=C.replace(/\n/g,"&#160;<br />")}}D.innerHTML=C;B=Math.min(this.growMax,Math.max(D.offsetHeight,this.growMin));if(B!=this.lastHeight){this.lastHeight=B;this.el.setHeight(B);this.fireEvent("autosize",this,B)}}});Ext.reg("textarea",Ext.form.TextArea);Ext.form.NumberField=Ext.extend(Ext.form.TextField,{fieldClass:"x-form-field x-form-num-field",allowDecimals:true,decimalSeparator:".",decimalPrecision:2,allowNegative:true,minValue:Number.NEGATIVE_INFINITY,maxValue:Number.MAX_VALUE,minText:"The minimum value for this field is {0}",maxText:"The maximum value for this field is {0}",nanText:"{0} is not a valid number",baseChars:"0123456789",autoStripChars:false,initEvents:function(){var A=this.baseChars+"";if(this.allowDecimals){A+=this.decimalSeparator}if(this.allowNegative){A+="-"}A=Ext.escapeRe(A);this.maskRe=new RegExp("["+A+"]");if(this.autoStripChars){this.stripCharsRe=new RegExp("[^"+A+"]","gi")}Ext.form.NumberField.superclass.initEvents.call(this)},getErrors:function(C){var A=Ext.form.NumberField.superclass.getErrors.apply(this,arguments);C=Ext.isDefined(C)?C:this.processValue(this.getRawValue());if(C.length<1){return A}C=String(C).replace(this.decimalSeparator,".");if(isNaN(C)){A.push(String.format(this.nanText,C))}var B=this.parseValue(C);if(B<this.minValue){A.push(String.format(this.minText,this.minValue))}if(B>this.maxValue){A.push(String.format(this.maxText,this.maxValue))}return A},getValue:function(){return this.fixPrecision(this.parseValue(Ext.form.NumberField.superclass.getValue.call(this)))},setValue:function(A){A=Ext.isNumber(A)?A:parseFloat(String(A).replace(this.decimalSeparator,"."));A=this.fixPrecision(A);A=isNaN(A)?"":String(A).replace(".",this.decimalSeparator);return Ext.form.NumberField.superclass.setValue.call(this,A)},setMinValue:function(A){this.minValue=Ext.num(A,Number.NEGATIVE_INFINITY)},setMaxValue:function(A){this.maxValue=Ext.num(A,Number.MAX_VALUE)},parseValue:function(A){A=parseFloat(String(A).replace(this.decimalSeparator,"."));return isNaN(A)?"":A},fixPrecision:function(B){var A=isNaN(B);if(!this.allowDecimals||this.decimalPrecision==-1||A||!B){return A?"":B}return parseFloat(parseFloat(B).toFixed(this.decimalPrecision))},beforeBlur:function(){var A=this.parseValue(this.getRawValue());if(!Ext.isEmpty(A)){this.setValue(A)}}});Ext.reg("numberfield",Ext.form.NumberField);Ext.form.DateField=Ext.extend(Ext.form.TriggerField,{format:"m/d/Y",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",disabledDaysText:"Disabled",disabledDatesText:"Disabled",minText:"The date in this field must be equal to or after {0}",maxText:"The date in this field must be equal to or before {0}",invalidText:"{0} is not a valid date - it must be in the format {1}",triggerClass:"x-form-date-trigger",showToday:true,startDay:0,defaultAutoCreate:{tag:"input",type:"text",size:"10",autocomplete:"off"},initTime:"12",initTimeFormat:"H",safeParse:function(B,A){if(Date.formatContainsHourInfo(A)){return Date.parseDate(B,A)}else{var C=Date.parseDate(B+" "+this.initTime,A+" "+this.initTimeFormat);if(C){return C.clearTime()}}},initComponent:function(){Ext.form.DateField.superclass.initComponent.call(this);this.addEvents("select");if(Ext.isString(this.minValue)){this.minValue=this.parseDate(this.minValue)}if(Ext.isString(this.maxValue)){this.maxValue=this.parseDate(this.maxValue)}this.disabledDatesRE=null;this.initDisabledDays()},initEvents:function(){Ext.form.DateField.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{"down":function(A){this.onTriggerClick()},scope:this,forceKeyDown:true})},initDisabledDays:function(){if(this.disabledDates){var C=this.disabledDates,B=C.length-1,A="(?:";Ext.each(C,function(D,E){A+=Ext.isDate(D)?"^"+Ext.escapeRe(D.dateFormat(this.format))+"$":C[E];if(E!=B){A+="|"}},this);this.disabledDatesRE=new RegExp(A+")")}},setDisabledDates:function(A){this.disabledDates=A;this.initDisabledDays();if(this.menu){this.menu.picker.setDisabledDates(this.disabledDatesRE)}},setDisabledDays:function(A){this.disabledDays=A;if(this.menu){this.menu.picker.setDisabledDays(A)}},setMinValue:function(A){this.minValue=(Ext.isString(A)?this.parseDate(A):A);if(this.menu){this.menu.picker.setMinDate(this.minValue)}},setMaxValue:function(A){this.maxValue=(Ext.isString(A)?this.parseDate(A):A);if(this.menu){this.menu.picker.setMaxDate(this.maxValue)}},getErrors:function(F){var A=Ext.form.DateField.superclass.getErrors.apply(this,arguments);F=this.formatDate(F||this.processValue(this.getRawValue()));if(F.length<1){return A}var E=F;F=this.parseDate(F);if(!F){A.push(String.format(this.invalidText,E,this.format));return A}var G=F.getTime();if(this.minValue&&G<this.minValue.clearTime().getTime()){A.push(String.format(this.minText,this.formatDate(this.minValue)))}if(this.maxValue&&G>this.maxValue.clearTime().getTime()){A.push(String.format(this.maxText,this.formatDate(this.maxValue)))}if(this.disabledDays){var D=F.getDay();for(var B=0;B<this.disabledDays.length;B++){if(D===this.disabledDays[B]){A.push(this.disabledDaysText);break}}}var C=this.formatDate(F);if(this.disabledDatesRE&&this.disabledDatesRE.test(C)){A.push(String.format(this.disabledDatesText,C))}return A},validateBlur:function(){return !this.menu||!this.menu.isVisible()},getValue:function(){return this.parseDate(Ext.form.DateField.superclass.getValue.call(this))||""},setValue:function(A){return Ext.form.DateField.superclass.setValue.call(this,this.formatDate(this.parseDate(A)))},parseDate:function(E){if(!E||Ext.isDate(E)){return E}var C=this.safeParse(E,this.format),A=this.altFormats,F=this.altFormatsArray;if(!C&&A){F=F||A.split("|");for(var B=0,D=F.length;B<D&&!C;B++){C=this.safeParse(E,F[B])}}return C},onDestroy:function(){Ext.destroy(this.menu,this.keyNav);Ext.form.DateField.superclass.onDestroy.call(this)},formatDate:function(A){return Ext.isDate(A)?A.dateFormat(this.format):A},onTriggerClick:function(){if(this.disabled){return}if(this.menu==null){this.menu=new Ext.menu.DateMenu({hideOnClick:false,focusOnSelect:false})}this.onFocus();Ext.apply(this.menu.picker,{minDate:this.minValue,maxDate:this.maxValue,disabledDatesRE:this.disabledDatesRE,disabledDatesText:this.disabledDatesText,disabledDays:this.disabledDays,disabledDaysText:this.disabledDaysText,format:this.format,showToday:this.showToday,startDay:this.startDay,minText:String.format(this.minText,this.formatDate(this.minValue)),maxText:String.format(this.maxText,this.formatDate(this.maxValue))});this.menu.picker.setValue(this.getValue()||new Date());this.menu.show(this.el,"tl-bl?");this.menuEvents("on")},menuEvents:function(A){this.menu[A]("select",this.onSelect,this);this.menu[A]("hide",this.onMenuHide,this);this.menu[A]("show",this.onFocus,this)},onSelect:function(B,A){this.setValue(A);this.fireEvent("select",this,A);this.menu.hide()},onMenuHide:function(){this.focus(false,60);this.menuEvents("un")},beforeBlur:function(){var A=this.parseDate(this.getRawValue());if(A){this.setValue(A)}}});Ext.reg("datefield",Ext.form.DateField);Ext.form.DisplayField=Ext.extend(Ext.form.Field,{validationEvent:false,validateOnBlur:false,defaultAutoCreate:{tag:"div"},fieldClass:"x-form-display-field",htmlEncode:false,initEvents:Ext.emptyFn,isValid:function(){return true},validate:function(){return true},getRawValue:function(){var A=this.rendered?this.el.dom.innerHTML:Ext.value(this.value,"");if(A===this.emptyText){A=""}if(this.htmlEncode){A=Ext.util.Format.htmlDecode(A)}return A},getValue:function(){return this.getRawValue()},getName:function(){return this.name},setRawValue:function(A){if(this.htmlEncode){A=Ext.util.Format.htmlEncode(A)}return this.rendered?(this.el.dom.innerHTML=(Ext.isEmpty(A)?"":A)):(this.value=A)},setValue:function(A){this.setRawValue(A);return this}});Ext.reg("displayfield",Ext.form.DisplayField);Ext.form.ComboBox=Ext.extend(Ext.form.TriggerField,{defaultAutoCreate:{tag:"input",type:"text",size:"24",autocomplete:"off"},listClass:"",selectedClass:"x-combo-selected",listEmptyText:"",triggerClass:"x-form-arrow-trigger",shadow:"sides",listAlign:"tl-bl?",maxHeight:300,minHeight:90,triggerAction:"query",minChars:4,autoSelect:true,typeAhead:false,queryDelay:500,pageSize:0,selectOnFocus:false,queryParam:"query",loadingText:"Loading...",resizable:false,handleHeight:8,allQuery:"",mode:"remote",minListWidth:70,forceSelection:false,typeAheadDelay:250,lazyInit:true,clearFilterOnReset:true,submitValue:undefined,initComponent:function(){Ext.form.ComboBox.superclass.initComponent.call(this);this.addEvents("expand","collapse","beforeselect","select","beforequery");if(this.transform){var B=Ext.getDom(this.transform);if(!this.hiddenName){this.hiddenName=B.name}if(!this.store){this.mode="local";var A=[],C=B.options;for(var D=0,F=C.length;D<F;D++){var E=C[D],G=(E.hasAttribute?E.hasAttribute("value"):E.getAttributeNode("value").specified)?E.value:E.text;if(E.selected&&Ext.isEmpty(this.value,true)){this.value=G}A.push([G,E.text])}this.store=new Ext.data.ArrayStore({idIndex:0,fields:["value","text"],data:A,autoDestroy:true});this.valueField="value";this.displayField="text"}B.name=Ext.id();if(!this.lazyRender){this.target=true;this.el=Ext.DomHelper.insertBefore(B,this.autoCreate||this.defaultAutoCreate);this.render(this.el.parentNode,B)}Ext.removeNode(B)}else{if(this.store){this.store=Ext.StoreMgr.lookup(this.store);if(this.store.autoCreated){this.displayField=this.valueField="field1";if(!this.store.expandData){this.displayField="field2"}this.mode="local"}}}this.selectedIndex=-1;if(this.mode=="local"){if(!Ext.isDefined(this.initialConfig.queryDelay)){this.queryDelay=10}if(!Ext.isDefined(this.initialConfig.minChars)){this.minChars=0}}},onRender:function(B,A){if(this.hiddenName&&!Ext.isDefined(this.submitValue)){this.submitValue=false}Ext.form.ComboBox.superclass.onRender.call(this,B,A);if(this.hiddenName){this.hiddenField=this.el.insertSibling({tag:"input",type:"hidden",name:this.hiddenName,id:(this.hiddenId||Ext.id())},"before",true)}if(Ext.isGecko){this.el.dom.setAttribute("autocomplete","off")}if(!this.lazyInit){this.initList()}else{this.on("focus",this.initList,this,{single:true})}},initValue:function(){Ext.form.ComboBox.superclass.initValue.call(this);if(this.hiddenField){this.hiddenField.value=Ext.value(Ext.isDefined(this.hiddenValue)?this.hiddenValue:this.value,"")}},getParentZIndex:function(){var A;if(this.ownerCt){this.findParentBy(function(B){A=parseInt(B.getPositionEl().getStyle("z-index"),10);return !!A})}return A},getZIndex:function(B){B=B||Ext.getDom(this.getListParent()||Ext.getBody());var A=parseInt(Ext.fly(B).getStyle("z-index"),10);if(!A){A=this.getParentZIndex()}return(A||12000)+5},initList:function(){if(!this.list){var B="x-combo-list",C=Ext.getDom(this.getListParent()||Ext.getBody());this.list=new Ext.Layer({parentEl:C,shadow:this.shadow,cls:[B,this.listClass].join(" "),constrain:false,zindex:this.getZIndex(C)});var A=this.listWidth||Math.max(this.wrap.getWidth(),this.minListWidth);this.list.setSize(A,0);this.list.swallowEvent("mousewheel");this.assetHeight=0;if(this.syncFont!==false){this.list.setStyle("font-size",this.el.getStyle("font-size"))}if(this.title){this.header=this.list.createChild({cls:B+"-hd",html:this.title});this.assetHeight+=this.header.getHeight()}this.innerList=this.list.createChild({cls:B+"-inner"});this.mon(this.innerList,"mouseover",this.onViewOver,this);this.mon(this.innerList,"mousemove",this.onViewMove,this);this.innerList.setWidth(A-this.list.getFrameWidth("lr"));if(this.pageSize){this.footer=this.list.createChild({cls:B+"-ft"});this.pageTb=new Ext.PagingToolbar({store:this.store,pageSize:this.pageSize,renderTo:this.footer});this.assetHeight+=this.footer.getHeight()}if(!this.tpl){this.tpl='<tpl for="."><div class="'+B+'-item">{'+this.displayField+"}</div></tpl>"}this.view=new Ext.DataView({applyTo:this.innerList,tpl:this.tpl,singleSelect:true,selectedClass:this.selectedClass,itemSelector:this.itemSelector||"."+B+"-item",emptyText:this.listEmptyText,deferEmptyText:false});this.mon(this.view,{containerclick:this.onViewClick,click:this.onViewClick,scope:this});this.bindStore(this.store,true);if(this.resizable){this.resizer=new Ext.Resizable(this.list,{pinned:true,handles:"se"});this.mon(this.resizer,"resize",function(E,F,D){this.maxHeight=D-this.handleHeight-this.list.getFrameWidth("tb")-this.assetHeight;this.listWidth=F;this.innerList.setWidth(F-this.list.getFrameWidth("lr"));this.restrictHeight()},this);this[this.pageSize?"footer":"innerList"].setStyle("margin-bottom",this.handleHeight+"px")}}},getListParent:function(){return document.body},getStore:function(){return this.store},bindStore:function(A,B){if(this.store&&!B){if(this.store!==A&&this.store.autoDestroy){this.store.destroy()}else{this.store.un("beforeload",this.onBeforeLoad,this);this.store.un("load",this.onLoad,this);this.store.un("exception",this.collapse,this)}if(!A){this.store=null;if(this.view){this.view.bindStore(null)}if(this.pageTb){this.pageTb.bindStore(null)}}}if(A){if(!B){this.lastQuery=null;if(this.pageTb){this.pageTb.bindStore(A)}}this.store=Ext.StoreMgr.lookup(A);this.store.on({scope:this,beforeload:this.onBeforeLoad,load:this.onLoad,exception:this.collapse});if(this.view){this.view.bindStore(A)}}},reset:function(){if(this.clearFilterOnReset&&this.mode=="local"){this.store.clearFilter()}Ext.form.ComboBox.superclass.reset.call(this)},initEvents:function(){Ext.form.ComboBox.superclass.initEvents.call(this);this.keyNav=new Ext.KeyNav(this.el,{"up":function(A){this.inKeyMode=true;this.selectPrev()},"down":function(A){if(!this.isExpanded()){this.onTriggerClick()}else{this.inKeyMode=true;this.selectNext()}},"enter":function(A){this.onViewClick()},"esc":function(A){this.collapse()},"tab":function(A){if(this.forceSelection===true){this.collapse()}else{this.onViewClick(false)}return true},scope:this,doRelay:function(B,A,C){if(C=="down"||this.scope.isExpanded()){var D=Ext.KeyNav.prototype.doRelay.apply(this,arguments);if(!Ext.isIE&&Ext.EventManager.useKeydown){this.scope.fireKey(B)}return D}return true},forceKeyDown:true,defaultEventAction:"stopEvent"});this.queryDelay=Math.max(this.queryDelay||10,this.mode=="local"?10:250);this.dqTask=new Ext.util.DelayedTask(this.initQuery,this);if(this.typeAhead){this.taTask=new Ext.util.DelayedTask(this.onTypeAhead,this)}if(!this.enableKeyEvents){this.mon(this.el,"keyup",this.onKeyUp,this)}},onDestroy:function(){if(this.dqTask){this.dqTask.cancel();this.dqTask=null}this.bindStore(null);Ext.destroy(this.resizer,this.view,this.pageTb,this.list);Ext.destroyMembers(this,"hiddenField");Ext.form.ComboBox.superclass.onDestroy.call(this)},fireKey:function(A){if(!this.isExpanded()){Ext.form.ComboBox.superclass.fireKey.call(this,A)}},onResize:function(B,A){Ext.form.ComboBox.superclass.onResize.apply(this,arguments);if(!isNaN(B)&&this.isVisible()&&this.list){this.doResize(B)}else{this.bufferSize=B}},doResize:function(B){if(!Ext.isDefined(this.listWidth)){var A=Math.max(B,this.minListWidth);this.list.setWidth(A);this.innerList.setWidth(A-this.list.getFrameWidth("lr"))}},onEnable:function(){Ext.form.ComboBox.superclass.onEnable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=false}},onDisable:function(){Ext.form.ComboBox.superclass.onDisable.apply(this,arguments);if(this.hiddenField){this.hiddenField.disabled=true}},onBeforeLoad:function(){if(!this.hasFocus){return}this.innerList.update(this.loadingText?'<div class="loading-indicator">'+this.loadingText+"</div>":"");this.restrictHeight();this.selectedIndex=-1},onLoad:function(){if(!this.hasFocus){return}if(this.store.getCount()>0||this.listEmptyText){this.expand();this.restrictHeight();if(this.lastQuery==this.allQuery){if(this.editable){this.el.dom.select()}if(this.autoSelect!==false&&!this.selectByValue(this.value,true)){this.select(0,true)}}else{if(this.autoSelect!==false){this.selectNext()}if(this.typeAhead&&this.lastKey!=Ext.EventObject.BACKSPACE&&this.lastKey!=Ext.EventObject.DELETE){this.taTask.delay(this.typeAheadDelay)}}}else{this.collapse()}},onTypeAhead:function(){if(this.store.getCount()>0){var A=this.store.getAt(0);var D=A.data[this.displayField];var C=D.length;var B=this.getRawValue().length;if(B!=C){this.setRawValue(D);this.selectText(B,D.length)}}},assertValue:function(){var B=this.getRawValue(),A;if(this.valueField&&Ext.isDefined(this.value)){A=this.findRecord(this.valueField,this.value)}if(!A||A.get(this.displayField)!=B){A=this.findRecord(this.displayField,B)}if(!A&&this.forceSelection){if(B.length>0&&B!=this.emptyText){this.el.dom.value=Ext.value(this.lastSelectionText,"");this.applyEmptyText()}else{this.clearValue()}}else{if(A&&this.valueField){if(this.value==B){return}B=A.get(this.valueField||this.displayField)}this.setValue(B)}},onSelect:function(A,B){if(this.fireEvent("beforeselect",this,A,B)!==false){this.setValue(A.data[this.valueField||this.displayField]);this.collapse();this.fireEvent("select",this,A,B)}},getName:function(){var A=this.hiddenField;return A&&A.name?A.name:this.hiddenName||Ext.form.ComboBox.superclass.getName.call(this)},getValue:function(){if(this.valueField){return Ext.isDefined(this.value)?this.value:""}else{return Ext.form.ComboBox.superclass.getValue.call(this)}},clearValue:function(){if(this.hiddenField){this.hiddenField.value=""}this.setRawValue("");this.lastSelectionText="";this.applyEmptyText();this.value=""},setValue:function(B){var C=B;if(this.valueField){var A=this.findRecord(this.valueField,B);if(A){C=A.data[this.displayField]}else{if(Ext.isDefined(this.valueNotFoundText)){C=this.valueNotFoundText}}}this.lastSelectionText=C;if(this.hiddenField){this.hiddenField.value=Ext.value(B,"")}Ext.form.ComboBox.superclass.setValue.call(this,C);this.value=B;return this},findRecord:function(A,B){var C;if(this.store.getCount()>0){this.store.each(function(D){if(D.data[A]==B){C=D;return false}})}return C},onViewMove:function(A,B){this.inKeyMode=false},onViewOver:function(A,D){if(this.inKeyMode){return}var C=this.view.findItemFromChild(D);if(C){var B=this.view.indexOf(C);this.select(B,false)}},onViewClick:function(D){var C=this.view.getSelectedIndexes()[0],B=this.store,A=B.getAt(C);if(A){this.onSelect(A,C)}else{this.collapse()}if(D!==false){this.el.focus()}},restrictHeight:function(){this.innerList.dom.style.height="";var E=this.innerList.dom,F=this.list.getFrameWidth("tb")+(this.resizable?this.handleHeight:0)+this.assetHeight,A=Math.max(E.clientHeight,E.offsetHeight,E.scrollHeight),B=this.getPosition()[1]-Ext.getBody().getScroll().top,C=Ext.lib.Dom.getViewHeight()-B-this.getSize().height,D=Math.max(B,C,this.minHeight||0)-this.list.shadowOffset-F-5;A=Math.min(A,D,this.maxHeight);this.innerList.setHeight(A);this.list.beginUpdate();this.list.setHeight(A+F);this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.endUpdate()},isExpanded:function(){return this.list&&this.list.isVisible()},selectByValue:function(B,C){if(!Ext.isEmpty(B,true)){var A=this.findRecord(this.valueField||this.displayField,B);if(A){this.select(this.store.indexOf(A),C);return true}}return false},select:function(C,B){this.selectedIndex=C;this.view.select(C);if(B!==false){var A=this.view.getNode(C);if(A){this.innerList.scrollChildIntoView(A,false)}}},selectNext:function(){var A=this.store.getCount();if(A>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex<A-1){this.select(this.selectedIndex+1)}}}},selectPrev:function(){var A=this.store.getCount();if(A>0){if(this.selectedIndex==-1){this.select(0)}else{if(this.selectedIndex!==0){this.select(this.selectedIndex-1)}}}},onKeyUp:function(A){var B=A.getKey();if(this.editable!==false&&this.readOnly!==true&&(B==A.BACKSPACE||!A.isSpecialKey())){this.lastKey=B;this.dqTask.delay(this.queryDelay)}Ext.form.ComboBox.superclass.onKeyUp.call(this,A)},validateBlur:function(){return !this.list||!this.list.isVisible()},initQuery:function(){this.doQuery(this.getRawValue())},beforeBlur:function(){this.assertValue()},postBlur:function(){Ext.form.ComboBox.superclass.postBlur.call(this);this.collapse();this.inKeyMode=false},doQuery:function(B,C){B=Ext.isEmpty(B)?"":B;var A={query:B,forceAll:C,combo:this,cancel:false};if(this.fireEvent("beforequery",A)===false||A.cancel){return false}B=A.query;C=A.forceAll;if(C===true||(B.length>=this.minChars)){if(this.lastQuery!==B){this.lastQuery=B;if(this.mode=="local"){this.selectedIndex=-1;if(C){this.store.clearFilter()}else{this.store.filter(this.displayField,B)}this.onLoad()}else{this.store.baseParams[this.queryParam]=B;this.store.load({params:this.getParams(B)});this.expand()}}else{this.selectedIndex=-1;this.onLoad()}}},getParams:function(A){var C={},B=this.store.paramNames;if(this.pageSize){C[B.start]=0;C[B.limit]=this.pageSize}return C},collapse:function(){if(!this.isExpanded()){return}this.list.hide();Ext.getDoc().un("mousewheel",this.collapseIf,this);Ext.getDoc().un("mousedown",this.collapseIf,this);this.fireEvent("collapse",this)},collapseIf:function(A){if(!this.isDestroyed&&!A.within(this.wrap)&&!A.within(this.list)){this.collapse()}},expand:function(){if(this.isExpanded()||!this.hasFocus){return}if(this.title||this.pageSize){this.assetHeight=0;if(this.title){this.assetHeight+=this.header.getHeight()}if(this.pageSize){this.assetHeight+=this.footer.getHeight()}}if(this.bufferSize){this.doResize(this.bufferSize);delete this.bufferSize}this.list.alignTo.apply(this.list,[this.el].concat(this.listAlign));this.list.setZIndex(this.getZIndex());this.list.show();if(Ext.isGecko2){this.innerList.setOverflow("auto")}this.mon(Ext.getDoc(),{scope:this,mousewheel:this.collapseIf,mousedown:this.collapseIf});this.fireEvent("expand",this)},onTriggerClick:function(){if(this.readOnly||this.disabled){return}if(this.isExpanded()){this.collapse();this.el.focus()}else{this.onFocus({});if(this.triggerAction=="all"){this.doQuery(this.allQuery,true)}else{this.doQuery(this.getRawValue())}this.el.focus()}}});Ext.reg("combo",Ext.form.ComboBox);Ext.form.Checkbox=Ext.extend(Ext.form.Field,{focusClass:undefined,fieldClass:"x-form-field",checked:false,boxLabel:"&#160;",defaultAutoCreate:{tag:"input",type:"checkbox",autocomplete:"off"},actionMode:"wrap",initComponent:function(){Ext.form.Checkbox.superclass.initComponent.call(this);this.addEvents("check")},onResize:function(){Ext.form.Checkbox.superclass.onResize.apply(this,arguments);if(!this.boxLabel&&!this.fieldLabel){this.el.alignTo(this.wrap,"c-c")}},initEvents:function(){Ext.form.Checkbox.superclass.initEvents.call(this);this.mon(this.el,{scope:this,click:this.onClick,change:this.onClick})},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,onRender:function(C,B){Ext.form.Checkbox.superclass.onRender.call(this,C,B);if(this.inputValue!==undefined){this.el.dom.value=this.inputValue}this.wrap=this.el.wrap({cls:"x-form-check-wrap"});if(this.boxLabel){var A=this.wrap.createChild({tag:"label",htmlFor:this.el.id,cls:"x-form-cb-label",html:this.boxLabel});if(this.boxLabelCls){A.addClass(this.boxLabelCls)}}if(this.checked){this.setValue(true)}else{this.checked=this.el.dom.checked}if(Ext.isIE&&!Ext.isStrict){this.wrap.repaint()}this.resizeEl=this.positionEl=this.wrap},onDestroy:function(){Ext.destroy(this.wrap);Ext.form.Checkbox.superclass.onDestroy.call(this)},initValue:function(){this.originalValue=this.getValue()},getValue:function(){if(this.rendered){return this.el.dom.checked}return this.checked},onClick:function(){if(this.el.dom.checked!=this.checked){this.setValue(this.el.dom.checked)}},setValue:function(B){var C=this.checked,A=this.inputValue;if(B===false){this.checked=false}else{this.checked=(B===true||B==="true"||B=="1"||(A?B==A:String(B).toLowerCase()=="on"))}if(this.rendered){this.el.dom.checked=this.checked;this.el.dom.defaultChecked=this.checked}if(C!=this.checked){this.fireEvent("check",this,this.checked);if(this.handler){this.handler.call(this.scope||this,this,this.checked)}}return this}});Ext.reg("checkbox",Ext.form.Checkbox);Ext.form.CheckboxGroup=Ext.extend(Ext.form.Field,{columns:"auto",vertical:false,allowBlank:true,blankText:"You must select at least one item in this group",defaultType:"checkbox",groupCls:"x-form-check-group",initComponent:function(){this.addEvents("change");this.on("change",this.validate,this);Ext.form.CheckboxGroup.superclass.initComponent.call(this)},onRender:function(J,I){if(!this.el){var N={autoEl:{id:this.id},cls:this.groupCls,layout:"column",renderTo:J,bufferResize:false};var G={xtype:"container",defaultType:this.defaultType,layout:"form",defaults:{hideLabel:true,anchor:"100%"}};if(this.items[0].items){Ext.apply(N,{layoutConfig:{columns:this.items.length},defaults:this.defaults,items:this.items});for(var M=0,K=this.items.length;M<K;M++){Ext.applyIf(this.items[M],G)}}else{var O,F=[];if(typeof this.columns=="string"){this.columns=this.items.length}if(!Ext.isArray(this.columns)){var C=[];for(var M=0;M<this.columns;M++){C.push((100/this.columns)*0.01)}this.columns=C}O=this.columns.length;for(var M=0;M<O;M++){var B=Ext.apply({items:[]},G);B[this.columns[M]<=1?"columnWidth":"width"]=this.columns[M];if(this.defaults){B.defaults=Ext.apply(B.defaults||{},this.defaults)}F.push(B)}if(this.vertical){var E=Math.ceil(this.items.length/O),L=0;for(var M=0,K=this.items.length;M<K;M++){if(M>0&&M%E==0){L++}if(this.items[M].fieldLabel){this.items[M].hideLabel=false}F[L].items.push(this.items[M])}}else{for(var M=0,K=this.items.length;M<K;M++){var H=M%O;if(this.items[M].fieldLabel){this.items[M].hideLabel=false}F[H].items.push(this.items[M])}}Ext.apply(N,{layoutConfig:{columns:O},items:F})}this.panel=new Ext.Container(N);this.panel.ownerCt=this;this.el=this.panel.getEl();if(this.forId&&this.itemCls){var A=this.el.up(this.itemCls).child("label",true);if(A){A.setAttribute("htmlFor",this.forId)}}var D=this.panel.findBy(function(P){return P.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(D)}Ext.form.CheckboxGroup.superclass.onRender.call(this,J,I)},initValue:function(){if(this.value){this.setValue.apply(this,this.buffered?this.value:[this.value]);delete this.buffered;delete this.value}},afterRender:function(){Ext.form.CheckboxGroup.superclass.afterRender.call(this);this.eachItem(function(A){A.on("check",this.fireChecked,this);A.inGroup=true})},doLayout:function(){if(this.rendered){this.panel.forceLayout=this.ownerCt.forceLayout;this.panel.doLayout()}},fireChecked:function(){var A=[];this.eachItem(function(B){if(B.checked){A.push(B)}});this.fireEvent("change",this,A)},getErrors:function(){var A=Ext.form.CheckboxGroup.superclass.getErrors.apply(this,arguments);if(!this.allowBlank){var B=true;this.eachItem(function(C){if(C.checked){return(B=false)}});if(B){A.push(this.blankText)}}return A},isDirty:function(){if(this.disabled||!this.rendered){return false}var A=false;this.eachItem(function(B){if(B.isDirty()){A=true;return false}});return A},setReadOnly:function(A){if(this.rendered){this.eachItem(function(B){B.setReadOnly(A)})}this.readOnly=A},onDisable:function(){this.eachItem(function(A){A.disable()})},onEnable:function(){this.eachItem(function(A){A.enable()})},onResize:function(B,A){this.panel.setSize(B,A);this.panel.doLayout()},reset:function(){if(this.originalValue){this.eachItem(function(A){if(A.setValue){A.setValue(false);A.originalValue=A.getValue()}});this.resetOriginal=true;this.setValue(this.originalValue);delete this.resetOriginal}else{this.eachItem(function(A){if(A.reset){A.reset()}})}(function(){this.clearInvalid()}).defer(50,this)},setValue:function(){if(this.rendered){this.onSetValue.apply(this,arguments)}else{this.buffered=true;this.value=arguments}return this},onSetValue:function(D,C){if(arguments.length==1){if(Ext.isArray(D)){Ext.each(D,function(G,F){if(Ext.isObject(G)&&G.setValue){G.setValue(true);if(this.resetOriginal===true){G.originalValue=G.getValue()}}else{var E=this.items.itemAt(F);if(E){E.setValue(G)}}},this)}else{if(Ext.isObject(D)){for(var A in D){var B=this.getBox(A);if(B){B.setValue(D[A])}}}else{this.setValueForItem(D)}}}else{var B=this.getBox(D);if(B){B.setValue(C)}}},beforeDestroy:function(){Ext.destroy(this.panel);if(!this.rendered){Ext.destroy(this.items)}Ext.form.CheckboxGroup.superclass.beforeDestroy.call(this)},setValueForItem:function(A){A=String(A).split(",");this.eachItem(function(B){if(A.indexOf(B.inputValue)>-1){B.setValue(true)}})},getBox:function(B){var A=null;this.eachItem(function(C){if(B==C||C.dataIndex==B||C.id==B||C.getName()==B){A=C;return false}});return A},getValue:function(){var A=[];this.eachItem(function(B){if(B.checked){A.push(B)}});return A},eachItem:function(A,B){if(this.items&&this.items.each){this.items.each(A,B||this)}},getRawValue:Ext.emptyFn,setRawValue:Ext.emptyFn});Ext.reg("checkboxgroup",Ext.form.CheckboxGroup);Ext.form.CompositeField=Ext.extend(Ext.form.Field,{defaultMargins:"0 5 0 0",skipLastItemMargin:true,isComposite:true,combineErrors:true,labelConnector:", ",initComponent:function(){var E=[],D=this.items,C;for(var A=0,F=D.length;A<F;A++){C=D[A];if(!Ext.isEmpty(C.ref)){C.ref="../"+C.ref}if(!C.hideLabel){E.push(C.fieldLabel)}Ext.applyIf(C,this.defaults);if(!(A==F-1&&this.skipLastItemMargin)){Ext.applyIf(C,{margins:this.defaultMargins})}}this.fieldLabel=this.fieldLabel||this.buildLabel(E);this.fieldErrors=new Ext.util.MixedCollection(true,function(G){return G.field});this.fieldErrors.on({scope:this,add:this.updateInvalidMark,remove:this.updateInvalidMark,replace:this.updateInvalidMark});Ext.form.CompositeField.superclass.initComponent.apply(this,arguments);this.innerCt=new Ext.Container({layout:"hbox",items:this.items,cls:"x-form-composite",defaultMargins:"0 3 0 0",ownerCt:this});this.innerCt.ownerCt=undefined;var B=this.innerCt.findBy(function(G){return G.isFormField},this);this.items=new Ext.util.MixedCollection();this.items.addAll(B)},onRender:function(C,B){if(!this.el){var D=this.innerCt;D.render(C);this.el=D.getEl();if(this.combineErrors){this.eachItem(function(E){Ext.apply(E,{markInvalid:this.onFieldMarkInvalid.createDelegate(this,[E],0),clearInvalid:this.onFieldClearInvalid.createDelegate(this,[E],0)})})}var A=this.el.parent().parent().child("label",true);if(A){A.setAttribute("for",this.items.items[0].id)}}Ext.form.CompositeField.superclass.onRender.apply(this,arguments)},onFieldMarkInvalid:function(B,D){var A=B.getName(),C={field:A,errorName:B.fieldLabel||A,error:D};this.fieldErrors.replace(A,C);if(!B.preventMark){B.el.addClass(B.invalidClass)}},onFieldClearInvalid:function(A){this.fieldErrors.removeKey(A.getName());A.el.removeClass(A.invalidClass)},updateInvalidMark:function(){var A=Ext.isIE6&&Ext.isStrict;if(this.fieldErrors.length==0){this.clearInvalid();if(A){this.clearInvalid.defer(50,this)}}else{var B=this.buildCombinedErrorMessage(this.fieldErrors.items);this.sortErrors();this.markInvalid(B);if(A){this.markInvalid(B)}}},validateValue:function(C,A){var B=true;this.eachItem(function(D){if(!D.isValid(A)){B=false}});return B},buildCombinedErrorMessage:function(A){var C=[],D;for(var B=0,E=A.length;B<E;B++){D=A[B];C.push(String.format("{0}: {1}",D.errorName,D.error))}return C.join("<br />")},sortErrors:function(){var A=this.items;this.fieldErrors.sort("ASC",function(E,D){var F=function(G){return function(H){return H.getName()==G}};var B=A.findIndexBy(F(E.field)),C=A.findIndexBy(F(D.field));return B<C?-1:1})},reset:function(){this.eachItem(function(A){A.reset()});(function(){this.clearInvalid()}).defer(50,this)},clearInvalidChildren:function(){this.eachItem(function(A){A.clearInvalid()})},buildLabel:function(A){return Ext.clean(A).join(this.labelConnector)},isDirty:function(){if(this.disabled||!this.rendered){return false}var A=false;this.eachItem(function(B){if(B.isDirty()){A=true;return false}});return A},eachItem:function(A,B){if(this.items&&this.items.each){this.items.each(A,B||this)}},onResize:function(E,D,B,C){var A=this.innerCt;if(this.rendered&&A.rendered){A.setSize(E,D)}Ext.form.CompositeField.superclass.onResize.apply(this,arguments)},doLayout:function(A,B){if(this.rendered){var C=this.innerCt;C.forceLayout=this.ownerCt.forceLayout;C.doLayout(A,B)}},beforeDestroy:function(){Ext.destroy(this.innerCt);Ext.form.CompositeField.superclass.beforeDestroy.call(this)},setReadOnly:function(A){if(A==undefined){A=true}A=!!A;if(this.rendered){this.eachItem(function(B){B.setReadOnly(A)})}this.readOnly=A},onShow:function(){Ext.form.CompositeField.superclass.onShow.call(this);this.doLayout()},onDisable:function(){this.eachItem(function(A){A.disable()})},onEnable:function(){this.eachItem(function(A){A.enable()})}});Ext.reg("compositefield",Ext.form.CompositeField);Ext.form.Radio=Ext.extend(Ext.form.Checkbox,{inputType:"radio",markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,getGroupValue:function(){var A=this.el.up("form")||Ext.getBody();var B=A.child('input[name="'+this.el.dom.name+'"]:checked',true);return B?B.value:null},setValue:function(B){var D,C,A;if(typeof B=="boolean"){Ext.form.Radio.superclass.setValue.call(this,B)}else{if(this.rendered){D=this.getCheckEl();A=D.child('input[name="'+this.el.dom.name+'"][value="'+B+'"]',true);if(A){Ext.getCmp(A.id).setValue(true)}}}if(this.rendered&&this.checked){D=D||this.getCheckEl();C=this.getCheckEl().select('input[name="'+this.el.dom.name+'"]');C.each(function(E){if(E.dom.id!=this.id){Ext.getCmp(E.dom.id).setValue(false)}},this)}return this},getCheckEl:function(){if(this.inGroup){return this.el.up(".x-form-radio-group")}return this.el.up("form")||Ext.getBody()}});Ext.reg("radio",Ext.form.Radio);Ext.form.RadioGroup=Ext.extend(Ext.form.CheckboxGroup,{allowBlank:true,blankText:"You must select one item in this group",defaultType:"radio",groupCls:"x-form-radio-group",getValue:function(){var A=null;this.eachItem(function(B){if(B.checked){A=B;return false}});return A},onSetValue:function(C,B){if(arguments.length>1){var A=this.getBox(C);if(A){A.setValue(B);if(A.checked){this.eachItem(function(D){if(D!==A){D.setValue(false)}})}}}else{this.setValueForItem(C)}},setValueForItem:function(A){A=String(A).split(",")[0];this.eachItem(function(B){B.setValue(A==B.inputValue)})},fireChecked:function(){if(!this.checkTask){this.checkTask=new Ext.util.DelayedTask(this.bufferChecked,this)}this.checkTask.delay(10)},bufferChecked:function(){var A=null;this.eachItem(function(B){if(B.checked){A=B;return false}});this.fireEvent("change",this,A)},onDestroy:function(){if(this.checkTask){this.checkTask.cancel();this.checkTask=null}Ext.form.RadioGroup.superclass.onDestroy.call(this)}});Ext.reg("radiogroup",Ext.form.RadioGroup);Ext.form.Hidden=Ext.extend(Ext.form.Field,{inputType:"hidden",shouldLayout:false,onRender:function(){Ext.form.Hidden.superclass.onRender.apply(this,arguments)},initEvents:function(){this.originalValue=this.getValue()},setSize:Ext.emptyFn,setWidth:Ext.emptyFn,setHeight:Ext.emptyFn,setPosition:Ext.emptyFn,setPagePosition:Ext.emptyFn,markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn});Ext.reg("hidden",Ext.form.Hidden);Ext.form.BasicForm=Ext.extend(Ext.util.Observable,{constructor:function(A,B){Ext.apply(this,B);if(Ext.isString(this.paramOrder)){this.paramOrder=this.paramOrder.split(/[\s,|]/)}this.items=new Ext.util.MixedCollection(false,function(C){return C.getItemId()});this.addEvents("beforeaction","actionfailed","actioncomplete");if(A){this.initEl(A)}Ext.form.BasicForm.superclass.constructor.call(this)},timeout:30,paramOrder:undefined,paramsAsHash:false,waitTitle:"Please Wait...",activeAction:null,trackResetOnLoad:false,initEl:function(A){this.el=Ext.get(A);this.id=this.el.id||Ext.id();if(!this.standardSubmit){this.el.on("submit",this.onSubmit,this)}this.el.addClass("x-form")},getEl:function(){return this.el},onSubmit:function(A){A.stopEvent()},destroy:function(A){if(A!==true){this.items.each(function(B){Ext.destroy(B)});Ext.destroy(this.el)}this.items.clear();this.purgeListeners()},isValid:function(){var A=true;this.items.each(function(B){if(!B.validate()){A=false}});return A},isDirty:function(){var A=false;this.items.each(function(B){if(B.isDirty()){A=true;return false}});return A},doAction:function(A,B){if(Ext.isString(A)){A=new Ext.form.Action.ACTION_TYPES[A](this,B)}if(this.fireEvent("beforeaction",this,A)!==false){this.beforeAction(A);A.run.defer(100,A)}return this},submit:function(B){B=B||{};if(this.standardSubmit){var C=B.clientValidation===false||this.isValid();if(C){var A=this.el.dom;if(this.url&&Ext.isEmpty(A.action)){A.action=this.url}A.submit()}return C}var D=String.format("{0}submit",this.api?"direct":"");this.doAction(D,B);return this},load:function(B){var A=String.format("{0}load",this.api?"direct":"");this.doAction(A,B);return this},updateRecord:function(B){B.beginEdit();var D=B.fields,C,A;D.each(function(E){C=this.findField(E.name);if(C){A=C.getValue();if(Ext.type(A)!==false&&A.getGroupValue){A=A.getGroupValue()}else{if(C.eachItem){A=[];C.eachItem(function(F){A.push(F.getValue())})}}B.set(E.name,A)}},this);B.endEdit();return this},loadRecord:function(A){this.setValues(A.data);return this},beforeAction:function(A){this.items.each(function(C){if(C.isFormField&&C.syncValue){C.syncValue()}});var B=A.options;if(B.waitMsg){if(this.waitMsgTarget===true){this.el.mask(B.waitMsg,"x-mask-loading")}else{if(this.waitMsgTarget){this.waitMsgTarget=Ext.get(this.waitMsgTarget);this.waitMsgTarget.mask(B.waitMsg,"x-mask-loading")}else{Ext.MessageBox.wait(B.waitMsg,B.waitTitle||this.waitTitle)}}}},afterAction:function(A,C){this.activeAction=null;var B=A.options;if(B.waitMsg){if(this.waitMsgTarget===true){this.el.unmask()}else{if(this.waitMsgTarget){this.waitMsgTarget.unmask()}else{Ext.MessageBox.updateProgress(1);Ext.MessageBox.hide()}}}if(C){if(B.reset){this.reset()}Ext.callback(B.success,B.scope,[this,A]);this.fireEvent("actioncomplete",this,A)}else{Ext.callback(B.failure,B.scope,[this,A]);this.fireEvent("actionfailed",this,A)}},findField:function(C){var B=this.items.get(C);if(!Ext.isObject(B)){var A=function(D){if(D.isFormField){if(D.dataIndex==C||D.id==C||D.getName()==C){B=D;return false}else{if(D.isComposite){return D.items.each(A)}else{if(D instanceof Ext.form.CheckboxGroup&&D.rendered){return D.eachItem(A)}}}}};this.items.each(A)}return B||null},markInvalid:function(A){if(Ext.isArray(A)){for(var B=0,D=A.length;B<D;B++){var F=A[B];var G=this.findField(F.id);if(G){G.markInvalid(F.msg)}}}else{var E,C;for(C in A){if(!Ext.isFunction(A[C])&&(E=this.findField(C))){E.markInvalid(A[C])}}}return this},setValues:function(F){if(Ext.isArray(F)){for(var A=0,D=F.length;A<D;A++){var C=F[A];var G=this.findField(C.id);if(G){G.setValue(C.value);if(this.trackResetOnLoad){G.originalValue=G.getValue()}}}}else{var E,B;for(B in F){if(!Ext.isFunction(F[B])&&(E=this.findField(B))){E.setValue(F[B]);if(this.trackResetOnLoad){E.originalValue=E.getValue()}}}}return this},getValues:function(B){var A=Ext.lib.Ajax.serializeForm(this.el.dom);if(B===true){return A}return Ext.urlDecode(A)},getFieldValues:function(D){var C={},B,A,E;this.items.each(function(F){if(!F.disabled&&(D!==true||F.isDirty())){B=F.getName();A=C[B];E=F.getValue();if(Ext.isDefined(A)){if(Ext.isArray(A)){C[B].push(E)}else{C[B]=[A,E]}}else{C[B]=E}}});return C},clearInvalid:function(){this.items.each(function(A){A.clearInvalid()});return this},reset:function(){this.items.each(function(A){A.reset()});return this},add:function(){this.items.addAll(Array.prototype.slice.call(arguments,0));return this},remove:function(A){this.items.remove(A);return this},cleanDestroyed:function(){this.items.filterBy(function(A){return !!A.isDestroyed}).each(this.remove,this)},render:function(){this.items.each(function(A){if(A.isFormField&&!A.rendered&&document.getElementById(A.id)){A.applyToMarkup(A.id)}});return this},applyToFields:function(A){this.items.each(function(B){Ext.apply(B,A)});return this},applyIfToFields:function(A){this.items.each(function(B){Ext.applyIf(B,A)});return this},callFieldMethod:function(B,A){A=A||[];this.items.each(function(C){if(Ext.isFunction(C[B])){C[B].apply(C,A)}});return this}});Ext.BasicForm=Ext.form.BasicForm;Ext.FormPanel=Ext.extend(Ext.Panel,{minButtonWidth:75,labelAlign:"left",monitorValid:false,monitorPoll:200,layout:"form",initComponent:function(){this.form=this.createForm();Ext.FormPanel.superclass.initComponent.call(this);this.bodyCfg={tag:"form",cls:this.baseCls+"-body",method:this.method||"POST",id:this.formId||Ext.id()};if(this.fileUpload){this.bodyCfg.enctype="multipart/form-data"}this.initItems();this.addEvents("clientvalidation");this.relayEvents(this.form,["beforeaction","actionfailed","actioncomplete"])},createForm:function(){var A=Ext.applyIf({listeners:{}},this.initialConfig);return new Ext.form.BasicForm(null,A)},initFields:function(){var C=this.form;var A=this;var B=function(D){if(A.isField(D)){C.add(D)}else{if(D.findBy&&D!=A){A.applySettings(D);if(D.items&&D.items.each){D.items.each(B,this)}}}};this.items.each(B,this)},applySettings:function(A){var B=A.ownerCt;Ext.applyIf(A,{labelAlign:B.labelAlign,labelWidth:B.labelWidth,itemCls:B.itemCls})},getLayoutTarget:function(){return this.form.el},getForm:function(){return this.form},onRender:function(B,A){this.initFields();Ext.FormPanel.superclass.onRender.call(this,B,A);this.form.initEl(this.body)},beforeDestroy:function(){this.stopMonitoring();this.form.destroy(true);Ext.FormPanel.superclass.beforeDestroy.call(this)},isField:function(A){return !!A.setValue&&!!A.getValue&&!!A.markInvalid&&!!A.clearInvalid},initEvents:function(){Ext.FormPanel.superclass.initEvents.call(this);this.on({scope:this,add:this.onAddEvent,remove:this.onRemoveEvent});if(this.monitorValid){this.startMonitoring()}},onAdd:function(A){Ext.FormPanel.superclass.onAdd.call(this,A);this.processAdd(A)},onAddEvent:function(A,B){if(A!==this){this.processAdd(B)}},processAdd:function(A){if(this.isField(A)){this.form.add(A)}else{if(A.findBy){this.applySettings(A);this.form.add.apply(this.form,A.findBy(this.isField))}}},onRemove:function(A){Ext.FormPanel.superclass.onRemove.call(this,A);this.processRemove(A)},onRemoveEvent:function(A,B){if(A!==this){this.processRemove(B)}},processRemove:function(A){if(!this.destroying){if(this.isField(A)){this.form.remove(A)}else{if(A.findBy){Ext.each(A.findBy(this.isField),this.form.remove,this.form);this.form.cleanDestroyed()}}}},startMonitoring:function(){if(!this.validTask){this.validTask=new Ext.util.TaskRunner();this.validTask.start({run:this.bindHandler,interval:this.monitorPoll||200,scope:this})}},stopMonitoring:function(){if(this.validTask){this.validTask.stopAll();this.validTask=null}},load:function(){this.form.load.apply(this.form,arguments)},onDisable:function(){Ext.FormPanel.superclass.onDisable.call(this);if(this.form){this.form.items.each(function(){this.disable()})}},onEnable:function(){Ext.FormPanel.superclass.onEnable.call(this);if(this.form){this.form.items.each(function(){this.enable()})}},bindHandler:function(){var B=true;this.form.items.each(function(F){if(!F.isValid(true)){B=false;return false}});if(this.fbar){var D=this.fbar.items.items;for(var A=0,C=D.length;A<C;A++){var E=D[A];if(E.formBind===true&&E.disabled===B){E.setDisabled(!B)}}}this.fireEvent("clientvalidation",this,B)}});Ext.reg("form",Ext.FormPanel);Ext.form.FormPanel=Ext.FormPanel;Ext.form.FieldSet=Ext.extend(Ext.Panel,{baseCls:"x-fieldset",layout:"form",animCollapse:false,onRender:function(C,B){if(!this.el){this.el=document.createElement("fieldset");this.el.id=this.id;if(this.title||this.header||this.checkboxToggle){this.el.appendChild(document.createElement("legend")).className=this.baseCls+"-header"}}Ext.form.FieldSet.superclass.onRender.call(this,C,B);if(this.checkboxToggle){var A=typeof this.checkboxToggle=="object"?this.checkboxToggle:{tag:"input",type:"checkbox",name:this.checkboxName||this.id+"-checkbox"};this.checkbox=this.header.insertFirst(A);this.checkbox.dom.checked=!this.collapsed;this.mon(this.checkbox,"click",this.onCheckClick,this)}},onCollapse:function(B,A){if(this.checkbox){this.checkbox.dom.checked=false}Ext.form.FieldSet.superclass.onCollapse.call(this,B,A)},onExpand:function(B,A){if(this.checkbox){this.checkbox.dom.checked=true}Ext.form.FieldSet.superclass.onExpand.call(this,B,A)},onCheckClick:function(){this[this.checkbox.dom.checked?"expand":"collapse"]()}});Ext.reg("fieldset",Ext.form.FieldSet);Ext.form.HtmlEditor=Ext.extend(Ext.form.Field,{enableFormat:true,enableFontSize:true,enableColors:true,enableAlignments:true,enableLists:true,enableSourceEdit:true,enableLinks:true,enableFont:true,createLinkText:"Please enter the URL for the link:",defaultLinkValue:"http://",fontFamilies:["Arial","Courier New","Tahoma","Times New Roman","Verdana"],defaultFont:"tahoma",defaultValue:(Ext.isOpera||Ext.isIE6)?"&#160;":"&#8203;",actionMode:"wrap",validationEvent:false,deferHeight:true,initialized:false,activated:false,sourceEditMode:false,onFocus:Ext.emptyFn,iframePad:3,hideMode:"offsets",defaultAutoCreate:{tag:"textarea",style:"width:500px;height:300px;",autocomplete:"off"},initComponent:function(){this.addEvents("initialize","activate","beforesync","beforepush","sync","push","editmodechange");Ext.form.HtmlEditor.superclass.initComponent.call(this)},createFontOptions:function(){var D=[],E=this.fontFamilies,B,F;for(var A=0,C=E.length;A<C;A++){B=E[A];F=B.toLowerCase();D.push('<option value="',F,'" style="font-family:',B,';"',(this.defaultFont==F?' selected="true">':">"),B,"</option>")}return D.join("")},createToolbar:function(F){var E=[];var A=Ext.QuickTips&&Ext.QuickTips.isEnabled();function D(I,H,G){return{itemId:I,cls:"x-btn-icon",iconCls:"x-edit-"+I,enableToggle:H!==false,scope:F,handler:G||F.relayBtnCmd,clickEvent:"mousedown",tooltip:A?F.buttonTips[I]||undefined:undefined,overflowText:F.buttonTips[I].title||undefined,tabIndex:-1}}if(this.enableFont&&!Ext.isSafari2){var B=new Ext.Toolbar.Item({autoEl:{tag:"select",cls:"x-font-select",html:this.createFontOptions()}});E.push(B,"-")}if(this.enableFormat){E.push(D("bold"),D("italic"),D("underline"))}if(this.enableFontSize){E.push("-",D("increasefontsize",false,this.adjustFont),D("decreasefontsize",false,this.adjustFont))}if(this.enableColors){E.push("-",{itemId:"forecolor",cls:"x-btn-icon",iconCls:"x-edit-forecolor",clickEvent:"mousedown",tooltip:A?F.buttonTips.forecolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({allowReselect:true,focus:Ext.emptyFn,value:"000000",plain:true,listeners:{scope:this,select:function(G,H){this.execCmd("forecolor",Ext.isWebKit||Ext.isIE?"#"+H:H);this.deferFocus()}},clickEvent:"mousedown"})},{itemId:"backcolor",cls:"x-btn-icon",iconCls:"x-edit-backcolor",clickEvent:"mousedown",tooltip:A?F.buttonTips.backcolor||undefined:undefined,tabIndex:-1,menu:new Ext.menu.ColorMenu({focus:Ext.emptyFn,value:"FFFFFF",plain:true,allowReselect:true,listeners:{scope:this,select:function(G,H){if(Ext.isGecko){this.execCmd("useCSS",false);this.execCmd("hilitecolor",H);this.execCmd("useCSS",true);this.deferFocus()}else{this.execCmd(Ext.isOpera?"hilitecolor":"backcolor",Ext.isWebKit||Ext.isIE?"#"+H:H);this.deferFocus()}}},clickEvent:"mousedown"})})}if(this.enableAlignments){E.push("-",D("justifyleft"),D("justifycenter"),D("justifyright"))}if(!Ext.isSafari2){if(this.enableLinks){E.push("-",D("createlink",false,this.createLink))}if(this.enableLists){E.push("-",D("insertorderedlist"),D("insertunorderedlist"))}if(this.enableSourceEdit){E.push("-",D("sourceedit",true,function(G){this.toggleSourceEdit(!this.sourceEditMode)}))}}var C=new Ext.Toolbar({renderTo:this.wrap.dom.firstChild,items:E});if(B){this.fontSelect=B.el;this.mon(this.fontSelect,"change",function(){var G=this.fontSelect.dom.value;this.relayCmd("fontname",G);this.deferFocus()},this)}this.mon(C.el,"click",function(G){G.preventDefault()});this.tb=C;this.tb.doLayout()},onDisable:function(){this.wrap.mask();Ext.form.HtmlEditor.superclass.onDisable.call(this)},onEnable:function(){this.wrap.unmask();Ext.form.HtmlEditor.superclass.onEnable.call(this)},setReadOnly:function(A){Ext.form.HtmlEditor.superclass.setReadOnly.call(this,A);if(this.initialized){if(Ext.isIE){this.getEditorBody().contentEditable=!A}else{this.setDesignMode(!A)}var B=this.getEditorBody();if(B){B.style.cursor=this.readOnly?"default":"text"}this.disableItems(A)}},getDocMarkup:function(){var A=Ext.fly(this.iframe).getHeight()-this.iframePad*2;return String.format('<html><head><style type="text/css">body{border: 0; margin: 0; padding: {0}px; height: {1}px; cursor: text}</style></head><body></body></html>',this.iframePad,A)},getEditorBody:function(){var A=this.getDoc();return A.body||A.documentElement},getDoc:function(){return Ext.isIE?this.getWin().document:(this.iframe.contentDocument||this.getWin().document)},getWin:function(){return Ext.isIE?this.iframe.contentWindow:window.frames[this.iframe.name]},onRender:function(C,B){Ext.form.HtmlEditor.superclass.onRender.call(this,C,B);this.el.dom.style.border="0 none";this.el.dom.setAttribute("tabIndex",-1);this.el.addClass("x-hidden");if(Ext.isIE){this.el.applyStyles("margin-top:-1px;margin-bottom:-1px;")}this.wrap=this.el.wrap({cls:"x-html-editor-wrap",cn:{cls:"x-html-editor-tb"}});this.createToolbar(this);this.disableItems(true);this.tb.doLayout();this.createIFrame();if(!this.width){var A=this.el.getSize();this.setSize(A.width,this.height||A.height)}this.resizeEl=this.positionEl=this.wrap},createIFrame:function(){var A=document.createElement("iframe");A.name=Ext.id();A.frameBorder="0";A.style.overflow="auto";A.src=Ext.SSL_SECURE_URL;this.wrap.dom.appendChild(A);this.iframe=A;this.monitorTask=Ext.TaskMgr.start({run:this.checkDesignMode,scope:this,interval:100})},initFrame:function(){Ext.TaskMgr.stop(this.monitorTask);var B=this.getDoc();this.win=this.getWin();B.open();B.write(this.getDocMarkup());B.close();var A={run:function(){var C=this.getDoc();if(C.body||C.readyState=="complete"){Ext.TaskMgr.stop(A);this.setDesignMode(true);this.initEditor.defer(10,this)}},interval:10,duration:10000,scope:this};Ext.TaskMgr.start(A)},checkDesignMode:function(){if(this.wrap&&this.wrap.dom.offsetWidth){var A=this.getDoc();if(!A){return}if(!A.editorInitialized||this.getDesignMode()!="on"){this.initFrame()}}},setDesignMode:function(A){var B=this.getDoc();if(B){if(this.readOnly){A=false}B.designMode=(/on|true/i).test(String(A).toLowerCase())?"on":"off"}},getDesignMode:function(){var A=this.getDoc();if(!A){return""}return String(A.designMode).toLowerCase()},disableItems:function(A){if(this.fontSelect){this.fontSelect.dom.disabled=A}this.tb.items.each(function(B){if(B.getItemId()!="sourceedit"){B.setDisabled(A)}})},onResize:function(C,A){Ext.form.HtmlEditor.superclass.onResize.apply(this,arguments);if(this.el&&this.iframe){if(Ext.isNumber(C)){var D=C-this.wrap.getFrameWidth("lr");this.el.setWidth(D);this.tb.setWidth(D);this.iframe.style.width=Math.max(D,0)+"px"}if(Ext.isNumber(A)){var E=A-this.wrap.getFrameWidth("tb")-this.tb.el.getHeight();this.el.setHeight(E);this.iframe.style.height=Math.max(E,0)+"px";var B=this.getEditorBody();if(B){B.style.height=Math.max((E-(this.iframePad*2)),0)+"px"}}}},toggleSourceEdit:function(B){var D,A;if(B===undefined){B=!this.sourceEditMode}this.sourceEditMode=B===true;var C=this.tb.getComponent("sourceedit");if(C.pressed!==this.sourceEditMode){C.toggle(this.sourceEditMode);if(!C.xtbHidden){return}}if(this.sourceEditMode){this.previousSize=this.getSize();D=Ext.get(this.iframe).getHeight();this.disableItems(true);this.syncValue();this.iframe.className="x-hidden";this.el.removeClass("x-hidden");this.el.dom.removeAttribute("tabIndex");this.el.focus();this.el.dom.style.height=D+"px"}else{A=parseInt(this.el.dom.style.height,10);if(this.initialized){this.disableItems(this.readOnly)}this.pushValue();this.iframe.className="";this.el.addClass("x-hidden");this.el.dom.setAttribute("tabIndex",-1);this.deferFocus();this.setSize(this.previousSize);delete this.previousSize;this.iframe.style.height=A+"px"}this.fireEvent("editmodechange",this,this.sourceEditMode)},createLink:function(){var A=prompt(this.createLinkText,this.defaultLinkValue);if(A&&A!="http://"){this.relayCmd("createlink",A)}},initEvents:function(){this.originalValue=this.getValue()},markInvalid:Ext.emptyFn,clearInvalid:Ext.emptyFn,setValue:function(A){Ext.form.HtmlEditor.superclass.setValue.call(this,A);this.pushValue();return this},cleanHtml:function(A){A=String(A);if(Ext.isWebKit){A=A.replace(/\sclass="(?:Apple-style-span|khtml-block-placeholder)"/gi,"")}if(A.charCodeAt(0)==this.defaultValue.replace(/\D/g,"")){A=A.substring(1)}return A},syncValue:function(){if(this.initialized){var B=this.getEditorBody();var A=B.innerHTML;if(Ext.isWebKit){var C=B.getAttribute("style");var D=C.match(/text-align:(.*?);/i);if(D&&D[1]){A='<div style="'+D[0]+'">'+A+"</div>"}}A=this.cleanHtml(A);if(this.fireEvent("beforesync",this,A)!==false){this.el.dom.value=A;this.fireEvent("sync",this,A)}}},getValue:function(){this[this.sourceEditMode?"pushValue":"syncValue"]();return Ext.form.HtmlEditor.superclass.getValue.call(this)},pushValue:function(){if(this.initialized){var A=this.el.dom.value;if(!this.activated&&A.length<1){A=this.defaultValue}if(this.fireEvent("beforepush",this,A)!==false){this.getEditorBody().innerHTML=A;if(Ext.isGecko){this.setDesignMode(false);this.setDesignMode(true)}this.fireEvent("push",this,A)}}},deferFocus:function(){this.focus.defer(10,this)},focus:function(){if(this.win&&!this.sourceEditMode){this.win.focus()}else{this.el.focus()}},initEditor:function(){try{var D=this.getEditorBody(),A=this.el.getStyles("font-size","font-family","background-image","background-repeat","background-color","color"),E,C;A["background-attachment"]="fixed";D.bgProperties="fixed";Ext.DomHelper.applyStyles(D,A);E=this.getDoc();if(E){try{Ext.EventManager.removeAll(E)}catch(B){}}C=this.onEditorEvent.createDelegate(this);Ext.EventManager.on(E,{mousedown:C,dblclick:C,click:C,keyup:C,buffer:100});if(Ext.isGecko){Ext.EventManager.on(E,"keypress",this.applyCommand,this)}if(Ext.isIE||Ext.isWebKit||Ext.isOpera){Ext.EventManager.on(E,"keydown",this.fixKeys,this)}E.editorInitialized=true;this.initialized=true;this.pushValue();this.setReadOnly(this.readOnly);this.fireEvent("initialize",this)}catch(B){}},beforeDestroy:function(){if(this.monitorTask){Ext.TaskMgr.stop(this.monitorTask)}if(this.rendered){Ext.destroy(this.tb);var C=this.getDoc();if(C){try{Ext.EventManager.removeAll(C);for(var B in C){delete C[B]}}catch(A){}}if(this.wrap){this.wrap.dom.innerHTML="";this.wrap.remove()}}Ext.form.HtmlEditor.superclass.beforeDestroy.call(this)},onFirstFocus:function(){this.activated=true;this.disableItems(this.readOnly);if(Ext.isGecko){this.win.focus();var B=this.win.getSelection();if(!B.focusNode||B.focusNode.nodeType!=3){var A=B.getRangeAt(0);A.selectNodeContents(this.getEditorBody());A.collapse(true);this.deferFocus()}try{this.execCmd("useCSS",true);this.execCmd("styleWithCSS",false)}catch(C){}}this.fireEvent("activate",this)},adjustFont:function(C){var A=C.getItemId()=="increasefontsize"?1:-1,D=this.getDoc(),B=parseInt(D.queryCommandValue("FontSize")||2,10);if((Ext.isSafari&&!Ext.isSafari2)||Ext.isChrome||Ext.isAir){if(B<=10){B=1+A}else{if(B<=13){B=2+A}else{if(B<=16){B=3+A}else{if(B<=18){B=4+A}else{if(B<=24){B=5+A}else{B=6+A}}}}}B=B.constrain(1,6)}else{if(Ext.isSafari){A*=2}B=Math.max(1,B+A)+(Ext.isSafari?"px":0)}this.execCmd("FontSize",B)},onEditorEvent:function(A){this.updateToolbar()},updateToolbar:function(){if(this.readOnly){return}if(!this.activated){this.onFirstFocus();return}var A=this.tb.items.map,C=this.getDoc();if(this.enableFont&&!Ext.isSafari2){var B=(C.queryCommandValue("FontName")||this.defaultFont).toLowerCase();if(B!=this.fontSelect.dom.value){this.fontSelect.dom.value=B}}if(this.enableFormat){A.bold.toggle(C.queryCommandState("bold"));A.italic.toggle(C.queryCommandState("italic"));A.underline.toggle(C.queryCommandState("underline"))}if(this.enableAlignments){A.justifyleft.toggle(C.queryCommandState("justifyleft"));A.justifycenter.toggle(C.queryCommandState("justifycenter"));A.justifyright.toggle(C.queryCommandState("justifyright"))}if(!Ext.isSafari2&&this.enableLists){A.insertorderedlist.toggle(C.queryCommandState("insertorderedlist"));A.insertunorderedlist.toggle(C.queryCommandState("insertunorderedlist"))}Ext.menu.MenuMgr.hideAll();this.syncValue()},relayBtnCmd:function(A){this.relayCmd(A.getItemId())},relayCmd:function(A,B){(function(){this.focus();this.execCmd(A,B);this.updateToolbar()}).defer(10,this)},execCmd:function(A,B){var C=this.getDoc();C.execCommand(A,false,B===undefined?null:B);this.syncValue()},applyCommand:function(A){if(A.ctrlKey){var C=A.getCharCode(),B;if(C>0){C=String.fromCharCode(C);switch(C){case"b":B="bold";break;case"i":B="italic";break;case"u":B="underline";break}if(B){this.win.focus();this.execCmd(B);this.deferFocus();A.preventDefault()}}}},insertAtCursor:function(B){if(!this.activated){return}if(Ext.isIE){this.win.focus();var C=this.getDoc(),A=C.selection.createRange();if(A){A.pasteHTML(B);this.syncValue();this.deferFocus()}}else{this.win.focus();this.execCmd("InsertHTML",B);this.deferFocus()}},fixKeys:function(){if(Ext.isIE){return function(B){var E=B.getKey(),C=this.getDoc(),A;if(E==B.TAB){B.stopEvent();A=C.selection.createRange();if(A){A.collapse(true);A.pasteHTML("&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}else{if(E==B.ENTER){A=C.selection.createRange();if(A){var D=A.parentElement();if(!D||D.tagName.toLowerCase()!="li"){B.stopEvent();A.pasteHTML("<br />");A.collapse(false);A.select()}}}}}}else{if(Ext.isOpera){return function(A){var B=A.getKey();if(B==A.TAB){A.stopEvent();this.win.focus();this.execCmd("InsertHTML","&nbsp;&nbsp;&nbsp;&nbsp;");this.deferFocus()}}}else{if(Ext.isWebKit){return function(A){var B=A.getKey();if(B==A.TAB){A.stopEvent();this.execCmd("InsertText","\t");this.deferFocus()}else{if(B==A.ENTER){A.stopEvent();this.execCmd("InsertHtml","<br /><br />");this.deferFocus()}}}}}}}(),getToolbar:function(){return this.tb},buttonTips:{bold:{title:"Bold (Ctrl+B)",text:"Make the selected text bold.",cls:"x-html-editor-tip"},italic:{title:"Italic (Ctrl+I)",text:"Make the selected text italic.",cls:"x-html-editor-tip"},underline:{title:"Underline (Ctrl+U)",text:"Underline the selected text.",cls:"x-html-editor-tip"},increasefontsize:{title:"Grow Text",text:"Increase the font size.",cls:"x-html-editor-tip"},decreasefontsize:{title:"Shrink Text",text:"Decrease the font size.",cls:"x-html-editor-tip"},backcolor:{title:"Text Highlight Color",text:"Change the background color of the selected text.",cls:"x-html-editor-tip"},forecolor:{title:"Font Color",text:"Change the color of the selected text.",cls:"x-html-editor-tip"},justifyleft:{title:"Align Text Left",text:"Align text to the left.",cls:"x-html-editor-tip"},justifycenter:{title:"Center Text",text:"Center text in the editor.",cls:"x-html-editor-tip"},justifyright:{title:"Align Text Right",text:"Align text to the right.",cls:"x-html-editor-tip"},insertunorderedlist:{title:"Bullet List",text:"Start a bulleted list.",cls:"x-html-editor-tip"},insertorderedlist:{title:"Numbered List",text:"Start a numbered list.",cls:"x-html-editor-tip"},createlink:{title:"Hyperlink",text:"Make the selected text a hyperlink.",cls:"x-html-editor-tip"},sourceedit:{title:"Source Edit",text:"Switch to source editing mode.",cls:"x-html-editor-tip"}}});Ext.reg("htmleditor",Ext.form.HtmlEditor);Ext.form.TimeField=Ext.extend(Ext.form.ComboBox,{minValue:undefined,maxValue:undefined,minText:"The time in this field must be equal to or after {0}",maxText:"The time in this field must be equal to or before {0}",invalidText:"{0} is not a valid time",format:"g:i A",altFormats:"g:ia|g:iA|g:i a|g:i A|h:i|g:i|H:i|ga|ha|gA|h a|g a|g A|gi|hi|gia|hia|g|H|gi a|hi a|giA|hiA|gi A|hi A",increment:15,mode:"local",triggerAction:"all",typeAhead:false,initDate:"1/1/2008",initDateFormat:"j/n/Y",initComponent:function(){if(Ext.isDefined(this.minValue)){this.setMinValue(this.minValue,true)}if(Ext.isDefined(this.maxValue)){this.setMaxValue(this.maxValue,true)}if(!this.store){this.generateStore(true)}Ext.form.TimeField.superclass.initComponent.call(this)},setMinValue:function(B,A){this.setLimit(B,true,A);return this},setMaxValue:function(B,A){this.setLimit(B,false,A);return this},generateStore:function(C){var A=this.minValue||new Date(this.initDate).clearTime(),D=this.maxValue||new Date(this.initDate).clearTime().add("mi",(24*60)-1),B=[];while(A<=D){B.push(A.dateFormat(this.format));A=A.add("mi",this.increment)}this.bindStore(B,C)},setLimit:function(D,A,C){var B;if(Ext.isString(D)){B=this.parseDate(D)}else{if(Ext.isDate(D)){B=D}}if(B){var E=new Date(this.initDate).clearTime();E.setHours(B.getHours(),B.getMinutes(),B.getSeconds(),B.getMilliseconds());this[A?"minValue":"maxValue"]=E;if(!C){this.generateStore()}}},getValue:function(){var A=Ext.form.TimeField.superclass.getValue.call(this);return this.formatDate(this.parseDate(A))||""},setValue:function(A){return Ext.form.TimeField.superclass.setValue.call(this,this.formatDate(this.parseDate(A)))},validateValue:Ext.form.DateField.prototype.validateValue,formatDate:Ext.form.DateField.prototype.formatDate,parseDate:function(D){if(!D||Ext.isDate(D)){return D}var F=this.initDate+" ",H=this.initDateFormat+" ",C=Date.parseDate(F+D,H+this.format),A=this.altFormats;if(!C&&A){if(!this.altFormatsArray){this.altFormatsArray=A.split("|")}for(var E=0,B=this.altFormatsArray,G=B.length;E<G&&!C;E++){C=Date.parseDate(F+D,H+B[E])}}return C}});Ext.reg("timefield",Ext.form.TimeField);Ext.form.SliderField=Ext.extend(Ext.form.Field,{useTips:true,tipText:null,actionMode:"wrap",initComponent:function(){var B=Ext.copyTo({id:this.id+"-slider"},this.initialConfig,["vertical","minValue","maxValue","decimalPrecision","keyIncrement","increment","clickToChange","animate"]);if(this.useTips){var A=this.tipText?{getText:this.tipText}:{};B.plugins=[new Ext.slider.Tip(A)]}this.slider=new Ext.Slider(B);Ext.form.SliderField.superclass.initComponent.call(this)},onRender:function(B,A){this.autoCreate={id:this.id,name:this.name,type:"hidden",tag:"input"};Ext.form.SliderField.superclass.onRender.call(this,B,A);this.wrap=this.el.wrap({cls:"x-form-field-wrap"});this.resizeEl=this.positionEl=this.wrap;this.slider.render(this.wrap)},onResize:function(B,A,C,D){Ext.form.SliderField.superclass.onResize.call(this,B,A,C,D);this.slider.setSize(B,A)},initEvents:function(){Ext.form.SliderField.superclass.initEvents.call(this);this.slider.on("change",this.onChange,this)},onChange:function(B,A){this.setValue(A,undefined,true)},onEnable:function(){Ext.form.SliderField.superclass.onEnable.call(this);this.slider.enable()},onDisable:function(){Ext.form.SliderField.superclass.onDisable.call(this);this.slider.disable()},beforeDestroy:function(){Ext.destroy(this.slider);Ext.form.SliderField.superclass.beforeDestroy.call(this)},alignErrorIcon:function(){this.errorIcon.alignTo(this.slider.el,"tl-tr",[2,0])},setMinValue:function(A){this.slider.setMinValue(A);return this},setMaxValue:function(A){this.slider.setMaxValue(A);return this},setValue:function(B,A,C){if(!C){this.slider.setValue(B,A)}return Ext.form.SliderField.superclass.setValue.call(this,this.slider.getValue())},getValue:function(){return this.slider.getValue()}});Ext.reg("sliderfield",Ext.form.SliderField);Ext.form.Label=Ext.extend(Ext.BoxComponent,{onRender:function(B,A){if(!this.el){this.el=document.createElement("label");this.el.id=this.getId();this.el.innerHTML=this.text?Ext.util.Format.htmlEncode(this.text):(this.html||"");if(this.forId){this.el.setAttribute("for",this.forId)}}Ext.form.Label.superclass.onRender.call(this,B,A)},setText:function(C,A){var B=A===false;this[!B?"text":"html"]=C;delete this[B?"text":"html"];if(this.rendered){this.el.dom.innerHTML=A!==false?Ext.util.Format.htmlEncode(C):C}return this}});Ext.reg("label",Ext.form.Label);Ext.form.Action=function(A,B){this.form=A;this.options=B||{}};Ext.form.Action.CLIENT_INVALID="client";Ext.form.Action.SERVER_INVALID="server";Ext.form.Action.CONNECT_FAILURE="connect";Ext.form.Action.LOAD_FAILURE="load";Ext.form.Action.prototype={type:"default",run:function(A){},success:function(A){},handleResponse:function(A){},failure:function(A){this.response=A;this.failureType=Ext.form.Action.CONNECT_FAILURE;this.form.afterAction(this,false)},processResponse:function(A){this.response=A;if(!A.responseText&&!A.responseXML){return true}this.result=this.handleResponse(A);return this.result},decodeResponse:function(B){try{return Ext.decode(B.responseText)}catch(A){return false}},getUrl:function(A){var B=this.options.url||this.form.url||this.form.el.dom.action;if(A){var C=this.getParams();if(C){B=Ext.urlAppend(B,C)}}return B},getMethod:function(){return(this.options.method||this.form.method||this.form.el.dom.method||"POST").toUpperCase()},getParams:function(){var B=this.form.baseParams;var A=this.options.params;if(A){if(typeof A=="object"){A=Ext.urlEncode(Ext.applyIf(A,B))}else{if(typeof A=="string"&&B){A+="&"+Ext.urlEncode(B)}}}else{if(B){A=Ext.urlEncode(B)}}return A},createCallback:function(A){var A=A||{};return{success:this.success,failure:this.failure,scope:this,timeout:(A.timeout*1000)||(this.form.timeout*1000),upload:this.form.fileUpload?this.success:undefined}}};Ext.form.Action.Submit=function(A,B){Ext.form.Action.Submit.superclass.constructor.call(this,A,B)};Ext.extend(Ext.form.Action.Submit,Ext.form.Action,{type:"submit",run:function(){var B=this.options,D=this.getMethod(),F=D=="GET";if(B.clientValidation===false||this.form.isValid()){if(B.submitEmptyText===false){var E=this.form.items,C=[],A=function(G){if(G.el.getValue()==G.emptyText){C.push(G);G.el.dom.value=""}if(G.isComposite&&G.rendered){G.items.each(A)}};E.each(A)}Ext.Ajax.request(Ext.apply(this.createCallback(B),{form:this.form.el.dom,url:this.getUrl(F),method:D,headers:B.headers,params:!F?this.getParams():null,isUpload:this.form.fileUpload}));if(B.submitEmptyText===false){Ext.each(C,function(G){if(G.applyEmptyText){G.applyEmptyText()}})}}else{if(B.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},success:function(B){var A=this.processResponse(B);if(A===true||A.success){this.form.afterAction(this,true);return}if(A.errors){this.form.markInvalid(A.errors)}this.failureType=Ext.form.Action.SERVER_INVALID;this.form.afterAction(this,false)},handleResponse:function(F){if(this.form.errorReader){var A=this.form.errorReader.read(F);var B=[];if(A.records){for(var C=0,E=A.records.length;C<E;C++){var D=A.records[C];B[C]=D.data}}if(B.length<1){B=null}return{success:A.success,errors:B}}return this.decodeResponse(F)}});Ext.form.Action.Load=function(A,B){Ext.form.Action.Load.superclass.constructor.call(this,A,B);this.reader=this.form.reader};Ext.extend(Ext.form.Action.Load,Ext.form.Action,{type:"load",run:function(){Ext.Ajax.request(Ext.apply(this.createCallback(this.options),{method:this.getMethod(),url:this.getUrl(false),headers:this.options.headers,params:this.getParams()}))},success:function(B){var A=this.processResponse(B);if(A===true||!A.success||!A.data){this.failureType=Ext.form.Action.LOAD_FAILURE;this.form.afterAction(this,false);return}this.form.clearInvalid();this.form.setValues(A.data);this.form.afterAction(this,true)},handleResponse:function(B){if(this.form.reader){var A=this.form.reader.read(B);var C=A.records&&A.records[0]?A.records[0].data:null;return{success:A.success,data:C}}return this.decodeResponse(B)}});Ext.form.Action.DirectLoad=Ext.extend(Ext.form.Action.Load,{constructor:function(B,A){Ext.form.Action.DirectLoad.superclass.constructor.call(this,B,A)},type:"directload",run:function(){var A=this.getParams();A.push(this.success,this);this.form.api.load.apply(window,A)},getParams:function(){var E=[],B={};var F=this.form.baseParams;var C=this.options.params;Ext.apply(B,C,F);var D=this.form.paramOrder;if(D){for(var A=0,G=D.length;A<G;A++){E.push(B[D[A]])}}else{if(this.form.paramsAsHash){E.push(B)}}return E},processResponse:function(A){this.result=A;return A},success:function(B,A){if(A.type==Ext.Direct.exceptions.SERVER){B={}}Ext.form.Action.DirectLoad.superclass.success.call(this,B)}});Ext.form.Action.DirectSubmit=Ext.extend(Ext.form.Action.Submit,{constructor:function(B,A){Ext.form.Action.DirectSubmit.superclass.constructor.call(this,B,A)},type:"directsubmit",run:function(){var A=this.options;if(A.clientValidation===false||this.form.isValid()){this.success.params=this.getParams();this.form.api.submit(this.form.el.dom,this.success,this)}else{if(A.clientValidation!==false){this.failureType=Ext.form.Action.CLIENT_INVALID;this.form.afterAction(this,false)}}},getParams:function(){var A={};var C=this.form.baseParams;var B=this.options.params;Ext.apply(A,B,C);return A},processResponse:function(A){this.result=A;return A},success:function(B,A){if(A.type==Ext.Direct.exceptions.SERVER){B={}}Ext.form.Action.DirectSubmit.superclass.success.call(this,B)}});Ext.form.Action.ACTION_TYPES={"load":Ext.form.Action.Load,"submit":Ext.form.Action.Submit,"directload":Ext.form.Action.DirectLoad,"directsubmit":Ext.form.Action.DirectSubmit};Ext.form.VTypes=function(){var C=/^[a-zA-Z_]+$/,D=/^[a-zA-Z0-9_]+$/,A=/^(\w+)([\-+.\'][\w]+)*@(\w[\-\w]*\.){1,5}([A-Za-z]){2,6}$/,B=/(((^https?)|(^ftp)):\/\/([\-\w]+\.)+\w{2,3}(\/[%\-\w]+(\.\w{2,})?)*(([\w\-\.\?\\\/+@&#;`~=%!]*)(\.\w{2,})?)*\/?)/i;return{"email":function(E){return A.test(E)},"emailText":'This field should be an e-mail address in the format "user@example.com"',"emailMask":/[a-z0-9_\.\-\+\'@]/i,"url":function(E){return B.test(E)},"urlText":'This field should be a URL in the format "http://www.example.com"',"alpha":function(E){return C.test(E)},"alphaText":"This field should only contain letters and _","alphaMask":/[a-z_]/i,"alphanum":function(E){return D.test(E)},"alphanumText":"This field should only contain letters, numbers and _","alphanumMask":/[a-z0-9_]/i}}();Ext.grid.GridPanel=Ext.extend(Ext.Panel,{autoExpandColumn:false,autoExpandMax:1000,autoExpandMin:50,columnLines:false,ddText:"{0} selected row{1}",deferRowRender:true,enableColumnHide:true,enableColumnMove:true,enableDragDrop:false,enableHdMenu:true,loadMask:false,minColumnWidth:25,stripeRows:false,trackMouseOver:true,stateEvents:["columnmove","columnresize","sortchange","groupchange"],view:null,bubbleEvents:[],rendered:false,viewReady:false,initComponent:function(){Ext.grid.GridPanel.superclass.initComponent.call(this);if(this.columnLines){this.cls=(this.cls||"")+" x-grid-with-col-lines"}this.autoScroll=false;this.autoWidth=false;if(Ext.isArray(this.columns)){this.colModel=new Ext.grid.ColumnModel(this.columns);delete this.columns}if(this.ds){this.store=this.ds;delete this.ds}if(this.cm){this.colModel=this.cm;delete this.cm}if(this.sm){this.selModel=this.sm;delete this.sm}this.store=Ext.StoreMgr.lookup(this.store);this.addEvents("click","dblclick","contextmenu","mousedown","mouseup","mouseover","mouseout","keypress","keydown","cellmousedown","rowmousedown","headermousedown","groupmousedown","rowbodymousedown","containermousedown","cellclick","celldblclick","rowclick","rowdblclick","headerclick","headerdblclick","groupclick","groupdblclick","containerclick","containerdblclick","rowbodyclick","rowbodydblclick","rowcontextmenu","cellcontextmenu","headercontextmenu","groupcontextmenu","containercontextmenu","rowbodycontextmenu","bodyscroll","columnresize","columnmove","sortchange","groupchange","reconfigure","viewready")},onRender:function(B,A){Ext.grid.GridPanel.superclass.onRender.apply(this,arguments);var D=this.getGridEl();this.el.addClass("x-grid-panel");this.mon(D,{scope:this,mousedown:this.onMouseDown,click:this.onClick,dblclick:this.onDblClick,contextmenu:this.onContextMenu});this.relayEvents(D,["mousedown","mouseup","mouseover","mouseout","keypress","keydown"]);var C=this.getView();C.init(this);C.render();this.getSelectionModel().init(this)},initEvents:function(){Ext.grid.GridPanel.superclass.initEvents.call(this);if(this.loadMask){this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({store:this.store},this.loadMask))}},initStateEvents:function(){Ext.grid.GridPanel.superclass.initStateEvents.call(this);this.mon(this.colModel,"hiddenchange",this.saveState,this,{delay:100})},applyState:function(E){var C=this.colModel,B=E.columns,I=this.store,A,J,H;if(B){for(var G=0,D=B.length;G<D;G++){A=B[G];J=C.getColumnById(A.id);if(J){H=C.getIndexById(A.id);C.setState(H,{hidden:A.hidden,width:A.width,sortable:A.sortable});if(H!=G){C.moveColumn(H,G)}}}}if(I){A=E.sort;if(A){I[I.remoteSort?"setDefaultSort":"sort"](A.field,A.direction)}A=E.group;if(I.groupBy){if(A){I.groupBy(A)}else{I.clearGrouping()}}}var F=Ext.apply({},E);delete F.columns;delete F.sort;Ext.grid.GridPanel.superclass.applyState.call(this,F)},getState:function(){var C={columns:[]},A=this.store,B,F;for(var D=0,E;(E=this.colModel.config[D]);D++){C.columns[D]={id:E.id,width:E.width};if(E.hidden){C.columns[D].hidden=true}if(E.sortable){C.columns[D].sortable=true}}if(A){B=A.getSortState();if(B){C.sort=B}if(A.getGroupState){F=A.getGroupState();if(F){C.group=F}}}return C},afterRender:function(){Ext.grid.GridPanel.superclass.afterRender.call(this);var A=this.view;this.on("bodyresize",A.layout,A);A.layout(true);if(this.deferRowRender){if(!this.deferRowRenderTask){this.deferRowRenderTask=new Ext.util.DelayedTask(A.afterRender,this.view)}this.deferRowRenderTask.delay(10)}else{A.afterRender()}this.viewReady=true},reconfigure:function(B,A){var C=this.rendered;if(C){if(this.loadMask){this.loadMask.destroy();this.loadMask=new Ext.LoadMask(this.bwrap,Ext.apply({},{store:B},this.initialConfig.loadMask))}}if(this.view){this.view.initData(B,A)}this.store=B;this.colModel=A;if(C){this.view.refresh(true)}this.fireEvent("reconfigure",this,B,A)},onDestroy:function(){if(this.deferRowRenderTask&&this.deferRowRenderTask.cancel){this.deferRowRenderTask.cancel()}if(this.rendered){Ext.destroy(this.view,this.loadMask)}else{if(this.store&&this.store.autoDestroy){this.store.destroy()}}Ext.destroy(this.colModel,this.selModel);this.store=this.selModel=this.colModel=this.view=this.loadMask=null;Ext.grid.GridPanel.superclass.onDestroy.call(this)},processEvent:function(B,A){this.view.processEvent(B,A)},onClick:function(A){this.processEvent("click",A)},onMouseDown:function(A){this.processEvent("mousedown",A)},onContextMenu:function(A,B){this.processEvent("contextmenu",A)},onDblClick:function(A){this.processEvent("dblclick",A)},walkCells:function(G,J,E,H,C){var D=this.colModel,F=D.getColumnCount(),A=this.store,I=A.getCount(),B=true;if(E<0){if(J<0){G--;B=false}while(G>=0){if(!B){J=F-1}B=false;while(J>=0){if(H.call(C||this,G,J,D)===true){return[G,J]}J--}G--}}else{if(J>=F){G++;B=false}while(G<I){if(!B){J=0}B=false;while(J<F){if(H.call(C||this,G,J,D)===true){return[G,J]}J++}G++}}return null},getGridEl:function(){return this.body},stopEditing:Ext.emptyFn,getSelectionModel:function(){if(!this.selModel){this.selModel=new Ext.grid.RowSelectionModel(this.disableSelection?{selectRow:Ext.emptyFn}:null)}return this.selModel},getStore:function(){return this.store},getColumnModel:function(){return this.colModel},getView:function(){if(!this.view){this.view=new Ext.grid.GridView(this.viewConfig)}return this.view},getDragDropText:function(){var A=this.selModel.getCount();return String.format(this.ddText,A,A==1?"":"s")}});Ext.reg("grid",Ext.grid.GridPanel);Ext.grid.PivotGrid=Ext.extend(Ext.grid.GridPanel,{aggregator:"sum",renderer:undefined,initComponent:function(){Ext.grid.PivotGrid.superclass.initComponent.apply(this,arguments);this.initAxes();this.enableColumnResize=false;this.viewConfig=Ext.apply(this.viewConfig||{},{forceFit:true});this.colModel=new Ext.grid.ColumnModel({})},getAggregator:function(){if(typeof this.aggregator=="string"){return Ext.grid.PivotAggregatorMgr.types[this.aggregator]}else{return this.aggregator}},setAggregator:function(A){this.aggregator=A},setMeasure:function(A){this.measure=A},setLeftAxis:function(B,A){this.leftAxis=B;if(A){this.view.refresh()}},setTopAxis:function(B,A){this.topAxis=B;if(A){this.view.refresh()}},initAxes:function(){var A=Ext.grid.PivotAxis;if(!(this.leftAxis instanceof A)){this.setLeftAxis(new A({orientation:"vertical",dimensions:this.leftAxis||[],store:this.store}))}if(!(this.topAxis instanceof A)){this.setTopAxis(new A({orientation:"horizontal",dimensions:this.topAxis||[],store:this.store}))}},extractData:function(){var C=this.store.data.items,K=C.length,L=[],J,H,F,G;if(K==0){return[]}var D=this.leftAxis.getTuples(),A=D.length,E=this.topAxis.getTuples(),O=E.length,B=this.getAggregator();for(H=0;H<K;H++){J=C[H];for(F=0;F<A;F++){L[F]=L[F]||[];if(D[F].matcher(J)===true){for(G=0;G<O;G++){L[F][G]=L[F][G]||[];if(E[G].matcher(J)){L[F][G].push(J)}}}}}var I=L.length,M,N;for(H=0;H<I;H++){N=L[H];M=N.length;for(F=0;F<M;F++){L[H][F]=B(L[H][F],this.measure)}}return L},getView:function(){if(!this.view){this.view=new Ext.grid.PivotGridView(this.viewConfig)}return this.view}});Ext.reg("pivotgrid",Ext.grid.PivotGrid);Ext.grid.PivotAggregatorMgr=new Ext.AbstractManager();Ext.grid.PivotAggregatorMgr.registerType("sum",function(B,E){var A=B.length,C=0,D;for(D=0;D<A;D++){C+=B[D].get(E)}return C});Ext.grid.PivotAggregatorMgr.registerType("avg",function(B,E){var A=B.length,C=0,D;for(D=0;D<A;D++){C+=B[D].get(E)}return(C/A)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("min",function(B,E){var C=[],A=B.length,D;for(D=0;D<A;D++){C.push(B[D].get(E))}return Math.min.apply(this,C)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("max",function(B,E){var C=[],A=B.length,D;for(D=0;D<A;D++){C.push(B[D].get(E))}return Math.max.apply(this,C)||"n/a"});Ext.grid.PivotAggregatorMgr.registerType("count",function(A,B){return A.length});Ext.grid.GridView=Ext.extend(Ext.util.Observable,{deferEmptyText:true,scrollOffset:undefined,autoFill:false,forceFit:false,sortClasses:["sort-asc","sort-desc"],sortAscText:"Sort Ascending",sortDescText:"Sort Descending",columnsText:"Columns",selectedRowClass:"x-grid3-row-selected",borderWidth:2,tdClass:"x-grid3-cell",hdCls:"x-grid3-hd",markDirty:true,cellSelectorDepth:4,rowSelectorDepth:10,rowBodySelectorDepth:10,cellSelector:"td.x-grid3-cell",rowSelector:"div.x-grid3-row",rowBodySelector:"div.x-grid3-row-body",firstRowCls:"x-grid3-row-first",lastRowCls:"x-grid3-row-last",rowClsRe:/(?:^|\s+)x-grid3-row-(first|last|alt)(?:\s+|$)/g,headerMenuOpenCls:"x-grid3-hd-menu-open",rowOverCls:"x-grid3-row-over",constructor:function(A){Ext.apply(this,A);this.addEvents("beforerowremoved","beforerowsinserted","beforerefresh","rowremoved","rowsinserted","rowupdated","refresh");Ext.grid.GridView.superclass.constructor.call(this)},masterTpl:new Ext.Template('<div class="x-grid3" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}">{header}</div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),headerTpl:new Ext.Template('<table border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<thead>",'<tr class="x-grid3-hd-row">{cells}</tr>',"</thead>","</table>"),bodyTpl:new Ext.Template("{rows}"),cellTpl:new Ext.Template('<td class="x-grid3-col x-grid3-cell x-grid3-td-{id} {css}" style="{style}" tabIndex="0" {cellAttr}>','<div class="x-grid3-cell-inner x-grid3-col-{id}" unselectable="on" {attr}>{value}</div>',"</td>"),initTemplates:function(){var D=this.templates||{},F,C,A=new Ext.Template('<td class="x-grid3-hd x-grid3-cell x-grid3-td-{id} {css}" style="{style}">','<div {tooltip} {attr} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}",'<img alt="" class="x-grid3-sort-icon" src="',Ext.BLANK_IMAGE_URL,'" />',"</div>","</td>"),B=['<tr class="x-grid3-row-body-tr" style="{bodyStyle}">','<td colspan="{cols}" class="x-grid3-body-cell" tabIndex="0" hidefocus="on">','<div class="x-grid3-row-body">{body}</div>',"</td>","</tr>"].join(""),E=['<table class="x-grid3-row-table" border="0" cellspacing="0" cellpadding="0" style="{tstyle}">',"<tbody>","<tr>{cells}</tr>",this.enableRowBody?B:"","</tbody>","</table>"].join("");Ext.applyIf(D,{hcell:A,cell:this.cellTpl,body:this.bodyTpl,header:this.headerTpl,master:this.masterTpl,row:new Ext.Template('<div class="x-grid3-row {alt}" style="{tstyle}">'+E+"</div>"),rowInner:new Ext.Template(E)});for(C in D){F=D[C];if(F&&Ext.isFunction(F.compile)&&!F.compiled){F.disableFormats=true;F.compile()}}this.templates=D;this.colRe=new RegExp("x-grid3-td-([^\\s]+)","")},fly:function(A){if(!this._flyweight){this._flyweight=new Ext.Element.Flyweight(document.body)}this._flyweight.dom=A;return this._flyweight},getEditorParent:function(){return this.scroller.dom},initElements:function(){var D=Ext.Element,A=Ext.get(this.grid.getGridEl().dom.firstChild),E=new D(A.child("div.x-grid3-viewport")),B=new D(E.child("div.x-grid3-header")),C=new D(E.child("div.x-grid3-scroller"));if(this.grid.hideHeaders){B.setDisplayed(false)}if(this.forceFit){C.setStyle("overflow-x","hidden")}Ext.apply(this,{el:A,mainWrap:E,scroller:C,mainHd:B,innerHd:B.child("div.x-grid3-header-inner").dom,mainBody:new D(D.fly(C).child("div.x-grid3-body")),focusEl:new D(D.fly(C).child("a")),resizeMarker:new D(A.child("div.x-grid3-resize-marker")),resizeProxy:new D(A.child("div.x-grid3-resize-proxy"))});this.focusEl.swallowEvent("click",true)},getRows:function(){return this.hasRows()?this.mainBody.dom.childNodes:[]},findCell:function(A){if(!A){return false}return this.fly(A).findParent(this.cellSelector,this.cellSelectorDepth)},findCellIndex:function(A,B){var C=this.findCell(A),D;if(C){D=this.fly(C).hasClass(B);if(!B||D){return this.getCellIndex(C)}}return false},getCellIndex:function(A){if(A){var B=A.className.match(this.colRe);if(B&&B[1]){return this.cm.getIndexById(B[1])}}return false},findHeaderCell:function(A){var B=this.findCell(A);return B&&this.fly(B).hasClass(this.hdCls)?B:null},findHeaderIndex:function(A){return this.findCellIndex(A,this.hdCls)},findRow:function(A){if(!A){return false}return this.fly(A).findParent(this.rowSelector,this.rowSelectorDepth)},findRowIndex:function(A){var B=this.findRow(A);return B?B.rowIndex:false},findRowBody:function(A){if(!A){return false}return this.fly(A).findParent(this.rowBodySelector,this.rowBodySelectorDepth)},getRow:function(A){return this.getRows()[A]},getCell:function(B,A){return Ext.fly(this.getRow(B)).query(this.cellSelector)[A]},getHeaderCell:function(A){return this.mainHd.dom.getElementsByTagName("td")[A]},addRowClass:function(A,C){var B=this.getRow(A);if(B){this.fly(B).addClass(C)}},removeRowClass:function(C,B){var A=this.getRow(C);if(A){this.fly(A).removeClass(B)}},removeRow:function(A){Ext.removeNode(this.getRow(A));this.syncFocusEl(A)},removeRows:function(C,D){var B=this.mainBody.dom,A;for(A=C;A<=D;A++){Ext.removeNode(B.childNodes[C])}this.syncFocusEl(C)},getScrollState:function(){var A=this.scroller.dom;return{left:A.scrollLeft,top:A.scrollTop}},restoreScroll:function(B){var A=this.scroller.dom;A.scrollLeft=B.left;A.scrollTop=B.top},scrollToTop:function(){var A=this.scroller.dom;A.scrollTop=0;A.scrollLeft=0},syncScroll:function(){this.syncHeaderScroll();var A=this.scroller.dom;this.grid.fireEvent("bodyscroll",A.scrollLeft,A.scrollTop)},syncHeaderScroll:function(){var B=this.innerHd,A=this.scroller.dom.scrollLeft;B.scrollLeft=A;B.scrollLeft=A},updateSortIcon:function(B,A){var E=this.sortClasses,C=E[A=="DESC"?1:0],D=this.mainHd.select("td").removeClass(E);D.item(B).addClass(C)},updateAllColumnWidths:function(){var F=this.getTotalWidth(),I=this.cm.getColumnCount(),H=this.getRows(),J=H.length,A=[],E,C,B,D,G;for(D=0;D<I;D++){A[D]=this.getColumnWidth(D);this.getHeaderCell(D).style.width=A[D]}this.updateHeaderWidth();for(D=0;D<J;D++){E=H[D];E.style.width=F;C=E.firstChild;if(C){C.style.width=F;B=C.rows[0];for(G=0;G<I;G++){B.childNodes[G].style.width=A[G]}}}this.onAllColumnWidthsUpdated(A,F)},updateColumnWidth:function(C,I){var D=this.getColumnWidth(C),H=this.getTotalWidth(),A=this.getHeaderCell(C),J=this.getRows(),E=J.length,G,F,B;this.updateHeaderWidth();A.style.width=D;for(F=0;F<E;F++){G=J[F];B=G.firstChild;G.style.width=H;if(B){B.style.width=H;B.rows[0].childNodes[C].style.width=D}}this.onColumnWidthUpdated(C,D,H)},updateColumnHidden:function(C,B){var H=this.getTotalWidth(),I=B?"none":"",A=this.getHeaderCell(C),J=this.getRows(),D=J.length,G,E,F;this.updateHeaderWidth();A.style.display=I;for(F=0;F<D;F++){G=J[F];G.style.width=H;E=G.firstChild;if(E){E.style.width=H;E.rows[0].childNodes[C].style.display=I}}this.onColumnHiddenUpdated(C,B,H);delete this.lastViewWidth;this.layout()},doRender:function(M,F,I,T,P,B){var E=this.templates,K=E.cell,O=E.row,S=P-1,L="width:"+this.getTotalWidth()+";",R=[],Q=[],G={tstyle:L},V={},A=F.length,J,N,H,U,D,C;for(D=0;D<A;D++){H=F[D];Q=[];C=D+T;for(U=0;U<P;U++){N=M[U];V.id=N.id;V.css=U===0?"x-grid3-cell-first ":(U==S?"x-grid3-cell-last ":"");V.attr=V.cellAttr="";V.style=N.style;V.value=N.renderer.call(N.scope,H.data[N.name],V,H,C,U,I);if(Ext.isEmpty(V.value)){V.value="&#160;"}if(this.markDirty&&H.dirty&&typeof H.modified[N.name]!="undefined"){V.css+=" x-grid3-dirty-cell"}Q[Q.length]=K.apply(V)}J=[];if(B&&((C+1)%2===0)){J[0]="x-grid3-row-alt"}if(H.dirty){J[1]=" x-grid3-dirty-row"}G.cols=P;if(this.getRowClass){J[2]=this.getRowClass(H,C,G,I)}G.alt=J.join(" ");G.cells=Q.join("");R[R.length]=O.apply(G)}return R.join("")},processRows:function(F,D){if(!this.ds||this.ds.getCount()<1){return}var E=this.getRows(),A=E.length,C,B;D=D||!this.grid.stripeRows;F=F||0;for(B=0;B<A;B++){C=E[B];if(C){C.rowIndex=B;if(!D){C.className=C.className.replace(this.rowClsRe," ");if((B+1)%2===0){C.className+=" x-grid3-row-alt"}}}}if(F===0){Ext.fly(E[0]).addClass(this.firstRowCls)}Ext.fly(E[A-1]).addClass(this.lastRowCls)},afterRender:function(){if(!this.ds||!this.cm){return}this.mainBody.dom.innerHTML=this.renderBody()||"&#160;";this.processRows(0,true);if(this.deferEmptyText!==true){this.applyEmptyText()}this.grid.fireEvent("viewready",this.grid)},afterRenderUI:function(){var A=this.grid;this.initElements();Ext.fly(this.innerHd).on("click",this.handleHdDown,this);this.mainHd.on({scope:this,mouseover:this.handleHdOver,mouseout:this.handleHdOut,mousemove:this.handleHdMove});this.scroller.on("scroll",this.syncScroll,this);if(A.enableColumnResize!==false){this.splitZone=new Ext.grid.GridView.SplitDragZone(A,this.mainHd.dom)}if(A.enableColumnMove){this.columnDrag=new Ext.grid.GridView.ColumnDragZone(A,this.innerHd);this.columnDrop=new Ext.grid.HeaderDropZone(A,this.mainHd.dom)}if(A.enableHdMenu!==false){this.hmenu=new Ext.menu.Menu({id:A.id+"-hctx"});this.hmenu.add({itemId:"asc",text:this.sortAscText,cls:"xg-hmenu-sort-asc"},{itemId:"desc",text:this.sortDescText,cls:"xg-hmenu-sort-desc"});if(A.enableColumnHide!==false){this.colMenu=new Ext.menu.Menu({id:A.id+"-hcols-menu"});this.colMenu.on({scope:this,beforeshow:this.beforeColMenuShow,itemclick:this.handleHdMenuClick});this.hmenu.add("-",{itemId:"columns",hideOnClick:false,text:this.columnsText,menu:this.colMenu,iconCls:"x-cols-icon"})}this.hmenu.on("itemclick",this.handleHdMenuClick,this)}if(A.trackMouseOver){this.mainBody.on({scope:this,mouseover:this.onRowOver,mouseout:this.onRowOut})}if(A.enableDragDrop||A.enableDrag){this.dragZone=new Ext.grid.GridDragZone(A,{ddGroup:A.ddGroup||"GridDD"})}this.updateHeaderSortState()},renderUI:function(){var A=this.templates;return A.master.apply({body:A.body.apply({rows:"&#160;"}),header:this.renderHeaders(),ostyle:"width:"+this.getOffsetWidth()+";",bstyle:"width:"+this.getTotalWidth()+";"})},processEvent:function(C,A){var F=A.getTarget(),G=this.grid,D=this.findHeaderIndex(F),E,I,B,H;G.fireEvent(C,A);if(D!==false){G.fireEvent("header"+C,G,D,A)}else{E=this.findRowIndex(F);if(E!==false){I=this.findCellIndex(F);if(I!==false){B=G.colModel.getColumnAt(I);if(G.fireEvent("cell"+C,G,E,I,A)!==false){if(!B||(B.processEvent&&(B.processEvent(C,A,G,E,I)!==false))){G.fireEvent("row"+C,G,E,A)}}}else{if(G.fireEvent("row"+C,G,E,A)!==false){(H=this.findRowBody(F))&&G.fireEvent("rowbody"+C,G,E,A)}}}else{G.fireEvent("container"+C,G,A)}}},layout:function(H){if(!this.mainBody){return}var J=this.grid,F=J.getGridEl(),E=F.getSize(true),A=E.width,C=E.height,D=this.scroller,G,I,B;if(A<20||C<20){return}if(J.autoHeight){G=D.dom.style;G.overflow="visible";if(Ext.isWebKit){G.position="static"}}else{this.el.setSize(A,C);I=this.mainHd.getHeight();B=C-I;D.setSize(A,B);if(this.innerHd){this.innerHd.style.width=(A)+"px"}}if(this.forceFit||(H===true&&this.autoFill)){if(this.lastViewWidth!=A){this.fitColumns(false,false);this.lastViewWidth=A}}else{this.autoExpand();this.syncHeaderScroll()}this.onLayout(A,B)},onLayout:function(A,B){},onColumnWidthUpdated:function(A,C,B){},onAllColumnWidthsUpdated:function(A,B){},onColumnHiddenUpdated:function(A,C,B){},updateColumnText:function(A,B){},afterMove:function(A){},init:function(A){this.grid=A;this.initTemplates();this.initData(A.store,A.colModel);this.initUI(A)},getColumnId:function(A){return this.cm.getColumnId(A)},getOffsetWidth:function(){return(this.cm.getTotalWidth()+this.getScrollOffset())+"px"},getScrollOffset:function(){return Ext.num(this.scrollOffset,Ext.getScrollBarWidth())},renderHeaders:function(){var B=this.cm,A=this.templates,F=A.hcell,G={},I=B.getColumnCount(),E=I-1,H=[],D,C;for(D=0;D<I;D++){if(D==0){C="x-grid3-cell-first "}else{C=D==E?"x-grid3-cell-last ":""}G={id:B.getColumnId(D),value:B.getColumnHeader(D)||"",style:this.getColumnStyle(D,true),css:C,tooltip:this.getColumnTooltip(D)};if(B.config[D].align=="right"){G.istyle="padding-right: 16px;"}else{delete G.istyle}H[D]=F.apply(G)}return A.header.apply({cells:H.join(""),tstyle:String.format("width: {0};",this.getTotalWidth())})},getColumnTooltip:function(A){var B=this.cm.getColumnTooltip(A);if(B){if(Ext.QuickTips.isEnabled()){return'ext:qtip="'+B+'"'}else{return'title="'+B+'"'}}return""},beforeUpdate:function(){this.grid.stopEditing(true)},updateHeaders:function(){this.innerHd.firstChild.innerHTML=this.renderHeaders();this.updateHeaderWidth(false)},updateHeaderWidth:function(C){var B=this.innerHd.firstChild,A=this.getTotalWidth();B.style.width=this.getOffsetWidth();B.firstChild.style.width=A;if(C!==false){this.mainBody.dom.style.width=A}},focusRow:function(A){this.focusCell(A,0,false)},focusCell:function(B,A,C){this.syncFocusEl(this.ensureVisible(B,A,C));var D=this.focusEl;if(Ext.isGecko){D.focus()}else{D.focus.defer(1,D)}},resolveCell:function(D,B,E){if(!Ext.isNumber(D)){D=D.rowIndex}if(!this.ds){return null}if(D<0||D>=this.ds.getCount()){return null}B=(B!==undefined?B:0);var G=this.getRow(D),A=this.cm,C=A.getColumnCount(),F;if(!(E===false&&B===0)){while(B<C&&A.isHidden(B)){B++}F=this.getCell(D,B)}return{row:G,cell:F}},getResolvedXY:function(C){if(!C){return null}var B=C.cell,A=C.row;if(B){return Ext.fly(B).getXY()}else{return[this.el.getX(),Ext.fly(A).getY()]}},syncFocusEl:function(C,B,D){var A=C;if(!Ext.isArray(A)){C=Math.min(C,Math.max(0,this.getRows().length-1));if(isNaN(C)){return}A=this.getResolvedXY(this.resolveCell(C,B,D))}this.focusEl.setXY(A||this.scroller.getXY())},ensureVisible:function(M,P,D){var K=this.resolveCell(M,P,D);if(!K||!K.row){return null}var L=K.row,O=K.cell,H=this.scroller.dom,B=L,E=0,A=this.el.dom;while(B&&B!=A){E+=B.offsetTop;B=B.offsetParent}E-=this.mainHd.dom.offsetHeight;A=parseInt(H.scrollTop,10);var N=E+L.offsetHeight,Q=H.clientHeight,J=A+Q;if(E<A){H.scrollTop=E}else{if(N>J){H.scrollTop=N-Q}}if(D!==false){var G=parseInt(O.offsetLeft,10),C=G+O.offsetWidth,F=parseInt(H.scrollLeft,10),I=F+H.clientWidth;if(G<F){H.scrollLeft=G}else{if(C>I){H.scrollLeft=C-H.clientWidth}}}return this.getResolvedXY(K)},insertRows:function(C,A,D,G){var F=C.getCount()-1;if(!G&&A===0&&D>=F){this.fireEvent("beforerowsinserted",this,A,D);this.refresh();this.fireEvent("rowsinserted",this,A,D)}else{if(!G){this.fireEvent("beforerowsinserted",this,A,D)}var E=this.renderRows(A,D),H=this.getRow(A);if(H){if(A===0){Ext.fly(this.getRow(0)).removeClass(this.firstRowCls)}Ext.DomHelper.insertHtml("beforeBegin",H,E)}else{var B=this.getRow(F-1);if(B){Ext.fly(B).removeClass(this.lastRowCls)}Ext.DomHelper.insertHtml("beforeEnd",this.mainBody.dom,E)}if(!G){this.processRows(A);this.fireEvent("rowsinserted",this,A,D)}else{if(A===0||A>=F){Ext.fly(this.getRow(A)).addClass(A===0?this.firstRowCls:this.lastRowCls)}}}this.syncFocusEl(A)},deleteRows:function(A,B,C){if(A.getRowCount()<1){this.refresh()}else{this.fireEvent("beforerowsdeleted",this,B,C);this.removeRows(B,C);this.processRows(B);this.fireEvent("rowsdeleted",this,B,C)}},getColumnStyle:function(D,B){var A=this.cm,F=A.config,C=B?"":F[D].css||"",E=F[D].align;C+=String.format("width: {0};",this.getColumnWidth(D));if(A.isHidden(D)){C+="display: none; "}if(E){C+=String.format("text-align: {0};",E)}return C},getColumnWidth:function(C){var A=this.cm.getColumnWidth(C),B=this.borderWidth;if(Ext.isNumber(A)){if(Ext.isBorderBox||(Ext.isWebKit&&!Ext.isSafari2)){return A+"px"}else{return Math.max(A-B,0)+"px"}}else{return A}},getTotalWidth:function(){return this.cm.getTotalWidth()+"px"},fitColumns:function(R,O,F){var A=this.grid,J=this.cm,Q=J.getTotalWidth(false),P=this.getGridInnerWidth(),H=P-Q,I=[],N=0,L=0,D,B,E;if(P<20||H===0){return false}var M=J.getColumnCount(true),C=J.getColumnCount(false),S=M-(Ext.isNumber(F)?1:0);if(S===0){S=1;F=undefined}for(E=0;E<C;E++){if(!J.isFixed(E)&&E!==F){D=J.getColumnWidth(E);I.push(E,D);if(!J.isHidden(E)){N=E;L+=D}}}B=(P-J.getTotalWidth())/L;while(I.length){D=I.pop();E=I.pop();J.setColumnWidth(E,Math.max(A.minColumnWidth,Math.floor(D+D*B)),true)}Q=J.getTotalWidth(false);if(Q>P){var G=(S==M)?N:F,K=Math.max(1,J.getColumnWidth(G)-(Q-P));J.setColumnWidth(G,K,true)}if(R!==true){this.updateAllColumnWidths()}return true},autoExpand:function(D){var I=this.grid,C=this.cm,A=this.getGridInnerWidth(),E=C.getTotalWidth(false),F=I.autoExpandColumn;if(!this.userResized&&F){if(A!=E){var G=C.getIndexById(F),J=C.getColumnWidth(G),B=A-E+J,H=Math.min(Math.max(B,I.autoExpandMin),I.autoExpandMax);if(J!=H){C.setColumnWidth(G,H,true);if(D!==true){this.updateColumnWidth(G,H)}}}}},getGridInnerWidth:function(){return this.grid.getGridEl().getWidth(true)-this.getScrollOffset()},getColumnData:function(){var F=[],A=this.cm,C=A.getColumnCount(),E=this.ds.fields,B,D;for(B=0;B<C;B++){D=A.getDataIndex(B);F[B]={name:Ext.isDefined(D)?D:(E.get(B)?E.get(B).name:undefined),renderer:A.getRenderer(B),scope:A.getRendererScope(B),id:A.getColumnId(B),style:this.getColumnStyle(B)}}return F},renderRows:function(E,D){var H=this.grid,F=H.store,A=H.stripeRows,C=H.colModel,G=C.getColumnCount(),I=F.getCount(),B;if(I<1){return""}E=E||0;D=Ext.isDefined(D)?D:I-1;B=F.getRange(E,D);return this.doRender(this.getColumnData(),B,F,E,G,A)},renderBody:function(){var A=this.renderRows()||"&#160;";return this.templates.body.apply({rows:A})},refreshRow:function(M){var L=this.ds,N=this.cm.getColumnCount(),G=this.getColumnData(),K=N-1,H=["x-grid3-row"],B={tstyle:String.format("width: {0};",this.getTotalWidth())},A=[],E=this.templates.cell,C,O,D,I,F,J;if(Ext.isNumber(M)){C=M;M=L.getAt(C)}else{C=L.indexOf(M)}if(!M||C<0){return}for(J=0;J<N;J++){D=G[J];if(J==0){F="x-grid3-cell-first"}else{F=(J==K)?"x-grid3-cell-last ":""}I={id:D.id,style:D.style,css:F,attr:"",cellAttr:""};I.value=D.renderer.call(D.scope,M.data[D.name],I,M,C,J,L);if(Ext.isEmpty(I.value)){I.value="&#160;"}if(this.markDirty&&M.dirty&&typeof M.modified[D.name]!="undefined"){I.css+=" x-grid3-dirty-cell"}A[J]=E.apply(I)}O=this.getRow(C);O.className="";if(this.grid.stripeRows&&((C+1)%2===0)){H.push("x-grid3-row-alt")}if(this.getRowClass){B.cols=N;H.push(this.getRowClass(M,C,B,L))}this.fly(O).addClass(H).setStyle(B.tstyle);B.cells=A.join("");O.innerHTML=this.templates.rowInner.apply(B);this.fireEvent("rowupdated",this,C,M)},refresh:function(B){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var A=this.renderBody();this.mainBody.update(A).setWidth(this.getTotalWidth());if(B===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},applyEmptyText:function(){if(this.emptyText&&!this.hasRows()){this.mainBody.update('<div class="x-grid-empty">'+this.emptyText+"</div>")}},updateHeaderSortState:function(){var C=this.ds.getSortState();if(!C){return}if(!this.sortState||(this.sortState.field!=C.field||this.sortState.direction!=C.direction)){this.grid.fireEvent("sortchange",this.grid,C)}this.sortState=C;var A=this.cm.findColumnIndex(C.field);if(A!=-1){var B=C.direction;this.updateSortIcon(A,B)}},clearHeaderSortState:function(){if(!this.sortState){return}this.grid.fireEvent("sortchange",this.grid,null);this.mainHd.select("td").removeClass(this.sortClasses);delete this.sortState},destroy:function(){var G=this,I=G.grid,H=I.getGridEl(),A=G.dragZone,D=G.splitZone,B=G.columnDrag,E=G.columnDrop,F=G.scrollToTopTask,C,J;if(F&&F.cancel){F.cancel()}Ext.destroyMembers(G,"colMenu","hmenu");G.initData(null,null);G.purgeListeners();Ext.fly(G.innerHd).un("click",G.handleHdDown,G);if(I.enableColumnMove){C=B.dragData;J=B.proxy;Ext.destroy(B.el,J.ghost,J.el,E.el,E.proxyTop,E.proxyBottom,C.ddel,C.header);if(J.anim){Ext.destroy(J.anim)}delete J.ghost;delete C.ddel;delete C.header;B.destroy();delete Ext.dd.DDM.locationCache[B.id];delete B._domRef;delete E.proxyTop;delete E.proxyBottom;E.destroy();delete Ext.dd.DDM.locationCache["gridHeader"+H.id];delete E._domRef;delete Ext.dd.DDM.ids[E.ddGroup]}if(D){D.destroy();delete D._domRef;delete Ext.dd.DDM.ids["gridSplitters"+H.id]}Ext.fly(G.innerHd).removeAllListeners();Ext.removeNode(G.innerHd);delete G.innerHd;Ext.destroy(G.el,G.mainWrap,G.mainHd,G.scroller,G.mainBody,G.focusEl,G.resizeMarker,G.resizeProxy,G.activeHdBtn,G._flyweight,A,D);delete I.container;if(A){A.destroy()}Ext.dd.DDM.currentTarget=null;delete Ext.dd.DDM.locationCache[H.id];Ext.EventManager.removeResizeListener(G.onWindowResize,G)},onDenyColumnHide:function(){},render:function(){if(this.autoFill){var A=this.grid.ownerCt;if(A&&A.getLayout()){A.on("afterlayout",function(){this.fitColumns(true,true);this.updateHeaders();this.updateHeaderSortState()},this,{single:true})}}else{if(this.forceFit){this.fitColumns(true,false)}else{if(this.grid.autoExpandColumn){this.autoExpand(true)}}}this.grid.getGridEl().dom.innerHTML=this.renderUI();this.afterRenderUI()},initData:function(E,B){var C=this;if(C.ds){var D=C.ds;D.un("add",C.onAdd,C);D.un("load",C.onLoad,C);D.un("clear",C.onClear,C);D.un("remove",C.onRemove,C);D.un("update",C.onUpdate,C);D.un("datachanged",C.onDataChange,C);if(D!==E&&D.autoDestroy){D.destroy()}}if(E){E.on({scope:C,load:C.onLoad,add:C.onAdd,remove:C.onRemove,update:C.onUpdate,clear:C.onClear,datachanged:C.onDataChange})}if(C.cm){var A=C.cm;A.un("configchange",C.onColConfigChange,C);A.un("widthchange",C.onColWidthChange,C);A.un("headerchange",C.onHeaderChange,C);A.un("hiddenchange",C.onHiddenChange,C);A.un("columnmoved",C.onColumnMove,C)}if(B){delete C.lastViewWidth;B.on({scope:C,configchange:C.onColConfigChange,widthchange:C.onColWidthChange,headerchange:C.onHeaderChange,hiddenchange:C.onHiddenChange,columnmoved:C.onColumnMove})}C.ds=E;C.cm=B},onDataChange:function(){this.refresh(true);this.updateHeaderSortState();this.syncFocusEl(0)},onClear:function(){this.refresh();this.syncFocusEl(0)},onUpdate:function(A,B){this.refreshRow(B)},onAdd:function(A,B,C){this.insertRows(A,C,C+(B.length-1))},onRemove:function(A,B,C,D){if(D!==true){this.fireEvent("beforerowremoved",this,C,B)}this.removeRow(C);if(D!==true){this.processRows(C);this.applyEmptyText();this.fireEvent("rowremoved",this,C,B)}},onLoad:function(){if(Ext.isGecko){if(!this.scrollToTopTask){this.scrollToTopTask=new Ext.util.DelayedTask(this.scrollToTop,this)}this.scrollToTopTask.delay(1)}else{this.scrollToTop()}},onColWidthChange:function(C,A,B){this.updateColumnWidth(A,B)},onHeaderChange:function(C,A,B){this.updateHeaders()},onHiddenChange:function(B,A,C){this.updateColumnHidden(A,C)},onColumnMove:function(C,A,B){this.indexMap=null;this.refresh(true);this.restoreScroll(this.getScrollState());this.afterMove(B);this.grid.fireEvent("columnmove",A,B)},onColConfigChange:function(){delete this.lastViewWidth;this.indexMap=null;this.refresh(true)},initUI:function(A){A.on("headerclick",this.onHeaderClick,this)},initEvents:Ext.emptyFn,onHeaderClick:function(A,B){if(this.headersDisabled||!this.cm.isSortable(B)){return}A.stopEditing(true);A.store.sort(this.cm.getDataIndex(B))},onRowOver:function(A,C){var B=this.findRowIndex(C);if(B!==false){this.addRowClass(B,this.rowOverCls)}},onRowOut:function(A,C){var B=this.findRowIndex(C);if(B!==false&&!A.within(this.getRow(B),true)){this.removeRowClass(B,this.rowOverCls)}},onRowSelect:function(A){this.addRowClass(A,this.selectedRowClass)},onRowDeselect:function(A){this.removeRowClass(A,this.selectedRowClass)},onCellSelect:function(B,A){var C=this.getCell(B,A);if(C){this.fly(C).addClass("x-grid3-cell-selected")}},onCellDeselect:function(B,A){var C=this.getCell(B,A);if(C){this.fly(C).removeClass("x-grid3-cell-selected")}},handleWheel:function(A){A.stopPropagation()},onColumnSplitterMoved:function(B,A){this.userResized=true;this.grid.colModel.setColumnWidth(B,A,true);if(this.forceFit){this.fitColumns(true,false,B);this.updateAllColumnWidths()}else{this.updateColumnWidth(B,A);this.syncHeaderScroll()}this.grid.fireEvent("columnresize",B,A)},beforeColMenuShow:function(){var A=this.cm,C=A.getColumnCount(),D=this.colMenu,B;D.removeAll();for(B=0;B<C;B++){if(A.config[B].hideable!==false){D.add(new Ext.menu.CheckItem({text:A.getColumnHeader(B),itemId:"col-"+A.getColumnId(B),checked:!A.isHidden(B),disabled:A.config[B].hideable===false,hideOnClick:false}))}}},handleHdMenuClick:function(C){var A=this.ds,B=this.cm.getDataIndex(this.hdCtxIndex);switch(C.getItemId()){case"asc":A.sort(B,"ASC");break;case"desc":A.sort(B,"DESC");break;default:this.handleHdMenuClickDefault(C)}return true},handleHdMenuClickDefault:function(C){var A=this.cm,B=C.getItemId(),D=A.getIndexById(B.substr(4));if(D!=-1){if(C.checked&&A.getColumnsBy(this.isHideableColumn,this).length<=1){this.onDenyColumnHide();return}A.setHidden(D,C.checked)}},handleHdDown:function(A,G){if(Ext.fly(G).hasClass("x-grid3-hd-btn")){A.stopEvent();var C=this.cm,I=this.findHeaderCell(G),B=this.getCellIndex(I),H=C.isSortable(B),F=this.hmenu,E=F.items,D=this.headerMenuOpenCls;this.hdCtxIndex=B;Ext.fly(I).addClass(D);E.get("asc").setDisabled(!H);E.get("desc").setDisabled(!H);F.on("hide",function(){Ext.fly(I).removeClass(D)},this,{single:true});F.show(G,"tl-bl?")}},handleHdMove:function(A){var M=this.findHeaderCell(this.activeHdRef);if(M&&!this.headersDisabled){var C=this.splitHandleWidth||5,G=this.activeHdRegion,J=M.style,B=this.cm,E="",F=A.getPageX();if(this.grid.enableColumnResize!==false){var L=this.activeHdIndex,H=this.getPreviousVisible(L),N=B.isResizable(L),D=H&&B.isResizable(H),K=F-G.left<=C,I=G.right-F<=(!this.activeHdBtn?C:2);if(K&&D){E=Ext.isAir?"move":Ext.isWebKit?"e-resize":"col-resize"}else{if(I&&N){E=Ext.isAir?"move":Ext.isWebKit?"w-resize":"col-resize"}}}J.cursor=E}},getPreviousVisible:function(A){while(A>0){if(!this.cm.isHidden(A-1)){return A}A--}return undefined},handleHdOver:function(A,C){var B=this.findHeaderCell(C);if(B&&!this.headersDisabled){var D=this.fly(B);this.activeHdRef=C;this.activeHdIndex=this.getCellIndex(B);this.activeHdRegion=D.getRegion();if(!this.isMenuDisabled(this.activeHdIndex,D)){D.addClass("x-grid3-hd-over");this.activeHdBtn=D.child(".x-grid3-hd-btn");if(this.activeHdBtn){this.activeHdBtn.dom.style.height=(B.firstChild.offsetHeight-1)+"px"}}}},handleHdOut:function(A,C){var B=this.findHeaderCell(C);if(B&&(!Ext.isIE||!A.within(B,true))){this.activeHdRef=null;this.fly(B).removeClass("x-grid3-hd-over");B.style.cursor=""}},isMenuDisabled:function(B,A){return this.cm.isMenuDisabled(B)},hasRows:function(){var A=this.mainBody.dom.firstChild;return A&&A.nodeType==1&&A.className!="x-grid-empty"},isHideableColumn:function(A){return !A.hidden},bind:function(A,B){this.initData(A,B)}});Ext.grid.GridView.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{constructor:function(B,A){this.grid=B;this.view=B.getView();this.marker=this.view.resizeMarker;this.proxy=this.view.resizeProxy;Ext.grid.GridView.SplitDragZone.superclass.constructor.call(this,A,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.scroll=false;this.hw=this.view.splitHandleWidth||5},b4StartDrag:function(C,D){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var A=this.view.mainWrap.getHeight();this.marker.setHeight(A);this.marker.show();this.marker.alignTo(this.view.getHeaderCell(this.cellIndex),"tl-tl",[-2,0]);this.proxy.setHeight(A);var E=this.cm.getColumnWidth(this.cellIndex),B=Math.max(E-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(B,1000);this.setYConstraint(0,0);this.minX=C-B;this.maxX=C+1000;this.startPos=C;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,C,D)},allowHeaderDrag:function(A){return true},handleMouseDown:function(A){var C=this.view.findHeaderCell(A.getTarget());if(C&&this.allowHeaderDrag(A)){var D=this.view.fly(C).getXY(),I=D[0],E=A.getXY(),G=E[0],B=C.offsetWidth,H=false;if((G-I)<=this.hw){H=-1}else{if((I+B)-G<=this.hw){H=0}}if(H!==false){this.cm=this.grid.colModel;var F=this.view.getCellIndex(C);if(H==-1){if(F+H<0){return}while(this.cm.isHidden(F+H)){--H;if(F+H<0){return}}}this.cellIndex=F+H;this.split=C.dom;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.GridView.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}else{if(this.view.columnDrag){this.view.columnDrag.callHandleMouseDown(A)}}}},endDrag:function(A){this.marker.hide();var C=this.view,B=Math.max(this.minX,A.getPageX()),E=B-this.startPos,D=this.dragHeadersDisabled;C.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+E);setTimeout(function(){C.headersDisabled=D},50)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.PivotGridView=Ext.extend(Ext.grid.GridView,{colHeaderCellCls:"grid-hd-group-cell",title:"",getColumnHeaders:function(){return this.grid.topAxis.buildHeaders()},getRowHeaders:function(){return this.grid.leftAxis.buildHeaders()},renderRows:function(P,O){var A=this.grid,R=A.extractData(),S=R.length,D=this.templates,F=A.renderer,B=typeof F=="function",Q=this.getCellCls,M=typeof Q=="function",G=D.cell,K=D.row,N=[],U={},I="width:"+this.getGridInnerWidth()+"px;",H,L,J,E,T;P=P||0;O=Ext.isDefined(O)?O:S-1;for(E=0;E<S;E++){T=R[E];L=T.length;H=[];for(var C=0;C<L;C++){U.id=E+"-"+C;U.css=C===0?"x-grid3-cell-first ":(C==(L-1)?"x-grid3-cell-last ":"");U.attr=U.cellAttr="";U.value=T[C];if(Ext.isEmpty(U.value)){U.value="&#160;"}if(B){U.value=F(U.value)}if(M){U.css+=Q(U.value)+" "}H[H.length]=G.apply(U)}N[N.length]=K.apply({tstyle:I,cols:L,cells:H.join(""),alt:""})}return N.join("")},masterTpl:new Ext.Template('<div class="x-grid3 x-pivotgrid" hidefocus="true">','<div class="x-grid3-viewport">','<div class="x-grid3-header">','<div class="x-grid3-header-title"><span>{title}</span></div>','<div class="x-grid3-header-inner">','<div class="x-grid3-header-offset" style="{ostyle}"></div>',"</div>",'<div class="x-clear"></div>',"</div>",'<div class="x-grid3-scroller">','<div class="x-grid3-row-headers"></div>','<div class="x-grid3-body" style="{bstyle}">{body}</div>','<a href="#" class="x-grid3-focus" tabIndex="-1"></a>',"</div>","</div>",'<div class="x-grid3-resize-marker">&#160;</div>','<div class="x-grid3-resize-proxy">&#160;</div>',"</div>"),initTemplates:function(){Ext.grid.PivotGridView.superclass.initTemplates.apply(this,arguments);var A=this.templates||{};if(!A.gcell){A.gcell=new Ext.XTemplate('<td class="x-grid3-hd x-grid3-gcell x-grid3-td-{id} ux-grid-hd-group-row-{row} '+this.colHeaderCellCls+'" style="{style}">','<div {tooltip} class="x-grid3-hd-inner x-grid3-hd-{id}" unselectable="on" style="{istyle}">',this.grid.enableHdMenu?'<a class="x-grid3-hd-btn" href="#"></a>':"","{value}","</div>","</td>")}this.templates=A;this.hrowRe=new RegExp("ux-grid-hd-group-row-(\\d+)","")},initElements:function(){Ext.grid.PivotGridView.superclass.initElements.apply(this,arguments);this.rowHeadersEl=new Ext.Element(this.scroller.child("div.x-grid3-row-headers"));this.headerTitleEl=new Ext.Element(this.mainHd.child("div.x-grid3-header-title"))},getGridInnerWidth:function(){var A=Ext.grid.PivotGridView.superclass.getGridInnerWidth.apply(this,arguments);return A-this.getTotalRowHeaderWidth()},getTotalRowHeaderWidth:function(){var A=this.getRowHeaders(),B=A.length,D=0,C;for(C=0;C<B;C++){D+=A[C].width}return D},getTotalColumnHeaderHeight:function(){return this.getColumnHeaders().length*21},getCellIndex:function(A){if(A){var B=A.className.match(this.colRe),C;if(B&&(C=B[1])){return parseInt(C.split("-")[1],10)}}return false},renderUI:function(){var B=this.templates,A=this.getGridInnerWidth();return B.master.apply({body:B.body.apply({rows:"&#160;"}),ostyle:"width:"+A+"px",bstyle:"width:"+A+"px"})},onLayout:function(B,A){Ext.grid.PivotGridView.superclass.onLayout.apply(this,arguments);var B=this.getGridInnerWidth();this.resizeColumnHeaders(B);this.resizeAllRows(B)},refresh:function(B){this.fireEvent("beforerefresh",this);this.grid.stopEditing(true);var A=this.renderBody();this.mainBody.update(A).setWidth(this.getGridInnerWidth());if(B===true){this.updateHeaders();this.updateHeaderSortState()}this.processRows(0,true);this.layout();this.applyEmptyText();this.fireEvent("refresh",this)},renderHeaders:Ext.emptyFn,fitColumns:Ext.emptyFn,resizeColumnHeaders:function(B){var A=this.grid.topAxis;if(A.rendered){A.el.setWidth(B)}},resizeRowHeaders:function(){var B=this.getTotalRowHeaderWidth(),A=String.format("margin-left: {0}px;",B);this.rowHeadersEl.setWidth(B);this.mainBody.applyStyles(A);Ext.fly(this.innerHd).applyStyles(A);this.headerTitleEl.setWidth(B);this.headerTitleEl.setHeight(this.getTotalColumnHeaderHeight())},resizeAllRows:function(D){var C=this.getRows(),A=C.length,B;for(B=0;B<A;B++){Ext.fly(C[B]).setWidth(D);Ext.fly(C[B]).child("table").setWidth(D)}},updateHeaders:function(){this.renderGroupRowHeaders();this.renderGroupColumnHeaders()},renderGroupRowHeaders:function(){var A=this.grid.leftAxis;this.resizeRowHeaders();A.rendered=false;A.render(this.rowHeadersEl);this.setTitle(this.title)},setTitle:function(A){this.headerTitleEl.child("span").dom.innerHTML=A},renderGroupColumnHeaders:function(){var A=this.grid.topAxis;A.rendered=false;A.render(this.innerHd.firstChild)},isMenuDisabled:function(B,A){return true}});Ext.grid.PivotAxis=Ext.extend(Ext.Component,{orientation:"horizontal",defaultHeaderWidth:80,paddingWidth:7,setDimensions:function(A){this.dimensions=A},onRender:function(B,A){var C=this.orientation=="horizontal"?this.renderHorizontalRows():this.renderVerticalRows();this.el=Ext.DomHelper.overwrite(B.dom,{tag:"table",cn:C},true)},renderHorizontalRows:function(){var E=this.buildHeaders(),H=E.length,A=[],F,C,G,D,B;for(D=0;D<H;D++){F=[];C=E[D].items;G=C.length;for(B=0;B<G;B++){F.push({tag:"td",html:C[B].header,colspan:C[B].span})}A[D]={tag:"tr",cn:F}}return A},renderVerticalRows:function(){var G=this.buildHeaders(),H=G.length,I=[],B=[],J,A,E,F,D,C;for(D=0;D<H;D++){A=G[D];F=A.width||80;J=A.items.length;for(C=0;C<J;C++){E=A.items[C];I[E.start]=I[E.start]||[];I[E.start].push({tag:"td",html:E.header,rowspan:E.span,width:Ext.isBorderBox?F:F-this.paddingWidth})}}J=I.length;for(D=0;D<J;D++){B[D]={tag:"tr",cn:I[D]}}return B},getTuples:function(){var B=new Ext.data.Store({});B.data=this.store.data.clone();B.fields=this.store.fields;var D=[],A=this.dimensions,E=A.length,F;for(F=0;F<E;F++){D.push({field:A[F].dataIndex,direction:A[F].direction||"ASC"})}B.sort(D);var C=B.data.items,M=[],H=[],I,G,J,L,K;E=C.length;for(F=0;F<E;F++){J=this.getRecordInfo(C[F]);L=J.data;G="";for(K in L){G+=L[K]+"---"}if(M.indexOf(G)==-1){M.push(G);H.push(J)}}B.destroy();return H},getRecordInfo:function(H){var A=this.dimensions,E=A.length,C={},D,G,F;for(F=0;F<E;F++){D=A[F];G=D.dataIndex;C[G]=H.get(G)}var B=function(I){return function(K){for(var J in I){if(K.get(J)!=I[J]){return false}}return true}};return{data:C,matcher:B(C)}},buildHeaders:function(){var G=this.getTuples(),P=G.length,A=this.dimensions,E,N=A.length,M=[],D,B,L,J,H,C,I,K,O,F;for(O=0;O<N;O++){E=A[O];B=[];H=0;C=0;for(F=0;F<P;F++){D=G[F];I=F==(P-1);L=D.data[E.dataIndex];K=J!=undefined&&J!=L;if(O>0&&F>0){K=K||D.data[A[O-1].dataIndex]!=G[F-1].data[A[O-1].dataIndex]}if(K){B.push({header:J,span:H,start:C});C+=H;H=0}if(I){B.push({header:L,span:H+1,start:C});C+=H;H=0}J=L;H++}M.push({items:B,width:E.width||this.defaultHeaderWidth});J=undefined}return M}});Ext.grid.HeaderDragZone=Ext.extend(Ext.dd.DragZone,{maxDragWidth:120,constructor:function(C,B,A){this.grid=C;this.view=C.getView();this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDragZone.superclass.constructor.call(this,B);if(A){this.setHandleElId(Ext.id(B));this.setOuterHandleElId(Ext.id(A))}this.scroll=false},getDragData:function(B){var C=Ext.lib.Event.getTarget(B),A=this.view.findHeaderCell(C);if(A){return{ddel:A.firstChild,header:A}}return false},onInitDrag:function(A){this.dragHeadersDisabled=this.view.headersDisabled;this.view.headersDisabled=true;var B=this.dragData.ddel.cloneNode(true);B.id=Ext.id();B.style.width=Math.min(this.dragData.header.offsetWidth,this.maxDragWidth)+"px";this.proxy.update(B);return true},afterValidDrop:function(){this.completeDrop()},afterInvalidDrop:function(){this.completeDrop()},completeDrop:function(){var A=this.view,B=this.dragHeadersDisabled;setTimeout(function(){A.headersDisabled=B},50)}});Ext.grid.HeaderDropZone=Ext.extend(Ext.dd.DropZone,{proxyOffsets:[-4,-9],fly:Ext.Element.fly,constructor:function(C,B,A){this.grid=C;this.view=C.getView();this.proxyTop=Ext.DomHelper.append(document.body,{cls:"col-move-top",html:"&#160;"},true);this.proxyBottom=Ext.DomHelper.append(document.body,{cls:"col-move-bottom",html:"&#160;"},true);this.proxyTop.hide=this.proxyBottom.hide=function(){this.setLeftTop(-100,-100);this.setStyle("visibility","hidden")};this.ddGroup="gridHeader"+this.grid.getGridEl().id;Ext.grid.HeaderDropZone.superclass.constructor.call(this,C.getGridEl().dom)},getTargetFromEvent:function(B){var C=Ext.lib.Event.getTarget(B),A=this.view.findCellIndex(C);if(A!==false){return this.view.getHeaderCell(A)}},nextVisible:function(A){var B=this.view,C=this.grid.colModel;A=A.nextSibling;while(A){if(!C.isHidden(B.getCellIndex(A))){return A}A=A.nextSibling}return null},prevVisible:function(A){var B=this.view,C=this.grid.colModel;A=A.prevSibling;while(A){if(!C.isHidden(B.getCellIndex(A))){return A}A=A.prevSibling}return null},positionIndicator:function(D,E,A){var G=Ext.lib.Event.getPageX(A),C=Ext.lib.Dom.getRegion(E.firstChild),H,B,F=C.top+this.proxyOffsets[1];if((C.right-G)<=(C.right-C.left)/2){H=C.right+this.view.borderWidth;B="after"}else{H=C.left;B="before"}if(this.grid.colModel.isFixed(this.view.getCellIndex(E))){return false}H+=this.proxyOffsets[0];this.proxyTop.setLeftTop(H,F);this.proxyTop.show();if(!this.bottomOffset){this.bottomOffset=this.view.mainHd.getHeight()}this.proxyBottom.setLeftTop(H,F+this.proxyTop.dom.offsetHeight+this.bottomOffset);this.proxyBottom.show();return B},onNodeEnter:function(A,D,C,B){if(B.header!=A){this.positionIndicator(B.header,A,C)}},onNodeOver:function(A,E,C,B){var D=false;if(B.header!=A){D=this.positionIndicator(B.header,A,C)}if(!D){this.proxyTop.hide();this.proxyBottom.hide()}return D?this.dropAllowed:this.dropNotAllowed},onNodeOut:function(A,D,C,B){this.proxyTop.hide();this.proxyBottom.hide()},onNodeDrop:function(I,C,A,E){var H=E.header;if(H!=I){var G=this.grid.colModel,K=Ext.lib.Event.getPageX(A),F=Ext.lib.Dom.getRegion(I.firstChild),B=(F.right-K)<=((F.right-F.left)/2)?"after":"before",J=this.view.getCellIndex(H),D=this.view.getCellIndex(I);if(B=="after"){D++}if(J<D){D--}G.moveColumn(J,D);return true}return false}});Ext.grid.GridView.ColumnDragZone=Ext.extend(Ext.grid.HeaderDragZone,{constructor:function(B,A){Ext.grid.GridView.ColumnDragZone.superclass.constructor.call(this,B,A,null);this.proxy.el.addClass("x-grid3-col-dd")},handleMouseDown:function(A){},callHandleMouseDown:function(A){Ext.grid.GridView.ColumnDragZone.superclass.handleMouseDown.call(this,A)}});Ext.grid.SplitDragZone=Ext.extend(Ext.dd.DDProxy,{fly:Ext.Element.fly,constructor:function(C,B,A){this.grid=C;this.view=C.getView();this.proxy=this.view.resizeProxy;Ext.grid.SplitDragZone.superclass.constructor.call(this,B,"gridSplitters"+this.grid.getGridEl().id,{dragElId:Ext.id(this.proxy.dom),resizeFrame:false});this.setHandleElId(Ext.id(B));this.setOuterHandleElId(Ext.id(A));this.scroll=false},b4StartDrag:function(B,C){this.view.headersDisabled=true;this.proxy.setHeight(this.view.mainWrap.getHeight());var D=this.cm.getColumnWidth(this.cellIndex);var A=Math.max(D-this.grid.minColumnWidth,0);this.resetConstraints();this.setXConstraint(A,1000);this.setYConstraint(0,0);this.minX=B-A;this.maxX=B+1000;this.startPos=B;Ext.dd.DDProxy.prototype.b4StartDrag.call(this,B,C)},handleMouseDown:function(A){var C=Ext.EventObject.setEvent(A);var B=this.fly(C.getTarget());if(B.hasClass("x-grid-split")){this.cellIndex=this.view.getCellIndex(B.dom);this.split=B.dom;this.cm=this.grid.colModel;if(this.cm.isResizable(this.cellIndex)&&!this.cm.isFixed(this.cellIndex)){Ext.grid.SplitDragZone.superclass.handleMouseDown.apply(this,arguments)}}},endDrag:function(A){this.view.headersDisabled=false;var B=Math.max(this.minX,Ext.lib.Event.getPageX(A));var C=B-this.startPos;this.view.onColumnSplitterMoved(this.cellIndex,this.cm.getColumnWidth(this.cellIndex)+C)},autoOffset:function(){this.setDelta(0,0)}});Ext.grid.GridDragZone=function(B,A){this.view=B.getView();Ext.grid.GridDragZone.superclass.constructor.call(this,this.view.mainBody.dom,A);this.scroll=false;this.grid=B;this.ddel=document.createElement("div");this.ddel.className="x-grid-dd-wrap"};Ext.extend(Ext.grid.GridDragZone,Ext.dd.DragZone,{ddGroup:"GridDD",getDragData:function(A){var C=Ext.lib.Event.getTarget(A);var B=this.view.findRowIndex(C);if(B!==false){var D=this.grid.selModel;if(!D.isSelected(B)||A.hasModifier()){D.handleMouseDown(this.grid,B,A)}return{grid:this.grid,ddel:this.ddel,rowIndex:B,selections:D.getSelections()}}return false},onInitDrag:function(A){var B=this.dragData;this.ddel.innerHTML=this.grid.getDragDropText();this.proxy.update(this.ddel)},afterRepair:function(){this.dragging=false},getRepairXY:function(A,B){return false},onEndDrag:function(B,A){},onValidDrop:function(C,A,B){this.hideProxy()},beforeInvalidDrop:function(A,B){}});Ext.grid.ColumnModel=Ext.extend(Ext.util.Observable,{defaultWidth:100,defaultSortable:false,constructor:function(A){if(A.columns){Ext.apply(this,A);this.setConfig(A.columns,true)}else{this.setConfig(A,true)}this.addEvents("widthchange","headerchange","hiddenchange","columnmoved","configchange");Ext.grid.ColumnModel.superclass.constructor.call(this)},getColumnId:function(A){return this.config[A].id},getColumnAt:function(A){return this.config[A]},setConfig:function(D,A){var B,F,E;if(!A){delete this.totalWidth;for(B=0,E=this.config.length;B<E;B++){F=this.config[B];if(F.setEditor){F.setEditor(null)}}}this.defaults=Ext.apply({width:this.defaultWidth,sortable:this.defaultSortable},this.defaults);this.config=D;this.lookup={};for(B=0,E=D.length;B<E;B++){F=Ext.applyIf(D[B],this.defaults);if(Ext.isEmpty(F.id)){F.id=B}if(!F.isColumn){var C=Ext.grid.Column.types[F.xtype||"gridcolumn"];F=new C(F);D[B]=F}this.lookup[F.id]=F}if(!A){this.fireEvent("configchange",this)}},getColumnById:function(A){return this.lookup[A]},getIndexById:function(C){for(var A=0,B=this.config.length;A<B;A++){if(this.config[A].id==C){return A}}return -1},moveColumn:function(A,C){var B=this.config,D=B[A];B.splice(A,1);B.splice(C,0,D);this.dataMap=null;this.fireEvent("columnmoved",this,A,C)},getColumnCount:function(A){var B=this.config.length,D=0,C;if(A===true){for(C=0;C<B;C++){if(!this.isHidden(C)){D++}}return D}return B},getColumnsBy:function(D,E){var G=this.config,A=G.length,C=[],B,F;for(B=0;B<A;B++){F=G[B];if(D.call(E||this,F,B)===true){C[C.length]=F}}return C},isSortable:function(A){return !!this.config[A].sortable},isMenuDisabled:function(A){return !!this.config[A].menuDisabled},getRenderer:function(A){return this.config[A].renderer||Ext.grid.ColumnModel.defaultRenderer},getRendererScope:function(A){return this.config[A].scope},setRenderer:function(A,B){this.config[A].renderer=B},getColumnWidth:function(A){var B=this.config[A].width;if(typeof B!="number"){B=this.defaultWidth}return B},setColumnWidth:function(A,C,B){this.config[A].width=C;this.totalWidth=null;if(!B){this.fireEvent("widthchange",this,A,C)}},getTotalWidth:function(A){if(!this.totalWidth){this.totalWidth=0;for(var B=0,C=this.config.length;B<C;B++){if(A||!this.isHidden(B)){this.totalWidth+=this.getColumnWidth(B)}}}return this.totalWidth},getColumnHeader:function(A){return this.config[A].header},setColumnHeader:function(A,B){this.config[A].header=B;this.fireEvent("headerchange",this,A,B)},getColumnTooltip:function(A){return this.config[A].tooltip},setColumnTooltip:function(A,B){this.config[A].tooltip=B},getDataIndex:function(A){return this.config[A].dataIndex},setDataIndex:function(B,A){this.config[B].dataIndex=A},findColumnIndex:function(A){var D=this.config;for(var B=0,C=D.length;B<C;B++){if(D[B].dataIndex==A){return B}}return -1},isCellEditable:function(C,B){var D=this.config[C],A=D.editable;return !!(A||(!Ext.isDefined(A)&&D.editor))},getCellEditor:function(B,A){return this.config[B].getCellEditor(A)},setEditable:function(A,B){this.config[A].editable=B},isHidden:function(A){return !!this.config[A].hidden},isFixed:function(A){return !!this.config[A].fixed},isResizable:function(A){return A>=0&&this.config[A].resizable!==false&&this.config[A].fixed!==true},setHidden:function(A,C){var B=this.config[A];if(B.hidden!==C){B.hidden=C;this.totalWidth=null;this.fireEvent("hiddenchange",this,A,C)}},setEditor:function(A,B){this.config[A].setEditor(B)},destroy:function(){var A=this.config.length,B=0;for(;B<A;B++){this.config[B].destroy()}delete this.config;delete this.lookup;this.purgeListeners()},setState:function(A,B){B=Ext.applyIf(B,this.defaults);Ext.apply(this.config[A],B)}});Ext.grid.ColumnModel.defaultRenderer=function(A){if(typeof A=="string"&&A.length<1){return"&#160;"}return A};Ext.grid.AbstractSelectionModel=Ext.extend(Ext.util.Observable,{constructor:function(){this.locked=false;Ext.grid.AbstractSelectionModel.superclass.constructor.call(this)},init:function(A){this.grid=A;if(this.lockOnInit){delete this.lockOnInit;this.locked=false;this.lock()}this.initEvents()},lock:function(){if(!this.locked){this.locked=true;var A=this.grid;if(A){A.getView().on({scope:this,beforerefresh:this.sortUnLock,refresh:this.sortLock})}else{this.lockOnInit=true}}},sortLock:function(){this.locked=true},sortUnLock:function(){this.locked=false},unlock:function(){if(this.locked){this.locked=false;var A=this.grid,B;if(A){B=A.getView();B.un("beforerefresh",this.sortUnLock,this);B.un("refresh",this.sortLock,this)}else{delete this.lockOnInit}}},isLocked:function(){return this.locked},destroy:function(){this.unlock();this.purgeListeners()}});Ext.grid.RowSelectionModel=Ext.extend(Ext.grid.AbstractSelectionModel,{singleSelect:false,constructor:function(A){Ext.apply(this,A);this.selections=new Ext.util.MixedCollection(false,function(B){return B.id});this.last=false;this.lastActive=false;this.addEvents("selectionchange","beforerowselect","rowselect","rowdeselect");Ext.grid.RowSelectionModel.superclass.constructor.call(this)},initEvents:function(){if(!this.grid.enableDragDrop&&!this.grid.enableDrag){this.grid.on("rowmousedown",this.handleMouseDown,this)}this.rowNav=new Ext.KeyNav(this.grid.getGridEl(),{up:this.onKeyPress,down:this.onKeyPress,scope:this});this.grid.getView().on({scope:this,refresh:this.onRefresh,rowupdated:this.onRowUpdated,rowremoved:this.onRemove})},onKeyPress:function(A,B){var F=B=="up",C=F?"selectPrevious":"selectNext",E=F?-1:1,D;if(!A.shiftKey||this.singleSelect){this[C](false)}else{if(this.last!==false&&this.lastActive!==false){D=this.last;this.selectRange(this.last,this.lastActive+E);this.grid.getView().focusRow(this.lastActive);if(D!==false){this.last=D}}else{this.selectFirstRow()}}},onRefresh:function(){var A=this.grid.store,C=this.getSelections(),B=0,E=C.length,F,D;this.silent=true;this.clearSelections(true);for(;B<E;B++){D=C[B];if((F=A.indexOfId(D.id))!=-1){this.selectRow(F,true)}}if(C.length!=this.selections.getCount()){this.fireEvent("selectionchange",this)}this.silent=false},onRemove:function(B,C,A){if(this.selections.remove(A)!==false){this.fireEvent("selectionchange",this)}},onRowUpdated:function(B,C,A){if(this.isSelected(A)){B.onRowSelect(C)}},selectRecords:function(C,E){if(!E){this.clearSelections()}var A=this.grid.store,B=0,D=C.length;for(;B<D;B++){this.selectRow(A.indexOf(C[B]),true)}},getCount:function(){return this.selections.length},selectFirstRow:function(){this.selectRow(0)},selectLastRow:function(A){this.selectRow(this.grid.store.getCount()-1,A)},selectNext:function(A){if(this.hasNext()){this.selectRow(this.last+1,A);this.grid.getView().focusRow(this.last);return true}return false},selectPrevious:function(A){if(this.hasPrevious()){this.selectRow(this.last-1,A);this.grid.getView().focusRow(this.last);return true}return false},hasNext:function(){return this.last!==false&&(this.last+1)<this.grid.store.getCount()},hasPrevious:function(){return !!this.last},getSelections:function(){return[].concat(this.selections.items)},getSelected:function(){return this.selections.itemAt(0)},each:function(C,E){var B=this.getSelections(),A=0,D=B.length;for(;A<D;A++){if(C.call(E||this,B[A],A)===false){return false}}return true},clearSelections:function(C){if(this.isLocked()){return}if(C!==true){var A=this.grid.store,B=this.selections;B.each(function(D){this.deselectRow(A.indexOfId(D.id))},this);B.clear()}else{this.selections.clear()}this.last=false},selectAll:function(){if(this.isLocked()){return}this.selections.clear();for(var A=0,B=this.grid.store.getCount();A<B;A++){this.selectRow(A,true)}},hasSelection:function(){return this.selections.length>0},isSelected:function(B){var A=Ext.isNumber(B)?this.grid.store.getAt(B):B;return(A&&this.selections.key(A.id)?true:false)},isIdSelected:function(A){return(this.selections.key(A)?true:false)},handleMouseDown:function(A,D,C){if(C.button!==0||this.isLocked()){return}var E=this.grid.getView();if(C.shiftKey&&!this.singleSelect&&this.last!==false){var F=this.last;this.selectRange(F,D,C.ctrlKey);this.last=F;E.focusRow(D)}else{var B=this.isSelected(D);if(C.ctrlKey&&B){this.deselectRow(D)}else{if(!B||this.getCount()>1){this.selectRow(D,C.ctrlKey||C.shiftKey);E.focusRow(D)}}}},selectRows:function(B,D){if(!D){this.clearSelections()}for(var A=0,C=B.length;A<C;A++){this.selectRow(B[A],true)}},selectRange:function(C,B,D){var A;if(this.isLocked()){return}if(!D){this.clearSelections()}if(C<=B){for(A=C;A<=B;A++){this.selectRow(A,true)}}else{for(A=C;A>=B;A--){this.selectRow(A,true)}}},deselectRange:function(C,B,D){if(this.isLocked()){return}for(var A=C;A<=B;A++){this.deselectRow(A,D)}},selectRow:function(B,D,C){if(this.isLocked()||(B<0||B>=this.grid.store.getCount())||(D&&this.isSelected(B))){return}var A=this.grid.store.getAt(B);if(A&&this.fireEvent("beforerowselect",this,B,D,A)!==false){if(!D||this.singleSelect){this.clearSelections()}this.selections.add(A);this.last=this.lastActive=B;if(!C){this.grid.getView().onRowSelect(B)}if(!this.silent){this.fireEvent("rowselect",this,B,A);this.fireEvent("selectionchange",this)}}},deselectRow:function(B,C){if(this.isLocked()){return}if(this.last==B){this.last=false}if(this.lastActive==B){this.lastActive=false}var A=this.grid.store.getAt(B);if(A){this.selections.remove(A);if(!C){this.grid.getView().onRowDeselect(B)}this.fireEvent("rowdeselect",this,B,A);this.fireEvent("selectionchange",this)}},acceptsNav:function(B,A,C){return !C.isHidden(A)&&C.isCellEditable(A,B)},onEditorKey:function(H,A){var F=A.getKey(),B,K=this.grid,G=K.lastEdit,C=K.activeEditor,E=A.shiftKey,J,G,D,I;if(F==A.TAB){A.stopEvent();C.completeEdit();if(E){B=K.walkCells(C.row,C.col-1,-1,this.acceptsNav,this)}else{B=K.walkCells(C.row,C.col+1,1,this.acceptsNav,this)}}else{if(F==A.ENTER){if(this.moveEditorOnEnter!==false){if(E){B=K.walkCells(G.row-1,G.col,-1,this.acceptsNav,this)}else{B=K.walkCells(G.row+1,G.col,1,this.acceptsNav,this)}}}}if(B){D=B[0];I=B[1];this.onEditorSelect(D,G.row);if(K.isEditor&&K.editing){J=K.activeEditor;if(J&&J.field.triggerBlur){J.field.triggerBlur()}}K.startEditing(D,I)}},onEditorSelect:function(A,B){if(B!=A){this.selectRow(A)}},destroy:function(){Ext.destroy(this.rowNav);this.rowNav=null;Ext.grid.RowSelectionModel.superclass.destroy.call(this)}});Ext.grid.Column=Ext.extend(Ext.util.Observable,{isColumn:true,constructor:function(B){Ext.apply(this,B);if(Ext.isString(this.renderer)){this.renderer=Ext.util.Format[this.renderer]}else{if(Ext.isObject(this.renderer)){this.scope=this.renderer.scope;this.renderer=this.renderer.fn}}if(!this.scope){this.scope=this}var A=this.editor;delete this.editor;this.setEditor(A);this.addEvents("click","contextmenu","dblclick","mousedown");Ext.grid.Column.superclass.constructor.call(this)},processEvent:function(C,A,E,B,D){return this.fireEvent(C,this,E,B,A)},destroy:function(){if(this.setEditor){this.setEditor(null)}this.purgeListeners()},renderer:function(A){return A},getEditor:function(A){return this.editable!==false?this.editor:null},setEditor:function(B){var A=this.editor;if(A){if(A.gridEditor){A.gridEditor.destroy();delete A.gridEditor}else{A.destroy()}}this.editor=null;if(B){if(!B.isXType){B=Ext.create(B,"textfield")}this.editor=B}},getCellEditor:function(B){var A=this.getEditor(B);if(A){if(!A.startEdit){if(!A.gridEditor){A.gridEditor=new Ext.grid.GridEditor(A)}A=A.gridEditor}}return A}});Ext.grid.BooleanColumn=Ext.extend(Ext.grid.Column,{trueText:"true",falseText:"false",undefinedText:"&#160;",constructor:function(A){Ext.grid.BooleanColumn.superclass.constructor.call(this,A);var B=this.trueText,D=this.falseText,C=this.undefinedText;this.renderer=function(E){if(E===undefined){return C}if(!E||E==="false"){return D}return B}}});Ext.grid.NumberColumn=Ext.extend(Ext.grid.Column,{format:"0,000.00",constructor:function(A){Ext.grid.NumberColumn.superclass.constructor.call(this,A);this.renderer=Ext.util.Format.numberRenderer(this.format)}});Ext.grid.DateColumn=Ext.extend(Ext.grid.Column,{format:"m/d/Y",constructor:function(A){Ext.grid.DateColumn.superclass.constructor.call(this,A);this.renderer=Ext.util.Format.dateRenderer(this.format)}});Ext.grid.TemplateColumn=Ext.extend(Ext.grid.Column,{constructor:function(B){Ext.grid.TemplateColumn.superclass.constructor.call(this,B);var A=(!Ext.isPrimitive(this.tpl)&&this.tpl.compile)?this.tpl:new Ext.XTemplate(this.tpl);this.renderer=function(E,D,C){return A.apply(C.data)};this.tpl=A}});Ext.grid.ActionColumn=Ext.extend(Ext.grid.Column,{header:"&#160;",actionIdRe:/x-action-col-(\d+)/,altText:"",constructor:function(F){var E=this,C=F.items||(E.items=[E]),D=C.length,A,B;Ext.grid.ActionColumn.superclass.constructor.call(E,F);E.renderer=function(G,H){G=Ext.isFunction(F.renderer)?F.renderer.apply(this,arguments)||"":"";H.css+=" x-action-col-cell";for(A=0;A<D;A++){B=C[A];G+='<img alt="'+(B.altText||E.altText)+'" src="'+(B.icon||Ext.BLANK_IMAGE_URL)+'" class="x-action-col-icon x-action-col-'+String(A)+" "+(B.iconCls||"")+" "+(Ext.isFunction(B.getClass)?B.getClass.apply(B.scope||this.scope||this,arguments):"")+'"'+((B.tooltip)?' ext:qtip="'+B.tooltip+'"':"")+" />"}return G}},destroy:function(){delete this.items;delete this.renderer;return Ext.grid.ActionColumn.superclass.destroy.apply(this,arguments)},processEvent:function(C,A,G,B,D){var F=A.getTarget().className.match(this.actionIdRe),H,E;if(F&&(H=this.items[parseInt(F[1],10)])){if(C=="click"){(E=H.handler||this.handler)&&E.call(H.scope||this.scope||this,G,B,D,H,A)}else{if((C=="mousedown")&&(H.stopSelection!==false)){return false}}}return Ext.grid.ActionColumn.superclass.processEvent.apply(this,arguments)}});Ext.grid.Column.types={gridcolumn:Ext.grid.Column,booleancolumn:Ext.grid.BooleanColumn,numbercolumn:Ext.grid.NumberColumn,datecolumn:Ext.grid.DateColumn,templatecolumn:Ext.grid.TemplateColumn,actioncolumn:Ext.grid.ActionColumn};Ext.grid.RowNumberer=Ext.extend(Object,{header:"",width:23,sortable:false,constructor:function(A){Ext.apply(this,A);if(this.rowspan){this.renderer=this.renderer.createDelegate(this)}},fixed:true,hideable:false,menuDisabled:true,dataIndex:"",id:"numberer",rowspan:undefined,renderer:function(C,A,D,B){if(this.rowspan){A.cellAttr='rowspan="'+this.rowspan+'"'}return B+1}});Ext.grid.CheckboxSelectionModel=Ext.extend(Ext.grid.RowSelectionModel,{header:'<div class="x-grid3-hd-checker">&#160;</div>',width:20,sortable:false,menuDisabled:true,fixed:true,hideable:false,dataIndex:"",id:"checker",isColumn:true,constructor:function(){Ext.grid.CheckboxSelectionModel.superclass.constructor.apply(this,arguments);if(this.checkOnly){this.handleMouseDown=Ext.emptyFn}},initEvents:function(){Ext.grid.CheckboxSelectionModel.superclass.initEvents.call(this);this.grid.on("render",function(){Ext.fly(this.grid.getView().innerHd).on("mousedown",this.onHdMouseDown,this)},this)},processEvent:function(C,A,E,B,D){if(C=="mousedown"){this.onMouseDown(A,A.getTarget());return false}else{return Ext.grid.Column.prototype.processEvent.apply(this,arguments)}},onMouseDown:function(A,D){if(A.button===0&&D.className=="x-grid3-row-checker"){A.stopEvent();var C=A.getTarget(".x-grid3-row");if(C){var B=C.rowIndex;if(this.isSelected(B)){this.deselectRow(B)}else{this.selectRow(B,true);this.grid.getView().focusRow(B)}}}},onHdMouseDown:function(A,C){if(C.className=="x-grid3-hd-checker"){A.stopEvent();var D=Ext.fly(C.parentNode);var B=D.hasClass("x-grid3-hd-checker-on");if(B){D.removeClass("x-grid3-hd-checker-on");this.clearSelections()}else{D.addClass("x-grid3-hd-checker-on");this.selectAll()}}},renderer:function(B,A,C){return'<div class="x-grid3-row-checker">&#160;</div>'},onEditorSelect:function(A,B){if(B!=A&&!this.checkOnly){this.selectRow(A)}}});